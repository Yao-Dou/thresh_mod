import{z as Qo,A as Vm,_ as qm,B as TS,o as yt,c as xt,a as H,t as Tt,F as qr,r as yi,k as pe,f as sn,b as ne,d as ke,j as Tc,C as Df,L as L_,D as Xl,E as dr,G as IS,H as RS,I as DS,J as Jl,K as OS,M as PS,s as MS,h as LS}from"./index-37fe935c.js";var tc={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */tc.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",d=500,g="__lodash_placeholder__",v=1,S=2,E=4,q=1,Q=2,tt=1,ut=2,nt=4,gt=8,Pt=16,Vt=32,pt=64,Kt=128,ye=256,He=512,oe=30,Pe="...",_r=800,gr=16,bt=1,Te=2,re=3,ln=1/0,ir=9007199254740991,Ga=17976931348623157e292,Ds=0/0,mr=4294967295,Wa=mr-1,pu=mr>>>1,Si=[["ary",Kt],["bind",tt],["bindKey",ut],["curry",gt],["curryRight",Pt],["flip",He],["partial",Vt],["partialRight",pt],["rearg",ye]],_n="[object Arguments]",ei="[object Array]",_u="[object AsyncFunction]",ki="[object Boolean]",Nt="[object Date]",Os="[object DOMException]",gn="[object Error]",Dr="[object Function]",Xi="[object GeneratorFunction]",ge="[object Map]",Ci="[object Number]",Dn="[object Null]",cn="[object Object]",mn="[object Promise]",Je="[object Proxy]",Ji="[object RegExp]",sr="[object Set]",ni="[object String]",ts="[object Symbol]",ja="[object Undefined]",ri="[object WeakMap]",un="[object WeakSet]",es="[object ArrayBuffer]",Le="[object DataView]",Do="[object Float32Array]",Or="[object Float64Array]",nn="[object Int8Array]",ii="[object Int16Array]",si="[object Int32Array]",Ti="[object Uint8Array]",ns="[object Uint8ClampedArray]",oi="[object Uint16Array]",Bn="[object Uint32Array]",rs=/\b__p \+= '';/g,Ps=/\b(__p \+=) '' \+/g,Ii=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ri=/&(?:amp|lt|gt|quot|#39);/g,Ms=/[&<>"']/g,Oo=RegExp(Ri.source),Ka=RegExp(Ms.source),Ls=/<%-([\s\S]+?)%>/g,Ye=/<%([\s\S]+?)%>/g,Ge=/<%=([\s\S]+?)%>/g,Di=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$e=/^\w*$/,Ya=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$s=/[\\^$.*+?()[\]{}|]/g,Qa=RegExp($s.source),Qe=/^\s+/,wt=/\s/,Za=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Xa=/\{\n\/\* \[wrapped with (.+)\] \*/,gu=/,? & /,Oi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Un=/[()=,{}\[\]\/\s]/,Ns=/\\(\\)?/g,Fs=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Po=/\w*$/,Vs=/^[-+]0x[0-9a-f]+$/i,qs=/^0b[01]+$/i,zn=/^\[object .+?Constructor\]$/,h=/^0o[0-7]+$/i,_=/^(?:0|[1-9]\d*)$/,m=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,y=/($^)/,x=/['\n\r\u2028\u2029\\]/g,k="\\ud800-\\udfff",G="\\u0300-\\u036f",N="\\ufe20-\\ufe2f",z="\\u20d0-\\u20ff",C=G+N+z,P="\\u2700-\\u27bf",X="a-z\\xdf-\\xf6\\xf8-\\xff",R="\\xac\\xb1\\xd7\\xf7",D="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",O="\\u2000-\\u206f",B=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Z="A-Z\\xc0-\\xd6\\xd8-\\xde",rt="\\ufe0e\\ufe0f",lt=R+D+O+B,st="['’]",Y="["+k+"]",L="["+lt+"]",V="["+C+"]",F="\\d+",vt="["+P+"]",Et="["+X+"]",_t="[^"+k+lt+F+P+X+Z+"]",T="\\ud83c[\\udffb-\\udfff]",et="(?:"+V+"|"+T+")",ct="[^"+k+"]",It="(?:\\ud83c[\\udde6-\\uddff]){2}",Dt="[\\ud800-\\udbff][\\udc00-\\udfff]",mt="["+Z+"]",K="\\u200d",Bt="(?:"+Et+"|"+_t+")",we="(?:"+mt+"|"+_t+")",Mt="(?:"+st+"(?:d|ll|m|re|s|t|ve))?",jt="(?:"+st+"(?:D|LL|M|RE|S|T|VE))?",Ie=et+"?",Re="["+rt+"]?",xe="(?:"+K+"(?:"+[ct,It,Dt].join("|")+")"+Re+Ie+")*",hn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pi="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Yt=Re+Ie+xe,Ot="(?:"+[vt,It,Dt].join("|")+")"+Yt,kt="(?:"+[ct+V+"?",V,It,Dt,Y].join("|")+")",Qt=RegExp(st,"g"),Ct=RegExp(V,"g"),te=RegExp(T+"(?="+T+")|"+kt+Yt,"g"),qe=RegExp([mt+"?"+Et+"+"+Mt+"(?="+[L,mt,"$"].join("|")+")",we+"+"+jt+"(?="+[L,mt+Bt,"$"].join("|")+")",mt+"?"+Bt+"+"+Mt,mt+"+"+jt,Pi,hn,F,Ot].join("|"),"g"),Ae=RegExp("["+K+k+C+rt+"]"),Hn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Pr=-1,Ut={};Ut[Do]=Ut[Or]=Ut[nn]=Ut[ii]=Ut[si]=Ut[Ti]=Ut[ns]=Ut[oi]=Ut[Bn]=!0,Ut[_n]=Ut[ei]=Ut[es]=Ut[ki]=Ut[Le]=Ut[Nt]=Ut[gn]=Ut[Dr]=Ut[ge]=Ut[Ci]=Ut[cn]=Ut[Ji]=Ut[sr]=Ut[ni]=Ut[ri]=!1;var j={};j[_n]=j[ei]=j[es]=j[Le]=j[ki]=j[Nt]=j[Do]=j[Or]=j[nn]=j[ii]=j[si]=j[ge]=j[Ci]=j[cn]=j[Ji]=j[sr]=j[ni]=j[ts]=j[Ti]=j[ns]=j[oi]=j[Bn]=!0,j[gn]=j[Dr]=j[ri]=!1;var zt={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},De={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},me={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ne={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},yr=parseFloat,Mo=parseInt,Bs=typeof Qo=="object"&&Qo&&Qo.Object===Object&&Qo,ai=typeof self=="object"&&self&&self.Object===Object&&self,We=Bs||ai||Function("return this")(),mu=t&&!t.nodeType&&t,is=mu&&!0&&e&&!e.nodeType&&e,Id=is&&is.exports===mu,yu=Id&&Bs.process,vr=function(){try{var U=is&&is.require&&is.require("util").types;return U||yu&&yu.binding&&yu.binding("util")}catch{}}(),Rd=vr&&vr.isArrayBuffer,Dd=vr&&vr.isDate,Od=vr&&vr.isMap,Pd=vr&&vr.isRegExp,Md=vr&&vr.isSet,Ld=vr&&vr.isTypedArray;function or(U,it,J){switch(J.length){case 0:return U.call(it);case 1:return U.call(it,J[0]);case 2:return U.call(it,J[0],J[1]);case 3:return U.call(it,J[0],J[1],J[2])}return U.apply(it,J)}function Zv(U,it,J,Rt){for(var Jt=-1,ve=U==null?0:U.length;++Jt<ve;){var fn=U[Jt];it(Rt,fn,J(fn),U)}return Rt}function br(U,it){for(var J=-1,Rt=U==null?0:U.length;++J<Rt&&it(U[J],J,U)!==!1;);return U}function Xv(U,it){for(var J=U==null?0:U.length;J--&&it(U[J],J,U)!==!1;);return U}function $d(U,it){for(var J=-1,Rt=U==null?0:U.length;++J<Rt;)if(!it(U[J],J,U))return!1;return!0}function Mi(U,it){for(var J=-1,Rt=U==null?0:U.length,Jt=0,ve=[];++J<Rt;){var fn=U[J];it(fn,J,U)&&(ve[Jt++]=fn)}return ve}function Ja(U,it){var J=U==null?0:U.length;return!!J&&Us(U,it,0)>-1}function vu(U,it,J){for(var Rt=-1,Jt=U==null?0:U.length;++Rt<Jt;)if(J(it,U[Rt]))return!0;return!1}function Be(U,it){for(var J=-1,Rt=U==null?0:U.length,Jt=Array(Rt);++J<Rt;)Jt[J]=it(U[J],J,U);return Jt}function Li(U,it){for(var J=-1,Rt=it.length,Jt=U.length;++J<Rt;)U[Jt+J]=it[J];return U}function bu(U,it,J,Rt){var Jt=-1,ve=U==null?0:U.length;for(Rt&&ve&&(J=U[++Jt]);++Jt<ve;)J=it(J,U[Jt],Jt,U);return J}function Jv(U,it,J,Rt){var Jt=U==null?0:U.length;for(Rt&&Jt&&(J=U[--Jt]);Jt--;)J=it(J,U[Jt],Jt,U);return J}function wu(U,it){for(var J=-1,Rt=U==null?0:U.length;++J<Rt;)if(it(U[J],J,U))return!0;return!1}var t1=xu("length");function e1(U){return U.split("")}function n1(U){return U.match(Oi)||[]}function Nd(U,it,J){var Rt;return J(U,function(Jt,ve,fn){if(it(Jt,ve,fn))return Rt=ve,!1}),Rt}function tl(U,it,J,Rt){for(var Jt=U.length,ve=J+(Rt?1:-1);Rt?ve--:++ve<Jt;)if(it(U[ve],ve,U))return ve;return-1}function Us(U,it,J){return it===it?p1(U,it,J):tl(U,Fd,J)}function r1(U,it,J,Rt){for(var Jt=J-1,ve=U.length;++Jt<ve;)if(Rt(U[Jt],it))return Jt;return-1}function Fd(U){return U!==U}function Vd(U,it){var J=U==null?0:U.length;return J?Au(U,it)/J:Ds}function xu(U){return function(it){return it==null?n:it[U]}}function Eu(U){return function(it){return U==null?n:U[it]}}function qd(U,it,J,Rt,Jt){return Jt(U,function(ve,fn,Oe){J=Rt?(Rt=!1,ve):it(J,ve,fn,Oe)}),J}function i1(U,it){var J=U.length;for(U.sort(it);J--;)U[J]=U[J].value;return U}function Au(U,it){for(var J,Rt=-1,Jt=U.length;++Rt<Jt;){var ve=it(U[Rt]);ve!==n&&(J=J===n?ve:J+ve)}return J}function Su(U,it){for(var J=-1,Rt=Array(U);++J<U;)Rt[J]=it(J);return Rt}function s1(U,it){return Be(it,function(J){return[J,U[J]]})}function Bd(U){return U&&U.slice(0,Gd(U)+1).replace(Qe,"")}function ar(U){return function(it){return U(it)}}function ku(U,it){return Be(it,function(J){return U[J]})}function Lo(U,it){return U.has(it)}function Ud(U,it){for(var J=-1,Rt=U.length;++J<Rt&&Us(it,U[J],0)>-1;);return J}function zd(U,it){for(var J=U.length;J--&&Us(it,U[J],0)>-1;);return J}function o1(U,it){for(var J=U.length,Rt=0;J--;)U[J]===it&&++Rt;return Rt}var a1=Eu(zt),l1=Eu(De);function c1(U){return"\\"+Ne[U]}function u1(U,it){return U==null?n:U[it]}function zs(U){return Ae.test(U)}function h1(U){return Hn.test(U)}function f1(U){for(var it,J=[];!(it=U.next()).done;)J.push(it.value);return J}function Cu(U){var it=-1,J=Array(U.size);return U.forEach(function(Rt,Jt){J[++it]=[Jt,Rt]}),J}function Hd(U,it){return function(J){return U(it(J))}}function $i(U,it){for(var J=-1,Rt=U.length,Jt=0,ve=[];++J<Rt;){var fn=U[J];(fn===it||fn===g)&&(U[J]=g,ve[Jt++]=J)}return ve}function el(U){var it=-1,J=Array(U.size);return U.forEach(function(Rt){J[++it]=Rt}),J}function d1(U){var it=-1,J=Array(U.size);return U.forEach(function(Rt){J[++it]=[Rt,Rt]}),J}function p1(U,it,J){for(var Rt=J-1,Jt=U.length;++Rt<Jt;)if(U[Rt]===it)return Rt;return-1}function _1(U,it,J){for(var Rt=J+1;Rt--;)if(U[Rt]===it)return Rt;return Rt}function Hs(U){return zs(U)?m1(U):t1(U)}function Mr(U){return zs(U)?y1(U):e1(U)}function Gd(U){for(var it=U.length;it--&&wt.test(U.charAt(it)););return it}var g1=Eu(me);function m1(U){for(var it=te.lastIndex=0;te.test(U);)++it;return it}function y1(U){return U.match(te)||[]}function v1(U){return U.match(qe)||[]}var b1=function U(it){it=it==null?We:Gs.defaults(We.Object(),it,Gs.pick(We,Gn));var J=it.Array,Rt=it.Date,Jt=it.Error,ve=it.Function,fn=it.Math,Oe=it.Object,Tu=it.RegExp,w1=it.String,wr=it.TypeError,nl=J.prototype,x1=ve.prototype,Ws=Oe.prototype,rl=it["__core-js_shared__"],il=x1.toString,Se=Ws.hasOwnProperty,E1=0,Wd=function(){var s=/[^.]+$/.exec(rl&&rl.keys&&rl.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),sl=Ws.toString,A1=il.call(Oe),S1=We._,k1=Tu("^"+il.call(Se).replace($s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ol=Id?it.Buffer:n,Ni=it.Symbol,al=it.Uint8Array,jd=ol?ol.allocUnsafe:n,ll=Hd(Oe.getPrototypeOf,Oe),Kd=Oe.create,Yd=Ws.propertyIsEnumerable,cl=nl.splice,Qd=Ni?Ni.isConcatSpreadable:n,$o=Ni?Ni.iterator:n,ss=Ni?Ni.toStringTag:n,ul=function(){try{var s=us(Oe,"defineProperty");return s({},"",{}),s}catch{}}(),C1=it.clearTimeout!==We.clearTimeout&&it.clearTimeout,T1=Rt&&Rt.now!==We.Date.now&&Rt.now,I1=it.setTimeout!==We.setTimeout&&it.setTimeout,hl=fn.ceil,fl=fn.floor,Iu=Oe.getOwnPropertySymbols,R1=ol?ol.isBuffer:n,Zd=it.isFinite,D1=nl.join,O1=Hd(Oe.keys,Oe),dn=fn.max,On=fn.min,P1=Rt.now,M1=it.parseInt,Xd=fn.random,L1=nl.reverse,Ru=us(it,"DataView"),No=us(it,"Map"),Du=us(it,"Promise"),js=us(it,"Set"),Fo=us(it,"WeakMap"),Vo=us(Oe,"create"),dl=Fo&&new Fo,Ks={},$1=hs(Ru),N1=hs(No),F1=hs(Du),V1=hs(js),q1=hs(Fo),pl=Ni?Ni.prototype:n,qo=pl?pl.valueOf:n,Jd=pl?pl.toString:n;function w(s){if(Ze(s)&&!ee(s)&&!(s instanceof ue)){if(s instanceof xr)return s;if(Se.call(s,"__wrapped__"))return t_(s)}return new xr(s)}var Ys=function(){function s(){}return function(a){if(!je(a))return{};if(Kd)return Kd(a);s.prototype=a;var u=new s;return s.prototype=n,u}}();function _l(){}function xr(s,a){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=n}w.templateSettings={escape:Ls,evaluate:Ye,interpolate:Ge,variable:"",imports:{_:w}},w.prototype=_l.prototype,w.prototype.constructor=w,xr.prototype=Ys(_l.prototype),xr.prototype.constructor=xr;function ue(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=mr,this.__views__=[]}function B1(){var s=new ue(this.__wrapped__);return s.__actions__=Xn(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=Xn(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=Xn(this.__views__),s}function U1(){if(this.__filtered__){var s=new ue(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function z1(){var s=this.__wrapped__.value(),a=this.__dir__,u=ee(s),p=a<0,b=u?s.length:0,A=ew(0,b,this.__views__),I=A.start,M=A.end,W=M-I,ot=p?M:I-1,at=this.__iteratees__,ht=at.length,At=0,Lt=On(W,this.__takeCount__);if(!u||!p&&b==W&&Lt==W)return Ep(s,this.__actions__);var Gt=[];t:for(;W--&&At<Lt;){ot+=a;for(var se=-1,Wt=s[ot];++se<ht;){var ce=at[se],he=ce.iteratee,ur=ce.type,Kn=he(Wt);if(ur==Te)Wt=Kn;else if(!Kn){if(ur==bt)continue t;break t}}Gt[At++]=Wt}return Gt}ue.prototype=Ys(_l.prototype),ue.prototype.constructor=ue;function os(s){var a=-1,u=s==null?0:s.length;for(this.clear();++a<u;){var p=s[a];this.set(p[0],p[1])}}function H1(){this.__data__=Vo?Vo(null):{},this.size=0}function G1(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}function W1(s){var a=this.__data__;if(Vo){var u=a[s];return u===f?n:u}return Se.call(a,s)?a[s]:n}function j1(s){var a=this.__data__;return Vo?a[s]!==n:Se.call(a,s)}function K1(s,a){var u=this.__data__;return this.size+=this.has(s)?0:1,u[s]=Vo&&a===n?f:a,this}os.prototype.clear=H1,os.prototype.delete=G1,os.prototype.get=W1,os.prototype.has=j1,os.prototype.set=K1;function li(s){var a=-1,u=s==null?0:s.length;for(this.clear();++a<u;){var p=s[a];this.set(p[0],p[1])}}function Y1(){this.__data__=[],this.size=0}function Q1(s){var a=this.__data__,u=gl(a,s);if(u<0)return!1;var p=a.length-1;return u==p?a.pop():cl.call(a,u,1),--this.size,!0}function Z1(s){var a=this.__data__,u=gl(a,s);return u<0?n:a[u][1]}function X1(s){return gl(this.__data__,s)>-1}function J1(s,a){var u=this.__data__,p=gl(u,s);return p<0?(++this.size,u.push([s,a])):u[p][1]=a,this}li.prototype.clear=Y1,li.prototype.delete=Q1,li.prototype.get=Z1,li.prototype.has=X1,li.prototype.set=J1;function ci(s){var a=-1,u=s==null?0:s.length;for(this.clear();++a<u;){var p=s[a];this.set(p[0],p[1])}}function tb(){this.size=0,this.__data__={hash:new os,map:new(No||li),string:new os}}function eb(s){var a=Tl(this,s).delete(s);return this.size-=a?1:0,a}function nb(s){return Tl(this,s).get(s)}function rb(s){return Tl(this,s).has(s)}function ib(s,a){var u=Tl(this,s),p=u.size;return u.set(s,a),this.size+=u.size==p?0:1,this}ci.prototype.clear=tb,ci.prototype.delete=eb,ci.prototype.get=nb,ci.prototype.has=rb,ci.prototype.set=ib;function as(s){var a=-1,u=s==null?0:s.length;for(this.__data__=new ci;++a<u;)this.add(s[a])}function sb(s){return this.__data__.set(s,f),this}function ob(s){return this.__data__.has(s)}as.prototype.add=as.prototype.push=sb,as.prototype.has=ob;function Lr(s){var a=this.__data__=new li(s);this.size=a.size}function ab(){this.__data__=new li,this.size=0}function lb(s){var a=this.__data__,u=a.delete(s);return this.size=a.size,u}function cb(s){return this.__data__.get(s)}function ub(s){return this.__data__.has(s)}function hb(s,a){var u=this.__data__;if(u instanceof li){var p=u.__data__;if(!No||p.length<i-1)return p.push([s,a]),this.size=++u.size,this;u=this.__data__=new ci(p)}return u.set(s,a),this.size=u.size,this}Lr.prototype.clear=ab,Lr.prototype.delete=lb,Lr.prototype.get=cb,Lr.prototype.has=ub,Lr.prototype.set=hb;function tp(s,a){var u=ee(s),p=!u&&fs(s),b=!u&&!p&&Ui(s),A=!u&&!p&&!b&&Js(s),I=u||p||b||A,M=I?Su(s.length,w1):[],W=M.length;for(var ot in s)(a||Se.call(s,ot))&&!(I&&(ot=="length"||b&&(ot=="offset"||ot=="parent")||A&&(ot=="buffer"||ot=="byteLength"||ot=="byteOffset")||di(ot,W)))&&M.push(ot);return M}function ep(s){var a=s.length;return a?s[Uu(0,a-1)]:n}function fb(s,a){return Il(Xn(s),ls(a,0,s.length))}function db(s){return Il(Xn(s))}function Ou(s,a,u){(u!==n&&!$r(s[a],u)||u===n&&!(a in s))&&ui(s,a,u)}function Bo(s,a,u){var p=s[a];(!(Se.call(s,a)&&$r(p,u))||u===n&&!(a in s))&&ui(s,a,u)}function gl(s,a){for(var u=s.length;u--;)if($r(s[u][0],a))return u;return-1}function pb(s,a,u,p){return Fi(s,function(b,A,I){a(p,b,u(b),I)}),p}function np(s,a){return s&&Gr(a,yn(a),s)}function _b(s,a){return s&&Gr(a,tr(a),s)}function ui(s,a,u){a=="__proto__"&&ul?ul(s,a,{configurable:!0,enumerable:!0,value:u,writable:!0}):s[a]=u}function Pu(s,a){for(var u=-1,p=a.length,b=J(p),A=s==null;++u<p;)b[u]=A?n:dh(s,a[u]);return b}function ls(s,a,u){return s===s&&(u!==n&&(s=s<=u?s:u),a!==n&&(s=s>=a?s:a)),s}function Er(s,a,u,p,b,A){var I,M=a&v,W=a&S,ot=a&E;if(u&&(I=b?u(s,p,b,A):u(s)),I!==n)return I;if(!je(s))return s;var at=ee(s);if(at){if(I=rw(s),!M)return Xn(s,I)}else{var ht=Pn(s),At=ht==Dr||ht==Xi;if(Ui(s))return kp(s,M);if(ht==cn||ht==_n||At&&!b){if(I=W||At?{}:Gp(s),!M)return W?Wb(s,_b(I,s)):Gb(s,np(I,s))}else{if(!j[ht])return b?s:{};I=iw(s,ht,M)}}A||(A=new Lr);var Lt=A.get(s);if(Lt)return Lt;A.set(s,I),b_(s)?s.forEach(function(Wt){I.add(Er(Wt,a,u,Wt,s,A))}):y_(s)&&s.forEach(function(Wt,ce){I.set(ce,Er(Wt,a,u,ce,s,A))});var Gt=ot?W?Ju:Xu:W?tr:yn,se=at?n:Gt(s);return br(se||s,function(Wt,ce){se&&(ce=Wt,Wt=s[ce]),Bo(I,ce,Er(Wt,a,u,ce,s,A))}),I}function gb(s){var a=yn(s);return function(u){return rp(u,s,a)}}function rp(s,a,u){var p=u.length;if(s==null)return!p;for(s=Oe(s);p--;){var b=u[p],A=a[b],I=s[b];if(I===n&&!(b in s)||!A(I))return!1}return!0}function ip(s,a,u){if(typeof s!="function")throw new wr(l);return Ko(function(){s.apply(n,u)},a)}function Uo(s,a,u,p){var b=-1,A=Ja,I=!0,M=s.length,W=[],ot=a.length;if(!M)return W;u&&(a=Be(a,ar(u))),p?(A=vu,I=!1):a.length>=i&&(A=Lo,I=!1,a=new as(a));t:for(;++b<M;){var at=s[b],ht=u==null?at:u(at);if(at=p||at!==0?at:0,I&&ht===ht){for(var At=ot;At--;)if(a[At]===ht)continue t;W.push(at)}else A(a,ht,p)||W.push(at)}return W}var Fi=Dp(Hr),sp=Dp(Lu,!0);function mb(s,a){var u=!0;return Fi(s,function(p,b,A){return u=!!a(p,b,A),u}),u}function ml(s,a,u){for(var p=-1,b=s.length;++p<b;){var A=s[p],I=a(A);if(I!=null&&(M===n?I===I&&!cr(I):u(I,M)))var M=I,W=A}return W}function yb(s,a,u,p){var b=s.length;for(u=ie(u),u<0&&(u=-u>b?0:b+u),p=p===n||p>b?b:ie(p),p<0&&(p+=b),p=u>p?0:x_(p);u<p;)s[u++]=a;return s}function op(s,a){var u=[];return Fi(s,function(p,b,A){a(p,b,A)&&u.push(p)}),u}function Sn(s,a,u,p,b){var A=-1,I=s.length;for(u||(u=ow),b||(b=[]);++A<I;){var M=s[A];a>0&&u(M)?a>1?Sn(M,a-1,u,p,b):Li(b,M):p||(b[b.length]=M)}return b}var Mu=Op(),ap=Op(!0);function Hr(s,a){return s&&Mu(s,a,yn)}function Lu(s,a){return s&&ap(s,a,yn)}function yl(s,a){return Mi(a,function(u){return pi(s[u])})}function cs(s,a){a=qi(a,s);for(var u=0,p=a.length;s!=null&&u<p;)s=s[Wr(a[u++])];return u&&u==p?s:n}function lp(s,a,u){var p=a(s);return ee(s)?p:Li(p,u(s))}function Wn(s){return s==null?s===n?ja:Dn:ss&&ss in Oe(s)?tw(s):dw(s)}function $u(s,a){return s>a}function vb(s,a){return s!=null&&Se.call(s,a)}function bb(s,a){return s!=null&&a in Oe(s)}function wb(s,a,u){return s>=On(a,u)&&s<dn(a,u)}function Nu(s,a,u){for(var p=u?vu:Ja,b=s[0].length,A=s.length,I=A,M=J(A),W=1/0,ot=[];I--;){var at=s[I];I&&a&&(at=Be(at,ar(a))),W=On(at.length,W),M[I]=!u&&(a||b>=120&&at.length>=120)?new as(I&&at):n}at=s[0];var ht=-1,At=M[0];t:for(;++ht<b&&ot.length<W;){var Lt=at[ht],Gt=a?a(Lt):Lt;if(Lt=u||Lt!==0?Lt:0,!(At?Lo(At,Gt):p(ot,Gt,u))){for(I=A;--I;){var se=M[I];if(!(se?Lo(se,Gt):p(s[I],Gt,u)))continue t}At&&At.push(Gt),ot.push(Lt)}}return ot}function xb(s,a,u,p){return Hr(s,function(b,A,I){a(p,u(b),A,I)}),p}function zo(s,a,u){a=qi(a,s),s=Yp(s,a);var p=s==null?s:s[Wr(Sr(a))];return p==null?n:or(p,s,u)}function cp(s){return Ze(s)&&Wn(s)==_n}function Eb(s){return Ze(s)&&Wn(s)==es}function Ab(s){return Ze(s)&&Wn(s)==Nt}function Ho(s,a,u,p,b){return s===a?!0:s==null||a==null||!Ze(s)&&!Ze(a)?s!==s&&a!==a:Sb(s,a,u,p,Ho,b)}function Sb(s,a,u,p,b,A){var I=ee(s),M=ee(a),W=I?ei:Pn(s),ot=M?ei:Pn(a);W=W==_n?cn:W,ot=ot==_n?cn:ot;var at=W==cn,ht=ot==cn,At=W==ot;if(At&&Ui(s)){if(!Ui(a))return!1;I=!0,at=!1}if(At&&!at)return A||(A=new Lr),I||Js(s)?Up(s,a,u,p,b,A):Xb(s,a,W,u,p,b,A);if(!(u&q)){var Lt=at&&Se.call(s,"__wrapped__"),Gt=ht&&Se.call(a,"__wrapped__");if(Lt||Gt){var se=Lt?s.value():s,Wt=Gt?a.value():a;return A||(A=new Lr),b(se,Wt,u,p,A)}}return At?(A||(A=new Lr),Jb(s,a,u,p,b,A)):!1}function kb(s){return Ze(s)&&Pn(s)==ge}function Fu(s,a,u,p){var b=u.length,A=b,I=!p;if(s==null)return!A;for(s=Oe(s);b--;){var M=u[b];if(I&&M[2]?M[1]!==s[M[0]]:!(M[0]in s))return!1}for(;++b<A;){M=u[b];var W=M[0],ot=s[W],at=M[1];if(I&&M[2]){if(ot===n&&!(W in s))return!1}else{var ht=new Lr;if(p)var At=p(ot,at,W,s,a,ht);if(!(At===n?Ho(at,ot,q|Q,p,ht):At))return!1}}return!0}function up(s){if(!je(s)||lw(s))return!1;var a=pi(s)?k1:zn;return a.test(hs(s))}function Cb(s){return Ze(s)&&Wn(s)==Ji}function Tb(s){return Ze(s)&&Pn(s)==sr}function Ib(s){return Ze(s)&&Ll(s.length)&&!!Ut[Wn(s)]}function hp(s){return typeof s=="function"?s:s==null?er:typeof s=="object"?ee(s)?pp(s[0],s[1]):dp(s):P_(s)}function Vu(s){if(!jo(s))return O1(s);var a=[];for(var u in Oe(s))Se.call(s,u)&&u!="constructor"&&a.push(u);return a}function Rb(s){if(!je(s))return fw(s);var a=jo(s),u=[];for(var p in s)p=="constructor"&&(a||!Se.call(s,p))||u.push(p);return u}function qu(s,a){return s<a}function fp(s,a){var u=-1,p=Jn(s)?J(s.length):[];return Fi(s,function(b,A,I){p[++u]=a(b,A,I)}),p}function dp(s){var a=eh(s);return a.length==1&&a[0][2]?jp(a[0][0],a[0][1]):function(u){return u===s||Fu(u,s,a)}}function pp(s,a){return rh(s)&&Wp(a)?jp(Wr(s),a):function(u){var p=dh(u,s);return p===n&&p===a?ph(u,s):Ho(a,p,q|Q)}}function vl(s,a,u,p,b){s!==a&&Mu(a,function(A,I){if(b||(b=new Lr),je(A))Db(s,a,I,u,vl,p,b);else{var M=p?p(sh(s,I),A,I+"",s,a,b):n;M===n&&(M=A),Ou(s,I,M)}},tr)}function Db(s,a,u,p,b,A,I){var M=sh(s,u),W=sh(a,u),ot=I.get(W);if(ot){Ou(s,u,ot);return}var at=A?A(M,W,u+"",s,a,I):n,ht=at===n;if(ht){var At=ee(W),Lt=!At&&Ui(W),Gt=!At&&!Lt&&Js(W);at=W,At||Lt||Gt?ee(M)?at=M:tn(M)?at=Xn(M):Lt?(ht=!1,at=kp(W,!0)):Gt?(ht=!1,at=Cp(W,!0)):at=[]:Yo(W)||fs(W)?(at=M,fs(M)?at=E_(M):(!je(M)||pi(M))&&(at=Gp(W))):ht=!1}ht&&(I.set(W,at),b(at,W,p,A,I),I.delete(W)),Ou(s,u,at)}function _p(s,a){var u=s.length;if(u)return a+=a<0?u:0,di(a,u)?s[a]:n}function gp(s,a,u){a.length?a=Be(a,function(A){return ee(A)?function(I){return cs(I,A.length===1?A[0]:A)}:A}):a=[er];var p=-1;a=Be(a,ar(Ht()));var b=fp(s,function(A,I,M){var W=Be(a,function(ot){return ot(A)});return{criteria:W,index:++p,value:A}});return i1(b,function(A,I){return Hb(A,I,u)})}function Ob(s,a){return mp(s,a,function(u,p){return ph(s,p)})}function mp(s,a,u){for(var p=-1,b=a.length,A={};++p<b;){var I=a[p],M=cs(s,I);u(M,I)&&Go(A,qi(I,s),M)}return A}function Pb(s){return function(a){return cs(a,s)}}function Bu(s,a,u,p){var b=p?r1:Us,A=-1,I=a.length,M=s;for(s===a&&(a=Xn(a)),u&&(M=Be(s,ar(u)));++A<I;)for(var W=0,ot=a[A],at=u?u(ot):ot;(W=b(M,at,W,p))>-1;)M!==s&&cl.call(M,W,1),cl.call(s,W,1);return s}function yp(s,a){for(var u=s?a.length:0,p=u-1;u--;){var b=a[u];if(u==p||b!==A){var A=b;di(b)?cl.call(s,b,1):Gu(s,b)}}return s}function Uu(s,a){return s+fl(Xd()*(a-s+1))}function Mb(s,a,u,p){for(var b=-1,A=dn(hl((a-s)/(u||1)),0),I=J(A);A--;)I[p?A:++b]=s,s+=u;return I}function zu(s,a){var u="";if(!s||a<1||a>ir)return u;do a%2&&(u+=s),a=fl(a/2),a&&(s+=s);while(a);return u}function ae(s,a){return oh(Kp(s,a,er),s+"")}function Lb(s){return ep(to(s))}function $b(s,a){var u=to(s);return Il(u,ls(a,0,u.length))}function Go(s,a,u,p){if(!je(s))return s;a=qi(a,s);for(var b=-1,A=a.length,I=A-1,M=s;M!=null&&++b<A;){var W=Wr(a[b]),ot=u;if(W==="__proto__"||W==="constructor"||W==="prototype")return s;if(b!=I){var at=M[W];ot=p?p(at,W,M):n,ot===n&&(ot=je(at)?at:di(a[b+1])?[]:{})}Bo(M,W,ot),M=M[W]}return s}var vp=dl?function(s,a){return dl.set(s,a),s}:er,Nb=ul?function(s,a){return ul(s,"toString",{configurable:!0,enumerable:!1,value:gh(a),writable:!0})}:er;function Fb(s){return Il(to(s))}function Ar(s,a,u){var p=-1,b=s.length;a<0&&(a=-a>b?0:b+a),u=u>b?b:u,u<0&&(u+=b),b=a>u?0:u-a>>>0,a>>>=0;for(var A=J(b);++p<b;)A[p]=s[p+a];return A}function Vb(s,a){var u;return Fi(s,function(p,b,A){return u=a(p,b,A),!u}),!!u}function bl(s,a,u){var p=0,b=s==null?p:s.length;if(typeof a=="number"&&a===a&&b<=pu){for(;p<b;){var A=p+b>>>1,I=s[A];I!==null&&!cr(I)&&(u?I<=a:I<a)?p=A+1:b=A}return b}return Hu(s,a,er,u)}function Hu(s,a,u,p){var b=0,A=s==null?0:s.length;if(A===0)return 0;a=u(a);for(var I=a!==a,M=a===null,W=cr(a),ot=a===n;b<A;){var at=fl((b+A)/2),ht=u(s[at]),At=ht!==n,Lt=ht===null,Gt=ht===ht,se=cr(ht);if(I)var Wt=p||Gt;else ot?Wt=Gt&&(p||At):M?Wt=Gt&&At&&(p||!Lt):W?Wt=Gt&&At&&!Lt&&(p||!se):Lt||se?Wt=!1:Wt=p?ht<=a:ht<a;Wt?b=at+1:A=at}return On(A,Wa)}function bp(s,a){for(var u=-1,p=s.length,b=0,A=[];++u<p;){var I=s[u],M=a?a(I):I;if(!u||!$r(M,W)){var W=M;A[b++]=I===0?0:I}}return A}function wp(s){return typeof s=="number"?s:cr(s)?Ds:+s}function lr(s){if(typeof s=="string")return s;if(ee(s))return Be(s,lr)+"";if(cr(s))return Jd?Jd.call(s):"";var a=s+"";return a=="0"&&1/s==-ln?"-0":a}function Vi(s,a,u){var p=-1,b=Ja,A=s.length,I=!0,M=[],W=M;if(u)I=!1,b=vu;else if(A>=i){var ot=a?null:Qb(s);if(ot)return el(ot);I=!1,b=Lo,W=new as}else W=a?[]:M;t:for(;++p<A;){var at=s[p],ht=a?a(at):at;if(at=u||at!==0?at:0,I&&ht===ht){for(var At=W.length;At--;)if(W[At]===ht)continue t;a&&W.push(ht),M.push(at)}else b(W,ht,u)||(W!==M&&W.push(ht),M.push(at))}return M}function Gu(s,a){return a=qi(a,s),s=Yp(s,a),s==null||delete s[Wr(Sr(a))]}function xp(s,a,u,p){return Go(s,a,u(cs(s,a)),p)}function wl(s,a,u,p){for(var b=s.length,A=p?b:-1;(p?A--:++A<b)&&a(s[A],A,s););return u?Ar(s,p?0:A,p?A+1:b):Ar(s,p?A+1:0,p?b:A)}function Ep(s,a){var u=s;return u instanceof ue&&(u=u.value()),bu(a,function(p,b){return b.func.apply(b.thisArg,Li([p],b.args))},u)}function Wu(s,a,u){var p=s.length;if(p<2)return p?Vi(s[0]):[];for(var b=-1,A=J(p);++b<p;)for(var I=s[b],M=-1;++M<p;)M!=b&&(A[b]=Uo(A[b]||I,s[M],a,u));return Vi(Sn(A,1),a,u)}function Ap(s,a,u){for(var p=-1,b=s.length,A=a.length,I={};++p<b;){var M=p<A?a[p]:n;u(I,s[p],M)}return I}function ju(s){return tn(s)?s:[]}function Ku(s){return typeof s=="function"?s:er}function qi(s,a){return ee(s)?s:rh(s,a)?[s]:Jp(Ee(s))}var qb=ae;function Bi(s,a,u){var p=s.length;return u=u===n?p:u,!a&&u>=p?s:Ar(s,a,u)}var Sp=C1||function(s){return We.clearTimeout(s)};function kp(s,a){if(a)return s.slice();var u=s.length,p=jd?jd(u):new s.constructor(u);return s.copy(p),p}function Yu(s){var a=new s.constructor(s.byteLength);return new al(a).set(new al(s)),a}function Bb(s,a){var u=a?Yu(s.buffer):s.buffer;return new s.constructor(u,s.byteOffset,s.byteLength)}function Ub(s){var a=new s.constructor(s.source,Po.exec(s));return a.lastIndex=s.lastIndex,a}function zb(s){return qo?Oe(qo.call(s)):{}}function Cp(s,a){var u=a?Yu(s.buffer):s.buffer;return new s.constructor(u,s.byteOffset,s.length)}function Tp(s,a){if(s!==a){var u=s!==n,p=s===null,b=s===s,A=cr(s),I=a!==n,M=a===null,W=a===a,ot=cr(a);if(!M&&!ot&&!A&&s>a||A&&I&&W&&!M&&!ot||p&&I&&W||!u&&W||!b)return 1;if(!p&&!A&&!ot&&s<a||ot&&u&&b&&!p&&!A||M&&u&&b||!I&&b||!W)return-1}return 0}function Hb(s,a,u){for(var p=-1,b=s.criteria,A=a.criteria,I=b.length,M=u.length;++p<I;){var W=Tp(b[p],A[p]);if(W){if(p>=M)return W;var ot=u[p];return W*(ot=="desc"?-1:1)}}return s.index-a.index}function Ip(s,a,u,p){for(var b=-1,A=s.length,I=u.length,M=-1,W=a.length,ot=dn(A-I,0),at=J(W+ot),ht=!p;++M<W;)at[M]=a[M];for(;++b<I;)(ht||b<A)&&(at[u[b]]=s[b]);for(;ot--;)at[M++]=s[b++];return at}function Rp(s,a,u,p){for(var b=-1,A=s.length,I=-1,M=u.length,W=-1,ot=a.length,at=dn(A-M,0),ht=J(at+ot),At=!p;++b<at;)ht[b]=s[b];for(var Lt=b;++W<ot;)ht[Lt+W]=a[W];for(;++I<M;)(At||b<A)&&(ht[Lt+u[I]]=s[b++]);return ht}function Xn(s,a){var u=-1,p=s.length;for(a||(a=J(p));++u<p;)a[u]=s[u];return a}function Gr(s,a,u,p){var b=!u;u||(u={});for(var A=-1,I=a.length;++A<I;){var M=a[A],W=p?p(u[M],s[M],M,u,s):n;W===n&&(W=s[M]),b?ui(u,M,W):Bo(u,M,W)}return u}function Gb(s,a){return Gr(s,nh(s),a)}function Wb(s,a){return Gr(s,zp(s),a)}function xl(s,a){return function(u,p){var b=ee(u)?Zv:pb,A=a?a():{};return b(u,s,Ht(p,2),A)}}function Qs(s){return ae(function(a,u){var p=-1,b=u.length,A=b>1?u[b-1]:n,I=b>2?u[2]:n;for(A=s.length>3&&typeof A=="function"?(b--,A):n,I&&jn(u[0],u[1],I)&&(A=b<3?n:A,b=1),a=Oe(a);++p<b;){var M=u[p];M&&s(a,M,p,A)}return a})}function Dp(s,a){return function(u,p){if(u==null)return u;if(!Jn(u))return s(u,p);for(var b=u.length,A=a?b:-1,I=Oe(u);(a?A--:++A<b)&&p(I[A],A,I)!==!1;);return u}}function Op(s){return function(a,u,p){for(var b=-1,A=Oe(a),I=p(a),M=I.length;M--;){var W=I[s?M:++b];if(u(A[W],W,A)===!1)break}return a}}function jb(s,a,u){var p=a&tt,b=Wo(s);function A(){var I=this&&this!==We&&this instanceof A?b:s;return I.apply(p?u:this,arguments)}return A}function Pp(s){return function(a){a=Ee(a);var u=zs(a)?Mr(a):n,p=u?u[0]:a.charAt(0),b=u?Bi(u,1).join(""):a.slice(1);return p[s]()+b}}function Zs(s){return function(a){return bu(D_(R_(a).replace(Qt,"")),s,"")}}function Wo(s){return function(){var a=arguments;switch(a.length){case 0:return new s;case 1:return new s(a[0]);case 2:return new s(a[0],a[1]);case 3:return new s(a[0],a[1],a[2]);case 4:return new s(a[0],a[1],a[2],a[3]);case 5:return new s(a[0],a[1],a[2],a[3],a[4]);case 6:return new s(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new s(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var u=Ys(s.prototype),p=s.apply(u,a);return je(p)?p:u}}function Kb(s,a,u){var p=Wo(s);function b(){for(var A=arguments.length,I=J(A),M=A,W=Xs(b);M--;)I[M]=arguments[M];var ot=A<3&&I[0]!==W&&I[A-1]!==W?[]:$i(I,W);if(A-=ot.length,A<u)return Fp(s,a,El,b.placeholder,n,I,ot,n,n,u-A);var at=this&&this!==We&&this instanceof b?p:s;return or(at,this,I)}return b}function Mp(s){return function(a,u,p){var b=Oe(a);if(!Jn(a)){var A=Ht(u,3);a=yn(a),u=function(M){return A(b[M],M,b)}}var I=s(a,u,p);return I>-1?b[A?a[I]:I]:n}}function Lp(s){return fi(function(a){var u=a.length,p=u,b=xr.prototype.thru;for(s&&a.reverse();p--;){var A=a[p];if(typeof A!="function")throw new wr(l);if(b&&!I&&Cl(A)=="wrapper")var I=new xr([],!0)}for(p=I?p:u;++p<u;){A=a[p];var M=Cl(A),W=M=="wrapper"?th(A):n;W&&ih(W[0])&&W[1]==(Kt|gt|Vt|ye)&&!W[4].length&&W[9]==1?I=I[Cl(W[0])].apply(I,W[3]):I=A.length==1&&ih(A)?I[M]():I.thru(A)}return function(){var ot=arguments,at=ot[0];if(I&&ot.length==1&&ee(at))return I.plant(at).value();for(var ht=0,At=u?a[ht].apply(this,ot):at;++ht<u;)At=a[ht].call(this,At);return At}})}function El(s,a,u,p,b,A,I,M,W,ot){var at=a&Kt,ht=a&tt,At=a&ut,Lt=a&(gt|Pt),Gt=a&He,se=At?n:Wo(s);function Wt(){for(var ce=arguments.length,he=J(ce),ur=ce;ur--;)he[ur]=arguments[ur];if(Lt)var Kn=Xs(Wt),hr=o1(he,Kn);if(p&&(he=Ip(he,p,b,Lt)),A&&(he=Rp(he,A,I,Lt)),ce-=hr,Lt&&ce<ot){var en=$i(he,Kn);return Fp(s,a,El,Wt.placeholder,u,he,en,M,W,ot-ce)}var Nr=ht?u:this,gi=At?Nr[s]:s;return ce=he.length,M?he=pw(he,M):Gt&&ce>1&&he.reverse(),at&&W<ce&&(he.length=W),this&&this!==We&&this instanceof Wt&&(gi=se||Wo(gi)),gi.apply(Nr,he)}return Wt}function $p(s,a){return function(u,p){return xb(u,s,a(p),{})}}function Al(s,a){return function(u,p){var b;if(u===n&&p===n)return a;if(u!==n&&(b=u),p!==n){if(b===n)return p;typeof u=="string"||typeof p=="string"?(u=lr(u),p=lr(p)):(u=wp(u),p=wp(p)),b=s(u,p)}return b}}function Qu(s){return fi(function(a){return a=Be(a,ar(Ht())),ae(function(u){var p=this;return s(a,function(b){return or(b,p,u)})})})}function Sl(s,a){a=a===n?" ":lr(a);var u=a.length;if(u<2)return u?zu(a,s):a;var p=zu(a,hl(s/Hs(a)));return zs(a)?Bi(Mr(p),0,s).join(""):p.slice(0,s)}function Yb(s,a,u,p){var b=a&tt,A=Wo(s);function I(){for(var M=-1,W=arguments.length,ot=-1,at=p.length,ht=J(at+W),At=this&&this!==We&&this instanceof I?A:s;++ot<at;)ht[ot]=p[ot];for(;W--;)ht[ot++]=arguments[++M];return or(At,b?u:this,ht)}return I}function Np(s){return function(a,u,p){return p&&typeof p!="number"&&jn(a,u,p)&&(u=p=n),a=_i(a),u===n?(u=a,a=0):u=_i(u),p=p===n?a<u?1:-1:_i(p),Mb(a,u,p,s)}}function kl(s){return function(a,u){return typeof a=="string"&&typeof u=="string"||(a=kr(a),u=kr(u)),s(a,u)}}function Fp(s,a,u,p,b,A,I,M,W,ot){var at=a&gt,ht=at?I:n,At=at?n:I,Lt=at?A:n,Gt=at?n:A;a|=at?Vt:pt,a&=~(at?pt:Vt),a&nt||(a&=~(tt|ut));var se=[s,a,b,Lt,ht,Gt,At,M,W,ot],Wt=u.apply(n,se);return ih(s)&&Qp(Wt,se),Wt.placeholder=p,Zp(Wt,s,a)}function Zu(s){var a=fn[s];return function(u,p){if(u=kr(u),p=p==null?0:On(ie(p),292),p&&Zd(u)){var b=(Ee(u)+"e").split("e"),A=a(b[0]+"e"+(+b[1]+p));return b=(Ee(A)+"e").split("e"),+(b[0]+"e"+(+b[1]-p))}return a(u)}}var Qb=js&&1/el(new js([,-0]))[1]==ln?function(s){return new js(s)}:vh;function Vp(s){return function(a){var u=Pn(a);return u==ge?Cu(a):u==sr?d1(a):s1(a,s(a))}}function hi(s,a,u,p,b,A,I,M){var W=a&ut;if(!W&&typeof s!="function")throw new wr(l);var ot=p?p.length:0;if(ot||(a&=~(Vt|pt),p=b=n),I=I===n?I:dn(ie(I),0),M=M===n?M:ie(M),ot-=b?b.length:0,a&pt){var at=p,ht=b;p=b=n}var At=W?n:th(s),Lt=[s,a,u,p,b,at,ht,A,I,M];if(At&&hw(Lt,At),s=Lt[0],a=Lt[1],u=Lt[2],p=Lt[3],b=Lt[4],M=Lt[9]=Lt[9]===n?W?0:s.length:dn(Lt[9]-ot,0),!M&&a&(gt|Pt)&&(a&=~(gt|Pt)),!a||a==tt)var Gt=jb(s,a,u);else a==gt||a==Pt?Gt=Kb(s,a,M):(a==Vt||a==(tt|Vt))&&!b.length?Gt=Yb(s,a,u,p):Gt=El.apply(n,Lt);var se=At?vp:Qp;return Zp(se(Gt,Lt),s,a)}function qp(s,a,u,p){return s===n||$r(s,Ws[u])&&!Se.call(p,u)?a:s}function Bp(s,a,u,p,b,A){return je(s)&&je(a)&&(A.set(a,s),vl(s,a,n,Bp,A),A.delete(a)),s}function Zb(s){return Yo(s)?n:s}function Up(s,a,u,p,b,A){var I=u&q,M=s.length,W=a.length;if(M!=W&&!(I&&W>M))return!1;var ot=A.get(s),at=A.get(a);if(ot&&at)return ot==a&&at==s;var ht=-1,At=!0,Lt=u&Q?new as:n;for(A.set(s,a),A.set(a,s);++ht<M;){var Gt=s[ht],se=a[ht];if(p)var Wt=I?p(se,Gt,ht,a,s,A):p(Gt,se,ht,s,a,A);if(Wt!==n){if(Wt)continue;At=!1;break}if(Lt){if(!wu(a,function(ce,he){if(!Lo(Lt,he)&&(Gt===ce||b(Gt,ce,u,p,A)))return Lt.push(he)})){At=!1;break}}else if(!(Gt===se||b(Gt,se,u,p,A))){At=!1;break}}return A.delete(s),A.delete(a),At}function Xb(s,a,u,p,b,A,I){switch(u){case Le:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case es:return!(s.byteLength!=a.byteLength||!A(new al(s),new al(a)));case ki:case Nt:case Ci:return $r(+s,+a);case gn:return s.name==a.name&&s.message==a.message;case Ji:case ni:return s==a+"";case ge:var M=Cu;case sr:var W=p&q;if(M||(M=el),s.size!=a.size&&!W)return!1;var ot=I.get(s);if(ot)return ot==a;p|=Q,I.set(s,a);var at=Up(M(s),M(a),p,b,A,I);return I.delete(s),at;case ts:if(qo)return qo.call(s)==qo.call(a)}return!1}function Jb(s,a,u,p,b,A){var I=u&q,M=Xu(s),W=M.length,ot=Xu(a),at=ot.length;if(W!=at&&!I)return!1;for(var ht=W;ht--;){var At=M[ht];if(!(I?At in a:Se.call(a,At)))return!1}var Lt=A.get(s),Gt=A.get(a);if(Lt&&Gt)return Lt==a&&Gt==s;var se=!0;A.set(s,a),A.set(a,s);for(var Wt=I;++ht<W;){At=M[ht];var ce=s[At],he=a[At];if(p)var ur=I?p(he,ce,At,a,s,A):p(ce,he,At,s,a,A);if(!(ur===n?ce===he||b(ce,he,u,p,A):ur)){se=!1;break}Wt||(Wt=At=="constructor")}if(se&&!Wt){var Kn=s.constructor,hr=a.constructor;Kn!=hr&&"constructor"in s&&"constructor"in a&&!(typeof Kn=="function"&&Kn instanceof Kn&&typeof hr=="function"&&hr instanceof hr)&&(se=!1)}return A.delete(s),A.delete(a),se}function fi(s){return oh(Kp(s,n,r_),s+"")}function Xu(s){return lp(s,yn,nh)}function Ju(s){return lp(s,tr,zp)}var th=dl?function(s){return dl.get(s)}:vh;function Cl(s){for(var a=s.name+"",u=Ks[a],p=Se.call(Ks,a)?u.length:0;p--;){var b=u[p],A=b.func;if(A==null||A==s)return b.name}return a}function Xs(s){var a=Se.call(w,"placeholder")?w:s;return a.placeholder}function Ht(){var s=w.iteratee||mh;return s=s===mh?hp:s,arguments.length?s(arguments[0],arguments[1]):s}function Tl(s,a){var u=s.__data__;return aw(a)?u[typeof a=="string"?"string":"hash"]:u.map}function eh(s){for(var a=yn(s),u=a.length;u--;){var p=a[u],b=s[p];a[u]=[p,b,Wp(b)]}return a}function us(s,a){var u=u1(s,a);return up(u)?u:n}function tw(s){var a=Se.call(s,ss),u=s[ss];try{s[ss]=n;var p=!0}catch{}var b=sl.call(s);return p&&(a?s[ss]=u:delete s[ss]),b}var nh=Iu?function(s){return s==null?[]:(s=Oe(s),Mi(Iu(s),function(a){return Yd.call(s,a)}))}:bh,zp=Iu?function(s){for(var a=[];s;)Li(a,nh(s)),s=ll(s);return a}:bh,Pn=Wn;(Ru&&Pn(new Ru(new ArrayBuffer(1)))!=Le||No&&Pn(new No)!=ge||Du&&Pn(Du.resolve())!=mn||js&&Pn(new js)!=sr||Fo&&Pn(new Fo)!=ri)&&(Pn=function(s){var a=Wn(s),u=a==cn?s.constructor:n,p=u?hs(u):"";if(p)switch(p){case $1:return Le;case N1:return ge;case F1:return mn;case V1:return sr;case q1:return ri}return a});function ew(s,a,u){for(var p=-1,b=u.length;++p<b;){var A=u[p],I=A.size;switch(A.type){case"drop":s+=I;break;case"dropRight":a-=I;break;case"take":a=On(a,s+I);break;case"takeRight":s=dn(s,a-I);break}}return{start:s,end:a}}function nw(s){var a=s.match(Xa);return a?a[1].split(gu):[]}function Hp(s,a,u){a=qi(a,s);for(var p=-1,b=a.length,A=!1;++p<b;){var I=Wr(a[p]);if(!(A=s!=null&&u(s,I)))break;s=s[I]}return A||++p!=b?A:(b=s==null?0:s.length,!!b&&Ll(b)&&di(I,b)&&(ee(s)||fs(s)))}function rw(s){var a=s.length,u=new s.constructor(a);return a&&typeof s[0]=="string"&&Se.call(s,"index")&&(u.index=s.index,u.input=s.input),u}function Gp(s){return typeof s.constructor=="function"&&!jo(s)?Ys(ll(s)):{}}function iw(s,a,u){var p=s.constructor;switch(a){case es:return Yu(s);case ki:case Nt:return new p(+s);case Le:return Bb(s,u);case Do:case Or:case nn:case ii:case si:case Ti:case ns:case oi:case Bn:return Cp(s,u);case ge:return new p;case Ci:case ni:return new p(s);case Ji:return Ub(s);case sr:return new p;case ts:return zb(s)}}function sw(s,a){var u=a.length;if(!u)return s;var p=u-1;return a[p]=(u>1?"& ":"")+a[p],a=a.join(u>2?", ":" "),s.replace(Za,`{
/* [wrapped with `+a+`] */
`)}function ow(s){return ee(s)||fs(s)||!!(Qd&&s&&s[Qd])}function di(s,a){var u=typeof s;return a=a??ir,!!a&&(u=="number"||u!="symbol"&&_.test(s))&&s>-1&&s%1==0&&s<a}function jn(s,a,u){if(!je(u))return!1;var p=typeof a;return(p=="number"?Jn(u)&&di(a,u.length):p=="string"&&a in u)?$r(u[a],s):!1}function rh(s,a){if(ee(s))return!1;var u=typeof s;return u=="number"||u=="symbol"||u=="boolean"||s==null||cr(s)?!0:$e.test(s)||!Di.test(s)||a!=null&&s in Oe(a)}function aw(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}function ih(s){var a=Cl(s),u=w[a];if(typeof u!="function"||!(a in ue.prototype))return!1;if(s===u)return!0;var p=th(u);return!!p&&s===p[0]}function lw(s){return!!Wd&&Wd in s}var cw=rl?pi:wh;function jo(s){var a=s&&s.constructor,u=typeof a=="function"&&a.prototype||Ws;return s===u}function Wp(s){return s===s&&!je(s)}function jp(s,a){return function(u){return u==null?!1:u[s]===a&&(a!==n||s in Oe(u))}}function uw(s){var a=Pl(s,function(p){return u.size===d&&u.clear(),p}),u=a.cache;return a}function hw(s,a){var u=s[1],p=a[1],b=u|p,A=b<(tt|ut|Kt),I=p==Kt&&u==gt||p==Kt&&u==ye&&s[7].length<=a[8]||p==(Kt|ye)&&a[7].length<=a[8]&&u==gt;if(!(A||I))return s;p&tt&&(s[2]=a[2],b|=u&tt?0:nt);var M=a[3];if(M){var W=s[3];s[3]=W?Ip(W,M,a[4]):M,s[4]=W?$i(s[3],g):a[4]}return M=a[5],M&&(W=s[5],s[5]=W?Rp(W,M,a[6]):M,s[6]=W?$i(s[5],g):a[6]),M=a[7],M&&(s[7]=M),p&Kt&&(s[8]=s[8]==null?a[8]:On(s[8],a[8])),s[9]==null&&(s[9]=a[9]),s[0]=a[0],s[1]=b,s}function fw(s){var a=[];if(s!=null)for(var u in Oe(s))a.push(u);return a}function dw(s){return sl.call(s)}function Kp(s,a,u){return a=dn(a===n?s.length-1:a,0),function(){for(var p=arguments,b=-1,A=dn(p.length-a,0),I=J(A);++b<A;)I[b]=p[a+b];b=-1;for(var M=J(a+1);++b<a;)M[b]=p[b];return M[a]=u(I),or(s,this,M)}}function Yp(s,a){return a.length<2?s:cs(s,Ar(a,0,-1))}function pw(s,a){for(var u=s.length,p=On(a.length,u),b=Xn(s);p--;){var A=a[p];s[p]=di(A,u)?b[A]:n}return s}function sh(s,a){if(!(a==="constructor"&&typeof s[a]=="function")&&a!="__proto__")return s[a]}var Qp=Xp(vp),Ko=I1||function(s,a){return We.setTimeout(s,a)},oh=Xp(Nb);function Zp(s,a,u){var p=a+"";return oh(s,sw(p,_w(nw(p),u)))}function Xp(s){var a=0,u=0;return function(){var p=P1(),b=gr-(p-u);if(u=p,b>0){if(++a>=_r)return arguments[0]}else a=0;return s.apply(n,arguments)}}function Il(s,a){var u=-1,p=s.length,b=p-1;for(a=a===n?p:a;++u<a;){var A=Uu(u,b),I=s[A];s[A]=s[u],s[u]=I}return s.length=a,s}var Jp=uw(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(Ya,function(u,p,b,A){a.push(b?A.replace(Ns,"$1"):p||u)}),a});function Wr(s){if(typeof s=="string"||cr(s))return s;var a=s+"";return a=="0"&&1/s==-ln?"-0":a}function hs(s){if(s!=null){try{return il.call(s)}catch{}try{return s+""}catch{}}return""}function _w(s,a){return br(Si,function(u){var p="_."+u[0];a&u[1]&&!Ja(s,p)&&s.push(p)}),s.sort()}function t_(s){if(s instanceof ue)return s.clone();var a=new xr(s.__wrapped__,s.__chain__);return a.__actions__=Xn(s.__actions__),a.__index__=s.__index__,a.__values__=s.__values__,a}function gw(s,a,u){(u?jn(s,a,u):a===n)?a=1:a=dn(ie(a),0);var p=s==null?0:s.length;if(!p||a<1)return[];for(var b=0,A=0,I=J(hl(p/a));b<p;)I[A++]=Ar(s,b,b+=a);return I}function mw(s){for(var a=-1,u=s==null?0:s.length,p=0,b=[];++a<u;){var A=s[a];A&&(b[p++]=A)}return b}function yw(){var s=arguments.length;if(!s)return[];for(var a=J(s-1),u=arguments[0],p=s;p--;)a[p-1]=arguments[p];return Li(ee(u)?Xn(u):[u],Sn(a,1))}var vw=ae(function(s,a){return tn(s)?Uo(s,Sn(a,1,tn,!0)):[]}),bw=ae(function(s,a){var u=Sr(a);return tn(u)&&(u=n),tn(s)?Uo(s,Sn(a,1,tn,!0),Ht(u,2)):[]}),ww=ae(function(s,a){var u=Sr(a);return tn(u)&&(u=n),tn(s)?Uo(s,Sn(a,1,tn,!0),n,u):[]});function xw(s,a,u){var p=s==null?0:s.length;return p?(a=u||a===n?1:ie(a),Ar(s,a<0?0:a,p)):[]}function Ew(s,a,u){var p=s==null?0:s.length;return p?(a=u||a===n?1:ie(a),a=p-a,Ar(s,0,a<0?0:a)):[]}function Aw(s,a){return s&&s.length?wl(s,Ht(a,3),!0,!0):[]}function Sw(s,a){return s&&s.length?wl(s,Ht(a,3),!0):[]}function kw(s,a,u,p){var b=s==null?0:s.length;return b?(u&&typeof u!="number"&&jn(s,a,u)&&(u=0,p=b),yb(s,a,u,p)):[]}function e_(s,a,u){var p=s==null?0:s.length;if(!p)return-1;var b=u==null?0:ie(u);return b<0&&(b=dn(p+b,0)),tl(s,Ht(a,3),b)}function n_(s,a,u){var p=s==null?0:s.length;if(!p)return-1;var b=p-1;return u!==n&&(b=ie(u),b=u<0?dn(p+b,0):On(b,p-1)),tl(s,Ht(a,3),b,!0)}function r_(s){var a=s==null?0:s.length;return a?Sn(s,1):[]}function Cw(s){var a=s==null?0:s.length;return a?Sn(s,ln):[]}function Tw(s,a){var u=s==null?0:s.length;return u?(a=a===n?1:ie(a),Sn(s,a)):[]}function Iw(s){for(var a=-1,u=s==null?0:s.length,p={};++a<u;){var b=s[a];p[b[0]]=b[1]}return p}function i_(s){return s&&s.length?s[0]:n}function Rw(s,a,u){var p=s==null?0:s.length;if(!p)return-1;var b=u==null?0:ie(u);return b<0&&(b=dn(p+b,0)),Us(s,a,b)}function Dw(s){var a=s==null?0:s.length;return a?Ar(s,0,-1):[]}var Ow=ae(function(s){var a=Be(s,ju);return a.length&&a[0]===s[0]?Nu(a):[]}),Pw=ae(function(s){var a=Sr(s),u=Be(s,ju);return a===Sr(u)?a=n:u.pop(),u.length&&u[0]===s[0]?Nu(u,Ht(a,2)):[]}),Mw=ae(function(s){var a=Sr(s),u=Be(s,ju);return a=typeof a=="function"?a:n,a&&u.pop(),u.length&&u[0]===s[0]?Nu(u,n,a):[]});function Lw(s,a){return s==null?"":D1.call(s,a)}function Sr(s){var a=s==null?0:s.length;return a?s[a-1]:n}function $w(s,a,u){var p=s==null?0:s.length;if(!p)return-1;var b=p;return u!==n&&(b=ie(u),b=b<0?dn(p+b,0):On(b,p-1)),a===a?_1(s,a,b):tl(s,Fd,b,!0)}function Nw(s,a){return s&&s.length?_p(s,ie(a)):n}var Fw=ae(s_);function s_(s,a){return s&&s.length&&a&&a.length?Bu(s,a):s}function Vw(s,a,u){return s&&s.length&&a&&a.length?Bu(s,a,Ht(u,2)):s}function qw(s,a,u){return s&&s.length&&a&&a.length?Bu(s,a,n,u):s}var Bw=fi(function(s,a){var u=s==null?0:s.length,p=Pu(s,a);return yp(s,Be(a,function(b){return di(b,u)?+b:b}).sort(Tp)),p});function Uw(s,a){var u=[];if(!(s&&s.length))return u;var p=-1,b=[],A=s.length;for(a=Ht(a,3);++p<A;){var I=s[p];a(I,p,s)&&(u.push(I),b.push(p))}return yp(s,b),u}function ah(s){return s==null?s:L1.call(s)}function zw(s,a,u){var p=s==null?0:s.length;return p?(u&&typeof u!="number"&&jn(s,a,u)?(a=0,u=p):(a=a==null?0:ie(a),u=u===n?p:ie(u)),Ar(s,a,u)):[]}function Hw(s,a){return bl(s,a)}function Gw(s,a,u){return Hu(s,a,Ht(u,2))}function Ww(s,a){var u=s==null?0:s.length;if(u){var p=bl(s,a);if(p<u&&$r(s[p],a))return p}return-1}function jw(s,a){return bl(s,a,!0)}function Kw(s,a,u){return Hu(s,a,Ht(u,2),!0)}function Yw(s,a){var u=s==null?0:s.length;if(u){var p=bl(s,a,!0)-1;if($r(s[p],a))return p}return-1}function Qw(s){return s&&s.length?bp(s):[]}function Zw(s,a){return s&&s.length?bp(s,Ht(a,2)):[]}function Xw(s){var a=s==null?0:s.length;return a?Ar(s,1,a):[]}function Jw(s,a,u){return s&&s.length?(a=u||a===n?1:ie(a),Ar(s,0,a<0?0:a)):[]}function tx(s,a,u){var p=s==null?0:s.length;return p?(a=u||a===n?1:ie(a),a=p-a,Ar(s,a<0?0:a,p)):[]}function ex(s,a){return s&&s.length?wl(s,Ht(a,3),!1,!0):[]}function nx(s,a){return s&&s.length?wl(s,Ht(a,3)):[]}var rx=ae(function(s){return Vi(Sn(s,1,tn,!0))}),ix=ae(function(s){var a=Sr(s);return tn(a)&&(a=n),Vi(Sn(s,1,tn,!0),Ht(a,2))}),sx=ae(function(s){var a=Sr(s);return a=typeof a=="function"?a:n,Vi(Sn(s,1,tn,!0),n,a)});function ox(s){return s&&s.length?Vi(s):[]}function ax(s,a){return s&&s.length?Vi(s,Ht(a,2)):[]}function lx(s,a){return a=typeof a=="function"?a:n,s&&s.length?Vi(s,n,a):[]}function lh(s){if(!(s&&s.length))return[];var a=0;return s=Mi(s,function(u){if(tn(u))return a=dn(u.length,a),!0}),Su(a,function(u){return Be(s,xu(u))})}function o_(s,a){if(!(s&&s.length))return[];var u=lh(s);return a==null?u:Be(u,function(p){return or(a,n,p)})}var cx=ae(function(s,a){return tn(s)?Uo(s,a):[]}),ux=ae(function(s){return Wu(Mi(s,tn))}),hx=ae(function(s){var a=Sr(s);return tn(a)&&(a=n),Wu(Mi(s,tn),Ht(a,2))}),fx=ae(function(s){var a=Sr(s);return a=typeof a=="function"?a:n,Wu(Mi(s,tn),n,a)}),dx=ae(lh);function px(s,a){return Ap(s||[],a||[],Bo)}function _x(s,a){return Ap(s||[],a||[],Go)}var gx=ae(function(s){var a=s.length,u=a>1?s[a-1]:n;return u=typeof u=="function"?(s.pop(),u):n,o_(s,u)});function a_(s){var a=w(s);return a.__chain__=!0,a}function mx(s,a){return a(s),s}function Rl(s,a){return a(s)}var yx=fi(function(s){var a=s.length,u=a?s[0]:0,p=this.__wrapped__,b=function(A){return Pu(A,s)};return a>1||this.__actions__.length||!(p instanceof ue)||!di(u)?this.thru(b):(p=p.slice(u,+u+(a?1:0)),p.__actions__.push({func:Rl,args:[b],thisArg:n}),new xr(p,this.__chain__).thru(function(A){return a&&!A.length&&A.push(n),A}))});function vx(){return a_(this)}function bx(){return new xr(this.value(),this.__chain__)}function wx(){this.__values__===n&&(this.__values__=w_(this.value()));var s=this.__index__>=this.__values__.length,a=s?n:this.__values__[this.__index__++];return{done:s,value:a}}function xx(){return this}function Ex(s){for(var a,u=this;u instanceof _l;){var p=t_(u);p.__index__=0,p.__values__=n,a?b.__wrapped__=p:a=p;var b=p;u=u.__wrapped__}return b.__wrapped__=s,a}function Ax(){var s=this.__wrapped__;if(s instanceof ue){var a=s;return this.__actions__.length&&(a=new ue(this)),a=a.reverse(),a.__actions__.push({func:Rl,args:[ah],thisArg:n}),new xr(a,this.__chain__)}return this.thru(ah)}function Sx(){return Ep(this.__wrapped__,this.__actions__)}var kx=xl(function(s,a,u){Se.call(s,u)?++s[u]:ui(s,u,1)});function Cx(s,a,u){var p=ee(s)?$d:mb;return u&&jn(s,a,u)&&(a=n),p(s,Ht(a,3))}function Tx(s,a){var u=ee(s)?Mi:op;return u(s,Ht(a,3))}var Ix=Mp(e_),Rx=Mp(n_);function Dx(s,a){return Sn(Dl(s,a),1)}function Ox(s,a){return Sn(Dl(s,a),ln)}function Px(s,a,u){return u=u===n?1:ie(u),Sn(Dl(s,a),u)}function l_(s,a){var u=ee(s)?br:Fi;return u(s,Ht(a,3))}function c_(s,a){var u=ee(s)?Xv:sp;return u(s,Ht(a,3))}var Mx=xl(function(s,a,u){Se.call(s,u)?s[u].push(a):ui(s,u,[a])});function Lx(s,a,u,p){s=Jn(s)?s:to(s),u=u&&!p?ie(u):0;var b=s.length;return u<0&&(u=dn(b+u,0)),$l(s)?u<=b&&s.indexOf(a,u)>-1:!!b&&Us(s,a,u)>-1}var $x=ae(function(s,a,u){var p=-1,b=typeof a=="function",A=Jn(s)?J(s.length):[];return Fi(s,function(I){A[++p]=b?or(a,I,u):zo(I,a,u)}),A}),Nx=xl(function(s,a,u){ui(s,u,a)});function Dl(s,a){var u=ee(s)?Be:fp;return u(s,Ht(a,3))}function Fx(s,a,u,p){return s==null?[]:(ee(a)||(a=a==null?[]:[a]),u=p?n:u,ee(u)||(u=u==null?[]:[u]),gp(s,a,u))}var Vx=xl(function(s,a,u){s[u?0:1].push(a)},function(){return[[],[]]});function qx(s,a,u){var p=ee(s)?bu:qd,b=arguments.length<3;return p(s,Ht(a,4),u,b,Fi)}function Bx(s,a,u){var p=ee(s)?Jv:qd,b=arguments.length<3;return p(s,Ht(a,4),u,b,sp)}function Ux(s,a){var u=ee(s)?Mi:op;return u(s,Ml(Ht(a,3)))}function zx(s){var a=ee(s)?ep:Lb;return a(s)}function Hx(s,a,u){(u?jn(s,a,u):a===n)?a=1:a=ie(a);var p=ee(s)?fb:$b;return p(s,a)}function Gx(s){var a=ee(s)?db:Fb;return a(s)}function Wx(s){if(s==null)return 0;if(Jn(s))return $l(s)?Hs(s):s.length;var a=Pn(s);return a==ge||a==sr?s.size:Vu(s).length}function jx(s,a,u){var p=ee(s)?wu:Vb;return u&&jn(s,a,u)&&(a=n),p(s,Ht(a,3))}var Kx=ae(function(s,a){if(s==null)return[];var u=a.length;return u>1&&jn(s,a[0],a[1])?a=[]:u>2&&jn(a[0],a[1],a[2])&&(a=[a[0]]),gp(s,Sn(a,1),[])}),Ol=T1||function(){return We.Date.now()};function Yx(s,a){if(typeof a!="function")throw new wr(l);return s=ie(s),function(){if(--s<1)return a.apply(this,arguments)}}function u_(s,a,u){return a=u?n:a,a=s&&a==null?s.length:a,hi(s,Kt,n,n,n,n,a)}function h_(s,a){var u;if(typeof a!="function")throw new wr(l);return s=ie(s),function(){return--s>0&&(u=a.apply(this,arguments)),s<=1&&(a=n),u}}var ch=ae(function(s,a,u){var p=tt;if(u.length){var b=$i(u,Xs(ch));p|=Vt}return hi(s,p,a,u,b)}),f_=ae(function(s,a,u){var p=tt|ut;if(u.length){var b=$i(u,Xs(f_));p|=Vt}return hi(a,p,s,u,b)});function d_(s,a,u){a=u?n:a;var p=hi(s,gt,n,n,n,n,n,a);return p.placeholder=d_.placeholder,p}function p_(s,a,u){a=u?n:a;var p=hi(s,Pt,n,n,n,n,n,a);return p.placeholder=p_.placeholder,p}function __(s,a,u){var p,b,A,I,M,W,ot=0,at=!1,ht=!1,At=!0;if(typeof s!="function")throw new wr(l);a=kr(a)||0,je(u)&&(at=!!u.leading,ht="maxWait"in u,A=ht?dn(kr(u.maxWait)||0,a):A,At="trailing"in u?!!u.trailing:At);function Lt(en){var Nr=p,gi=b;return p=b=n,ot=en,I=s.apply(gi,Nr),I}function Gt(en){return ot=en,M=Ko(ce,a),at?Lt(en):I}function se(en){var Nr=en-W,gi=en-ot,M_=a-Nr;return ht?On(M_,A-gi):M_}function Wt(en){var Nr=en-W,gi=en-ot;return W===n||Nr>=a||Nr<0||ht&&gi>=A}function ce(){var en=Ol();if(Wt(en))return he(en);M=Ko(ce,se(en))}function he(en){return M=n,At&&p?Lt(en):(p=b=n,I)}function ur(){M!==n&&Sp(M),ot=0,p=W=b=M=n}function Kn(){return M===n?I:he(Ol())}function hr(){var en=Ol(),Nr=Wt(en);if(p=arguments,b=this,W=en,Nr){if(M===n)return Gt(W);if(ht)return Sp(M),M=Ko(ce,a),Lt(W)}return M===n&&(M=Ko(ce,a)),I}return hr.cancel=ur,hr.flush=Kn,hr}var Qx=ae(function(s,a){return ip(s,1,a)}),Zx=ae(function(s,a,u){return ip(s,kr(a)||0,u)});function Xx(s){return hi(s,He)}function Pl(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new wr(l);var u=function(){var p=arguments,b=a?a.apply(this,p):p[0],A=u.cache;if(A.has(b))return A.get(b);var I=s.apply(this,p);return u.cache=A.set(b,I)||A,I};return u.cache=new(Pl.Cache||ci),u}Pl.Cache=ci;function Ml(s){if(typeof s!="function")throw new wr(l);return function(){var a=arguments;switch(a.length){case 0:return!s.call(this);case 1:return!s.call(this,a[0]);case 2:return!s.call(this,a[0],a[1]);case 3:return!s.call(this,a[0],a[1],a[2])}return!s.apply(this,a)}}function Jx(s){return h_(2,s)}var tE=qb(function(s,a){a=a.length==1&&ee(a[0])?Be(a[0],ar(Ht())):Be(Sn(a,1),ar(Ht()));var u=a.length;return ae(function(p){for(var b=-1,A=On(p.length,u);++b<A;)p[b]=a[b].call(this,p[b]);return or(s,this,p)})}),uh=ae(function(s,a){var u=$i(a,Xs(uh));return hi(s,Vt,n,a,u)}),g_=ae(function(s,a){var u=$i(a,Xs(g_));return hi(s,pt,n,a,u)}),eE=fi(function(s,a){return hi(s,ye,n,n,n,a)});function nE(s,a){if(typeof s!="function")throw new wr(l);return a=a===n?a:ie(a),ae(s,a)}function rE(s,a){if(typeof s!="function")throw new wr(l);return a=a==null?0:dn(ie(a),0),ae(function(u){var p=u[a],b=Bi(u,0,a);return p&&Li(b,p),or(s,this,b)})}function iE(s,a,u){var p=!0,b=!0;if(typeof s!="function")throw new wr(l);return je(u)&&(p="leading"in u?!!u.leading:p,b="trailing"in u?!!u.trailing:b),__(s,a,{leading:p,maxWait:a,trailing:b})}function sE(s){return u_(s,1)}function oE(s,a){return uh(Ku(a),s)}function aE(){if(!arguments.length)return[];var s=arguments[0];return ee(s)?s:[s]}function lE(s){return Er(s,E)}function cE(s,a){return a=typeof a=="function"?a:n,Er(s,E,a)}function uE(s){return Er(s,v|E)}function hE(s,a){return a=typeof a=="function"?a:n,Er(s,v|E,a)}function fE(s,a){return a==null||rp(s,a,yn(a))}function $r(s,a){return s===a||s!==s&&a!==a}var dE=kl($u),pE=kl(function(s,a){return s>=a}),fs=cp(function(){return arguments}())?cp:function(s){return Ze(s)&&Se.call(s,"callee")&&!Yd.call(s,"callee")},ee=J.isArray,_E=Rd?ar(Rd):Eb;function Jn(s){return s!=null&&Ll(s.length)&&!pi(s)}function tn(s){return Ze(s)&&Jn(s)}function gE(s){return s===!0||s===!1||Ze(s)&&Wn(s)==ki}var Ui=R1||wh,mE=Dd?ar(Dd):Ab;function yE(s){return Ze(s)&&s.nodeType===1&&!Yo(s)}function vE(s){if(s==null)return!0;if(Jn(s)&&(ee(s)||typeof s=="string"||typeof s.splice=="function"||Ui(s)||Js(s)||fs(s)))return!s.length;var a=Pn(s);if(a==ge||a==sr)return!s.size;if(jo(s))return!Vu(s).length;for(var u in s)if(Se.call(s,u))return!1;return!0}function bE(s,a){return Ho(s,a)}function wE(s,a,u){u=typeof u=="function"?u:n;var p=u?u(s,a):n;return p===n?Ho(s,a,n,u):!!p}function hh(s){if(!Ze(s))return!1;var a=Wn(s);return a==gn||a==Os||typeof s.message=="string"&&typeof s.name=="string"&&!Yo(s)}function xE(s){return typeof s=="number"&&Zd(s)}function pi(s){if(!je(s))return!1;var a=Wn(s);return a==Dr||a==Xi||a==_u||a==Je}function m_(s){return typeof s=="number"&&s==ie(s)}function Ll(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=ir}function je(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}function Ze(s){return s!=null&&typeof s=="object"}var y_=Od?ar(Od):kb;function EE(s,a){return s===a||Fu(s,a,eh(a))}function AE(s,a,u){return u=typeof u=="function"?u:n,Fu(s,a,eh(a),u)}function SE(s){return v_(s)&&s!=+s}function kE(s){if(cw(s))throw new Jt(o);return up(s)}function CE(s){return s===null}function TE(s){return s==null}function v_(s){return typeof s=="number"||Ze(s)&&Wn(s)==Ci}function Yo(s){if(!Ze(s)||Wn(s)!=cn)return!1;var a=ll(s);if(a===null)return!0;var u=Se.call(a,"constructor")&&a.constructor;return typeof u=="function"&&u instanceof u&&il.call(u)==A1}var fh=Pd?ar(Pd):Cb;function IE(s){return m_(s)&&s>=-ir&&s<=ir}var b_=Md?ar(Md):Tb;function $l(s){return typeof s=="string"||!ee(s)&&Ze(s)&&Wn(s)==ni}function cr(s){return typeof s=="symbol"||Ze(s)&&Wn(s)==ts}var Js=Ld?ar(Ld):Ib;function RE(s){return s===n}function DE(s){return Ze(s)&&Pn(s)==ri}function OE(s){return Ze(s)&&Wn(s)==un}var PE=kl(qu),ME=kl(function(s,a){return s<=a});function w_(s){if(!s)return[];if(Jn(s))return $l(s)?Mr(s):Xn(s);if($o&&s[$o])return f1(s[$o]());var a=Pn(s),u=a==ge?Cu:a==sr?el:to;return u(s)}function _i(s){if(!s)return s===0?s:0;if(s=kr(s),s===ln||s===-ln){var a=s<0?-1:1;return a*Ga}return s===s?s:0}function ie(s){var a=_i(s),u=a%1;return a===a?u?a-u:a:0}function x_(s){return s?ls(ie(s),0,mr):0}function kr(s){if(typeof s=="number")return s;if(cr(s))return Ds;if(je(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=je(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=Bd(s);var u=qs.test(s);return u||h.test(s)?Mo(s.slice(2),u?2:8):Vs.test(s)?Ds:+s}function E_(s){return Gr(s,tr(s))}function LE(s){return s?ls(ie(s),-ir,ir):s===0?s:0}function Ee(s){return s==null?"":lr(s)}var $E=Qs(function(s,a){if(jo(a)||Jn(a)){Gr(a,yn(a),s);return}for(var u in a)Se.call(a,u)&&Bo(s,u,a[u])}),A_=Qs(function(s,a){Gr(a,tr(a),s)}),Nl=Qs(function(s,a,u,p){Gr(a,tr(a),s,p)}),NE=Qs(function(s,a,u,p){Gr(a,yn(a),s,p)}),FE=fi(Pu);function VE(s,a){var u=Ys(s);return a==null?u:np(u,a)}var qE=ae(function(s,a){s=Oe(s);var u=-1,p=a.length,b=p>2?a[2]:n;for(b&&jn(a[0],a[1],b)&&(p=1);++u<p;)for(var A=a[u],I=tr(A),M=-1,W=I.length;++M<W;){var ot=I[M],at=s[ot];(at===n||$r(at,Ws[ot])&&!Se.call(s,ot))&&(s[ot]=A[ot])}return s}),BE=ae(function(s){return s.push(n,Bp),or(S_,n,s)});function UE(s,a){return Nd(s,Ht(a,3),Hr)}function zE(s,a){return Nd(s,Ht(a,3),Lu)}function HE(s,a){return s==null?s:Mu(s,Ht(a,3),tr)}function GE(s,a){return s==null?s:ap(s,Ht(a,3),tr)}function WE(s,a){return s&&Hr(s,Ht(a,3))}function jE(s,a){return s&&Lu(s,Ht(a,3))}function KE(s){return s==null?[]:yl(s,yn(s))}function YE(s){return s==null?[]:yl(s,tr(s))}function dh(s,a,u){var p=s==null?n:cs(s,a);return p===n?u:p}function QE(s,a){return s!=null&&Hp(s,a,vb)}function ph(s,a){return s!=null&&Hp(s,a,bb)}var ZE=$p(function(s,a,u){a!=null&&typeof a.toString!="function"&&(a=sl.call(a)),s[a]=u},gh(er)),XE=$p(function(s,a,u){a!=null&&typeof a.toString!="function"&&(a=sl.call(a)),Se.call(s,a)?s[a].push(u):s[a]=[u]},Ht),JE=ae(zo);function yn(s){return Jn(s)?tp(s):Vu(s)}function tr(s){return Jn(s)?tp(s,!0):Rb(s)}function tA(s,a){var u={};return a=Ht(a,3),Hr(s,function(p,b,A){ui(u,a(p,b,A),p)}),u}function eA(s,a){var u={};return a=Ht(a,3),Hr(s,function(p,b,A){ui(u,b,a(p,b,A))}),u}var nA=Qs(function(s,a,u){vl(s,a,u)}),S_=Qs(function(s,a,u,p){vl(s,a,u,p)}),rA=fi(function(s,a){var u={};if(s==null)return u;var p=!1;a=Be(a,function(A){return A=qi(A,s),p||(p=A.length>1),A}),Gr(s,Ju(s),u),p&&(u=Er(u,v|S|E,Zb));for(var b=a.length;b--;)Gu(u,a[b]);return u});function iA(s,a){return k_(s,Ml(Ht(a)))}var sA=fi(function(s,a){return s==null?{}:Ob(s,a)});function k_(s,a){if(s==null)return{};var u=Be(Ju(s),function(p){return[p]});return a=Ht(a),mp(s,u,function(p,b){return a(p,b[0])})}function oA(s,a,u){a=qi(a,s);var p=-1,b=a.length;for(b||(b=1,s=n);++p<b;){var A=s==null?n:s[Wr(a[p])];A===n&&(p=b,A=u),s=pi(A)?A.call(s):A}return s}function aA(s,a,u){return s==null?s:Go(s,a,u)}function lA(s,a,u,p){return p=typeof p=="function"?p:n,s==null?s:Go(s,a,u,p)}var C_=Vp(yn),T_=Vp(tr);function cA(s,a,u){var p=ee(s),b=p||Ui(s)||Js(s);if(a=Ht(a,4),u==null){var A=s&&s.constructor;b?u=p?new A:[]:je(s)?u=pi(A)?Ys(ll(s)):{}:u={}}return(b?br:Hr)(s,function(I,M,W){return a(u,I,M,W)}),u}function uA(s,a){return s==null?!0:Gu(s,a)}function hA(s,a,u){return s==null?s:xp(s,a,Ku(u))}function fA(s,a,u,p){return p=typeof p=="function"?p:n,s==null?s:xp(s,a,Ku(u),p)}function to(s){return s==null?[]:ku(s,yn(s))}function dA(s){return s==null?[]:ku(s,tr(s))}function pA(s,a,u){return u===n&&(u=a,a=n),u!==n&&(u=kr(u),u=u===u?u:0),a!==n&&(a=kr(a),a=a===a?a:0),ls(kr(s),a,u)}function _A(s,a,u){return a=_i(a),u===n?(u=a,a=0):u=_i(u),s=kr(s),wb(s,a,u)}function gA(s,a,u){if(u&&typeof u!="boolean"&&jn(s,a,u)&&(a=u=n),u===n&&(typeof a=="boolean"?(u=a,a=n):typeof s=="boolean"&&(u=s,s=n)),s===n&&a===n?(s=0,a=1):(s=_i(s),a===n?(a=s,s=0):a=_i(a)),s>a){var p=s;s=a,a=p}if(u||s%1||a%1){var b=Xd();return On(s+b*(a-s+yr("1e-"+((b+"").length-1))),a)}return Uu(s,a)}var mA=Zs(function(s,a,u){return a=a.toLowerCase(),s+(u?I_(a):a)});function I_(s){return _h(Ee(s).toLowerCase())}function R_(s){return s=Ee(s),s&&s.replace(m,a1).replace(Ct,"")}function yA(s,a,u){s=Ee(s),a=lr(a);var p=s.length;u=u===n?p:ls(ie(u),0,p);var b=u;return u-=a.length,u>=0&&s.slice(u,b)==a}function vA(s){return s=Ee(s),s&&Ka.test(s)?s.replace(Ms,l1):s}function bA(s){return s=Ee(s),s&&Qa.test(s)?s.replace($s,"\\$&"):s}var wA=Zs(function(s,a,u){return s+(u?"-":"")+a.toLowerCase()}),xA=Zs(function(s,a,u){return s+(u?" ":"")+a.toLowerCase()}),EA=Pp("toLowerCase");function AA(s,a,u){s=Ee(s),a=ie(a);var p=a?Hs(s):0;if(!a||p>=a)return s;var b=(a-p)/2;return Sl(fl(b),u)+s+Sl(hl(b),u)}function SA(s,a,u){s=Ee(s),a=ie(a);var p=a?Hs(s):0;return a&&p<a?s+Sl(a-p,u):s}function kA(s,a,u){s=Ee(s),a=ie(a);var p=a?Hs(s):0;return a&&p<a?Sl(a-p,u)+s:s}function CA(s,a,u){return u||a==null?a=0:a&&(a=+a),M1(Ee(s).replace(Qe,""),a||0)}function TA(s,a,u){return(u?jn(s,a,u):a===n)?a=1:a=ie(a),zu(Ee(s),a)}function IA(){var s=arguments,a=Ee(s[0]);return s.length<3?a:a.replace(s[1],s[2])}var RA=Zs(function(s,a,u){return s+(u?"_":"")+a.toLowerCase()});function DA(s,a,u){return u&&typeof u!="number"&&jn(s,a,u)&&(a=u=n),u=u===n?mr:u>>>0,u?(s=Ee(s),s&&(typeof a=="string"||a!=null&&!fh(a))&&(a=lr(a),!a&&zs(s))?Bi(Mr(s),0,u):s.split(a,u)):[]}var OA=Zs(function(s,a,u){return s+(u?" ":"")+_h(a)});function PA(s,a,u){return s=Ee(s),u=u==null?0:ls(ie(u),0,s.length),a=lr(a),s.slice(u,u+a.length)==a}function MA(s,a,u){var p=w.templateSettings;u&&jn(s,a,u)&&(a=n),s=Ee(s),a=Nl({},a,p,qp);var b=Nl({},a.imports,p.imports,qp),A=yn(b),I=ku(b,A),M,W,ot=0,at=a.interpolate||y,ht="__p += '",At=Tu((a.escape||y).source+"|"+at.source+"|"+(at===Ge?Fs:y).source+"|"+(a.evaluate||y).source+"|$","g"),Lt="//# sourceURL="+(Se.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Pr+"]")+`
`;s.replace(At,function(Wt,ce,he,ur,Kn,hr){return he||(he=ur),ht+=s.slice(ot,hr).replace(x,c1),ce&&(M=!0,ht+=`' +
__e(`+ce+`) +
'`),Kn&&(W=!0,ht+=`';
`+Kn+`;
__p += '`),he&&(ht+=`' +
((__t = (`+he+`)) == null ? '' : __t) +
'`),ot=hr+Wt.length,Wt}),ht+=`';
`;var Gt=Se.call(a,"variable")&&a.variable;if(!Gt)ht=`with (obj) {
`+ht+`
}
`;else if(Un.test(Gt))throw new Jt(c);ht=(W?ht.replace(rs,""):ht).replace(Ps,"$1").replace(Ii,"$1;"),ht="function("+(Gt||"obj")+`) {
`+(Gt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(M?", __e = _.escape":"")+(W?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ht+`return __p
}`;var se=O_(function(){return ve(A,Lt+"return "+ht).apply(n,I)});if(se.source=ht,hh(se))throw se;return se}function LA(s){return Ee(s).toLowerCase()}function $A(s){return Ee(s).toUpperCase()}function NA(s,a,u){if(s=Ee(s),s&&(u||a===n))return Bd(s);if(!s||!(a=lr(a)))return s;var p=Mr(s),b=Mr(a),A=Ud(p,b),I=zd(p,b)+1;return Bi(p,A,I).join("")}function FA(s,a,u){if(s=Ee(s),s&&(u||a===n))return s.slice(0,Gd(s)+1);if(!s||!(a=lr(a)))return s;var p=Mr(s),b=zd(p,Mr(a))+1;return Bi(p,0,b).join("")}function VA(s,a,u){if(s=Ee(s),s&&(u||a===n))return s.replace(Qe,"");if(!s||!(a=lr(a)))return s;var p=Mr(s),b=Ud(p,Mr(a));return Bi(p,b).join("")}function qA(s,a){var u=oe,p=Pe;if(je(a)){var b="separator"in a?a.separator:b;u="length"in a?ie(a.length):u,p="omission"in a?lr(a.omission):p}s=Ee(s);var A=s.length;if(zs(s)){var I=Mr(s);A=I.length}if(u>=A)return s;var M=u-Hs(p);if(M<1)return p;var W=I?Bi(I,0,M).join(""):s.slice(0,M);if(b===n)return W+p;if(I&&(M+=W.length-M),fh(b)){if(s.slice(M).search(b)){var ot,at=W;for(b.global||(b=Tu(b.source,Ee(Po.exec(b))+"g")),b.lastIndex=0;ot=b.exec(at);)var ht=ot.index;W=W.slice(0,ht===n?M:ht)}}else if(s.indexOf(lr(b),M)!=M){var At=W.lastIndexOf(b);At>-1&&(W=W.slice(0,At))}return W+p}function BA(s){return s=Ee(s),s&&Oo.test(s)?s.replace(Ri,g1):s}var UA=Zs(function(s,a,u){return s+(u?" ":"")+a.toUpperCase()}),_h=Pp("toUpperCase");function D_(s,a,u){return s=Ee(s),a=u?n:a,a===n?h1(s)?v1(s):n1(s):s.match(a)||[]}var O_=ae(function(s,a){try{return or(s,n,a)}catch(u){return hh(u)?u:new Jt(u)}}),zA=fi(function(s,a){return br(a,function(u){u=Wr(u),ui(s,u,ch(s[u],s))}),s});function HA(s){var a=s==null?0:s.length,u=Ht();return s=a?Be(s,function(p){if(typeof p[1]!="function")throw new wr(l);return[u(p[0]),p[1]]}):[],ae(function(p){for(var b=-1;++b<a;){var A=s[b];if(or(A[0],this,p))return or(A[1],this,p)}})}function GA(s){return gb(Er(s,v))}function gh(s){return function(){return s}}function WA(s,a){return s==null||s!==s?a:s}var jA=Lp(),KA=Lp(!0);function er(s){return s}function mh(s){return hp(typeof s=="function"?s:Er(s,v))}function YA(s){return dp(Er(s,v))}function QA(s,a){return pp(s,Er(a,v))}var ZA=ae(function(s,a){return function(u){return zo(u,s,a)}}),XA=ae(function(s,a){return function(u){return zo(s,u,a)}});function yh(s,a,u){var p=yn(a),b=yl(a,p);u==null&&!(je(a)&&(b.length||!p.length))&&(u=a,a=s,s=this,b=yl(a,yn(a)));var A=!(je(u)&&"chain"in u)||!!u.chain,I=pi(s);return br(b,function(M){var W=a[M];s[M]=W,I&&(s.prototype[M]=function(){var ot=this.__chain__;if(A||ot){var at=s(this.__wrapped__),ht=at.__actions__=Xn(this.__actions__);return ht.push({func:W,args:arguments,thisArg:s}),at.__chain__=ot,at}return W.apply(s,Li([this.value()],arguments))})}),s}function JA(){return We._===this&&(We._=S1),this}function vh(){}function tS(s){return s=ie(s),ae(function(a){return _p(a,s)})}var eS=Qu(Be),nS=Qu($d),rS=Qu(wu);function P_(s){return rh(s)?xu(Wr(s)):Pb(s)}function iS(s){return function(a){return s==null?n:cs(s,a)}}var sS=Np(),oS=Np(!0);function bh(){return[]}function wh(){return!1}function aS(){return{}}function lS(){return""}function cS(){return!0}function uS(s,a){if(s=ie(s),s<1||s>ir)return[];var u=mr,p=On(s,mr);a=Ht(a),s-=mr;for(var b=Su(p,a);++u<s;)a(u);return b}function hS(s){return ee(s)?Be(s,Wr):cr(s)?[s]:Xn(Jp(Ee(s)))}function fS(s){var a=++E1;return Ee(s)+a}var dS=Al(function(s,a){return s+a},0),pS=Zu("ceil"),_S=Al(function(s,a){return s/a},1),gS=Zu("floor");function mS(s){return s&&s.length?ml(s,er,$u):n}function yS(s,a){return s&&s.length?ml(s,Ht(a,2),$u):n}function vS(s){return Vd(s,er)}function bS(s,a){return Vd(s,Ht(a,2))}function wS(s){return s&&s.length?ml(s,er,qu):n}function xS(s,a){return s&&s.length?ml(s,Ht(a,2),qu):n}var ES=Al(function(s,a){return s*a},1),AS=Zu("round"),SS=Al(function(s,a){return s-a},0);function kS(s){return s&&s.length?Au(s,er):0}function CS(s,a){return s&&s.length?Au(s,Ht(a,2)):0}return w.after=Yx,w.ary=u_,w.assign=$E,w.assignIn=A_,w.assignInWith=Nl,w.assignWith=NE,w.at=FE,w.before=h_,w.bind=ch,w.bindAll=zA,w.bindKey=f_,w.castArray=aE,w.chain=a_,w.chunk=gw,w.compact=mw,w.concat=yw,w.cond=HA,w.conforms=GA,w.constant=gh,w.countBy=kx,w.create=VE,w.curry=d_,w.curryRight=p_,w.debounce=__,w.defaults=qE,w.defaultsDeep=BE,w.defer=Qx,w.delay=Zx,w.difference=vw,w.differenceBy=bw,w.differenceWith=ww,w.drop=xw,w.dropRight=Ew,w.dropRightWhile=Aw,w.dropWhile=Sw,w.fill=kw,w.filter=Tx,w.flatMap=Dx,w.flatMapDeep=Ox,w.flatMapDepth=Px,w.flatten=r_,w.flattenDeep=Cw,w.flattenDepth=Tw,w.flip=Xx,w.flow=jA,w.flowRight=KA,w.fromPairs=Iw,w.functions=KE,w.functionsIn=YE,w.groupBy=Mx,w.initial=Dw,w.intersection=Ow,w.intersectionBy=Pw,w.intersectionWith=Mw,w.invert=ZE,w.invertBy=XE,w.invokeMap=$x,w.iteratee=mh,w.keyBy=Nx,w.keys=yn,w.keysIn=tr,w.map=Dl,w.mapKeys=tA,w.mapValues=eA,w.matches=YA,w.matchesProperty=QA,w.memoize=Pl,w.merge=nA,w.mergeWith=S_,w.method=ZA,w.methodOf=XA,w.mixin=yh,w.negate=Ml,w.nthArg=tS,w.omit=rA,w.omitBy=iA,w.once=Jx,w.orderBy=Fx,w.over=eS,w.overArgs=tE,w.overEvery=nS,w.overSome=rS,w.partial=uh,w.partialRight=g_,w.partition=Vx,w.pick=sA,w.pickBy=k_,w.property=P_,w.propertyOf=iS,w.pull=Fw,w.pullAll=s_,w.pullAllBy=Vw,w.pullAllWith=qw,w.pullAt=Bw,w.range=sS,w.rangeRight=oS,w.rearg=eE,w.reject=Ux,w.remove=Uw,w.rest=nE,w.reverse=ah,w.sampleSize=Hx,w.set=aA,w.setWith=lA,w.shuffle=Gx,w.slice=zw,w.sortBy=Kx,w.sortedUniq=Qw,w.sortedUniqBy=Zw,w.split=DA,w.spread=rE,w.tail=Xw,w.take=Jw,w.takeRight=tx,w.takeRightWhile=ex,w.takeWhile=nx,w.tap=mx,w.throttle=iE,w.thru=Rl,w.toArray=w_,w.toPairs=C_,w.toPairsIn=T_,w.toPath=hS,w.toPlainObject=E_,w.transform=cA,w.unary=sE,w.union=rx,w.unionBy=ix,w.unionWith=sx,w.uniq=ox,w.uniqBy=ax,w.uniqWith=lx,w.unset=uA,w.unzip=lh,w.unzipWith=o_,w.update=hA,w.updateWith=fA,w.values=to,w.valuesIn=dA,w.without=cx,w.words=D_,w.wrap=oE,w.xor=ux,w.xorBy=hx,w.xorWith=fx,w.zip=dx,w.zipObject=px,w.zipObjectDeep=_x,w.zipWith=gx,w.entries=C_,w.entriesIn=T_,w.extend=A_,w.extendWith=Nl,yh(w,w),w.add=dS,w.attempt=O_,w.camelCase=mA,w.capitalize=I_,w.ceil=pS,w.clamp=pA,w.clone=lE,w.cloneDeep=uE,w.cloneDeepWith=hE,w.cloneWith=cE,w.conformsTo=fE,w.deburr=R_,w.defaultTo=WA,w.divide=_S,w.endsWith=yA,w.eq=$r,w.escape=vA,w.escapeRegExp=bA,w.every=Cx,w.find=Ix,w.findIndex=e_,w.findKey=UE,w.findLast=Rx,w.findLastIndex=n_,w.findLastKey=zE,w.floor=gS,w.forEach=l_,w.forEachRight=c_,w.forIn=HE,w.forInRight=GE,w.forOwn=WE,w.forOwnRight=jE,w.get=dh,w.gt=dE,w.gte=pE,w.has=QE,w.hasIn=ph,w.head=i_,w.identity=er,w.includes=Lx,w.indexOf=Rw,w.inRange=_A,w.invoke=JE,w.isArguments=fs,w.isArray=ee,w.isArrayBuffer=_E,w.isArrayLike=Jn,w.isArrayLikeObject=tn,w.isBoolean=gE,w.isBuffer=Ui,w.isDate=mE,w.isElement=yE,w.isEmpty=vE,w.isEqual=bE,w.isEqualWith=wE,w.isError=hh,w.isFinite=xE,w.isFunction=pi,w.isInteger=m_,w.isLength=Ll,w.isMap=y_,w.isMatch=EE,w.isMatchWith=AE,w.isNaN=SE,w.isNative=kE,w.isNil=TE,w.isNull=CE,w.isNumber=v_,w.isObject=je,w.isObjectLike=Ze,w.isPlainObject=Yo,w.isRegExp=fh,w.isSafeInteger=IE,w.isSet=b_,w.isString=$l,w.isSymbol=cr,w.isTypedArray=Js,w.isUndefined=RE,w.isWeakMap=DE,w.isWeakSet=OE,w.join=Lw,w.kebabCase=wA,w.last=Sr,w.lastIndexOf=$w,w.lowerCase=xA,w.lowerFirst=EA,w.lt=PE,w.lte=ME,w.max=mS,w.maxBy=yS,w.mean=vS,w.meanBy=bS,w.min=wS,w.minBy=xS,w.stubArray=bh,w.stubFalse=wh,w.stubObject=aS,w.stubString=lS,w.stubTrue=cS,w.multiply=ES,w.nth=Nw,w.noConflict=JA,w.noop=vh,w.now=Ol,w.pad=AA,w.padEnd=SA,w.padStart=kA,w.parseInt=CA,w.random=gA,w.reduce=qx,w.reduceRight=Bx,w.repeat=TA,w.replace=IA,w.result=oA,w.round=AS,w.runInContext=U,w.sample=zx,w.size=Wx,w.snakeCase=RA,w.some=jx,w.sortedIndex=Hw,w.sortedIndexBy=Gw,w.sortedIndexOf=Ww,w.sortedLastIndex=jw,w.sortedLastIndexBy=Kw,w.sortedLastIndexOf=Yw,w.startCase=OA,w.startsWith=PA,w.subtract=SS,w.sum=kS,w.sumBy=CS,w.template=MA,w.times=uS,w.toFinite=_i,w.toInteger=ie,w.toLength=x_,w.toLower=LA,w.toNumber=kr,w.toSafeInteger=LE,w.toString=Ee,w.toUpper=$A,w.trim=NA,w.trimEnd=FA,w.trimStart=VA,w.truncate=qA,w.unescape=BA,w.uniqueId=fS,w.upperCase=UA,w.upperFirst=_h,w.each=l_,w.eachRight=c_,w.first=i_,yh(w,function(){var s={};return Hr(w,function(a,u){Se.call(w.prototype,u)||(s[u]=a)}),s}(),{chain:!1}),w.VERSION=r,br(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){w[s].placeholder=w}),br(["drop","take"],function(s,a){ue.prototype[s]=function(u){u=u===n?1:dn(ie(u),0);var p=this.__filtered__&&!a?new ue(this):this.clone();return p.__filtered__?p.__takeCount__=On(u,p.__takeCount__):p.__views__.push({size:On(u,mr),type:s+(p.__dir__<0?"Right":"")}),p},ue.prototype[s+"Right"]=function(u){return this.reverse()[s](u).reverse()}}),br(["filter","map","takeWhile"],function(s,a){var u=a+1,p=u==bt||u==re;ue.prototype[s]=function(b){var A=this.clone();return A.__iteratees__.push({iteratee:Ht(b,3),type:u}),A.__filtered__=A.__filtered__||p,A}}),br(["head","last"],function(s,a){var u="take"+(a?"Right":"");ue.prototype[s]=function(){return this[u](1).value()[0]}}),br(["initial","tail"],function(s,a){var u="drop"+(a?"":"Right");ue.prototype[s]=function(){return this.__filtered__?new ue(this):this[u](1)}}),ue.prototype.compact=function(){return this.filter(er)},ue.prototype.find=function(s){return this.filter(s).head()},ue.prototype.findLast=function(s){return this.reverse().find(s)},ue.prototype.invokeMap=ae(function(s,a){return typeof s=="function"?new ue(this):this.map(function(u){return zo(u,s,a)})}),ue.prototype.reject=function(s){return this.filter(Ml(Ht(s)))},ue.prototype.slice=function(s,a){s=ie(s);var u=this;return u.__filtered__&&(s>0||a<0)?new ue(u):(s<0?u=u.takeRight(-s):s&&(u=u.drop(s)),a!==n&&(a=ie(a),u=a<0?u.dropRight(-a):u.take(a-s)),u)},ue.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},ue.prototype.toArray=function(){return this.take(mr)},Hr(ue.prototype,function(s,a){var u=/^(?:filter|find|map|reject)|While$/.test(a),p=/^(?:head|last)$/.test(a),b=w[p?"take"+(a=="last"?"Right":""):a],A=p||/^find/.test(a);b&&(w.prototype[a]=function(){var I=this.__wrapped__,M=p?[1]:arguments,W=I instanceof ue,ot=M[0],at=W||ee(I),ht=function(ce){var he=b.apply(w,Li([ce],M));return p&&At?he[0]:he};at&&u&&typeof ot=="function"&&ot.length!=1&&(W=at=!1);var At=this.__chain__,Lt=!!this.__actions__.length,Gt=A&&!At,se=W&&!Lt;if(!A&&at){I=se?I:new ue(this);var Wt=s.apply(I,M);return Wt.__actions__.push({func:Rl,args:[ht],thisArg:n}),new xr(Wt,At)}return Gt&&se?s.apply(this,M):(Wt=this.thru(ht),Gt?p?Wt.value()[0]:Wt.value():Wt)})}),br(["pop","push","shift","sort","splice","unshift"],function(s){var a=nl[s],u=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",p=/^(?:pop|shift)$/.test(s);w.prototype[s]=function(){var b=arguments;if(p&&!this.__chain__){var A=this.value();return a.apply(ee(A)?A:[],b)}return this[u](function(I){return a.apply(ee(I)?I:[],b)})}}),Hr(ue.prototype,function(s,a){var u=w[a];if(u){var p=u.name+"";Se.call(Ks,p)||(Ks[p]=[]),Ks[p].push({name:a,func:u})}}),Ks[El(n,ut).name]=[{name:"wrapper",func:n}],ue.prototype.clone=B1,ue.prototype.reverse=U1,ue.prototype.value=z1,w.prototype.at=yx,w.prototype.chain=vx,w.prototype.commit=bx,w.prototype.next=wx,w.prototype.plant=Ex,w.prototype.reverse=Ax,w.prototype.toJSON=w.prototype.valueOf=w.prototype.value=Sx,w.prototype.first=w.prototype.head,$o&&(w.prototype[$o]=xx),w},Gs=b1();is?((is.exports=Gs)._=Gs,mu._=Gs):We._=Gs}).call(Qo)})(tc,tc.exports);var $S=tc.exports;const ze=Vm($S);const NS=["annotated","id"],FS={key:0},VS={class:"mb3 b tracked-light"},qS={class:"tc"},BS=["name","id","value"],US=["for"],zS={key:1},HS={class:"mb3 b tracked-light"},GS={class:"tc"},WS={class:"column-severity w-33"},jS=["name","id"],KS=["for"],YS={class:"column-severity w-33"},QS=["name","id"],ZS=["for"],XS={class:"column-severity w-33"},JS=["name","id"],tk=["for"],ek={key:2},nk={class:"mt0 pt2 mb3 b tracked-light"},rk=["name","id"],ik=["for"],sk=["name","id"],ok=["for"],ak={key:3,class:"flex items-center mt2"},lk={class:"mb3 b tracked-light"},ck=["name","id","placeholder"],uk=["for"],hk={key:4},fk={class:"mt0 pt2 mb3 b tracked-light"},dk=["name","id","placeholder"],pk=["for"],_k={props:["edit_state","question","edit_type","parent_show_next_question","set_edit_state","update_edit_state_parent","empty_question_state","question_state","force_update","isRoot","parent_div_name","config"],data(){let e=16;if("options"in this.question)switch(this.question.options.length){case 1:e=50;break;case 2:e=50;break;case 3:e=33;break;case 4:e=25;break;case 5:e=16;break;case 6:e=16;break}let t;return this.isRoot==="true"?t=`question-${this.edit_type.name}-${this.question.name}`:t=`${this.parent_div_name}-${this.question.name}`,{col_size:e,div_name:t}},methods:{has_children(){return this.isObject(this.question.options)},show_next_question(e){let t=e.target.value;if(this.has_children()){for(let r=0;r<this.question.options.length;r++){let i=this.question.options[r],o=`.${this.div_name}-${i.name}`;$(o).hide(300)}let n=`.${this.div_name}-${t}`;$(n).is(":visible")||$(n).slideDown(300)}},update_edit_state(e){if(e===""&&(e=null),this.isRoot==="true"){let t=ze.cloneDeep(this.edit_state);t[this.edit_type.name][this.question.name]=this.empty_question_state,this.has_children()?t[this.edit_type.name][this.question.name].val=e:t[this.edit_type.name][this.question.name]=e,this.set_edit_state(t)}else{let t=ze.cloneDeep(this.question_state);t=this.empty_question_state,this.has_children()?t.val=e:t=e,this.update_edit_state_parent(this.question.name,t)}},update_edit_state_child(e,t){let n=ze.cloneDeep(this.question_state);if(n[e]=t,this.isRoot==="true"){let r=ze.cloneDeep(this.edit_state);r[this.edit_type.name][this.question.name]=this.empty_question_state,r[this.edit_type.name][this.question.name]=n,this.set_edit_state(r)}else this.update_edit_state_parent(this.question.name,n)},getClassNames(){let e=[];return e.push(this.div_name),this.isRoot!=="true"&&e.push("child-question"),e},child_state(e){return this.has_children()&&typeof this.question.options!="string"?this.question_state[e.name]:this.question_state},empty_child_state(e){return this.has_children()&&typeof this.question.options!="string"?this.empty_question_state[e.name]:this.empty_question_state},isAnnotated(){return!this.has_children()&&this.question_state!=null&&this.question_state.val==null?!0:!(this.question_state==null||this.question_state.val==null)}},computed:{isObject(){return e=>typeof e=="object"&&e!==null}}},gk=Object.assign(_k,{__name:"Question",setup(e){return(t,n)=>{const r=TS("Question",!0);return yt(),xt("div",{class:pe(t.getClassNames()),annotated:t.isAnnotated(),id:`question_${e.edit_type.name}_${e.question.name}`},[t.isObject(e.question.options)?(yt(),xt("div",FS,[H("p",VS,Tt(e.question.question),1),H("div",qS,[(yt(!0),xt(qr,null,yi(e.question.options,i=>(yt(),xt("div",{class:pe(`column-severity wmin-${t.col_size}`),key:i.id},[H("input",{onClick:n[0]||(n[0]=(...o)=>t.show_next_question&&t.show_next_question(...o)),class:"checkbox-tools checkbox-tools-severity",type:"radio",name:e.question.name,id:`${t.div_name}-${i.name}`,value:i.name,onInput:n[1]||(n[1]=o=>t.update_edit_state(o.target.value))},null,40,BS),H("label",{class:pe(`for-checkbox-tools-severity question-${e.edit_type.name}`),for:`${t.div_name}-${i.name}`},Tt(i.label),11,US)],2))),128))]),(yt(!0),xt(qr,null,yi(e.question.options,i=>(yt(),xt("div",{key:i.id},[sn(r,{edit_state:e.edit_state,question_state:t.child_state(i),empty_question_state:t.empty_child_state(i),question:i,edit_type:e.edit_type,set_edit_state:e.set_edit_state,parent_show_next_question:t.show_next_question,isRoot:"false",update_edit_state_parent:t.update_edit_state_child,parent_div_name:t.div_name,config:e.config},null,8,["edit_state","question_state","empty_question_state","question","edit_type","set_edit_state","parent_show_next_question","update_edit_state_parent","parent_div_name","config"])]))),128))])):ne("",!0),e.question.options==="likert-3"?(yt(),xt("div",zS,[H("p",HS,Tt(e.question.question),1),H("div",GS,[H("div",WS,[H("input",{onClick:n[2]||(n[2]=(...i)=>t.show_next_question&&t.show_next_question(...i)),class:"checkbox-tools checkbox-tools-severity",type:"radio",name:`${t.div_name}-severity`,id:`${t.div_name}-severity-1`,value:"minor",onInput:n[3]||(n[3]=i=>t.update_edit_state(i.target.value))},null,40,jS),H("label",{class:pe(`for-checkbox-tools-severity question-${e.edit_type.name}`),for:`${t.div_name}-severity-1`},Tt(e.config.interface_text.questions.likert_1),11,KS)]),H("div",YS,[H("input",{onClick:n[4]||(n[4]=(...i)=>t.show_next_question&&t.show_next_question(...i)),class:"checkbox-tools checkbox-tools-severity",type:"radio",name:`${t.div_name}-severity`,id:`${t.div_name}-severity-2`,value:"somewhat",onInput:n[5]||(n[5]=i=>t.update_edit_state(i.target.value))},null,40,QS),H("label",{class:pe(`for-checkbox-tools-severity question-${e.edit_type.name}`),for:`${t.div_name}-severity-2`},Tt(e.config.interface_text.questions.likert_2),11,ZS)]),H("div",XS,[H("input",{onClick:n[6]||(n[6]=(...i)=>t.show_next_question&&t.show_next_question(...i)),class:"checkbox-tools checkbox-tools-severity",type:"radio",name:`${t.div_name}-severity`,id:`${t.div_name}-severity-3`,value:"a lot",onInput:n[7]||(n[7]=i=>t.update_edit_state(i.target.value))},null,40,JS),H("label",{class:pe(`for-checkbox-tools-severity question-${e.edit_type.name}`),for:`${t.div_name}-severity-3`},Tt(e.config.interface_text.questions.likert_3),11,tk)])])])):ne("",!0),e.question.options==="binary"?(yt(),xt("div",ek,[H("p",nk,[ke(Tt(e.question.question)+" ",1),H("input",{class:"checkbox-tools-yes-no",type:"radio",name:`${t.div_name}-yes-no`,id:`${t.div_name}-yes`,value:"yes",onInput:n[8]||(n[8]=i=>t.update_edit_state(i.target.value))},null,40,rk),H("label",{class:pe(`normal for-checkbox-tools-yes-no question-${e.edit_type.name}`),for:`${t.div_name}-yes`},Tt(e.config.interface_text.questions.binary_yes),11,ik),H("input",{class:"checkbox-tools-yes-no",type:"radio",name:`${t.div_name}-yes-no`,id:`${t.div_name}-no`,value:"no",onInput:n[9]||(n[9]=i=>t.update_edit_state(i.target.value))},null,40,sk),H("label",{class:pe(`normal for-checkbox-tools-yes-no question-${e.edit_type.name}`),for:`${t.div_name}-no`},Tt(e.config.interface_text.questions.binary_no),11,ok)])])):ne("",!0),e.question.options==="textbox"?(yt(),xt("div",ak,[H("p",lk,Tt(e.question.question),1),H("input",{type:"text",class:pe(["question-textbox","db border-box hover-black ba b--black-20 pa2 br2 ml3 flex-auto"]),name:`${t.div_name}-textbox`,id:`${t.div_name}`,placeholder:e.config.interface_text.questions.textbox_placeholder,onInput:n[10]||(n[10]=i=>t.update_edit_state(i.target.value))},null,40,ck),H("label",{class:pe(`normal for-question-textbox question-${e.edit_type.name}`),for:`${t.div_name}`},null,10,uk)])):ne("",!0),e.question.options==="textarea"?(yt(),xt("div",hk,[H("p",fk,Tt(e.question.question),1),H("textarea",{class:pe(["question-textarea","db border-box hover-black w-100 ba b--black-20 pa2 br2 mb2"]),name:`${t.div_name}-textarea`,id:`${t.div_name}`,placeholder:e.config.interface_text.questions.textbox_placeholder,onInput:n[11]||(n[11]=i=>t.update_edit_state(i.target.value))},null,40,dk),H("label",{class:pe(`normal for-question-textarea question-${e.edit_type.name}`),for:`${t.div_name}`},null,10,pk)])):ne("",!0)],10,NS)}}}),$_=qm(gk,[["__scopeId","data-v-206bd832"]]),mk={class:"quality-selection-divs"},yk={class:"quality-selection w-100",id:"add_an_edit"},vk={id:"dropdown-button-container"},bk={class:"over-hide z-bigger mt2 editor-container"},wk={class:"f3 annotation-label ttu mv1"},xk=H("i",{class:"fa-solid fa-plus"},null,-1),Ek={class:"row"},Ak={class:"mb2 b tracked-light"},Sk={class:"tc mb3"},kk=["id","value"],Ck=["for"],Tk=["data-category"],Ik={key:0},Rk={key:0},Dk={class:"mt0 mb2 b tracked-light"},Ok={class:"tracked-light lh-paras-2"},Pk=["innerHTML"],Mk={key:1},Lk={class:"mt0 mb2 b tracked-light"},$k={class:"tracked-light lh-paras-2"},Nk=["innerHTML"],Fk={key:2},Vk=["data-category"],qk={class:"mt0 mb2 b tracked-light"},Bk={class:"tracked-light lh-paras-2"},Uk=["innerHTML"],zk={key:3},Hk=H("hr",{class:"mv3"},null,-1),Gk=H("p",{class:"mb2 b tracked-light"},[H("i",null,"Please provide details for this edit.")],-1),Wk={class:"buttons tc mt2"},jk=H("i",{class:"fa-solid fa-close"},null,-1),Kk=["disabled"],Yk=H("i",{class:"fa-solid fa-check"},null,-1),Qk={key:0,id:"boundary_edit_panel",style:{display:"none"}},Zk={class:"over-hide z-bigger mt3 editor-container"},Xk={class:"f3 annotation-label ttu mv1"},Jk=H("i",{class:"fa-solid fa-expand-arrows-alt"},null,-1),tC={class:"tc mb3"},eC={class:"mb2 b tracked-light"},nC={key:0},rC=H("p",{class:"tracked-light lh-paras-2 mb2"},[H("strong",null,"Selected evidences:")],-1),iC=["innerHTML"],sC={key:0,class:"f6 gray mt2"},oC=H("i",null,"Click on text to add spans. Each span will appear with an ✘ to remove it.",-1),aC=[oC],lC={key:1,class:"tracked-light lh-paras-2"},cC=["innerHTML"],uC={class:"buttons tc mt2"},hC=H("i",{class:"fa-solid fa-close"},null,-1),fC=H("i",{class:"fa-solid fa-check"},null,-1),dC=["id","data-category"],pC={id:"dropdown-button-container"},_C={class:"over-hide z-bigger mt3 editor-container"},gC={class:"f3 annotation-label ttu mv1"},mC=H("i",{class:"fa-solid fa-pencil"},null,-1),yC=H("div",{class:"single_part"},null,-1),vC={class:"f4 mt0 mb2 tl"},bC=["innerHTML"],wC=["innerHTML"],xC=["innerHTML"],EC={class:"row"},AC={class:"buttons tc"},SC=["onClick"],kC=H("i",{class:"fa-solid fa-close"},null,-1),CC=["onClick","disabled"],TC=H("i",{class:"fa-solid fa-check"},null,-1),IC={props:["edits_dict","hits_data","current_hit","selected_edits_html","selected_edits","selected_state","set_span_text","set_span_indices","set_hits_data","refresh_interface_edit","editor_open","set_editor_state","annotating_edit_span_category_id","set_annotating_edit_span_category_id","annotating_edit_span","set_annotating_edit_span","set_hit_box_config","config","boundary_editing_mode","boundary_editing_edit","original_boundary","set_boundary_editing_mode","set_boundary_editing_edit","set_original_boundary","remove_selected"],data(){let e=this.initalize_edit_state(),t=this.initalize_edit_state();return{force_update:!1,selected_category:null,edit_state:e,new_edit_state:t,empty_edit_state:this.initalize_edit_state()}},watch:{config(){this.edit_state=this.initalize_edit_state(),this.new_edit_state=this.initalize_edit_state(),this.empty_edit_state=this.initalize_edit_state(),this.fix_edit_box_formatting()},editor_open(){this.fix_edit_box_formatting()}},methods:{fix_edit_box_formatting(){let e=$(".edit-box label"),t=0,n=0;for(let r=0;r<e.length;r++){const i=e[r].offsetHeight;i>n&&(n=i,t+=1)}t>0&&($(".edit-box label").css("justify-content","flex-start"),$(".edit-box label").css("height",n-24+"px"))},parse_options(e){if(typeof e!="object")return null;let t={};for(const n in e)t.val=null,t[e[n].name]=this.parse_options(e[n].options);return t},initalize_edit_state(){let e={};for(const t of this.config.edits)e[t.name]=this.parse_options(t.annotation);return e},set_edit_state(e){this.edit_state=e,this.force_update=!this.force_update},set_new_edit_state(e){this.new_edit_state=e,this.force_update=!this.force_update},force_update_f(){this.force_update=!this.force_update},getCurrentExtractedValue(e,t){if(this.edit_state[e]&&this.edit_state[e][t]&&(this.edit_state[e][t].response||this.edit_state[e][t].prefilled_response))return this.edit_state[e][t].response||this.edit_state[e][t].prefilled_response;if(this.annotating_edit_span_category_id){const n=parseInt(this.annotating_edit_span_category_id.split("-")[1]),r=this.annotating_edit_span_category_id.split("-")[0],i=this.hits_data[this.current_hit-1];if(i&&i.edits){const o=i.edits.find(l=>l.category===r&&l.id===n);if(o&&o.annotation&&o.annotation[t])return o.annotation[t]}}return"No value extracted yet"},cancel_click(){if($(".icon-default").removeClass("open"),this.selected_category){const e=this.selected_category;$(`.${e}`).removeClass(`white bg-${e} bg-${e}-light`),$(`.${e}_below`).removeClass(`white bg-${e} bg-${e}-light`),this.hits_data[this.current_hit-1].edits.forEach(t=>{if(t.category===e){const n=`${e}-${t.id}`,i=t.annotation&&t.annotation!=null?`txt-${e}`:`txt-${e}-light`;$(`.${e}_below[data-id='${n}']`).addClass(i)}})}this.set_annotating_edit_span_category_id(null),this.set_annotating_edit_span(null,"source"),this.set_annotating_edit_span(null,"target"),this.set_annotating_edit_span(null,"composite"),this.refresh_edit()},save_click(){let e=ze.cloneDeep(this.hits_data);$(".icon-default").removeClass("open"),this.set_editor_state(!this.editor_open);let t=this.selected_category;const n=e[this.current_hit-1].edits;let r=0;for(const c of n)c.category==t&&parseInt(c.id)>r&&(r=parseInt(c.id));const i=this.config.edits.find(c=>c.name===t),o=ze.cloneDeep(this.new_edit_state[t]);let l={category:t,id:r+1,annotation:this.removeNullElements(o)};if((i.type==null||i.type=="single_span"||i.type=="multi_span")&&(i.enable_input&&(l.input_idx=i.type!=="multi_span"?[this.selected_state.source_idx]:this.selected_state.source_idx),i.enable_output&&(l.output_idx=i.type!=="multi_span"?[this.selected_state.target_idx]:this.selected_state.target_idx)),i.type=="composite"){let c=[];for(let f of this.selected_edits){let d={id:f.id,category:f.category};f.input_idx&&(d.input_idx=f.input_idx),f.output_idx&&(d.output_idx=f.output_idx),c.push(d)}l.constituent_edits=c;for(let f of c)e[this.current_hit-1].edits=e[this.current_hit-1].edits.filter(d=>d.category!==f.category||d.id!==f.id)}e[this.current_hit-1].edits.push(l),this.set_hits_data(e),this.set_annotating_edit_span_category_id(null),this.set_annotating_edit_span(null,"source"),this.set_annotating_edit_span(null,"target"),this.set_annotating_edit_span(null,"composite"),this.refresh_edit()},cancel_annotation_click(e,t){const n=this.annotating_edit_span_category_id;if(n==null){console.warn("No annotation span ID found, cannot cancel annotation");return}$(".icon-default").removeClass("open"),this.reset_annotation_colors(e,n),$(`.edit-container[data-edit-id='${e}-${n}']`).css("background-color",""),this.set_hits_data(ze.cloneDeep(this.hits_data)),this.refresh_edit()},removeNullElements(e){if(typeof e!="object"||e===null)return e;if(Array.isArray(e))return e.map(r=>this.removeNullElements(r)).filter(r=>r!==null);const t={};let n=!1;for(const r in e)if(e.hasOwnProperty(r)){if(r==="val"&&(e[r]===null||e[r]===""))continue;const i=this.removeNullElements(e[r]);i!==null&&(t[r]=i,n=!0)}return t.val===void 0&&Object.keys(t).length===0?null:n?t:null},save_annotation_click(e,t){let n=this.annotating_edit_span_category_id;if(n==null){console.error("No annotating edit span category ID found");return}let r=ze.cloneDeep(this.hits_data),i=ze.cloneDeep(this.edit_state[e]),o=r[this.current_hit-1].edits.find(l=>l.category===e&&l.id===n);o.annotation=this.removeNullElements(i),this.reset_annotation_colors(e,n),$(`.edit-container[data-edit-id='${e}-${n}']`).css("background-color",""),this.set_hits_data(r),this.refresh_edit()},cancel_boundary_edit(){const{category:e,type:t}=this.boundary_editing_edit,n=t==="source"?"#source-sentence":"#target-sentence";$(n).removeClass(`boundary-editing-${e} boundary-editing-active`),$(n).removeAttr("data-boundary-editing"),$(".boundary-editing-highlight").removeClass("boundary-editing-highlight"),$("#target-sentence, #source-sentence").find(".boundary-selected-span").contents().unwrap(),this.set_span_text("",t==="source"?"source":"target"),this.set_span_indices([],t==="source"?"source":"target"),this.set_hit_box_config({enable_select_source_sentence:!1,enable_select_target_sentence:!1,enable_multi_select_source_sentence:!1,enable_multi_select_target_sentence:!1}),this.set_boundary_editing_mode(!1),this.set_boundary_editing_edit(null),this.set_original_boundary(null),this.refresh_interface_edit()},save_boundary_edit(){if(!this.boundary_editing_mode||!this.boundary_editing_edit)return;const{category:e,id:t,type:n,multi:r}=this.boundary_editing_edit,i=n==="source"?this.selected_state.source_idx:this.selected_state.target_idx;if(!i||Array.isArray(i)&&i.length===0){alert("Please select a new boundary before saving.");return}let o=ze.cloneDeep(this.hits_data);const l=o[this.current_hit-1].edits.find(c=>c.category===e&&c.id===t);if(l){const c=n==="source"?"input_idx":"output_idx";r?l[c]=i:l[c]=[i],this.set_hits_data(o)}this.cancel_boundary_edit()},remove_selected_boundary(e,t,n){var f;const r=((f=this.boundary_editing_edit)==null?void 0:f.type)||"target",o=(r==="source"?this.selected_state.source_idx||[]:this.selected_state.target_idx||[]).filter(d=>!(d[0]===t&&d[1]===n));this.set_span_indices(o,r);const l=r==="source"?this.hits_data[this.current_hit-1].source:this.hits_data[this.current_hit-1].target;let c="";for(let d=0;d<o.length;d++){let[g,v]=o[d];c+=`<span class="selected-span-text" style="background-color: rgb(144, 238, 144); padding: 4px; border-radius: 3px;"> 
                    <span onclick="removeBoundarySpan('${e}',${g},${v})" class="hover-white black br-pill mr1 pointer">✘</span>
                        ${l.substring(g,v)} </span>&nbsp&nbsp`}this.set_span_text(c,r),this.$nextTick(()=>{document.getElementById("target-sentence")&&this.updateBoundaryHighlightingFromEditor(e,o)})},updateBoundaryHighlightingFromEditor(e,t){$("#target-sentence").find(".boundary-selected-span").contents().unwrap(),t.length!==0&&this.$nextTick(()=>{let n=document.getElementById("target-sentence");if(!n)return;const r=[...t].sort((i,o)=>i[0]-o[0]);this.applyGreenHighlightingFromEditor(n,r)})},applyGreenHighlightingFromEditor(e,t){for(let n=t.length-1;n>=0;n--){const[r,i]=t[n];this.wrapTextRangeFromEditor(e,r,i)}},wrapTextRangeFromEditor(e,t,n){let r=0,i=null,o=null,l=0,c=0;const f=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);let d;for(;d=f.nextNode();){const g=d.textContent.length,v=r,S=r+g;if(!i&&t>=v&&t<S&&(i=d,l=t-v),!o&&n>v&&n<=S&&(o=d,c=n-v),r+=g,i&&o)break}if(!(!i||!o))try{const g=document.createRange();g.setStart(i,l),g.setEnd(o,c);const v=document.createElement("span");v.className="boundary-selected-span",v.style.backgroundColor="#90EE90",v.style.padding="2px",v.style.borderRadius="3px";try{g.surroundContents(v)}catch{const E=g.extractContents();v.appendChild(E),g.insertNode(v)}}catch(g){console.warn("Could not apply green highlighting from editor:",g)}},reset_annotation_colors(e,t){let n=this.hits_data[this.current_hit-1].edits.find(function(c){return c.category===e&&c.id===t});if(!n){console.warn(`Span not found for color reset: category=${e}, id=${t}`);return}let r,i;!n.annotation||n.annotation==null?(r=`txt-${e}-light`,i=`border-${e}-light`):(r=`txt-${e}`,i=`border-${e}`);let o=$(`.${e}[data-id=${e}-${t}]`),l=$(`.${e}_below[data-id=${e}-${t}]`);l.addClass(r),o.removeClass(`white bg-${e} bg-${e}-light`).addClass(i),l.removeClass(`white bg-${e} bg-${e}-light`)},getEditConfig(e){return this.config.edits.find(t=>t.name===e)},getDisplayLabel(e){if(e.name==="checklist_extraction"){const t=this.hits_data[this.current_hit-1];if(t&&t.metadata&&t.metadata.checklist_item)return t.metadata.checklist_item}return e.label},refresh_edit(){this.set_editor_state(!1);let e=this.config.edits.map(t=>`txt-${t.name}`).join(" ");$(".annotation-icon").removeClass(e);for(let t of this.config.edits)$("#source-sentence").removeClass(`select-color-${t.name}`),$("#target-sentence").removeClass(`select-color-${t.name}`);$("input[type=radio]").prop("checked",!1),$("input[type=checkbox]").prop("checked",!1),$(".question-textbox, .question-textarea").val(""),$("label").removeClass("selected active checked"),$(".checkbox-tools").removeClass("selected"),$(".quality-selection, .span-selection-div, .child-question").slideUp(300),this.edit_state=this.initalize_edit_state(),this.new_edit_state=this.initalize_edit_state(),this.selected_category=null,this.set_annotating_edit_span_category_id(null),this.set_annotating_edit_span(null,"source"),this.set_annotating_edit_span(null,"target"),this.set_annotating_edit_span(null,"composite"),this.refresh_interface_edit()},show_span_selection(e){this.selected_category=e.target.value,$(".span-selection-div").hide(),$(`.span-selection-div[data-category=${e.target.value}]`).show();const t=this.getEditConfig(e.target.value);this.refresh_interface_edit();let n={enable_select_source_sentence:!1,enable_select_target_sentence:!1,enable_multi_select_source_sentence:!1,enable_multi_select_target_sentence:!1};t.enable_input&&(n.enable_select_source_sentence=!0,t.type=="multi_span"&&(n.enable_multi_select_source_sentence=!0)),t.enable_output&&(n.enable_select_target_sentence=!0,t.type=="multi_span"&&(n.enable_multi_select_target_sentence=!0)),this.set_hit_box_config(n),this.set_span_text("","source"),this.set_span_text("","target"),this.set_span_indices("","source"),this.set_span_indices("","target")},annotate_edit_disabled(e){this.force_update;const t=e.name,n=this.getEditConfig(t);if(!this.editor_open||!$(`.quality-selection[data-category=${t}]`).is(":visible"))return!0;if(!n||!n.annotation)return!1;let r=!0;for(let i of n.annotation){const o=$(`#question_${t}_${i.name}`);if(o==null||o.length==0)continue;const l=this.edit_state[t][i.name];l!=null&&(l.val!=null&&l.val!=""||l.val==null&&l!="")||$(o[0]).attr("annotated")!="true"&&(!i.hasOwnProperty("required")||i.required)&&(r=!1)}return!r},isNewAnnotationFormValid(e,t){if(!t||t.length===0)return!0;const n=(r,i)=>{for(const o of r){const l=!o.hasOwnProperty("required")||o.required,c=$(`#add_an_edit #question_${e}_${o.name}`);if(l&&c.length>0&&c.is(":visible")){const f=i&&i.hasOwnProperty(o.name)?i[o.name]:void 0,d=Array.isArray(o.options)&&o.options.length>0&&typeof o.options[0]=="object"&&o.options[0].hasOwnProperty("name");let g=!1;if(d?g=f&&f.val!==null&&f.val!==void 0&&f.val!=="":f&&typeof f=="object"&&f.hasOwnProperty("val")?g=f.val!==null&&f.val!==void 0&&f.val!=="":g=f!=null&&f!=="",!g)return!1;if(d&&g){const v=o.options.find(S=>S.name===f.val);if(v){if(v.options&&Array.isArray(v.options)){if(!n(v.options,f))return!1}else if(v.options==="likert-3"||v.options==="binary"||v.options==="textarea"||v.options==="textbox"){const S=f[v.name];if(S==null||S==="")return!1}}}}}return!0};return n(t,this.new_edit_state[e])},areSpansSelected(e){if(!e)return!1;if(e.type==="composite")return this.selected_edits.length>0;const t=this.selected_state.source_span,n=this.selected_state.target_span;return e.enable_input&&e.enable_output?!!(t&&n):e.enable_input?!!t:e.enable_output?!!n:!0}},mounted(){window.removeBoundarySpan=(e,t,n)=>{this.remove_selected_boundary(e,t,n)},window.removeSelected=(e,t,n)=>{this.remove_selected?this.remove_selected(e,t,n):console.error("this.remove_selected is not available")}},beforeUnmount(){window.removeBoundarySpan&&delete window.removeBoundarySpan,window.removeSelected&&delete window.removeSelected},computed:{add_edit_disabled(){if(this.force_update,!this.editor_open)return!0;const e=this.selected_category;if(!e)return!0;const t=this.getEditConfig(e);if(!t)return!0;let n=!1;if(t.type==="composite")this.selected_edits.length>0&&(n=!0);else{const i=this.selected_state.source_span,o=this.selected_state.target_span;t.enable_input&&t.enable_output?i&&o&&(n=!0):t.enable_input?i&&(n=!0):t.enable_output?o&&(n=!0):n=!0}return!n||!this.isNewAnnotationFormValid(e,t.annotation)}}},N_=Object.assign(IC,{__name:"AnnotationEditor",setup(e){return(t,n)=>{var r,i,o,l,c;return yt(),xt("div",mk,[H("div",yk,[H("div",vk,[H("div",bk,[H("p",wk,[ke(Tt(e.config.interface_text.annotation_editor.add_edit_header)+" ",1),xk]),H("div",Ek,[H("p",Ak,[H("i",null,Tt(e.config.interface_text.annotation_editor.select_edit_header),1)]),H("div",Sk,[(yt(!0),xt(qr,null,yi(e.config.edits,f=>(yt(),xt("div",{key:f.id,class:"edit-box mr2 dib"},[H("input",{onClick:n[0]||(n[0]=(...d)=>t.show_span_selection&&t.show_span_selection(...d)),class:"checkbox-tools-edit-category checkbox-tools",type:"radio",name:"edit_cotegory",id:`edit_cotegory-${f.name}`,value:f.name},null,8,kk),H("label",{class:pe(`txt-${f.name}`),for:`edit_cotegory-${f.name}`},[H("i",{class:pe(`fa-solid ${f.icon} fa-1-5x mb1`)},null,2),ke(" "+Tt(t.getDisplayLabel(f)),1)],10,Ck)]))),128))]),(yt(!0),xt(qr,null,yi(e.config.edits,f=>(yt(),xt("div",{key:f.id,class:"span-selection-div","data-category":f.name},[t.selected_category===f.name?(yt(),xt("div",Ik,[f.enable_input?(yt(),xt("div",Rk,[H("p",Dk,[ke(Tt(e.config.interface_text.annotation_editor.select_instructions)+" ",1),H("i",null,Tt(e.config.interface_text.typology.source_label),1),ke(".")]),H("p",Ok,[ke(Tt(e.config.interface_text.annotation_editor.selected_label)+" "+Tt(e.config.interface_text.typology.span_unit_name)+": ",1),H("span",{innerHTML:e.selected_state.source_span},null,8,Pk)])])):ne("",!0),f.enable_output?(yt(),xt("div",Mk,[H("p",Lk,[ke(Tt(e.config.interface_text.annotation_editor.select_instructions)+" ",1),H("i",null,Tt(e.config.interface_text.typology.target_label),1),ke(".")]),H("p",$k,[ke(Tt(e.config.interface_text.annotation_editor.selected_label)+" "+Tt(e.config.interface_text.typology.span_unit_name)+": ",1),H("span",{innerHTML:e.selected_state.target_span},null,8,Nk)])])):ne("",!0),f.type=="composite"?(yt(),xt("div",Fk,[H("div",{class:"span-selection-div","data-category":f.name},[H("p",qk,Tt(e.config.interface_text.annotation_editor.composite_seletion_instructions)+" "+Tt(f.name)+".",1),H("p",Bk,[ke(Tt(e.config.interface_text.annotation_editor.selected_label)+" "+Tt(e.config.interface_text.typology.edits_unit_name)+": ",1),H("span",{innerHTML:e.selected_edits_html},null,8,Uk)])],8,Vk)])):ne("",!0),f.annotation&&f.annotation.length>0&&t.areSpansSelected(f)?(yt(),xt("div",zk,[Hk,H("div",null,[Gk,(yt(!0),xt(qr,null,yi(f.annotation,d=>(yt(),xt("div",{key:d.id},[sn($_,{edit_state:t.new_edit_state,question_state:t.new_edit_state[f.name][d.name],empty_question_state:t.empty_edit_state[f.name][d.name],set_edit_state:t.set_new_edit_state,question:d,edit_type:f,config:e.config,parent_show_next_question:null,isRoot:"true",ref_for:!0,ref:`new_${f.name}_${d.name}`,force_update:t.force_update_f},null,8,["edit_state","question_state","empty_question_state","set_edit_state","question","edit_type","config","force_update"])]))),128))])])):ne("",!0)])):ne("",!0)],8,Tk))),128))])]),H("div",Wk,[H("button",{onClick:n[1]||(n[1]=(...f)=>t.cancel_click&&t.cancel_click(...f)),class:"cancel-button b quality_button bw0 ba mr2 br-pill-ns grow",type:"button"},[ke(Tt(e.config.interface_text.buttons.cancel_label)+" ",1),jk]),H("button",{onClick:n[2]||(n[2]=(...f)=>t.save_click&&t.save_click(...f)),class:pe([{"o-40":t.add_edit_disabled,grow:!t.add_edit_disabled},"confirm-button b quality_button bw0 ba ml2 br-pill-ns"]),disabled:t.add_edit_disabled,type:"button"},[ke(Tt(e.config.interface_text.buttons.save_label)+" ",1),Yk],10,Kk)])])]),e.boundary_editing_mode&&e.config.enable&&(Object.values(e.config.enable).includes("edit_boundary")||Object.values(e.config.enable).includes("edit_boundary_multi"))?(yt(),xt("div",Qk,[H("div",Zk,[H("p",Xk,[ke(Tt((r=e.boundary_editing_edit)!=null&&r.multi?"Edit Evidences of the extracted checklist item":"Edit Boundary")+" ",1),Jk]),H("div",tC,[H("p",eC,[H("i",null,Tt((i=e.boundary_editing_edit)!=null&&i.multi?"Select the evidences for this extracted value":"Select new boundary for "+((o=e.boundary_editing_edit)==null?void 0:o.category)+" annotation")+".",1)]),(l=e.boundary_editing_edit)!=null&&l.multi?(yt(),xt("div",nC,[rC,H("div",{class:"tracked-light lh-paras-2",innerHTML:e.selected_state.target_span||e.selected_state.source_span},null,8,iC),e.selected_state.target_span||e.selected_state.source_span?ne("",!0):(yt(),xt("p",sC,aC))])):(yt(),xt("p",lC,[ke(" New selection: "),H("span",{innerHTML:e.selected_state.target_span||e.selected_state.source_span},null,8,cC)]))])]),H("div",uC,[H("button",{onClick:n[3]||(n[3]=(...f)=>t.cancel_boundary_edit&&t.cancel_boundary_edit(...f)),class:"cancel-button b quality_button bw0 ba mr2 br-pill-ns grow"},[ke(" Cancel "),hC]),H("button",{onClick:n[4]||(n[4]=(...f)=>t.save_boundary_edit&&t.save_boundary_edit(...f)),class:"confirm-button b quality_button bw0 ba ml2 br-pill-ns grow"},[ke(Tt((c=e.boundary_editing_edit)!=null&&c.multi?"Save Boundaries":"Save Boundary")+" ",1),fC])])])):ne("",!0),(yt(!0),xt(qr,null,yi(e.config.edits,f=>(yt(),xt("div",{key:f.id},[H("div",{class:"quality-selection w-100",id:`${f.name}_edit_annotation`,"data-category":f.name},[H("div",pC,[H("div",_C,[H("p",gC,[ke(Tt(e.config.interface_text.annotation_editor.annotating_edit_header)+" ",1),mC]),yC,H("div",vC,[H("span",{class:pe(`edit-type txt-${f.name} f4`)},Tt(t.getDisplayLabel(f)),3),f.enable_input?(yt(),xt("span",{key:0,innerHTML:e.annotating_edit_span.source},null,8,bC)):ne("",!0),f.enable_input&&f.enable_output?(yt(),xt("span",{key:1,class:pe(`edit-type txt-${f.name} f3`)}," "+Tt(e.config.interface_text.annotation_editor.composite_span_unification)+" ",3)):ne("",!0),f.enable_output?(yt(),xt("span",{key:2,innerHTML:e.annotating_edit_span.target},null,8,wC)):ne("",!0),f.type=="composite"?(yt(),xt("span",{key:3,innerHTML:e.annotating_edit_span.composite},null,8,xC)):ne("",!0)]),H("div",EC,[(yt(!0),xt(qr,null,yi(f.annotation,d=>(yt(),xt("div",{key:d.id},[sn($_,{edit_state:t.edit_state,empty_question_state:t.empty_edit_state[f.name][d.name],question_state:t.edit_state[f.name][d.name],question:d,edit_type:f,set_edit_state:t.set_edit_state,config:e.config,parent_show_next_question:null,isRoot:"true",ref_for:!0,ref:`${f.name}_${d.name}`,force_update:t.force_update_f},null,8,["edit_state","empty_question_state","question_state","question","edit_type","set_edit_state","config","force_update"])]))),128))])]),H("div",AC,[H("button",{onClick:d=>t.cancel_annotation_click(f.name,d),class:"cancel-button b quality_button bw0 ba mr2 br-pill-ns grow",type:"button"},[ke(Tt(e.config.interface_text.buttons.cancel_label)+" ",1),kC],8,SC),H("button",{onClick:d=>t.save_annotation_click(f.name,d),class:pe(["confirm-button b quality_button bw0 ba ml2 br-pill-ns",{"o-40":t.annotate_edit_disabled(f),grow:!t.annotate_edit_disabled(f)}]),disabled:t.annotate_edit_disabled(f)},[ke(Tt(e.config.interface_text.buttons.save_label)+" ",1),TC],10,CC)])])],8,dC)]))),128))])}}});/*! LeaderLine v1.0.5 (c) anseki https://anseki.github.io/leader-line/ */var F_=function(){var e,t,n,r,i,o,l,c,f,d,g,v,S,E="leader-line",q=1,Q=2,tt=3,ut=4,nt={top:q,right:Q,bottom:tt,left:ut},gt=1,Pt=2,Vt=3,pt=4,Kt=5,ye={straight:gt,arc:Pt,fluid:Vt,magnet:pt,grid:Kt},He="behind",oe=E+"-defs",Pe='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="leader-line-defs"><style><![CDATA[.leader-line{position:absolute;overflow:visible!important;pointer-events:none!important;font-size:16px}#leader-line-defs{width:0;height:0;position:absolute;left:0;top:0}.leader-line-line-path{fill:none}.leader-line-mask-bg-rect{fill:#fff}.leader-line-caps-mask-anchor,.leader-line-caps-mask-marker-shape{fill:#000}.leader-line-caps-mask-anchor{stroke:#000}.leader-line-caps-mask-line,.leader-line-plugs-face{stroke:transparent}.leader-line-line-mask-shape{stroke:#fff}.leader-line-line-outline-mask-shape{stroke:#000}.leader-line-plug-mask-shape{fill:#fff;stroke:#000}.leader-line-plug-outline-mask-shape{fill:#000;stroke:#fff}.leader-line-areaAnchor{position:absolute;overflow:visible!important}]]></style><defs><circle id="leader-line-disc" cx="0" cy="0" r="5"/><rect id="leader-line-square" x="-5" y="-5" width="10" height="10"/><polygon id="leader-line-arrow1" points="-8,-8 8,0 -8,8 -5,0"/><polygon id="leader-line-arrow2" points="-4,-8 4,0 -4,8 -7,5 -2,0 -7,-5"/><polygon id="leader-line-arrow3" points="-4,-5 8,0 -4,5"/><g id="leader-line-hand"><path style="fill: #fcfcfc" d="M9.19 11.14h4.75c1.38 0 2.49-1.11 2.49-2.49 0-.51-.15-.98-.41-1.37h1.3c1.38 0 2.49-1.11 2.49-2.49s-1.11-2.53-2.49-2.53h1.02c1.38 0 2.49-1.11 2.49-2.49s-1.11-2.49-2.49-2.49h14.96c1.37 0 2.49-1.11 2.49-2.49s-1.11-2.49-2.49-2.49H16.58C16-9.86 14.28-11.14 9.7-11.14c-4.79 0-6.55 3.42-7.87 4.73H-2.14v13.23h3.68C3.29 9.97 5.47 11.14 9.19 11.14L9.19 11.14Z"/><path style="fill: black" d="M13.95 12c1.85 0 3.35-1.5 3.35-3.35 0-.17-.02-.34-.04-.51h.07c1.85 0 3.35-1.5 3.35-3.35 0-.79-.27-1.51-.72-2.08 1.03-.57 1.74-1.67 1.74-2.93 0-.59-.16-1.15-.43-1.63h12.04c1.85 0 3.35-1.5 3.35-3.35 0-1.85-1.5-3.35-3.35-3.35H17.2C16.26-10.93 13.91-12 9.7-12 5.36-12 3.22-9.4 1.94-7.84c0 0-.29.33-.5.57-.63 0-3.58 0-3.58 0C-2.61-7.27-3-6.88-3-6.41v13.23c0 .47.39.86.86.86 0 0 2.48 0 3.2 0C2.9 10.73 5.29 12 9.19 12L13.95 12ZM9.19 10.28c-3.46 0-5.33-1.05-6.9-3.87-.15-.27-.44-.44-.75-.44 0 0-1.81 0-2.82 0V-5.55c1.06 0 3.11 0 3.11 0 .25 0 .44-.06.61-.25l.83-.95c1.23-1.49 2.91-3.53 6.43-3.53 3.45 0 4.9.74 5.57 1.72h-4.3c-.48 0-.86.38-.86.86s.39.86.86.86h22.34c.9 0 1.63.73 1.63 1.63 0 .9-.73 1.63-1.63 1.63H15.83c-.48 0-.86.38-.86.86 0 .47.39.86.86.86h2.52c.9 0 1.63.73 1.63 1.63s-.73 1.63-1.63 1.63h-3.12c-.48 0-.86.38-.86.86 0 .47.39.86.86.86h2.11c.88 0 1.63.76 1.63 1.67 0 .9-.73 1.63-1.63 1.63h-3.2c-.48 0-.86.39-.86.86 0 .47.39.86.86.86h1.36c.05.16.09.34.09.51 0 .9-.73 1.63-1.63 1.63C13.95 10.28 9.19 10.28 9.19 10.28Z"/></g><g id="leader-line-crosshair"><path d="M0-78.97c-43.54 0-78.97 35.43-78.97 78.97 0 43.54 35.43 78.97 78.97 78.97s78.97-35.43 78.97-78.97C78.97-43.54 43.55-78.97 0-78.97ZM76.51-1.21h-9.91v-9.11h-2.43v9.11h-11.45c-.64-28.12-23.38-50.86-51.5-51.5V-64.17h9.11V-66.6h-9.11v-9.91C42.46-75.86 75.86-42.45 76.51-1.21ZM-1.21-30.76h-9.11v2.43h9.11V-4.2c-1.44.42-2.57 1.54-2.98 2.98H-28.33v-9.11h-2.43v9.11H-50.29C-49.65-28-27.99-49.65-1.21-50.29V-30.76ZM-30.76 1.21v9.11h2.43v-9.11H-4.2c.42 1.44 1.54 2.57 2.98 2.98v24.13h-9.11v2.43h9.11v19.53C-27.99 49.65-49.65 28-50.29 1.21H-30.76ZM1.22 30.75h9.11v-2.43h-9.11V4.2c1.44-.42 2.56-1.54 2.98-2.98h24.13v9.11h2.43v-9.11h19.53C49.65 28 28 49.65 1.22 50.29V30.75ZM30.76-1.21v-9.11h-2.43v9.11H4.2c-.42-1.44-1.54-2.56-2.98-2.98V-28.33h9.11v-2.43h-9.11V-50.29C28-49.65 49.65-28 50.29-1.21H30.76ZM-1.21-76.51v9.91h-9.11v2.43h9.11v11.45c-28.12.64-50.86 23.38-51.5 51.5H-64.17v-9.11H-66.6v9.11h-9.91C-75.86-42.45-42.45-75.86-1.21-76.51ZM-76.51 1.21h9.91v9.11h2.43v-9.11h11.45c.64 28.12 23.38 50.86 51.5 51.5v11.45h-9.11v2.43h9.11v9.91C-42.45 75.86-75.86 42.45-76.51 1.21ZM1.22 76.51v-9.91h9.11v-2.43h-9.11v-11.45c28.12-.64 50.86-23.38 51.5-51.5h11.45v9.11h2.43v-9.11h9.91C75.86 42.45 42.45 75.86 1.22 76.51Z"/><path d="M0 83.58-7.1 96 7.1 96Z"/><path d="M0-83.58 7.1-96-7.1-96"/><path d="M83.58 0 96 7.1 96-7.1Z"/><path d="M-83.58 0-96-7.1-96 7.1Z"/></g></defs></svg>',_r={disc:{elmId:"leader-line-disc",noRotate:!0,bBox:{left:-5,top:-5,width:10,height:10,right:5,bottom:5},widthR:2.5,heightR:2.5,bCircle:5,sideLen:5,backLen:5,overhead:0,outlineBase:1,outlineMax:4},square:{elmId:"leader-line-square",noRotate:!0,bBox:{left:-5,top:-5,width:10,height:10,right:5,bottom:5},widthR:2.5,heightR:2.5,bCircle:5,sideLen:5,backLen:5,overhead:0,outlineBase:1,outlineMax:4},arrow1:{elmId:"leader-line-arrow1",bBox:{left:-8,top:-8,width:16,height:16,right:8,bottom:8},widthR:4,heightR:4,bCircle:8,sideLen:8,backLen:8,overhead:8,outlineBase:2,outlineMax:1.5},arrow2:{elmId:"leader-line-arrow2",bBox:{left:-7,top:-8,width:11,height:16,right:4,bottom:8},widthR:2.75,heightR:4,bCircle:8,sideLen:8,backLen:7,overhead:4,outlineBase:1,outlineMax:1.75},arrow3:{elmId:"leader-line-arrow3",bBox:{left:-4,top:-5,width:12,height:10,right:8,bottom:5},widthR:3,heightR:2.5,bCircle:8,sideLen:5,backLen:4,overhead:8,outlineBase:1,outlineMax:2.5},hand:{elmId:"leader-line-hand",bBox:{left:-3,top:-12,width:40,height:24,right:37,bottom:12},widthR:10,heightR:6,bCircle:37,sideLen:12,backLen:3,overhead:37},crosshair:{elmId:"leader-line-crosshair",noRotate:!0,bBox:{left:-96,top:-96,width:192,height:192,right:96,bottom:96},widthR:48,heightR:48,bCircle:96,sideLen:96,backLen:96,overhead:0}},gr={behind:He,disc:"disc",square:"square",arrow1:"arrow1",arrow2:"arrow2",arrow3:"arrow3",hand:"hand",crosshair:"crosshair"},bt={disc:"disc",square:"square",arrow1:"arrow1",arrow2:"arrow2",arrow3:"arrow3",hand:"hand",crosshair:"crosshair"},Te=[q,Q,tt,ut],re="auto",ln={x:"left",y:"top",width:"width",height:"height"},ir=80,Ga=4,Ds=5,mr=120,Wa=8,pu=3.75,Si=10,_n=30,ei=.5522847,_u=.25*Math.PI,ki=/^\s*(\-?[\d\.]+)\s*(\%)?\s*$/,Nt="http://www.w3.org/2000/svg",Os="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style&&!window.navigator.msPointerEnabled,gn=!Os&&!!document.uniqueID,Dr="MozAppearance"in document.documentElement.style,Xi=!(Os||Dr||!window.chrome||!window.CSS),ge=!Os&&!gn&&!Dr&&!Xi&&!window.chrome&&"WebkitAppearance"in document.documentElement.style,Ci=gn||Os?.2:.1,Dn={path:Vt,lineColor:"coral",lineSize:4,plugSE:[He,"arrow1"],plugSizeSE:[1,1],lineOutlineEnabled:!1,lineOutlineColor:"indianred",lineOutlineSize:.25,plugOutlineEnabledSE:[!1,!1],plugOutlineSizeSE:[1,1]},cn=(g={}.toString,v={}.hasOwnProperty.toString,S=v.call(Object),function(h){var _,m;return h&&g.call(h)==="[object Object]"&&(!(_=Object.getPrototypeOf(h))||(m=_.hasOwnProperty("constructor")&&_.constructor)&&typeof m=="function"&&v.call(m)===S)}),mn=Number.isFinite||function(h){return typeof h=="number"&&window.isFinite(h)},Je=function(){var h,_={ease:[.25,.1,.25,1],linear:[0,0,1,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},m=1e3/60/2,y=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(P){setTimeout(P,m)},x=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(P){clearTimeout(P)},k=Number.isFinite||function(P){return typeof P=="number"&&window.isFinite(P)},G=[],N=0;function z(){var P=Date.now(),X=!1;h&&(x.call(window,h),h=null),G.forEach(function(R){var D,O,B;if(R.framesStart){if((D=P-R.framesStart)>=R.duration&&R.count&&R.loopsLeft<=1)return B=R.frames[R.lastFrame=R.reverse?0:R.frames.length-1],R.frameCallback(B.value,!0,B.timeRatio,B.outputRatio),void(R.framesStart=null);if(D>R.duration){if(O=Math.floor(D/R.duration),R.count){if(O>=R.loopsLeft)return B=R.frames[R.lastFrame=R.reverse?0:R.frames.length-1],R.frameCallback(B.value,!0,B.timeRatio,B.outputRatio),void(R.framesStart=null);R.loopsLeft-=O}R.framesStart+=R.duration*O,D=P-R.framesStart}R.reverse&&(D=R.duration-D),B=R.frames[R.lastFrame=Math.round(D/m)],R.frameCallback(B.value,!1,B.timeRatio,B.outputRatio)!==!1?X=!0:R.framesStart=null}}),X&&(h=y.call(window,z))}function C(P,X){P.framesStart=Date.now(),X!=null&&(P.framesStart-=P.duration*(P.reverse?1-X:X)),P.loopsLeft=P.count,P.lastFrame=null,z()}return{add:function(P,X,R,D,O,B,Z){var rt,lt,st,Y,L,V,F,vt,Et,_t,T,et,ct,It=++N;function Dt(mt,K){return{value:P(K),timeRatio:mt,outputRatio:K}}if(typeof O=="string"&&(O=_[O]),P=P||function(){},R<m)lt=[Dt(0,0),Dt(1,1)];else{if(st=m/R,lt=[Dt(0,0)],O[0]===0&&O[1]===0&&O[2]===1&&O[3]===1)for(L=st;L<=1;L+=st)lt.push(Dt(L,L));else for(V=Y=(L=st)/10;V<=1;V+=Y)_t=(Et=(vt=V)*vt)*vt,ct=3*(T=1-vt)*Et,L<=(F={x:(et=3*(T*T)*vt)*O[0]+ct*O[2]+_t,y:et*O[1]+ct*O[3]+_t}).x&&(lt.push(Dt(F.x,F.y)),L+=st);lt.push(Dt(1,1))}return rt={animId:It,frameCallback:X,duration:R,count:D,frames:lt,reverse:!!B},G.push(rt),Z!==!1&&C(rt,Z),It},remove:function(P){var X;G.some(function(R,D){return R.animId===P&&(X=D,!(R.framesStart=null))})&&G.splice(X,1)},start:function(P,X,R){G.some(function(D){return D.animId===P&&(D.reverse=!!X,C(D,R),!0)})},stop:function(P,X){var R;return G.some(function(D){return D.animId===P&&(X?D.lastFrame!=null&&(R=D.frames[D.lastFrame].timeRatio):(R=(Date.now()-D.framesStart)/D.duration,D.reverse&&(R=1-R),R<0?R=0:1<R&&(R=1)),!(D.framesStart=null))}),R},validTiming:function(P){return typeof P=="string"?_[P]:Array.isArray(P)&&[0,1,2,3].every(function(X){return k(P[X])&&0<=P[X]&&P[X]<=1})?[P[0],P[1],P[2],P[3]]:null}}}(),Ji=function(h){h.SVGPathElement.prototype.getPathData&&h.SVGPathElement.prototype.setPathData||function(){var _={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},m=function(R){this._string=R,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()},y=h.navigator.userAgent.indexOf("MSIE ")!==-1;m.prototype={parseSegment:function(){var R=this._string[this._currentIndex],D=_[R]?_[R]:null;if(D===null){if(this._prevCommand===null||(D=(R==="+"||R==="-"||R==="."||"0"<=R&&R<="9")&&this._prevCommand!=="Z"?this._prevCommand==="M"?"L":this._prevCommand==="m"?"l":this._prevCommand:null)===null)return null}else this._currentIndex+=1;var O=null,B=(this._prevCommand=D).toUpperCase();return B==="H"||B==="V"?O=[this._parseNumber()]:B==="M"||B==="L"||B==="T"?O=[this._parseNumber(),this._parseNumber()]:B==="S"||B==="Q"?O=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:B==="C"?O=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:B==="A"?O=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseArcFlag(),this._parseArcFlag(),this._parseNumber(),this._parseNumber()]:B==="Z"&&(this._skipOptionalSpaces(),O=[]),O===null||0<=O.indexOf(null)?null:{type:D,values:O}},hasMoreData:function(){return this._currentIndex<this._endIndex},peekSegmentType:function(){var R=this._string[this._currentIndex];return _[R]?_[R]:null},initialCommandIsMoveTo:function(){if(!this.hasMoreData())return!0;var R=this.peekSegmentType();return R==="M"||R==="m"},_isCurrentSpace:function(){var R=this._string[this._currentIndex];return R<=" "&&(R===" "||R===`
`||R==="	"||R==="\r"||R==="\f")},_skipOptionalSpaces:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex},_skipOptionalSpacesOrDelimiter:function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&this._string[this._currentIndex]!==",")&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&this._string[this._currentIndex]===","&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},_parseNumber:function(){var R=0,D=0,O=1,B=0,Z=1,rt=1,lt=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="+"?this._currentIndex+=1:this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="-"&&(this._currentIndex+=1,Z=-1),this._currentIndex===this._endIndex||(this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])&&this._string[this._currentIndex]!==".")return null;for(var st=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)this._currentIndex+=1;if(this._currentIndex!==st)for(var Y=this._currentIndex-1,L=1;st<=Y;)D+=L*(this._string[Y]-"0"),Y-=1,L*=10;if(this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="."){if(this._currentIndex+=1,this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])return null;for(;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)O*=10,B+=(this._string.charAt(this._currentIndex)-"0")/O,this._currentIndex+=1}if(this._currentIndex!==lt&&this._currentIndex+1<this._endIndex&&(this._string[this._currentIndex]==="e"||this._string[this._currentIndex]==="E")&&this._string[this._currentIndex+1]!=="x"&&this._string[this._currentIndex+1]!=="m"){if(this._currentIndex+=1,this._string[this._currentIndex]==="+"?this._currentIndex+=1:this._string[this._currentIndex]==="-"&&(this._currentIndex+=1,rt=-1),this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])return null;for(;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)R*=10,R+=this._string[this._currentIndex]-"0",this._currentIndex+=1}var V=D+B;return V*=Z,R&&(V*=Math.pow(10,rt*R)),lt===this._currentIndex?null:(this._skipOptionalSpacesOrDelimiter(),V)},_parseArcFlag:function(){if(this._currentIndex>=this._endIndex)return null;var R=null,D=this._string[this._currentIndex];if(this._currentIndex+=1,D==="0")R=0;else{if(D!=="1")return null;R=1}return this._skipOptionalSpacesOrDelimiter(),R}};var x=function(R){if(!R||R.length===0)return[];var D=new m(R),O=[];if(D.initialCommandIsMoveTo())for(;D.hasMoreData();){var B=D.parseSegment();if(B===null)break;O.push(B)}return O},k=h.SVGPathElement.prototype.setAttribute,G=h.SVGPathElement.prototype.removeAttribute,N=h.Symbol?h.Symbol():"__cachedPathData",z=h.Symbol?h.Symbol():"__cachedNormalizedPathData",C=function(R,D,O,B,Z,rt,lt,st,Y,L){var V,F,vt,Et,_t,T=function(De,me,Ne){return{x:De*Math.cos(Ne)-me*Math.sin(Ne),y:De*Math.sin(Ne)+me*Math.cos(Ne)}},et=(V=lt,Math.PI*V/180),ct=[];if(L)F=L[0],vt=L[1],Et=L[2],_t=L[3];else{var It=T(R,D,-et);R=It.x,D=It.y;var Dt=T(O,B,-et),mt=(R-(O=Dt.x))/2,K=(D-(B=Dt.y))/2,Bt=mt*mt/(Z*Z)+K*K/(rt*rt);1<Bt&&(Z*=Bt=Math.sqrt(Bt),rt*=Bt);var we=Z*Z,Mt=rt*rt,jt=we*Mt-we*K*K-Mt*mt*mt,Ie=we*K*K+Mt*mt*mt,Re=(st===Y?-1:1)*Math.sqrt(Math.abs(jt/Ie));Et=Re*Z*K/rt+(R+O)/2,_t=Re*-rt*mt/Z+(D+B)/2,F=Math.asin(parseFloat(((D-_t)/rt).toFixed(9))),vt=Math.asin(parseFloat(((B-_t)/rt).toFixed(9))),R<Et&&(F=Math.PI-F),O<Et&&(vt=Math.PI-vt),F<0&&(F=2*Math.PI+F),vt<0&&(vt=2*Math.PI+vt),Y&&vt<F&&(F-=2*Math.PI),!Y&&F<vt&&(vt-=2*Math.PI)}var xe=vt-F;if(Math.abs(xe)>120*Math.PI/180){var hn=vt,Pi=O,Yt=B;vt=Y&&F<vt?F+120*Math.PI/180*1:F+120*Math.PI/180*-1,O=Et+Z*Math.cos(vt),B=_t+rt*Math.sin(vt),ct=C(O,B,Pi,Yt,Z,rt,lt,0,Y,[vt,hn,Et,_t])}xe=vt-F;var Ot=Math.cos(F),kt=Math.sin(F),Qt=Math.cos(vt),Ct=Math.sin(vt),te=Math.tan(xe/4),qe=4/3*Z*te,Ae=4/3*rt*te,Hn=[R,D],Gn=[R+qe*kt,D-Ae*Ot],Pr=[O+qe*Ct,B-Ae*Qt],Ut=[O,B];if(Gn[0]=2*Hn[0]-Gn[0],Gn[1]=2*Hn[1]-Gn[1],L)return[Gn,Pr,Ut].concat(ct);ct=[Gn,Pr,Ut].concat(ct).join().split(",");var j=[],zt=[];return ct.forEach(function(De,me){me%2?zt.push(T(ct[me-1],ct[me],et).y):zt.push(T(ct[me],ct[me+1],et).x),zt.length===6&&(j.push(zt),zt=[])}),j},P=function(R){return R.map(function(D){return{type:D.type,values:Array.prototype.slice.call(D.values)}})},X=function(R){var D=[],O=null,B=null,Z=null,rt=null,lt=null,st=null,Y=null;return R.forEach(function(L){if(L.type==="M"){var V=L.values[0],F=L.values[1];D.push({type:"M",values:[V,F]}),rt=st=V,lt=Y=F}else if(L.type==="C"){var vt=L.values[0],Et=L.values[1],_t=L.values[2],T=L.values[3];V=L.values[4],F=L.values[5],D.push({type:"C",values:[vt,Et,_t,T,V,F]}),B=_t,Z=T,rt=V,lt=F}else if(L.type==="L")V=L.values[0],F=L.values[1],D.push({type:"L",values:[V,F]}),rt=V,lt=F;else if(L.type==="H")V=L.values[0],D.push({type:"L",values:[V,lt]}),rt=V;else if(L.type==="V")F=L.values[0],D.push({type:"L",values:[rt,F]}),lt=F;else if(L.type==="S")_t=L.values[0],T=L.values[1],V=L.values[2],F=L.values[3],O==="C"||O==="S"?(et=rt+(rt-B),ct=lt+(lt-Z)):(et=rt,ct=lt),D.push({type:"C",values:[et,ct,_t,T,V,F]}),B=_t,Z=T,rt=V,lt=F;else if(L.type==="T"){V=L.values[0],F=L.values[1],O==="Q"||O==="T"?(vt=rt+(rt-B),Et=lt+(lt-Z)):(vt=rt,Et=lt);var et=rt+2*(vt-rt)/3,ct=lt+2*(Et-lt)/3,It=V+2*(vt-V)/3,Dt=F+2*(Et-F)/3;D.push({type:"C",values:[et,ct,It,Dt,V,F]}),B=vt,Z=Et,rt=V,lt=F}else if(L.type==="Q")vt=L.values[0],Et=L.values[1],V=L.values[2],F=L.values[3],et=rt+2*(vt-rt)/3,ct=lt+2*(Et-lt)/3,It=V+2*(vt-V)/3,Dt=F+2*(Et-F)/3,D.push({type:"C",values:[et,ct,It,Dt,V,F]}),B=vt,Z=Et,rt=V,lt=F;else if(L.type==="A"){var mt=L.values[0],K=L.values[1],Bt=L.values[2],we=L.values[3],Mt=L.values[4];V=L.values[5],F=L.values[6],mt===0||K===0?(D.push({type:"C",values:[rt,lt,V,F,V,F]}),rt=V,lt=F):(rt!==V||lt!==F)&&C(rt,lt,V,F,mt,K,Bt,we,Mt).forEach(function(jt){D.push({type:"C",values:jt}),rt=V,lt=F})}else L.type==="Z"&&(D.push(L),rt=st,lt=Y);O=L.type}),D};h.SVGPathElement.prototype.setAttribute=function(R,D){R==="d"&&(this[N]=null,this[z]=null),k.call(this,R,D)},h.SVGPathElement.prototype.removeAttribute=function(R,D){R==="d"&&(this[N]=null,this[z]=null),G.call(this,R)},h.SVGPathElement.prototype.getPathData=function(R){if(R&&R.normalize){if(this[z])return P(this[z]);this[N]?st=P(this[N]):(st=x(this.getAttribute("d")||""),this[N]=P(st));var D=X((O=[],lt=rt=Z=B=null,st.forEach(function(Y){var L=Y.type;if(L==="M"){var V=Y.values[0],F=Y.values[1];O.push({type:"M",values:[V,F]}),B=rt=V,Z=lt=F}else if(L==="m")V=B+Y.values[0],F=Z+Y.values[1],O.push({type:"M",values:[V,F]}),B=rt=V,Z=lt=F;else if(L==="L")V=Y.values[0],F=Y.values[1],O.push({type:"L",values:[V,F]}),B=V,Z=F;else if(L==="l")V=B+Y.values[0],F=Z+Y.values[1],O.push({type:"L",values:[V,F]}),B=V,Z=F;else if(L==="C"){var vt=Y.values[0],Et=Y.values[1],_t=Y.values[2],T=Y.values[3];V=Y.values[4],F=Y.values[5],O.push({type:"C",values:[vt,Et,_t,T,V,F]}),B=V,Z=F}else L==="c"?(vt=B+Y.values[0],Et=Z+Y.values[1],_t=B+Y.values[2],T=Z+Y.values[3],V=B+Y.values[4],F=Z+Y.values[5],O.push({type:"C",values:[vt,Et,_t,T,V,F]}),B=V,Z=F):L==="Q"?(vt=Y.values[0],Et=Y.values[1],V=Y.values[2],F=Y.values[3],O.push({type:"Q",values:[vt,Et,V,F]}),B=V,Z=F):L==="q"?(vt=B+Y.values[0],Et=Z+Y.values[1],V=B+Y.values[2],F=Z+Y.values[3],O.push({type:"Q",values:[vt,Et,V,F]}),B=V,Z=F):L==="A"?(V=Y.values[5],F=Y.values[6],O.push({type:"A",values:[Y.values[0],Y.values[1],Y.values[2],Y.values[3],Y.values[4],V,F]}),B=V,Z=F):L==="a"?(V=B+Y.values[5],F=Z+Y.values[6],O.push({type:"A",values:[Y.values[0],Y.values[1],Y.values[2],Y.values[3],Y.values[4],V,F]}),B=V,Z=F):L==="H"?(V=Y.values[0],O.push({type:"H",values:[V]}),B=V):L==="h"?(V=B+Y.values[0],O.push({type:"H",values:[V]}),B=V):L==="V"?(F=Y.values[0],O.push({type:"V",values:[F]}),Z=F):L==="v"?(F=Z+Y.values[0],O.push({type:"V",values:[F]}),Z=F):L==="S"?(_t=Y.values[0],T=Y.values[1],V=Y.values[2],F=Y.values[3],O.push({type:"S",values:[_t,T,V,F]}),B=V,Z=F):L==="s"?(_t=B+Y.values[0],T=Z+Y.values[1],V=B+Y.values[2],F=Z+Y.values[3],O.push({type:"S",values:[_t,T,V,F]}),B=V,Z=F):L==="T"?(V=Y.values[0],F=Y.values[1],O.push({type:"T",values:[V,F]}),B=V,Z=F):L==="t"?(V=B+Y.values[0],F=Z+Y.values[1],O.push({type:"T",values:[V,F]}),B=V,Z=F):L!=="Z"&&L!=="z"||(O.push({type:"Z",values:[]}),B=rt,Z=lt)}),O));return this[z]=P(D),D}if(this[N])return P(this[N]);var O,B,Z,rt,lt,st=x(this.getAttribute("d")||"");return this[N]=P(st),st},h.SVGPathElement.prototype.setPathData=function(R){if(R.length===0)y?this.setAttribute("d",""):this.removeAttribute("d");else{for(var D="",O=0,B=R.length;O<B;O+=1){var Z=R[O];0<O&&(D+=" "),D+=Z.type,Z.values&&0<Z.values.length&&(D+=" "+Z.values.join(" "))}this.setAttribute("d",D)}},h.SVGRectElement.prototype.getPathData=function(R){var D=this.x.baseVal.value,O=this.y.baseVal.value,B=this.width.baseVal.value,Z=this.height.baseVal.value,rt=this.hasAttribute("rx")?this.rx.baseVal.value:this.ry.baseVal.value,lt=this.hasAttribute("ry")?this.ry.baseVal.value:this.rx.baseVal.value;B/2<rt&&(rt=B/2),Z/2<lt&&(lt=Z/2);var st=[{type:"M",values:[D+rt,O]},{type:"H",values:[D+B-rt]},{type:"A",values:[rt,lt,0,0,1,D+B,O+lt]},{type:"V",values:[O+Z-lt]},{type:"A",values:[rt,lt,0,0,1,D+B-rt,O+Z]},{type:"H",values:[D+rt]},{type:"A",values:[rt,lt,0,0,1,D,O+Z-lt]},{type:"V",values:[O+lt]},{type:"A",values:[rt,lt,0,0,1,D+rt,O]},{type:"Z",values:[]}];return st=st.filter(function(Y){return Y.type!=="A"||Y.values[0]!==0&&Y.values[1]!==0}),R&&R.normalize===!0&&(st=X(st)),st},h.SVGCircleElement.prototype.getPathData=function(R){var D=this.cx.baseVal.value,O=this.cy.baseVal.value,B=this.r.baseVal.value,Z=[{type:"M",values:[D+B,O]},{type:"A",values:[B,B,0,0,1,D,O+B]},{type:"A",values:[B,B,0,0,1,D-B,O]},{type:"A",values:[B,B,0,0,1,D,O-B]},{type:"A",values:[B,B,0,0,1,D+B,O]},{type:"Z",values:[]}];return R&&R.normalize===!0&&(Z=X(Z)),Z},h.SVGEllipseElement.prototype.getPathData=function(R){var D=this.cx.baseVal.value,O=this.cy.baseVal.value,B=this.rx.baseVal.value,Z=this.ry.baseVal.value,rt=[{type:"M",values:[D+B,O]},{type:"A",values:[B,Z,0,0,1,D,O+Z]},{type:"A",values:[B,Z,0,0,1,D-B,O]},{type:"A",values:[B,Z,0,0,1,D,O-Z]},{type:"A",values:[B,Z,0,0,1,D+B,O]},{type:"Z",values:[]}];return R&&R.normalize===!0&&(rt=X(rt)),rt},h.SVGLineElement.prototype.getPathData=function(){return[{type:"M",values:[this.x1.baseVal.value,this.y1.baseVal.value]},{type:"L",values:[this.x2.baseVal.value,this.y2.baseVal.value]}]},h.SVGPolylineElement.prototype.getPathData=function(){for(var R=[],D=0;D<this.points.numberOfItems;D+=1){var O=this.points.getItem(D);R.push({type:D===0?"M":"L",values:[O.x,O.y]})}return R},h.SVGPolygonElement.prototype.getPathData=function(){for(var R=[],D=0;D<this.points.numberOfItems;D+=1){var O=this.points.getItem(D);R.push({type:D===0?"M":"L",values:[O.x,O.y]})}return R.push({type:"Z",values:[]}),R}}()},sr=function(h){var _={};function m(y){if(_[y])return _[y].exports;var x=_[y]={i:y,l:!1,exports:{}};return h[y].call(x.exports,x,x.exports,m),x.l=!0,x.exports}return m.m=h,m.c=_,m.d=function(y,x,k){m.o(y,x)||Object.defineProperty(y,x,{configurable:!1,enumerable:!0,get:k})},m.r=function(y){Object.defineProperty(y,"__esModule",{value:!0})},m.n=function(y){var x=y&&y.__esModule?function(){return y.default}:function(){return y};return m.d(x,"a",x),x},m.o=function(y,x){return Object.prototype.hasOwnProperty.call(y,x)},m.p="",m(m.s=0)}([function(h,_,m){m.r(_);var y=500,x=[],k=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(R){return setTimeout(R,1e3/60)},G=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(R){return clearTimeout(R)},N=void 0,z=Date.now();function C(){var R=void 0,D=void 0;N&&(G.call(window,N),N=null),x.forEach(function(O){O.event&&(O.listener(O.event),O.event=null,R=!0)}),R?(z=Date.now(),D=!0):Date.now()-z<y&&(D=!0),D&&(N=k.call(window,C))}function P(R){var D=-1;return x.some(function(O,B){return O.listener===R&&(D=B,!0)}),D}var X={add:function(R){var D=void 0;return P(R)===-1?(x.push(D={listener:R}),function(O){D.event=O,N||C()}):null},remove:function(R){var D;-1<(D=P(R))&&(x.splice(D,1),!x.length&&N&&(G.call(window,N),N=null))}};_.default=X}]).default,ni={line_altColor:{iniValue:!1},line_color:{},line_colorTra:{iniValue:!1},line_strokeWidth:{},plug_enabled:{iniValue:!1},plug_enabledSE:{hasSE:!0,iniValue:!1},plug_plugSE:{hasSE:!0,iniValue:He},plug_colorSE:{hasSE:!0},plug_colorTraSE:{hasSE:!0,iniValue:!1},plug_markerWidthSE:{hasSE:!0},plug_markerHeightSE:{hasSE:!0},lineOutline_enabled:{iniValue:!1},lineOutline_color:{},lineOutline_colorTra:{iniValue:!1},lineOutline_strokeWidth:{},lineOutline_inStrokeWidth:{},plugOutline_enabledSE:{hasSE:!0,iniValue:!1},plugOutline_plugSE:{hasSE:!0,iniValue:He},plugOutline_colorSE:{hasSE:!0},plugOutline_colorTraSE:{hasSE:!0,iniValue:!1},plugOutline_strokeWidthSE:{hasSE:!0},plugOutline_inStrokeWidthSE:{hasSE:!0},position_socketXYSE:{hasSE:!0,hasProps:!0},position_plugOverheadSE:{hasSE:!0},position_path:{},position_lineStrokeWidth:{},position_socketGravitySE:{hasSE:!0},path_pathData:{},path_edge:{hasProps:!0},viewBox_bBox:{hasProps:!0},viewBox_plugBCircleSE:{hasSE:!0},lineMask_enabled:{iniValue:!1},lineMask_outlineMode:{iniValue:!1},lineMask_x:{},lineMask_y:{},lineOutlineMask_x:{},lineOutlineMask_y:{},maskBGRect_x:{},maskBGRect_y:{},capsMaskAnchor_enabledSE:{hasSE:!0,iniValue:!1},capsMaskAnchor_pathDataSE:{hasSE:!0},capsMaskAnchor_strokeWidthSE:{hasSE:!0},capsMaskMarker_enabled:{iniValue:!1},capsMaskMarker_enabledSE:{hasSE:!0,iniValue:!1},capsMaskMarker_plugSE:{hasSE:!0,iniValue:He},capsMaskMarker_markerWidthSE:{hasSE:!0},capsMaskMarker_markerHeightSE:{hasSE:!0},caps_enabled:{iniValue:!1},attach_plugSideLenSE:{hasSE:!0},attach_plugBackLenSE:{hasSE:!0}},ts={show_on:{},show_effect:{},show_animOptions:{},show_animId:{},show_inAnim:{}},ja="fade",ri=[],un={},es=0,Le={},Do=0;function Or(h,_){var m,y;return typeof h!=typeof _||(m=cn(h)?"obj":Array.isArray(h)?"array":"")!=(cn(_)?"obj":Array.isArray(_)?"array":"")||(m==="obj"?Or(y=Object.keys(h).sort(),Object.keys(_).sort())||y.some(function(x){return Or(h[x],_[x])}):m==="array"?h.length!==_.length||h.some(function(x,k){return Or(x,_[k])}):h!==_)}function nn(h){return h&&(cn(h)?Object.keys(h).reduce(function(_,m){return _[m]=nn(h[m]),_},{}):Array.isArray(h)?h.map(nn):h)}function ii(h){var _,m,y,x=1,k=h=(h+"").trim();function G(N){var z=1,C=ki.exec(N);return C&&(z=parseFloat(C[1]),C[2]?z=0<=z&&z<=100?z/100:1:(z<0||1<z)&&(z=1)),z}return(_=/^(rgba|hsla|hwb|gray|device\-cmyk)\s*\(([\s\S]+)\)$/i.exec(h))?(m=_[1].toLowerCase(),y=_[2].trim().split(/\s*,\s*/),m==="rgba"&&y.length===4?(x=G(y[3]),k="rgb("+y.slice(0,3).join(", ")+")"):m==="hsla"&&y.length===4?(x=G(y[3]),k="hsl("+y.slice(0,3).join(", ")+")"):m==="hwb"&&y.length===4?(x=G(y[3]),k="hwb("+y.slice(0,3).join(", ")+")"):m==="gray"&&y.length===2?(x=G(y[1]),k="gray("+y[0]+")"):m==="device-cmyk"&&5<=y.length&&(x=G(y[4]),k="device-cmyk("+y.slice(0,4).join(", ")+")")):(_=/^\#(?:([\da-f]{6})([\da-f]{2})|([\da-f]{3})([\da-f]))$/i.exec(h))?_[1]?(x=parseInt(_[2],16)/255,k="#"+_[1]):(x=parseInt(_[4]+_[4],16)/255,k="#"+_[3]):h.toLocaleLowerCase()==="transparent"&&(x=0),[x,k]}function si(h){return!(!h||h.nodeType!==Node.ELEMENT_NODE||typeof h.getBoundingClientRect!="function")}function Ti(h,_){var m,y,x,k,G={};if(!(x=h.ownerDocument))return console.error("Cannot get document that contains the element."),null;if(h.compareDocumentPosition(x)&Node.DOCUMENT_POSITION_DISCONNECTED)return console.error("A disconnected element was passed."),null;for(y in m=h.getBoundingClientRect())G[y]=m[y];if(!_){if(!(k=x.defaultView))return console.error("Cannot get window that contains the element."),null;G.left+=k.pageXOffset,G.right+=k.pageXOffset,G.top+=k.pageYOffset,G.bottom+=k.pageYOffset}return G}function ns(h,_){var m,y,x=[],k=h;for(_=_||window;;){if(!(m=k.ownerDocument))return console.error("Cannot get document that contains the element."),null;if(!(y=m.defaultView))return console.error("Cannot get window that contains the element."),null;if(y===_)break;if(!(k=y.frameElement))return console.error("`baseWindow` was not found."),null;x.unshift(k)}return x}function oi(h,_){var m,y,x=0,k=0;return(y=ns(h,_=_||window))?y.length?(y.forEach(function(G,N){var z,C,P=Ti(G,0<N);x+=P.left,k+=P.top,C=(z=G).ownerDocument.defaultView.getComputedStyle(z,""),P={left:z.clientLeft+parseFloat(C.paddingLeft),top:z.clientTop+parseFloat(C.paddingTop)},x+=P.left,k+=P.top}),(m=Ti(h,!0)).left+=x,m.right+=x,m.top+=k,m.bottom+=k,m):Ti(h):null}function Bn(h,_){var m=h.x-_.x,y=h.y-_.y;return Math.sqrt(m*m+y*y)}function rs(h,_,m){var y=_.x-h.x,x=_.y-h.y;return{x:h.x+y*m,y:h.y+x*m,angle:Math.atan2(x,y)/(Math.PI/180)}}function Ps(h,_,m){var y=Math.atan2(h.y-_.y,_.x-h.x);return{x:_.x+Math.cos(y)*m,y:_.y+Math.sin(y)*m*-1}}function Ii(h,_,m,y,x){var k=x*x,G=k*x,N=1-x,z=N*N,C=z*N,P=C*h.x+3*z*x*_.x+3*N*k*m.x+G*y.x,X=C*h.y+3*z*x*_.y+3*N*k*m.y+G*y.y,R=h.x+2*x*(_.x-h.x)+k*(m.x-2*_.x+h.x),D=h.y+2*x*(_.y-h.y)+k*(m.y-2*_.y+h.y),O=_.x+2*x*(m.x-_.x)+k*(y.x-2*m.x+_.x),B=_.y+2*x*(m.y-_.y)+k*(y.y-2*m.y+_.y),Z=N*h.x+x*_.x,rt=N*h.y+x*_.y,lt=N*m.x+x*y.x,st=N*m.y+x*y.y,Y=90-180*Math.atan2(R-O,D-B)/Math.PI;return{x:P,y:X,fromP2:{x:R,y:D},toP1:{x:O,y:B},fromP1:{x:Z,y:rt},toP2:{x:lt,y:st},angle:Y+=180<Y?-180:180}}function Ri(h,_,m,y,x){function k(D,O,B,Z,rt){return D*(D*(-3*O+9*B-9*Z+3*rt)+6*O-12*B+6*Z)-3*O+3*B}var G,N,z,C,P,X=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],R=0;return G=(x=x==null||1<x?1:x<0?0:x)/2,[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816].forEach(function(D,O){z=k(N=G*D+G,h.x,_.x,m.x,y.x),C=k(N,h.y,_.y,m.y,y.y),P=z*z+C*C,R+=X[O]*Math.sqrt(P)}),G*R}function Ms(h,_,m,y,x){for(var k,G=.5,N=1-G;k=Ri(h,_,m,y,N),!(Math.abs(k-x)<=.01);)N+=(k<x?1:-1)*(G/=2);return N}function Oo(h,_){var m;return h.forEach(function(y){var x=_?y.map(function(k){var G={x:k.x,y:k.y};return _(G),G}):y;m||(m=[{type:"M",values:[x[0].x,x[0].y]}]),m.push(x.length?x.length===2?{type:"L",values:[x[1].x,x[1].y]}:{type:"C",values:[x[1].x,x[1].y,x[2].x,x[2].y,x[3].x,x[3].y]}:{type:"Z",values:[]})}),m}function Ka(h){var _=[],m=0;return h.forEach(function(y){var x=(y.length===2?Bn:Ri).apply(null,y);_.push(x),m+=x}),{segsLen:_,lenAll:m}}function Ls(h,_){return h==null||_==null||h.length!==_.length||h.some(function(m,y){var x=_[y];return m.type!==x.type||m.values.some(function(k,G){return k!==x.values[G]})})}function Ye(h,_,m){h.events[_]?h.events[_].indexOf(m)<0&&h.events[_].push(m):h.events[_]=[m]}function Ge(h,_,m){var y;h.events[_]&&-1<(y=h.events[_].indexOf(m))&&h.events[_].splice(y,1)}function Di(h){l&&clearTimeout(l),ri.push(h),l=setTimeout(function(){ri.forEach(function(_){_()}),ri=[]},0)}function $e(h,_){h.reflowTargets.indexOf(_)<0&&h.reflowTargets.push(_)}function Ya(h){h.reflowTargets.forEach(function(_){var m;m=_,setTimeout(function(){var y=m.parentNode,x=m.nextSibling;y.insertBefore(y.removeChild(m),x)},0)}),h.reflowTargets=[]}function $s(h,_,m,y,x,k,G){var N,z,C;m==="auto-start-reverse"?(typeof c!="boolean"&&(_.setAttribute("orient","auto-start-reverse"),c=_.orientType.baseVal===SVGMarkerElement.SVG_MARKER_ORIENT_UNKNOWN),c?_.setAttribute("orient",m):((N=x.createSVGTransform()).setRotate(180,0,0),k.transform.baseVal.appendItem(N),_.setAttribute("orient","auto"),C=!0)):(_.setAttribute("orient",m),c===!1&&k.transform.baseVal.clear()),z=_.viewBox.baseVal,C?(z.x=-y.right,z.y=-y.bottom):(z.x=y.left,z.y=y.top),z.width=y.width,z.height=y.height,gn&&$e(h,G)}function Qa(h,_){return{prop:h?"markerEnd":"markerStart",orient:_?_.noRotate?"0":h?"auto":"auto-start-reverse":null}}function Qe(h,_){Object.keys(_).forEach(function(m){var y=_[m];h[m]=y.iniValue!=null?y.hasSE?[y.iniValue,y.iniValue]:y.iniValue:y.hasSE?y.hasProps?[{},{}]:[]:y.hasProps?{}:null})}function wt(h,_,m,y,x){return y!==_[m]&&(_[m]=y,x&&x.forEach(function(k){k(h,y,m)}),!0)}function Za(h){function _(G,N){return G+parseFloat(N)}var m=h.document,y=h.getComputedStyle(m.documentElement,""),x=h.getComputedStyle(m.body,""),k={x:0,y:0};return x.position!=="static"?(k.x-=[y.marginLeft,y.borderLeftWidth,y.paddingLeft,x.marginLeft,x.borderLeftWidth].reduce(_,0),k.y-=[y.marginTop,y.borderTopWidth,y.paddingTop,x.marginTop,x.borderTopWidth].reduce(_,0)):y.position!=="static"&&(k.x-=[y.marginLeft,y.borderLeftWidth].reduce(_,0),k.y-=[y.marginTop,y.borderTopWidth].reduce(_,0)),k}function Xa(h){var _,m=h.document;m.getElementById(oe)||(_=new h.DOMParser().parseFromString(Pe,"image/svg+xml"),m.body.appendChild(_.documentElement),Ji(h))}function gu(h){var _,m,y,x,k,G,N,z,C,P,X,R,D,O,B,Z,rt,lt,st,Y=h.options,L=h.curStats,V=h.aplStats,F=L.position_socketXYSE,vt=!1;function Et(T,et){var ct=et===q?{x:T.left+T.width/2,y:T.top}:et===Q?{x:T.right,y:T.top+T.height/2}:et===tt?{x:T.left+T.width/2,y:T.bottom}:{x:T.left,y:T.top+T.height/2};return ct.socketId=et,ct}function _t(T){return{x:T.x,y:T.y}}if(L.position_path=Y.path,L.position_lineStrokeWidth=L.line_strokeWidth,L.position_socketGravitySE=_=nn(Y.socketGravitySE),m=[0,1].map(function(T){var et,ct,It,Dt=Y.anchorSE[T],mt=h.optionIsAttach.anchorSE[T],K=mt!==!1?Le[Dt._id]:null,Bt=mt!==!1&&K.conf.getStrokeWidth?K.conf.getStrokeWidth(K,h):0,we=mt!==!1&&K.conf.getBBoxNest?K.conf.getBBoxNest(K,h,Bt):oi(Dt,h.baseWindow);return L.capsMaskAnchor_pathDataSE[T]=mt!==!1&&K.conf.getPathData?K.conf.getPathData(K,h,Bt):(ct=(et=we).right!=null?et.right:et.left+et.width,It=et.bottom!=null?et.bottom:et.top+et.height,[{type:"M",values:[et.left,et.top]},{type:"L",values:[ct,et.top]},{type:"L",values:[ct,It]},{type:"L",values:[et.left,It]},{type:"Z",values:[]}]),L.capsMaskAnchor_strokeWidthSE[T]=Bt,we}),N=-1,Y.socketSE[0]&&Y.socketSE[1]?(F[0]=Et(m[0],Y.socketSE[0]),F[1]=Et(m[1],Y.socketSE[1])):(Y.socketSE[0]||Y.socketSE[1]?(Y.socketSE[0]?(k=0,G=1):(k=1,G=0),F[k]=Et(m[k],Y.socketSE[k]),(x=Te.map(function(T){return Et(m[G],T)})).forEach(function(T){var et=Bn(T,F[k]);(et<N||N===-1)&&(F[G]=T,N=et)})):(x=Te.map(function(T){return Et(m[1],T)}),Te.map(function(T){return Et(m[0],T)}).forEach(function(T){x.forEach(function(et){var ct=Bn(T,et);(ct<N||N===-1)&&(F[0]=T,F[1]=et,N=ct)})})),[0,1].forEach(function(T){var et,ct;Y.socketSE[T]||(m[T].width||m[T].height?m[T].width||F[T].socketId!==ut&&F[T].socketId!==Q?m[T].height||F[T].socketId!==q&&F[T].socketId!==tt||(F[T].socketId=0<=F[T?0:1].y-m[T].top?tt:q):F[T].socketId=0<=F[T?0:1].x-m[T].left?Q:ut:(et=F[T?0:1].x-m[T].left,ct=F[T?0:1].y-m[T].top,F[T].socketId=Math.abs(et)>=Math.abs(ct)?0<=et?Q:ut:0<=ct?tt:q))})),L.position_path!==V.position_path||L.position_lineStrokeWidth!==V.position_lineStrokeWidth||[0,1].some(function(T){return L.position_plugOverheadSE[T]!==V.position_plugOverheadSE[T]||(Dt=F[T],mt=V.position_socketXYSE[T],Dt.x!==mt.x||Dt.y!==mt.y||Dt.socketId!==mt.socketId)||(et=_[T],ct=V.position_socketGravitySE[T],(It=et==null?"auto":Array.isArray(et)?"array":"number")!=(ct==null?"auto":Array.isArray(ct)?"array":"number")||(It==="array"?et[0]!==ct[0]||et[1]!==ct[1]:et!==ct));var et,ct,It,Dt,mt})){switch(h.pathList.baseVal=y=[],h.pathList.animVal=null,L.position_path){case gt:y.push([_t(F[0]),_t(F[1])]);break;case Pt:R=typeof _[0]=="number"&&0<_[0]||typeof _[1]=="number"&&0<_[1],D=_u*(R?-1:1),O=Math.atan2(F[1].y-F[0].y,F[1].x-F[0].x),B=-O+D,Z=Math.PI-O-D,rt=Bn(F[0],F[1])/Math.sqrt(2)*ei,lt={x:F[0].x+Math.cos(B)*rt,y:F[0].y+Math.sin(B)*rt*-1},st={x:F[1].x+Math.cos(Z)*rt,y:F[1].y+Math.sin(Z)*rt*-1},y.push([_t(F[0]),lt,st,_t(F[1])]);break;case Vt:case pt:C=[_[0],L.position_path===pt?0:_[1]],P=[],X=[],F.forEach(function(T,et){var ct,It,Dt,mt,K,Bt=C[et];Array.isArray(Bt)?ct={x:Bt[0],y:Bt[1]}:typeof Bt=="number"?ct=T.socketId===q?{x:0,y:-Bt}:T.socketId===Q?{x:Bt,y:0}:T.socketId===tt?{x:0,y:Bt}:{x:-Bt,y:0}:(It=F[et?0:1],mt=0<(Dt=L.position_plugOverheadSE[et])?mr+(Wa<Dt?(Dt-Wa)*pu:0):ir+(L.position_lineStrokeWidth>Ga?(L.position_lineStrokeWidth-Ga)*Ds:0),T.socketId===q?((K=(T.y-It.y)/2)<mt&&(K=mt),ct={x:0,y:-K}):T.socketId===Q?((K=(It.x-T.x)/2)<mt&&(K=mt),ct={x:K,y:0}):T.socketId===tt?((K=(It.y-T.y)/2)<mt&&(K=mt),ct={x:0,y:K}):((K=(T.x-It.x)/2)<mt&&(K=mt),ct={x:-K,y:0})),P[et]=T.x+ct.x,X[et]=T.y+ct.y}),y.push([_t(F[0]),{x:P[0],y:X[0]},{x:P[1],y:X[1]},_t(F[1])]);break;case Kt:(function(){var T,et=1,ct=2,It=3,Dt=4,mt=[[],[]],K=[];function Bt(Yt){return Yt===et?It:Yt===ct?Dt:Yt===It?et:ct}function we(Yt){return Yt===ct||Yt===Dt?"x":"y"}function Mt(Yt,Ot,kt){var Qt={x:Yt.x,y:Yt.y};if(kt){if(kt===Bt(Yt.dirId))throw new Error("Invalid dirId: "+kt);Qt.dirId=kt}else Qt.dirId=Yt.dirId;return Qt.dirId===et?Qt.y-=Ot:Qt.dirId===ct?Qt.x+=Ot:Qt.dirId===It?Qt.y+=Ot:Qt.x-=Ot,Qt}function jt(Yt,Ot){return Ot.dirId===et?Yt.y<=Ot.y:Ot.dirId===ct?Yt.x>=Ot.x:Ot.dirId===It?Yt.y>=Ot.y:Yt.x<=Ot.x}function Ie(Yt,Ot){return Ot.dirId===et||Ot.dirId===It?Yt.x===Ot.x:Yt.y===Ot.y}function Re(Yt){return Yt[0]?{contain:0,notContain:1}:{contain:1,notContain:0}}function xe(Yt,Ot,kt){return Math.abs(Ot[kt]-Yt[kt])}function hn(Yt,Ot,kt){return kt==="x"?Yt.x<Ot.x?ct:Dt:Yt.y<Ot.y?It:et}function Pi(){var Yt,Ot,kt,Qt,Ct=[jt(K[1],K[0]),jt(K[0],K[1])],te=[we(K[0].dirId),we(K[1].dirId)];if(te[0]===te[1]){if(Ct[0]&&Ct[1])return Ie(K[1],K[0])||(K[0][te[0]]===K[1][te[1]]?(mt[0].push(K[0]),mt[1].push(K[1])):(Yt=K[0][te[0]]+(K[1][te[1]]-K[0][te[0]])/2,mt[0].push(Mt(K[0],Math.abs(Yt-K[0][te[0]]))),mt[1].push(Mt(K[1],Math.abs(Yt-K[1][te[1]]))))),!1;Ct[0]!==Ct[1]?(Ot=Re(Ct),(kt=xe(K[Ot.notContain],K[Ot.contain],te[Ot.notContain]))<_n&&(K[Ot.notContain]=Mt(K[Ot.notContain],_n-kt)),mt[Ot.notContain].push(K[Ot.notContain]),K[Ot.notContain]=Mt(K[Ot.notContain],_n,Ie(K[Ot.contain],K[Ot.notContain])?te[Ot.notContain]==="x"?It:ct:hn(K[Ot.notContain],K[Ot.contain],te[Ot.notContain]==="x"?"y":"x"))):(kt=xe(K[0],K[1],te[0]==="x"?"y":"x"),mt.forEach(function(qe,Ae){var Hn=Ae===0?1:0;qe.push(K[Ae]),K[Ae]=Mt(K[Ae],_n,2*_n<=kt?hn(K[Ae],K[Hn],te[Ae]==="x"?"y":"x"):te[Ae]==="x"?It:ct)}))}else{if(Ct[0]&&Ct[1])return Ie(K[1],K[0])?mt[1].push(K[1]):Ie(K[0],K[1])?mt[0].push(K[0]):mt[0].push(te[0]==="x"?{x:K[1].x,y:K[0].y}:{x:K[0].x,y:K[1].y}),!1;Ct[0]!==Ct[1]?(Ot=Re(Ct),mt[Ot.notContain].push(K[Ot.notContain]),K[Ot.notContain]=Mt(K[Ot.notContain],_n,xe(K[Ot.notContain],K[Ot.contain],te[Ot.contain])>=_n?hn(K[Ot.notContain],K[Ot.contain],te[Ot.contain]):K[Ot.contain].dirId)):(Qt=[{x:K[0].x,y:K[0].y},{x:K[1].x,y:K[1].y}],mt.forEach(function(qe,Ae){var Hn=Ae===0?1:0,Gn=xe(Qt[Ae],Qt[Hn],te[Ae]);Gn<_n&&(K[Ae]=Mt(K[Ae],_n-Gn)),qe.push(K[Ae]),K[Ae]=Mt(K[Ae],_n,hn(K[Ae],K[Hn],te[Hn]))}))}return!0}for(F.forEach(function(Yt,Ot){var kt,Qt=_t(Yt),Ct=_[Ot];kt=Array.isArray(Ct)?Ct[0]<0?[Dt,-Ct[0]]:0<Ct[0]?[ct,Ct[0]]:Ct[1]<0?[et,-Ct[1]]:0<Ct[1]?[It,Ct[1]]:[Yt.socketId,0]:typeof Ct!="number"?[Yt.socketId,_n]:0<=Ct?[Yt.socketId,Ct]:[Bt(Yt.socketId),-Ct],Qt.dirId=kt[0],Ct=kt[1],mt[Ot].push(Qt),K[Ot]=Mt(Qt,Ct)});Pi(););mt[1].reverse(),mt[0].concat(mt[1]).forEach(function(Yt,Ot){var kt={x:Yt.x,y:Yt.y};0<Ot&&y.push([T,kt]),T=kt})})()}z=[],L.position_plugOverheadSE.forEach(function(T,et){var ct,It,Dt,mt,K,Bt,we,Mt,jt,Ie,Re,xe=!et;0<T?(ct=y[It=xe?0:y.length-1]).length===2?(z[It]=z[It]||Bn.apply(null,ct),z[It]>Si&&(z[It]-T<Si&&(T=z[It]-Si),Dt=rs(ct[0],ct[1],(xe?T:z[It]-T)/z[It]),y[It]=xe?[Dt,ct[1]]:[ct[0],Dt],z[It]-=T)):(z[It]=z[It]||Ri.apply(null,ct),z[It]>Si&&(z[It]-T<Si&&(T=z[It]-Si),Dt=Ii(ct[0],ct[1],ct[2],ct[3],Ms(ct[0],ct[1],ct[2],ct[3],xe?T:z[It]-T)),xe?(mt=ct[0],K=Dt.toP1):(mt=ct[3],K=Dt.fromP2),Bt=Math.atan2(mt.y-Dt.y,Dt.x-mt.x),we=Bn(Dt,K),Dt.x=mt.x+Math.cos(Bt)*T,Dt.y=mt.y+Math.sin(Bt)*T*-1,K.x=Dt.x+Math.cos(Bt)*we,K.y=Dt.y+Math.sin(Bt)*we*-1,y[It]=xe?[Dt,Dt.toP1,Dt.toP2,ct[3]]:[ct[0],Dt.fromP1,Dt.fromP2,Dt],z[It]=null)):T<0&&(ct=y[It=xe?0:y.length-1],Mt=F[et].socketId,jt=Mt===ut||Mt===Q?"x":"y",T<(Re=-m[et][jt==="x"?"width":"height"])&&(T=Re),Ie=T*(Mt===ut||Mt===q?-1:1),ct.length===2?ct[xe?0:ct.length-1][jt]+=Ie:(xe?[0,1]:[ct.length-2,ct.length-1]).forEach(function(hn){ct[hn][jt]+=Ie}),z[It]=null)}),V.position_socketXYSE=nn(F),V.position_plugOverheadSE=nn(L.position_plugOverheadSE),V.position_path=L.position_path,V.position_lineStrokeWidth=L.position_lineStrokeWidth,V.position_socketGravitySE=nn(_),vt=!0,h.events.apl_position&&h.events.apl_position.forEach(function(T){T(h,y)})}return vt}function Oi(h,_){_!==h.isShown&&(!!_!=!!h.isShown&&(h.svg.style.visibility=_?"":"hidden"),h.isShown=_,h.events&&h.events.svgShow&&h.events.svgShow.forEach(function(m){m(h,_)}))}function Un(h,_){var m,y,x,k,G,N,z,C,P,X,R,D,O,B,Z,rt,lt,st,Y,L,V,F,vt,Et,_t,T,et,ct,It,Dt,mt,K,Bt,we,Mt,jt,Ie,Re,xe,hn,Pi,Yt,Ot,kt,Qt,Ct,te,qe,Ae,Hn,Gn,Pr,Ut={};_.line&&(Ut.line=(y=(m=h).options,x=m.curStats,k=m.events,G=!1,G=wt(m,x,"line_color",y.lineColor,k.cur_line_color)||G,G=wt(m,x,"line_colorTra",ii(x.line_color)[0]<1)||G,G=wt(m,x,"line_strokeWidth",y.lineSize,k.cur_line_strokeWidth)||G)),(_.plug||Ut.line)&&(Ut.plug=(z=(N=h).options,C=N.curStats,P=N.events,X=!1,[0,1].forEach(function(j){var zt,De,me,Ne,yr,Mo,Bs,ai,We=z.plugSE[j];X=wt(N,C.plug_enabledSE,j,We!==He)||X,X=wt(N,C.plug_plugSE,j,We)||X,X=wt(N,C.plug_colorSE,j,ai=z.plugColorSE[j]||C.line_color,P.cur_plug_colorSE)||X,X=wt(N,C.plug_colorTraSE,j,ii(ai)[0]<1)||X,We!==He&&(Ne=De=(zt=_r[bt[We]]).widthR*z.plugSizeSE[j],yr=me=zt.heightR*z.plugSizeSE[j],ge&&(Ne*=C.line_strokeWidth,yr*=C.line_strokeWidth),X=wt(N,C.plug_markerWidthSE,j,Ne)||X,X=wt(N,C.plug_markerHeightSE,j,yr)||X,C.capsMaskMarker_markerWidthSE[j]=De,C.capsMaskMarker_markerHeightSE[j]=me),C.plugOutline_plugSE[j]=C.capsMaskMarker_plugSE[j]=We,C.plug_enabledSE[j]?(ai=C.line_strokeWidth/Dn.lineSize*z.plugSizeSE[j],C.position_plugOverheadSE[j]=zt.overhead*ai,C.viewBox_plugBCircleSE[j]=zt.bCircle*ai,Mo=zt.sideLen*ai,Bs=zt.backLen*ai):(C.position_plugOverheadSE[j]=-C.line_strokeWidth/2,C.viewBox_plugBCircleSE[j]=Mo=Bs=0),wt(N,C.attach_plugSideLenSE,j,Mo,P.cur_attach_plugSideLenSE),wt(N,C.attach_plugBackLenSE,j,Bs,P.cur_attach_plugBackLenSE),C.capsMaskAnchor_enabledSE[j]=!C.plug_enabledSE[j]}),X=wt(N,C,"plug_enabled",C.plug_enabledSE[0]||C.plug_enabledSE[1])||X)),(_.lineOutline||Ut.line)&&(Ut.lineOutline=(O=(R=h).options,B=R.curStats,Z=!1,Z=wt(R,B,"lineOutline_enabled",O.lineOutlineEnabled)||Z,Z=wt(R,B,"lineOutline_color",O.lineOutlineColor)||Z,Z=wt(R,B,"lineOutline_colorTra",ii(B.lineOutline_color)[0]<1)||Z,D=B.line_strokeWidth*O.lineOutlineSize,Z=wt(R,B,"lineOutline_strokeWidth",B.line_strokeWidth-2*D)||Z,Z=wt(R,B,"lineOutline_inStrokeWidth",B.lineOutline_colorTra?B.lineOutline_strokeWidth+2*Ci:B.line_strokeWidth-D)||Z)),(_.plugOutline||Ut.line||Ut.plug||Ut.lineOutline)&&(Ut.plugOutline=(lt=(rt=h).options,st=rt.curStats,Y=!1,[0,1].forEach(function(j){var zt,De=st.plugOutline_plugSE[j],me=De!==He?_r[bt[De]]:null;Y=wt(rt,st.plugOutline_enabledSE,j,lt.plugOutlineEnabledSE[j]&&st.plug_enabled&&st.plug_enabledSE[j]&&!!me&&!!me.outlineBase)||Y,Y=wt(rt,st.plugOutline_colorSE,j,zt=lt.plugOutlineColorSE[j]||st.lineOutline_color)||Y,Y=wt(rt,st.plugOutline_colorTraSE,j,ii(zt)[0]<1)||Y,me&&me.outlineBase&&((zt=lt.plugOutlineSizeSE[j])>me.outlineMax&&(zt=me.outlineMax),zt*=2*me.outlineBase,Y=wt(rt,st.plugOutline_strokeWidthSE,j,zt)||Y,Y=wt(rt,st.plugOutline_inStrokeWidthSE,j,st.plugOutline_colorTraSE[j]?zt-Ci/(st.line_strokeWidth/Dn.lineSize)/lt.plugSizeSE[j]*2:zt/2)||Y)}),Y)),(_.faces||Ut.line||Ut.plug||Ut.lineOutline||Ut.plugOutline)&&(Ut.faces=(F=(L=h).curStats,vt=L.aplStats,Et=L.events,_t=!1,!F.line_altColor&&wt(L,vt,"line_color",V=F.line_color,Et.apl_line_color)&&(L.lineFace.style.stroke=V,_t=!0),wt(L,vt,"line_strokeWidth",V=F.line_strokeWidth,Et.apl_line_strokeWidth)&&(L.lineShape.style.strokeWidth=V+"px",_t=!0,(Dr||gn)&&($e(L,L.lineShape),gn&&($e(L,L.lineFace),$e(L,L.lineMaskCaps)))),wt(L,vt,"lineOutline_enabled",V=F.lineOutline_enabled,Et.apl_lineOutline_enabled)&&(L.lineOutlineFace.style.display=V?"inline":"none",_t=!0),F.lineOutline_enabled&&(wt(L,vt,"lineOutline_color",V=F.lineOutline_color,Et.apl_lineOutline_color)&&(L.lineOutlineFace.style.stroke=V,_t=!0),wt(L,vt,"lineOutline_strokeWidth",V=F.lineOutline_strokeWidth,Et.apl_lineOutline_strokeWidth)&&(L.lineOutlineMaskShape.style.strokeWidth=V+"px",_t=!0,gn&&($e(L,L.lineOutlineMaskCaps),$e(L,L.lineOutlineFace))),wt(L,vt,"lineOutline_inStrokeWidth",V=F.lineOutline_inStrokeWidth,Et.apl_lineOutline_inStrokeWidth)&&(L.lineMaskShape.style.strokeWidth=V+"px",_t=!0,gn&&($e(L,L.lineOutlineMaskCaps),$e(L,L.lineOutlineFace)))),wt(L,vt,"plug_enabled",V=F.plug_enabled,Et.apl_plug_enabled)&&(L.plugsFace.style.display=V?"inline":"none",_t=!0),F.plug_enabled&&[0,1].forEach(function(j){var zt=F.plug_plugSE[j],De=zt!==He?_r[bt[zt]]:null,me=Qa(j,De);wt(L,vt.plug_enabledSE,j,V=F.plug_enabledSE[j],Et.apl_plug_enabledSE)&&(L.plugsFace.style[me.prop]=V?"url(#"+L.plugMarkerIdSE[j]+")":"none",_t=!0),F.plug_enabledSE[j]&&(wt(L,vt.plug_plugSE,j,zt,Et.apl_plug_plugSE)&&(L.plugFaceSE[j].href.baseVal="#"+De.elmId,$s(L,L.plugMarkerSE[j],me.orient,De.bBox,L.svg,L.plugMarkerShapeSE[j],L.plugsFace),_t=!0,Dr&&$e(L,L.plugsFace)),wt(L,vt.plug_colorSE,j,V=F.plug_colorSE[j],Et.apl_plug_colorSE)&&(L.plugFaceSE[j].style.fill=V,_t=!0,(Xi||ge||gn)&&!F.line_colorTra&&$e(L,gn?L.lineMaskCaps:L.capsMaskLine)),["markerWidth","markerHeight"].forEach(function(Ne){var yr="plug_"+Ne+"SE";wt(L,vt[yr],j,V=F[yr][j],Et["apl_"+yr])&&(L.plugMarkerSE[j][Ne].baseVal.value=V,_t=!0)}),wt(L,vt.plugOutline_enabledSE,j,V=F.plugOutline_enabledSE[j],Et.apl_plugOutline_enabledSE)&&(V?(L.plugFaceSE[j].style.mask="url(#"+L.plugMaskIdSE[j]+")",L.plugOutlineFaceSE[j].style.display="inline"):(L.plugFaceSE[j].style.mask="none",L.plugOutlineFaceSE[j].style.display="none"),_t=!0),F.plugOutline_enabledSE[j]&&(wt(L,vt.plugOutline_plugSE,j,zt,Et.apl_plugOutline_plugSE)&&(L.plugOutlineFaceSE[j].href.baseVal=L.plugMaskShapeSE[j].href.baseVal=L.plugOutlineMaskShapeSE[j].href.baseVal="#"+De.elmId,[L.plugMaskSE[j],L.plugOutlineMaskSE[j]].forEach(function(Ne){Ne.x.baseVal.value=De.bBox.left,Ne.y.baseVal.value=De.bBox.top,Ne.width.baseVal.value=De.bBox.width,Ne.height.baseVal.value=De.bBox.height}),_t=!0),wt(L,vt.plugOutline_colorSE,j,V=F.plugOutline_colorSE[j],Et.apl_plugOutline_colorSE)&&(L.plugOutlineFaceSE[j].style.fill=V,_t=!0,gn&&($e(L,L.lineMaskCaps),$e(L,L.lineOutlineMaskCaps))),wt(L,vt.plugOutline_strokeWidthSE,j,V=F.plugOutline_strokeWidthSE[j],Et.apl_plugOutline_strokeWidthSE)&&(L.plugOutlineMaskShapeSE[j].style.strokeWidth=V+"px",_t=!0),wt(L,vt.plugOutline_inStrokeWidthSE,j,V=F.plugOutline_inStrokeWidthSE[j],Et.apl_plugOutline_inStrokeWidthSE)&&(L.plugMaskShapeSE[j].style.strokeWidth=V+"px",_t=!0)))}),_t)),(_.position||Ut.line||Ut.plug)&&(Ut.position=gu(h)),(_.path||Ut.position)&&(Ut.path=(ct=(T=h).curStats,It=T.aplStats,Dt=T.pathList.animVal||T.pathList.baseVal,mt=ct.path_edge,K=!1,Dt&&(mt.x1=mt.x2=Dt[0][0].x,mt.y1=mt.y2=Dt[0][0].y,ct.path_pathData=et=Oo(Dt,function(j){j.x<mt.x1&&(mt.x1=j.x),j.y<mt.y1&&(mt.y1=j.y),j.x>mt.x2&&(mt.x2=j.x),j.y>mt.y2&&(mt.y2=j.y)}),Ls(et,It.path_pathData)&&(T.linePath.setPathData(et),It.path_pathData=et,K=!0,gn?($e(T,T.plugsFace),$e(T,T.lineMaskCaps)):Dr&&$e(T,T.linePath),T.events.apl_path&&T.events.apl_path.forEach(function(j){j(T,et)}))),K)),Ut.viewBox=(jt=(Bt=h).curStats,Ie=Bt.aplStats,Re=jt.path_edge,xe=jt.viewBox_bBox,hn=Ie.viewBox_bBox,Pi=Bt.svg.viewBox.baseVal,Yt=Bt.svg.style,Ot=!1,we=Math.max(jt.line_strokeWidth/2,jt.viewBox_plugBCircleSE[0]||0,jt.viewBox_plugBCircleSE[1]||0),Mt={x1:Re.x1-we,y1:Re.y1-we,x2:Re.x2+we,y2:Re.y2+we},Bt.events.new_edge4viewBox&&Bt.events.new_edge4viewBox.forEach(function(j){j(Bt,Mt)}),xe.x=jt.lineMask_x=jt.lineOutlineMask_x=jt.maskBGRect_x=Mt.x1,xe.y=jt.lineMask_y=jt.lineOutlineMask_y=jt.maskBGRect_y=Mt.y1,xe.width=Mt.x2-Mt.x1,xe.height=Mt.y2-Mt.y1,["x","y","width","height"].forEach(function(j){var zt;(zt=xe[j])!==hn[j]&&(Pi[j]=hn[j]=zt,Yt[ln[j]]=zt+(j==="x"||j==="y"?Bt.bodyOffset[j]:0)+"px",Ot=!0)}),Ot),Ut.mask=(Ct=(kt=h).curStats,te=kt.aplStats,qe=!1,Ct.plug_enabled?[0,1].forEach(function(j){Ct.capsMaskMarker_enabledSE[j]=Ct.plug_enabledSE[j]&&Ct.plug_colorTraSE[j]||Ct.plugOutline_enabledSE[j]&&Ct.plugOutline_colorTraSE[j]}):Ct.capsMaskMarker_enabledSE[0]=Ct.capsMaskMarker_enabledSE[1]=!1,Ct.capsMaskMarker_enabled=Ct.capsMaskMarker_enabledSE[0]||Ct.capsMaskMarker_enabledSE[1],Ct.lineMask_outlineMode=Ct.lineOutline_enabled,Ct.caps_enabled=Ct.capsMaskMarker_enabled||Ct.capsMaskAnchor_enabledSE[0]||Ct.capsMaskAnchor_enabledSE[1],Ct.lineMask_enabled=Ct.caps_enabled||Ct.lineMask_outlineMode,(Ct.lineMask_enabled&&!Ct.lineMask_outlineMode||Ct.lineOutline_enabled)&&["x","y"].forEach(function(j){var zt="maskBGRect_"+j;wt(kt,te,zt,Qt=Ct[zt])&&(kt.maskBGRect[j].baseVal.value=Qt,qe=!0)}),wt(kt,te,"lineMask_enabled",Qt=Ct.lineMask_enabled)&&(kt.lineFace.style.mask=Qt?"url(#"+kt.lineMaskId+")":"none",qe=!0,ge&&$e(kt,kt.lineMask)),Ct.lineMask_enabled&&(wt(kt,te,"lineMask_outlineMode",Qt=Ct.lineMask_outlineMode)&&(Qt?(kt.lineMaskBG.style.display="none",kt.lineMaskShape.style.display="inline"):(kt.lineMaskBG.style.display="inline",kt.lineMaskShape.style.display="none"),qe=!0),["x","y"].forEach(function(j){var zt="lineMask_"+j;wt(kt,te,zt,Qt=Ct[zt])&&(kt.lineMask[j].baseVal.value=Qt,qe=!0)}),wt(kt,te,"caps_enabled",Qt=Ct.caps_enabled)&&(kt.lineMaskCaps.style.display=kt.lineOutlineMaskCaps.style.display=Qt?"inline":"none",qe=!0,ge&&$e(kt,kt.capsMaskLine)),Ct.caps_enabled&&([0,1].forEach(function(j){var zt;wt(kt,te.capsMaskAnchor_enabledSE,j,Qt=Ct.capsMaskAnchor_enabledSE[j])&&(kt.capsMaskAnchorSE[j].style.display=Qt?"inline":"none",qe=!0,ge&&$e(kt,kt.lineMask)),Ct.capsMaskAnchor_enabledSE[j]&&(Ls(zt=Ct.capsMaskAnchor_pathDataSE[j],te.capsMaskAnchor_pathDataSE[j])&&(kt.capsMaskAnchorSE[j].setPathData(zt),te.capsMaskAnchor_pathDataSE[j]=zt,qe=!0),wt(kt,te.capsMaskAnchor_strokeWidthSE,j,Qt=Ct.capsMaskAnchor_strokeWidthSE[j])&&(kt.capsMaskAnchorSE[j].style.strokeWidth=Qt+"px",qe=!0))}),wt(kt,te,"capsMaskMarker_enabled",Qt=Ct.capsMaskMarker_enabled)&&(kt.capsMaskLine.style.display=Qt?"inline":"none",qe=!0),Ct.capsMaskMarker_enabled&&[0,1].forEach(function(j){var zt=Ct.capsMaskMarker_plugSE[j],De=zt!==He?_r[bt[zt]]:null,me=Qa(j,De);wt(kt,te.capsMaskMarker_enabledSE,j,Qt=Ct.capsMaskMarker_enabledSE[j])&&(kt.capsMaskLine.style[me.prop]=Qt?"url(#"+kt.lineMaskMarkerIdSE[j]+")":"none",qe=!0),Ct.capsMaskMarker_enabledSE[j]&&(wt(kt,te.capsMaskMarker_plugSE,j,zt)&&(kt.capsMaskMarkerShapeSE[j].href.baseVal="#"+De.elmId,$s(kt,kt.capsMaskMarkerSE[j],me.orient,De.bBox,kt.svg,kt.capsMaskMarkerShapeSE[j],kt.capsMaskLine),qe=!0,Dr&&($e(kt,kt.capsMaskLine),$e(kt,kt.lineFace))),["markerWidth","markerHeight"].forEach(function(Ne){var yr="capsMaskMarker_"+Ne+"SE";wt(kt,te[yr],j,Qt=Ct[yr][j])&&(kt.capsMaskMarkerSE[j][Ne].baseVal.value=Qt,qe=!0)}))}))),Ct.lineOutline_enabled&&["x","y"].forEach(function(j){var zt="lineOutlineMask_"+j;wt(kt,te,zt,Qt=Ct[zt])&&(kt.lineOutlineMask[j].baseVal.value=Qt,qe=!0)}),qe),_.effect&&(Gn=(Ae=h).curStats,Pr=Ae.aplStats,Object.keys(e).forEach(function(j){var zt=e[j],De=j+"_enabled",me=j+"_options",Ne=Gn[me];wt(Ae,Pr,De,Hn=Gn[De])?(Hn&&(Pr[me]=nn(Ne)),zt[Hn?"init":"remove"](Ae)):Hn&&Or(Ne,Pr[me])&&(zt.remove(Ae),Pr[De]=!0,Pr[me]=nn(Ne),zt.init(Ae))})),(Xi||ge)&&Ut.line&&!Ut.path&&$e(h,h.lineShape),Xi&&Ut.plug&&!Ut.line&&$e(h,h.plugsFace),Ya(h)}function Ns(h,_){return{duration:mn(h.duration)&&0<h.duration?h.duration:_.duration,timing:Je.validTiming(h.timing)?h.timing:nn(_.timing)}}function Fs(h,_,m,y){var x,k=h.curStats,G=h.aplStats,N={};function z(){["show_on","show_effect","show_animOptions"].forEach(function(C){G[C]=k[C]})}k.show_on=_,m&&t[m]&&(k.show_effect=m,k.show_animOptions=Ns(cn(y)?y:{},t[m].defaultAnimOptions)),N.show_on=k.show_on!==G.show_on,N.show_effect=k.show_effect!==G.show_effect,N.show_animOptions=Or(k.show_animOptions,G.show_animOptions),N.show_effect||N.show_animOptions?k.show_inAnim?(x=N.show_effect?t[G.show_effect].stop(h,!0,!0):t[G.show_effect].stop(h),z(),t[G.show_effect].init(h,x)):N.show_on&&(G.show_effect&&N.show_effect&&t[G.show_effect].stop(h,!0,!0),z(),t[G.show_effect].init(h)):N.show_on&&(z(),t[G.show_effect].start(h))}function Po(h,_,m){var y={props:h,optionName:m};return!(!(h.attachments.indexOf(_)<0)||_.conf.bind&&!_.conf.bind(_,y))&&(h.attachments.push(_),_.boundTargets.push(y),!0)}function Vs(h,_,m){var y=h.attachments.indexOf(_);-1<y&&h.attachments.splice(y,1),_.boundTargets.some(function(x,k){return x.props===h&&(_.conf.unbind&&_.conf.unbind(_,x),y=k,!0)})&&(_.boundTargets.splice(y,1),m||Di(function(){_.boundTargets.length||o(_)}))}function qs(h,_){var m,y,x=h.options,k={};function G(C,P,X,R,D){var O={};return X?R!=null?(O.container=C[X],O.key=R):(O.container=C,O.key=X):(O.container=C,O.key=P),O.default=D,O.acceptsAuto=O.default==null,O}function N(C,P,X,R,D,O,B){var Z,rt,lt,st=G(C,X,D,O,B);return P[X]!=null&&(rt=(P[X]+"").toLowerCase())&&(st.acceptsAuto&&rt===re||(lt=R[rt]))&&lt!==st.container[st.key]&&(st.container[st.key]=lt,Z=!0),st.container[st.key]!=null||st.acceptsAuto||(st.container[st.key]=st.default,Z=!0),Z}function z(C,P,X,R,D,O,B,Z,rt){var lt,st,Y,L,V=G(C,X,D,O,B);if(!R){if(V.default==null)throw new Error("Invalid `type`: "+X);R=typeof V.default}return P[X]!=null&&(V.acceptsAuto&&(P[X]+"").toLowerCase()===re||(Y=st=P[X],((L=R)==="number"?mn(Y):typeof Y===L)&&(st=rt&&R==="string"&&st?st.trim():st,1)&&(!Z||Z(st))))&&st!==V.container[V.key]&&(V.container[V.key]=st,lt=!0),V.container[V.key]!=null||V.acceptsAuto||(V.container[V.key]=V.default,lt=!0),lt}if(_=_||{},["start","end"].forEach(function(C,P){var X=_[C],R=!1;if(X&&(si(X)||(R=i(X,"anchor")))&&X!==x.anchorSE[P]){if(h.optionIsAttach.anchorSE[P]!==!1&&Vs(h,Le[x.anchorSE[P]._id]),R&&!Po(h,Le[X._id],C))throw new Error("Can't bind attachment");x.anchorSE[P]=X,h.optionIsAttach.anchorSE[P]=R,y=k.position=!0}}),!x.anchorSE[0]||!x.anchorSE[1]||x.anchorSE[0]===x.anchorSE[1])throw new Error("`start` and `end` are required.");y&&(m=function(C,P){var X,R,D;if(!(X=ns(C))||!(R=ns(P)))throw new Error("Cannot get frames.");return X.length&&R.length&&(X.reverse(),R.reverse(),X.some(function(O){return R.some(function(B){return B===O&&(D=B.contentWindow,!0)})})),D||window}(h.optionIsAttach.anchorSE[0]!==!1?Le[x.anchorSE[0]._id].element:x.anchorSE[0],h.optionIsAttach.anchorSE[1]!==!1?Le[x.anchorSE[1]._id].element:x.anchorSE[1]))!==h.baseWindow&&(function(C,P){var X,R,D,O,B,Z,rt,lt,st,Y,L=C.aplStats,V=P.document,F=E+"-"+C._id;function vt(T){var et=R.appendChild(V.createElementNS(Nt,"mask"));return et.id=T,et.maskUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,[et.x,et.y,et.width,et.height].forEach(function(ct){ct.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0)}),et}function Et(T){var et=R.appendChild(V.createElementNS(Nt,"marker"));return et.id=T,et.markerUnits.baseVal=SVGMarkerElement.SVG_MARKERUNITS_STROKEWIDTH,et.viewBox.baseVal||et.setAttribute("viewBox","0 0 0 0"),et}function _t(T){return[T.width,T.height].forEach(function(et){et.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100)}),T}C.pathList={},Qe(L,ni),Object.keys(e).forEach(function(T){var et=T+"_enabled";L[et]&&(e[T].remove(C),L[et]=!1)}),C.baseWindow&&C.svg&&C.baseWindow.document.body.removeChild(C.svg),Xa(C.baseWindow=P),C.bodyOffset=Za(P),C.svg=X=V.createElementNS(Nt,"svg"),X.className.baseVal=E,X.viewBox.baseVal||X.setAttribute("viewBox","0 0 0 0"),C.defs=R=X.appendChild(V.createElementNS(Nt,"defs")),C.linePath=O=R.appendChild(V.createElementNS(Nt,"path")),O.id=B=F+"-line-path",O.className.baseVal=E+"-line-path",ge&&(O.style.fill="none"),C.lineShape=O=R.appendChild(V.createElementNS(Nt,"use")),O.id=Z=F+"-line-shape",O.href.baseVal="#"+B,(D=R.appendChild(V.createElementNS(Nt,"g"))).id=rt=F+"-caps",C.capsMaskAnchorSE=[0,1].map(function(){var T=D.appendChild(V.createElementNS(Nt,"path"));return T.className.baseVal=E+"-caps-mask-anchor",T}),C.lineMaskMarkerIdSE=[F+"-caps-mask-marker-0",F+"-caps-mask-marker-1"],C.capsMaskMarkerSE=[0,1].map(function(T){return Et(C.lineMaskMarkerIdSE[T])}),C.capsMaskMarkerShapeSE=[0,1].map(function(T){var et=C.capsMaskMarkerSE[T].appendChild(V.createElementNS(Nt,"use"));return et.className.baseVal=E+"-caps-mask-marker-shape",et}),C.capsMaskLine=O=D.appendChild(V.createElementNS(Nt,"use")),O.className.baseVal=E+"-caps-mask-line",O.href.baseVal="#"+Z,C.maskBGRect=O=_t(R.appendChild(V.createElementNS(Nt,"rect"))),O.id=lt=F+"-mask-bg-rect",O.className.baseVal=E+"-mask-bg-rect",ge&&(O.style.fill="white"),C.lineMask=_t(vt(C.lineMaskId=F+"-line-mask")),C.lineMaskBG=O=C.lineMask.appendChild(V.createElementNS(Nt,"use")),O.href.baseVal="#"+lt,C.lineMaskShape=O=C.lineMask.appendChild(V.createElementNS(Nt,"use")),O.className.baseVal=E+"-line-mask-shape",O.href.baseVal="#"+B,O.style.display="none",C.lineMaskCaps=O=C.lineMask.appendChild(V.createElementNS(Nt,"use")),O.href.baseVal="#"+rt,C.lineOutlineMask=_t(vt(st=F+"-line-outline-mask")),(O=C.lineOutlineMask.appendChild(V.createElementNS(Nt,"use"))).href.baseVal="#"+lt,C.lineOutlineMaskShape=O=C.lineOutlineMask.appendChild(V.createElementNS(Nt,"use")),O.className.baseVal=E+"-line-outline-mask-shape",O.href.baseVal="#"+B,C.lineOutlineMaskCaps=O=C.lineOutlineMask.appendChild(V.createElementNS(Nt,"use")),O.href.baseVal="#"+rt,C.face=X.appendChild(V.createElementNS(Nt,"g")),C.lineFace=O=C.face.appendChild(V.createElementNS(Nt,"use")),O.href.baseVal="#"+Z,C.lineOutlineFace=O=C.face.appendChild(V.createElementNS(Nt,"use")),O.href.baseVal="#"+Z,O.style.mask="url(#"+st+")",O.style.display="none",C.plugMaskIdSE=[F+"-plug-mask-0",F+"-plug-mask-1"],C.plugMaskSE=[0,1].map(function(T){return vt(C.plugMaskIdSE[T])}),C.plugMaskShapeSE=[0,1].map(function(T){var et=C.plugMaskSE[T].appendChild(V.createElementNS(Nt,"use"));return et.className.baseVal=E+"-plug-mask-shape",et}),Y=[],C.plugOutlineMaskSE=[0,1].map(function(T){return vt(Y[T]=F+"-plug-outline-mask-"+T)}),C.plugOutlineMaskShapeSE=[0,1].map(function(T){var et=C.plugOutlineMaskSE[T].appendChild(V.createElementNS(Nt,"use"));return et.className.baseVal=E+"-plug-outline-mask-shape",et}),C.plugMarkerIdSE=[F+"-plug-marker-0",F+"-plug-marker-1"],C.plugMarkerSE=[0,1].map(function(T){var et=Et(C.plugMarkerIdSE[T]);return ge&&(et.markerUnits.baseVal=SVGMarkerElement.SVG_MARKERUNITS_USERSPACEONUSE),et}),C.plugMarkerShapeSE=[0,1].map(function(T){return C.plugMarkerSE[T].appendChild(V.createElementNS(Nt,"g"))}),C.plugFaceSE=[0,1].map(function(T){return C.plugMarkerShapeSE[T].appendChild(V.createElementNS(Nt,"use"))}),C.plugOutlineFaceSE=[0,1].map(function(T){var et=C.plugMarkerShapeSE[T].appendChild(V.createElementNS(Nt,"use"));return et.style.mask="url(#"+Y[T]+")",et.style.display="none",et}),C.plugsFace=O=C.face.appendChild(V.createElementNS(Nt,"use")),O.className.baseVal=E+"-plugs-face",O.href.baseVal="#"+Z,O.style.display="none",C.curStats.show_inAnim?(C.isShown=1,t[L.show_effect].stop(C,!0)):C.isShown||(X.style.visibility="hidden"),V.body.appendChild(X),[0,1,2].forEach(function(T){var et,ct=C.options.labelSEM[T];ct&&i(ct,"label")&&(et=Le[ct._id]).conf.initSvg&&et.conf.initSvg(et,C)})}(h,m),k.line=k.plug=k.lineOutline=k.plugOutline=k.faces=k.effect=!0),k.position=N(x,_,"path",ye,null,null,Dn.path)||k.position,k.position=N(x,_,"startSocket",nt,"socketSE",0)||k.position,k.position=N(x,_,"endSocket",nt,"socketSE",1)||k.position,[_.startSocketGravity,_.endSocketGravity].forEach(function(C,P){var X,R,D=!1;C!=null&&(Array.isArray(C)?mn(C[0])&&mn(C[1])&&(D=[C[0],C[1]],Array.isArray(x.socketGravitySE[P])&&(X=D,R=x.socketGravitySE[P],X.length===R.length&&X.every(function(O,B){return O===R[B]}))&&(D=!1)):((C+"").toLowerCase()===re?D=null:mn(C)&&0<=C&&(D=C),D===x.socketGravitySE[P]&&(D=!1)),D!==!1&&(x.socketGravitySE[P]=D,k.position=!0))}),k.line=z(x,_,"color",null,"lineColor",null,Dn.lineColor,null,!0)||k.line,k.line=z(x,_,"size",null,"lineSize",null,Dn.lineSize,function(C){return 0<C})||k.line,["startPlug","endPlug"].forEach(function(C,P){k.plug=N(x,_,C,gr,"plugSE",P,Dn.plugSE[P])||k.plug,k.plug=z(x,_,C+"Color","string","plugColorSE",P,null,null,!0)||k.plug,k.plug=z(x,_,C+"Size",null,"plugSizeSE",P,Dn.plugSizeSE[P],function(X){return 0<X})||k.plug}),k.lineOutline=z(x,_,"outline",null,"lineOutlineEnabled",null,Dn.lineOutlineEnabled)||k.lineOutline,k.lineOutline=z(x,_,"outlineColor",null,"lineOutlineColor",null,Dn.lineOutlineColor,null,!0)||k.lineOutline,k.lineOutline=z(x,_,"outlineSize",null,"lineOutlineSize",null,Dn.lineOutlineSize,function(C){return 0<C&&C<=.48})||k.lineOutline,["startPlugOutline","endPlugOutline"].forEach(function(C,P){k.plugOutline=z(x,_,C,null,"plugOutlineEnabledSE",P,Dn.plugOutlineEnabledSE[P])||k.plugOutline,k.plugOutline=z(x,_,C+"Color","string","plugOutlineColorSE",P,null,null,!0)||k.plugOutline,k.plugOutline=z(x,_,C+"Size",null,"plugOutlineSizeSE",P,Dn.plugOutlineSizeSE[P],function(X){return 1<=X})||k.plugOutline}),["startLabel","endLabel","middleLabel"].forEach(function(C,P){var X,R,D,O=_[C],B=x.labelSEM[P]&&!h.optionIsAttach.labelSEM[P]?Le[x.labelSEM[P]._id].text:x.labelSEM[P],Z=!1;if((X=typeof O=="string")&&(O=O.trim()),(X||O&&(Z=i(O,"label")))&&O!==B){if(x.labelSEM[P]&&(Vs(h,Le[x.labelSEM[P]._id]),x.labelSEM[P]=""),O){if(Z?(R=Le[(D=O)._id]).boundTargets.slice().forEach(function(rt){R.conf.removeOption(R,rt)}):D=new r(n.captionLabel,[O]),!Po(h,Le[D._id],C))throw new Error("Can't bind attachment");x.labelSEM[P]=D}h.optionIsAttach.labelSEM[P]=Z}}),Object.keys(e).forEach(function(C){var P,X,R=e[C],D=C+"_enabled",O=C+"_options";function B(rt){var lt={};return R.optionsConf.forEach(function(st){var Y=st[0],L=st[3];st[4]==null||lt[L]||(lt[L]=[]),(typeof Y=="function"?Y:Y==="id"?N:z).apply(null,[lt,rt].concat(st.slice(1)))}),lt}function Z(rt){var lt,st=C+"_animOptions";return rt.hasOwnProperty("animation")?cn(rt.animation)?lt=h.curStats[st]=Ns(rt.animation,R.defaultAnimOptions):(lt=!!rt.animation,h.curStats[st]=lt?Ns({},R.defaultAnimOptions):null):(lt=!!R.defaultEnabled,h.curStats[st]=lt?Ns({},R.defaultAnimOptions):null),lt}_.hasOwnProperty(C)&&(P=_[C],cn(P)?(h.curStats[D]=!0,X=h.curStats[O]=B(P),R.anim&&(h.curStats[O].animation=Z(P))):(X=h.curStats[D]=!!P)&&(h.curStats[O]=B({}),R.anim&&(h.curStats[O].animation=Z({}))),Or(X,x[C])&&(x[C]=X,k.effect=!0))}),Un(h,k)}function zn(h,_,m){var y={options:{anchorSE:[],socketSE:[],socketGravitySE:[],plugSE:[],plugColorSE:[],plugSizeSE:[],plugOutlineEnabledSE:[],plugOutlineColorSE:[],plugOutlineSizeSE:[],labelSEM:["","",""]},optionIsAttach:{anchorSE:[!1,!1],labelSEM:[!1,!1,!1]},curStats:{},aplStats:{},attachments:[],events:{},reflowTargets:[]};Qe(y.curStats,ni),Qe(y.aplStats,ni),Object.keys(e).forEach(function(x){var k=e[x].stats;Qe(y.curStats,k),Qe(y.aplStats,k),y.options[x]=!1}),Qe(y.curStats,ts),Qe(y.aplStats,ts),y.curStats.show_effect=ja,y.curStats.show_animOptions=nn(t[ja].defaultAnimOptions),Object.defineProperty(this,"_id",{value:++es}),y._id=this._id,un[this._id]=y,arguments.length===1&&(m=h,h=null),m=m||{},(h||_)&&(m=nn(m),h&&(m.start=h),_&&(m.end=_)),y.isShown=y.aplStats.show_on=!m.hide,this.setOptions(m)}return e={dash:{stats:{dash_len:{},dash_gap:{},dash_maxOffset:{}},anim:!0,defaultAnimOptions:{duration:1e3,timing:"linear"},optionsConf:[["type","len","number",null,null,null,function(h){return 0<h}],["type","gap","number",null,null,null,function(h){return 0<h}]],init:function(h){Ye(h,"apl_line_strokeWidth",e.dash.update),h.lineFace.style.strokeDashoffset=0,e.dash.update(h)},remove:function(h){var _=h.curStats;Ge(h,"apl_line_strokeWidth",e.dash.update),_.dash_animId&&(Je.remove(_.dash_animId),_.dash_animId=null),h.lineFace.style.strokeDasharray="none",h.lineFace.style.strokeDashoffset=0,Qe(h.aplStats,e.dash.stats)},update:function(h){var _,m=h.curStats,y=h.aplStats,x=y.dash_options,k=!1;m.dash_len=x.len||2*y.line_strokeWidth,m.dash_gap=x.gap||y.line_strokeWidth,m.dash_maxOffset=m.dash_len+m.dash_gap,k=wt(h,y,"dash_len",m.dash_len)||k,(k=wt(h,y,"dash_gap",m.dash_gap)||k)&&(h.lineFace.style.strokeDasharray=y.dash_len+","+y.dash_gap),m.dash_animOptions?(k=wt(h,y,"dash_maxOffset",m.dash_maxOffset),y.dash_animOptions&&(k||Or(m.dash_animOptions,y.dash_animOptions))&&(m.dash_animId&&(_=Je.stop(m.dash_animId),Je.remove(m.dash_animId)),y.dash_animOptions=null),y.dash_animOptions||(m.dash_animId=Je.add(function(G){return(1-G)*y.dash_maxOffset+"px"},function(G){h.lineFace.style.strokeDashoffset=G},m.dash_animOptions.duration,0,m.dash_animOptions.timing,!1,_),y.dash_animOptions=nn(m.dash_animOptions))):y.dash_animOptions&&(m.dash_animId&&(Je.remove(m.dash_animId),m.dash_animId=null),h.lineFace.style.strokeDashoffset=0,y.dash_animOptions=null)}},gradient:{stats:{gradient_colorSE:{hasSE:!0},gradient_pointSE:{hasSE:!0,hasProps:!0}},optionsConf:[["type","startColor","string","colorSE",0,null,null,!0],["type","endColor","string","colorSE",1,null,null,!0]],init:function(h){var _,m=h.baseWindow.document,y=h.defs,x=E+"-"+h._id+"-gradient";h.efc_gradient_gradient=_=y.appendChild(m.createElementNS(Nt,"linearGradient")),_.id=x,_.gradientUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,[_.x1,_.y1,_.x2,_.y2].forEach(function(k){k.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0)}),h.efc_gradient_stopSE=[0,1].map(function(k){var G=h.efc_gradient_gradient.appendChild(m.createElementNS(Nt,"stop"));try{G.offset.baseVal=k}catch(N){if(N.code!==DOMException.NO_MODIFICATION_ALLOWED_ERR)throw N;G.setAttribute("offset",k)}return G}),Ye(h,"cur_plug_colorSE",e.gradient.update),Ye(h,"apl_path",e.gradient.update),h.curStats.line_altColor=!0,h.lineFace.style.stroke="url(#"+x+")",e.gradient.update(h)},remove:function(h){h.efc_gradient_gradient&&(h.defs.removeChild(h.efc_gradient_gradient),h.efc_gradient_gradient=h.efc_gradient_stopSE=null),Ge(h,"cur_plug_colorSE",e.gradient.update),Ge(h,"apl_path",e.gradient.update),h.curStats.line_altColor=!1,h.lineFace.style.stroke=h.curStats.line_color,Qe(h.aplStats,e.gradient.stats)},update:function(h){var _,m,y=h.curStats,x=h.aplStats,k=x.gradient_options,G=h.pathList.animVal||h.pathList.baseVal;[0,1].forEach(function(N){y.gradient_colorSE[N]=k.colorSE[N]||y.plug_colorSE[N]}),m=G[0][0],y.gradient_pointSE[0]={x:m.x,y:m.y},m=(_=G[G.length-1])[_.length-1],y.gradient_pointSE[1]={x:m.x,y:m.y},[0,1].forEach(function(N){var z;wt(h,x.gradient_colorSE,N,z=y.gradient_colorSE[N])&&(ge?(z=ii(z),h.efc_gradient_stopSE[N].style.stopColor=z[1],h.efc_gradient_stopSE[N].style.stopOpacity=z[0]):h.efc_gradient_stopSE[N].style.stopColor=z),["x","y"].forEach(function(C){(z=y.gradient_pointSE[N][C])!==x.gradient_pointSE[N][C]&&(h.efc_gradient_gradient[C+(N+1)].baseVal.value=x.gradient_pointSE[N][C]=z)})})}},dropShadow:{stats:{dropShadow_dx:{},dropShadow_dy:{},dropShadow_blur:{},dropShadow_color:{},dropShadow_opacity:{},dropShadow_x:{},dropShadow_y:{}},optionsConf:[["type","dx",null,null,null,2],["type","dy",null,null,null,4],["type","blur",null,null,null,3,function(h){return 0<=h}],["type","color",null,null,null,"#000",null,!0],["type","opacity",null,null,null,.8,function(h){return 0<=h&&h<=1}]],init:function(h){var _,m,y,x,k,G=h.baseWindow.document,N=h.defs,z=E+"-"+h._id+"-dropShadow",C=(_=G,m=z,k={},typeof d!="boolean"&&(d=!!window.SVGFEDropShadowElement&&!ge),k.elmsAppend=[k.elmFilter=y=_.createElementNS(Nt,"filter")],y.filterUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,y.x.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),y.y.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),y.width.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100),y.height.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100),y.id=m,d?(k.elmOffset=k.elmBlur=x=y.appendChild(_.createElementNS(Nt,"feDropShadow")),k.styleFlood=x.style):(k.elmBlur=y.appendChild(_.createElementNS(Nt,"feGaussianBlur")),k.elmOffset=x=y.appendChild(_.createElementNS(Nt,"feOffset")),x.result.baseVal="offsetblur",x=y.appendChild(_.createElementNS(Nt,"feFlood")),k.styleFlood=x.style,(x=y.appendChild(_.createElementNS(Nt,"feComposite"))).in2.baseVal="offsetblur",x.operator.baseVal=SVGFECompositeElement.SVG_FECOMPOSITE_OPERATOR_IN,(x=y.appendChild(_.createElementNS(Nt,"feMerge"))).appendChild(_.createElementNS(Nt,"feMergeNode")),x.appendChild(_.createElementNS(Nt,"feMergeNode")).in1.baseVal="SourceGraphic"),k);["elmFilter","elmOffset","elmBlur","styleFlood","elmsAppend"].forEach(function(P){h["efc_dropShadow_"+P]=C[P]}),C.elmsAppend.forEach(function(P){N.appendChild(P)}),h.face.setAttribute("filter","url(#"+z+")"),Ye(h,"new_edge4viewBox",e.dropShadow.adjustEdge),e.dropShadow.update(h)},remove:function(h){var _=h.defs;h.efc_dropShadow_elmsAppend&&(h.efc_dropShadow_elmsAppend.forEach(function(m){_.removeChild(m)}),h.efc_dropShadow_elmFilter=h.efc_dropShadow_elmOffset=h.efc_dropShadow_elmBlur=h.efc_dropShadow_styleFlood=h.efc_dropShadow_elmsAppend=null),Ge(h,"new_edge4viewBox",e.dropShadow.adjustEdge),Un(h,{}),h.face.removeAttribute("filter"),Qe(h.aplStats,e.dropShadow.stats)},update:function(h){var _,m,y=h.curStats,x=h.aplStats,k=x.dropShadow_options;y.dropShadow_dx=_=k.dx,wt(h,x,"dropShadow_dx",_)&&(h.efc_dropShadow_elmOffset.dx.baseVal=_,m=!0),y.dropShadow_dy=_=k.dy,wt(h,x,"dropShadow_dy",_)&&(h.efc_dropShadow_elmOffset.dy.baseVal=_,m=!0),y.dropShadow_blur=_=k.blur,wt(h,x,"dropShadow_blur",_)&&(h.efc_dropShadow_elmBlur.setStdDeviation(_,_),m=!0),m&&Un(h,{}),y.dropShadow_color=_=k.color,wt(h,x,"dropShadow_color",_)&&(h.efc_dropShadow_styleFlood.floodColor=_),y.dropShadow_opacity=_=k.opacity,wt(h,x,"dropShadow_opacity",_)&&(h.efc_dropShadow_styleFlood.floodOpacity=_)},adjustEdge:function(h,_){var m,y,x=h.curStats,k=h.aplStats;x.dropShadow_dx!=null&&(m=3*x.dropShadow_blur,(y={x1:_.x1-m+x.dropShadow_dx,y1:_.y1-m+x.dropShadow_dy,x2:_.x2+m+x.dropShadow_dx,y2:_.y2+m+x.dropShadow_dy}).x1<_.x1&&(_.x1=y.x1),y.y1<_.y1&&(_.y1=y.y1),y.x2>_.x2&&(_.x2=y.x2),y.y2>_.y2&&(_.y2=y.y2),["x","y"].forEach(function(G){var N,z="dropShadow_"+G;x[z]=N=_[G+"1"],wt(h,k,z,N)&&(h.efc_dropShadow_elmFilter[G].baseVal.value=N)}))}}},Object.keys(e).forEach(function(h){var _=e[h],m=_.stats;m[h+"_enabled"]={iniValue:!1},m[h+"_options"]={hasProps:!0},_.anim&&(m[h+"_animOptions"]={},m[h+"_animId"]={})}),t={none:{defaultAnimOptions:{},init:function(h,_){var m=h.curStats;m.show_animId&&(Je.remove(m.show_animId),m.show_animId=null),t.none.start(h,_)},start:function(h,_){t.none.stop(h,!0)},stop:function(h,_,m){var y=h.curStats;return m=m??h.aplStats.show_on,y.show_inAnim=!1,_&&Oi(h,m),m?1:0}},fade:{defaultAnimOptions:{duration:300,timing:"linear"},init:function(h,_){var m=h.curStats,y=h.aplStats;m.show_animId&&Je.remove(m.show_animId),m.show_animId=Je.add(function(x){return x},function(x,k){k?t.fade.stop(h,!0):(h.svg.style.opacity=x+"",gn&&($e(h,h.svg),Ya(h)))},y.show_animOptions.duration,1,y.show_animOptions.timing,null,!1),t.fade.start(h,_)},start:function(h,_){var m,y=h.curStats;y.show_inAnim&&(m=Je.stop(y.show_animId)),Oi(h,1),y.show_inAnim=!0,Je.start(y.show_animId,!h.aplStats.show_on,_??m)},stop:function(h,_,m){var y,x=h.curStats;return m=m??h.aplStats.show_on,y=x.show_inAnim?Je.stop(x.show_animId):m?1:0,x.show_inAnim=!1,_&&(h.svg.style.opacity=m?"":"0",Oi(h,m)),y}},draw:{defaultAnimOptions:{duration:500,timing:[.58,0,.42,1]},init:function(h,_){var m=h.curStats,y=h.aplStats,x=h.pathList.baseVal,k=Ka(x),G=k.segsLen,N=k.lenAll;m.show_animId&&Je.remove(m.show_animId),m.show_animId=Je.add(function(z){var C,P,X,R,D=-1;if(z===0)P=[[x[0][0],x[0][0]]];else if(z===1)P=x;else{for(C=N*z,P=[];C>=G[++D];)P.push(x[D]),C-=G[D];C&&((X=x[D]).length===2?P.push([X[0],rs(X[0],X[1],C/G[D])]):(R=Ii(X[0],X[1],X[2],X[3],Ms(X[0],X[1],X[2],X[3],C)),P.push([X[0],R.fromP1,R.fromP2,R])))}return P},function(z,C){C?t.draw.stop(h,!0):(h.pathList.animVal=z,Un(h,{path:!0}))},y.show_animOptions.duration,1,y.show_animOptions.timing,null,!1),t.draw.start(h,_)},start:function(h,_){var m,y=h.curStats;y.show_inAnim&&(m=Je.stop(y.show_animId)),Oi(h,1),y.show_inAnim=!0,Ye(h,"apl_position",t.draw.update),Je.start(y.show_animId,!h.aplStats.show_on,_??m)},stop:function(h,_,m){var y,x=h.curStats;return m=m??h.aplStats.show_on,y=x.show_inAnim?Je.stop(x.show_animId):m?1:0,x.show_inAnim=!1,_&&(h.pathList.animVal=m?null:[[h.pathList.baseVal[0][0],h.pathList.baseVal[0][0]]],Un(h,{path:!0}),Oi(h,m)),y},update:function(h){Ge(h,"apl_position",t.draw.update),h.curStats.show_inAnim?t.draw.init(h,t.draw.stop(h)):h.aplStats.show_animOptions={}}}},function(){function h(_){return function(m){var y={};y[_]=m,this.setOptions(y)}}[["start","anchorSE",0],["end","anchorSE",1],["color","lineColor"],["size","lineSize"],["startSocketGravity","socketGravitySE",0],["endSocketGravity","socketGravitySE",1],["startPlugColor","plugColorSE",0],["endPlugColor","plugColorSE",1],["startPlugSize","plugSizeSE",0],["endPlugSize","plugSizeSE",1],["outline","lineOutlineEnabled"],["outlineColor","lineOutlineColor"],["outlineSize","lineOutlineSize"],["startPlugOutline","plugOutlineEnabledSE",0],["endPlugOutline","plugOutlineEnabledSE",1],["startPlugOutlineColor","plugOutlineColorSE",0],["endPlugOutlineColor","plugOutlineColorSE",1],["startPlugOutlineSize","plugOutlineSizeSE",0],["endPlugOutlineSize","plugOutlineSizeSE",1]].forEach(function(_){var m=_[0],y=_[1],x=_[2];Object.defineProperty(zn.prototype,m,{get:function(){var k=x!=null?un[this._id].options[y][x]:y?un[this._id].options[y]:un[this._id].options[m];return k==null?re:nn(k)},set:h(m),enumerable:!0})}),[["path",ye],["startSocket",nt,"socketSE",0],["endSocket",nt,"socketSE",1],["startPlug",gr,"plugSE",0],["endPlug",gr,"plugSE",1]].forEach(function(_){var m=_[0],y=_[1],x=_[2],k=_[3];Object.defineProperty(zn.prototype,m,{get:function(){var G,N=k!=null?un[this._id].options[x][k]:x?un[this._id].options[x]:un[this._id].options[m];return N?Object.keys(y).some(function(z){return y[z]===N&&(G=z,!0)})?G:new Error("It's broken"):re},set:h(m),enumerable:!0})}),Object.keys(e).forEach(function(_){var m=e[_];Object.defineProperty(zn.prototype,_,{get:function(){var y,x,k=un[this._id].options[_];return cn(k)?(y=k,x=m.optionsConf.reduce(function(G,N){var z,C=N[0],P=N[1],X=N[2],R=N[3],D=N[4],O=D!=null?y[R][D]:R?y[R]:y[P];return G[P]=C==="id"?O?Object.keys(X).some(function(B){return X[B]===O&&(z=B,!0)})?z:new Error("It's broken"):re:O==null?re:nn(O),G},{}),m.anim&&(x.animation=nn(y.animation)),x):k},set:h(_),enumerable:!0})}),["startLabel","endLabel","middleLabel"].forEach(function(_,m){Object.defineProperty(zn.prototype,_,{get:function(){var y=un[this._id],x=y.options;return x.labelSEM[m]&&!y.optionIsAttach.labelSEM[m]?Le[x.labelSEM[m]._id].text:x.labelSEM[m]||""},set:h(_),enumerable:!0})})}(),zn.prototype.setOptions=function(h){return qs(un[this._id],h),this},zn.prototype.position=function(){return Un(un[this._id],{position:!0}),this},zn.prototype.remove=function(){var h=un[this._id],_=h.curStats;Object.keys(e).forEach(function(m){var y=m+"_animId";_[y]&&Je.remove(_[y])}),_.show_animId&&Je.remove(_.show_animId),h.attachments.slice().forEach(function(m){Vs(h,m)}),h.baseWindow&&h.svg&&h.baseWindow.document.body.removeChild(h.svg),delete un[this._id]},zn.prototype.show=function(h,_){return Fs(un[this._id],!0,h,_),this},zn.prototype.hide=function(h,_){return Fs(un[this._id],!1,h,_),this},o=function(h){h&&Le[h._id]&&(h.boundTargets.slice().forEach(function(_){Vs(_.props,h,!0)}),h.conf.remove&&h.conf.remove(h),delete Le[h._id])},r=function(){function h(_,m){var y,x={conf:_,curStats:{},aplStats:{},boundTargets:[]},k={};_.argOptions.every(function(G){return!(!m.length||(typeof G.type=="string"?typeof m[0]!==G.type:typeof G.type!="function"||!G.type(m[0])))&&(k[G.optionName]=m.shift(),!0)}),y=m.length&&cn(m[0])?nn(m[0]):{},Object.keys(k).forEach(function(G){y[G]=k[G]}),_.stats&&(Qe(x.curStats,_.stats),Qe(x.aplStats,_.stats)),Object.defineProperty(this,"_id",{value:++Do}),Object.defineProperty(this,"isRemoved",{get:function(){return!Le[this._id]}}),x._id=this._id,_.init&&!_.init(x,y)||(Le[this._id]=x)}return h.prototype.remove=function(){var _=this,m=Le[_._id];m&&(m.boundTargets.slice().forEach(function(y){m.conf.removeOption(m,y)}),Di(function(){var y=Le[_._id];y&&(console.error("LeaderLineAttachment was not removed by removeOption"),o(y))}))},h}(),window.LeaderLineAttachment=r,i=function(h,_){return h instanceof r&&(!(h.isRemoved||_&&Le[h._id].conf.type!==_)||null)},n={pointAnchor:{type:"anchor",argOptions:[{optionName:"element",type:si}],init:function(h,_){return h.element=n.pointAnchor.checkElement(_.element),h.x=n.pointAnchor.parsePercent(_.x,!0)||[.5,!0],h.y=n.pointAnchor.parsePercent(_.y,!0)||[.5,!0],!0},removeOption:function(h,_){var m=_.props,y={},x=h.element,k=m.options.anchorSE[_.optionName==="start"?1:0];x===k&&(x=k===document.body?new r(n.pointAnchor,[x]):document.body),y[_.optionName]=x,qs(m,y)},getBBoxNest:function(h,_){var m=oi(h.element,_.baseWindow),y=m.width,x=m.height;return m.width=m.height=0,m.left=m.right=m.left+h.x[0]*(h.x[1]?y:1),m.top=m.bottom=m.top+h.y[0]*(h.y[1]?x:1),m},parsePercent:function(h,_){var m,y,x=!1;return mn(h)?y=h:typeof h=="string"&&(m=ki.exec(h))&&m[2]&&(x=(y=parseFloat(m[1])/100)!==0),y!=null&&(_||0<=y)?[y,x]:null},checkElement:function(h){if(h==null)h=document.body;else if(!si(h))throw new Error("`element` must be Element");return h}},areaAnchor:{type:"anchor",argOptions:[{optionName:"element",type:si},{optionName:"shape",type:"string"}],stats:{color:{},strokeWidth:{},elementWidth:{},elementHeight:{},elementLeft:{},elementTop:{},pathListRel:{},bBoxRel:{},pathData:{},viewBoxBBox:{hasProps:!0},dashLen:{},dashGap:{}},init:function(h,_){var m,y,x,k=[];return h.element=n.pointAnchor.checkElement(_.element),typeof _.color=="string"&&(h.color=_.color.trim()),typeof _.fillColor=="string"&&(h.fill=_.fillColor.trim()),mn(_.size)&&0<=_.size&&(h.size=_.size),_.dash&&(h.dash=!0,mn(_.dash.len)&&0<_.dash.len&&(h.dashLen=_.dash.len),mn(_.dash.gap)&&0<_.dash.gap&&(h.dashGap=_.dash.gap)),_.shape==="circle"?h.shape=_.shape:_.shape==="polygon"&&Array.isArray(_.points)&&3<=_.points.length&&_.points.every(function(G){var N={};return!(!(N.x=n.pointAnchor.parsePercent(G[0],!0))||!(N.y=n.pointAnchor.parsePercent(G[1],!0)))&&(k.push(N),(N.x[1]||N.y[1])&&(h.hasRatio=!0),!0)})?(h.shape=_.shape,h.points=k):(h.shape="rect",h.radius=mn(_.radius)&&0<=_.radius?_.radius:0),h.shape!=="rect"&&h.shape!=="circle"||(h.x=n.pointAnchor.parsePercent(_.x,!0)||[-.05,!0],h.y=n.pointAnchor.parsePercent(_.y,!0)||[-.05,!0],h.width=n.pointAnchor.parsePercent(_.width)||[1.1,!0],h.height=n.pointAnchor.parsePercent(_.height)||[1.1,!0],(h.x[1]||h.y[1]||h.width[1]||h.height[1])&&(h.hasRatio=!0)),m=h.element.ownerDocument,h.svg=y=m.createElementNS(Nt,"svg"),y.className.baseVal=E+"-areaAnchor",y.viewBox.baseVal||y.setAttribute("viewBox","0 0 0 0"),h.path=y.appendChild(m.createElementNS(Nt,"path")),h.path.style.fill=h.fill||"none",h.isShown=!1,y.style.visibility="hidden",m.body.appendChild(y),Xa(x=m.defaultView),h.bodyOffset=Za(x),h.updateColor=function(){var G,N=h.curStats,z=h.aplStats,C=h.boundTargets.length?h.boundTargets[0].props.curStats:null;N.color=G=h.color||(C?C.line_color:Dn.lineColor),wt(h,z,"color",G)&&(h.path.style.stroke=G)},h.updateShow=function(){Oi(h,h.boundTargets.some(function(G){return G.props.isShown===!0}))},!0},bind:function(h,_){var m=_.props;return h.color||Ye(m,"cur_line_color",h.updateColor),Ye(m,"svgShow",h.updateShow),Di(function(){h.updateColor(),h.updateShow()}),!0},unbind:function(h,_){var m=_.props;h.color||Ge(m,"cur_line_color",h.updateColor),Ge(m,"svgShow",h.updateShow),1<h.boundTargets.length&&Di(function(){h.updateColor(),h.updateShow(),n.areaAnchor.update(h)&&h.boundTargets.forEach(function(y){Un(y.props,{position:!0})})})},removeOption:function(h,_){n.pointAnchor.removeOption(h,_)},remove:function(h){h.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),h.boundTargets.forEach(function(_){n.areaAnchor.unbind(h,_)})),h.svg.parentNode.removeChild(h.svg)},getStrokeWidth:function(h,_){return n.areaAnchor.update(h)&&1<h.boundTargets.length&&Di(function(){h.boundTargets.forEach(function(m){m.props!==_&&Un(m.props,{position:!0})})}),h.curStats.strokeWidth},getPathData:function(h,_){var m=oi(h.element,_.baseWindow);return Oo(h.curStats.pathListRel,function(y){y.x+=m.left,y.y+=m.top})},getBBoxNest:function(h,_){var m=oi(h.element,_.baseWindow),y=h.curStats.bBoxRel;return{left:y.left+m.left,top:y.top+m.top,right:y.right+m.left,bottom:y.bottom+m.top,width:y.width,height:y.height}},update:function(h){var _,m,y,x,k,G,N,z,C,P,X,R,D,O,B,Z,rt,lt,st,Y,L,V,F,vt,Et,_t,T,et,ct,It,Dt,mt,K=h.curStats,Bt=h.aplStats,we=h.boundTargets.length?h.boundTargets[0].props.curStats:null,Mt={};if(Mt.strokeWidth=wt(h,K,"strokeWidth",h.size!=null?h.size:we?we.line_strokeWidth:Dn.lineSize),_=Ti(h.element),Mt.elementWidth=wt(h,K,"elementWidth",_.width),Mt.elementHeight=wt(h,K,"elementHeight",_.height),Mt.elementLeft=wt(h,K,"elementLeft",_.left),Mt.elementTop=wt(h,K,"elementTop",_.top),Mt.strokeWidth||h.hasRatio&&(Mt.elementWidth||Mt.elementHeight)){switch(h.shape){case"rect":(Y={left:h.x[0]*(h.x[1]?_.width:1),top:h.y[0]*(h.y[1]?_.height:1),width:h.width[0]*(h.width[1]?_.width:1),height:h.height[0]*(h.height[1]?_.height:1)}).right=Y.left+Y.width,Y.bottom=Y.top+Y.height,vt=K.strokeWidth/2,V=(F=Math.min(Y.width,Y.height))?F/2*Math.SQRT2+vt:0,(L=h.radius?h.radius<=V?h.radius:V:0)?(_t=L-(Et=(L-vt)/Math.SQRT2),et=L*ei,T=[{x:Y.left-_t,y:Y.top+Et},{x:Y.left+Et,y:Y.top-_t},{x:Y.right-Et,y:Y.top-_t},{x:Y.right+_t,y:Y.top+Et},{x:Y.right+_t,y:Y.bottom-Et},{x:Y.right-Et,y:Y.bottom+_t},{x:Y.left+Et,y:Y.bottom+_t},{x:Y.left-_t,y:Y.bottom-Et}],K.pathListRel=[[T[0],{x:T[0].x,y:T[0].y-et},{x:T[1].x-et,y:T[1].y},T[1]]],T[1].x!==T[2].x&&K.pathListRel.push([T[1],T[2]]),K.pathListRel.push([T[2],{x:T[2].x+et,y:T[2].y},{x:T[3].x,y:T[3].y-et},T[3]]),T[3].y!==T[4].y&&K.pathListRel.push([T[3],T[4]]),K.pathListRel.push([T[4],{x:T[4].x,y:T[4].y+et},{x:T[5].x+et,y:T[5].y},T[5]]),T[5].x!==T[6].x&&K.pathListRel.push([T[5],T[6]]),K.pathListRel.push([T[6],{x:T[6].x-et,y:T[6].y},{x:T[7].x,y:T[7].y+et},T[7]]),T[7].y!==T[0].y&&K.pathListRel.push([T[7],T[0]]),K.pathListRel.push([]),_t=L-Et+K.strokeWidth/2,T=[{x:Y.left-_t,y:Y.top-_t},{x:Y.right+_t,y:Y.bottom+_t}]):(_t=K.strokeWidth/2,T=[{x:Y.left-_t,y:Y.top-_t},{x:Y.right+_t,y:Y.bottom+_t}],K.pathListRel=[[T[0],{x:T[1].x,y:T[0].y}],[{x:T[1].x,y:T[0].y},T[1]],[T[1],{x:T[0].x,y:T[1].y}],[]],T=[{x:Y.left-K.strokeWidth,y:Y.top-K.strokeWidth},{x:Y.right+K.strokeWidth,y:Y.bottom+K.strokeWidth}]),K.bBoxRel={left:T[0].x,top:T[0].y,right:T[1].x,bottom:T[1].y,width:T[1].x-T[0].x,height:T[1].y-T[0].y};break;case"circle":(N={left:h.x[0]*(h.x[1]?_.width:1),top:h.y[0]*(h.y[1]?_.height:1),width:h.width[0]*(h.width[1]?_.width:1),height:h.height[0]*(h.height[1]?_.height:1)}).width||N.height||(N.width=N.height=10),N.width||(N.width=N.height),N.height||(N.height=N.width),N.right=N.left+N.width,N.bottom=N.top+N.height,z=N.left+N.width/2,C=N.top+N.height/2,O=K.strokeWidth/2,B=N.width/2,Z=N.height/2,P=B*Math.SQRT2+O,X=Z*Math.SQRT2+O,R=P*ei,D=X*ei,st=[{x:z-P,y:C},{x:z,y:C-X},{x:z+P,y:C},{x:z,y:C+X}],K.pathListRel=[[st[0],{x:st[0].x,y:st[0].y-D},{x:st[1].x-R,y:st[1].y},st[1]],[st[1],{x:st[1].x+R,y:st[1].y},{x:st[2].x,y:st[2].y-D},st[2]],[st[2],{x:st[2].x,y:st[2].y+D},{x:st[3].x+R,y:st[3].y},st[3]],[st[3],{x:st[3].x-R,y:st[3].y},{x:st[0].x,y:st[0].y+D},st[0]],[]],rt=P-B+K.strokeWidth/2,lt=X-Z+K.strokeWidth/2,st=[{x:N.left-rt,y:N.top-lt},{x:N.right+rt,y:N.bottom+lt}],K.bBoxRel={left:st[0].x,top:st[0].y,right:st[1].x,bottom:st[1].y,width:st[1].x-st[0].x,height:st[1].y-st[0].y};break;case"polygon":h.points.forEach(function(jt){var Ie=jt.x[0]*(jt.x[1]?_.width:1),Re=jt.y[0]*(jt.y[1]?_.height:1);y?(Ie<y.left&&(y.left=Ie),Ie>y.right&&(y.right=Ie),Re<y.top&&(y.top=Re),Re>y.bottom&&(y.bottom=Re)):y={left:Ie,right:Ie,top:Re,bottom:Re},x?K.pathListRel.push([x,{x:Ie,y:Re}]):K.pathListRel=[],x={x:Ie,y:Re}}),K.pathListRel.push([]),k=K.strokeWidth/2,G=[{x:y.left-k,y:y.top-k},{x:y.right+k,y:y.bottom+k}],K.bBoxRel={left:G[0].x,top:G[0].y,right:G[1].x,bottom:G[1].y,width:G[1].x-G[0].x,height:G[1].y-G[0].y}}Mt.pathListRel=Mt.bBoxRel=!0}return(Mt.pathListRel||Mt.elementLeft||Mt.elementTop)&&(K.pathData=Oo(K.pathListRel,function(jt){jt.x+=_.left,jt.y+=_.top})),wt(h,Bt,"strokeWidth",m=K.strokeWidth)&&(h.path.style.strokeWidth=m+"px"),Ls(m=K.pathData,Bt.pathData)&&(h.path.setPathData(m),Bt.pathData=m,Mt.pathData=!0),h.dash&&(!Mt.pathData&&(!Mt.strokeWidth||h.dashLen&&h.dashGap)||(K.dashLen=h.dashLen||2*K.strokeWidth,K.dashGap=h.dashGap||K.strokeWidth),Mt.dash=wt(h,Bt,"dashLen",K.dashLen)||Mt.dash,Mt.dash=wt(h,Bt,"dashGap",K.dashGap)||Mt.dash,Mt.dash&&(h.path.style.strokeDasharray=Bt.dashLen+","+Bt.dashGap)),ct=K.viewBoxBBox,It=Bt.viewBoxBBox,Dt=h.svg.viewBox.baseVal,mt=h.svg.style,ct.x=K.bBoxRel.left+_.left,ct.y=K.bBoxRel.top+_.top,ct.width=K.bBoxRel.width,ct.height=K.bBoxRel.height,["x","y","width","height"].forEach(function(jt){(m=ct[jt])!==It[jt]&&(Dt[jt]=It[jt]=m,mt[ln[jt]]=m+(jt==="x"||jt==="y"?h.bodyOffset[jt]:0)+"px")}),Mt.strokeWidth||Mt.pathListRel||Mt.bBoxRel}},mouseHoverAnchor:{type:"anchor",argOptions:[{optionName:"element",type:si},{optionName:"showEffectName",type:"string"}],style:{backgroundImage:"url('data:image/svg+xml;charset=utf-8;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cG9seWdvbiBwb2ludHM9IjI0LDAgMCw4IDgsMTEgMCwxOSA1LDI0IDEzLDE2IDE2LDI0IiBmaWxsPSJjb3JhbCIvPjwvc3ZnPg==')",backgroundSize:"",backgroundRepeat:"no-repeat",backgroundColor:"#f8f881",cursor:"default"},hoverStyle:{backgroundImage:"none",backgroundColor:"#fadf8f"},padding:{top:1,right:15,bottom:1,left:2},minHeight:15,backgroundPosition:{right:2,top:2},backgroundSize:{width:12,height:12},dirKeys:[["top","Top"],["right","Right"],["bottom","Bottom"],["left","Left"]],init:function(h,_){var m,y,x,k,G,N,z,C,P,X,R,D=n.mouseHoverAnchor,O={};if(h.element=n.pointAnchor.checkElement(_.element),C=h.element,!((X=C.ownerDocument)&&(P=X.defaultView)&&P.HTMLElement&&C instanceof P.HTMLElement))throw new Error("`element` must be HTML element");return D.style.backgroundSize=D.backgroundSize.width+"px "+D.backgroundSize.height+"px",["style","hoverStyle"].forEach(function(B){var Z=D[B];h[B]=Object.keys(Z).reduce(function(rt,lt){return rt[lt]=Z[lt],rt},{})}),(m=h.element.ownerDocument.defaultView.getComputedStyle(h.element,"")).display==="inline"?h.style.display="inline-block":m.display==="none"&&(h.style.display="block"),n.mouseHoverAnchor.dirKeys.forEach(function(B){var Z=B[0],rt="padding"+B[1];parseFloat(m[rt])<D.padding[Z]&&(h.style[rt]=D.padding[Z]+"px")}),h.style.display&&(k=h.element.style.display,h.element.style.display=h.style.display),n.mouseHoverAnchor.dirKeys.forEach(function(B){var Z="padding"+B[1];h.style[Z]&&(O[Z]=h.element.style[Z],h.element.style[Z]=h.style[Z])}),(x=h.element.getBoundingClientRect()).height<D.minHeight&&(gn?(R=D.minHeight,m.boxSizing==="content-box"?R-=parseFloat(m.borderTopWidth)+parseFloat(m.borderBottomWidth)+parseFloat(m.paddingTop)+parseFloat(m.paddingBottom):m.boxSizing==="padding-box"&&(R-=parseFloat(m.borderTopWidth)+parseFloat(m.borderBottomWidth)),h.style.height=R+"px"):h.style.height=parseFloat(m.height)+(D.minHeight-x.height)+"px"),h.style.backgroundPosition=ge?x.width-D.backgroundSize.width-D.backgroundPosition.right+"px "+D.backgroundPosition.top+"px":"right "+D.backgroundPosition.right+"px top "+D.backgroundPosition.top+"px",h.style.display&&(h.element.style.display=k),n.mouseHoverAnchor.dirKeys.forEach(function(B){var Z="padding"+B[1];h.style[Z]&&(h.element.style[Z]=O[Z])}),["style","hoverStyle"].forEach(function(B){var Z=h[B],rt=_[B];cn(rt)&&Object.keys(rt).forEach(function(lt){typeof rt[lt]=="string"||mn(rt[lt])?Z[lt]=rt[lt]:rt[lt]==null&&delete Z[lt]})}),typeof _.onSwitch=="function"&&(z=_.onSwitch),_.showEffectName&&t[_.showEffectName]&&(h.showEffectName=G=_.showEffectName),N=_.animOptions,h.elmStyle=y=h.element.style,h.mouseenter=function(B){h.hoverStyleSave=D.getStyles(y,Object.keys(h.hoverStyle)),D.setStyles(y,h.hoverStyle),h.boundTargets.forEach(function(Z){Fs(Z.props,!0,G,N)}),z&&z(B)},h.mouseleave=function(B){D.setStyles(y,h.hoverStyleSave),h.boundTargets.forEach(function(Z){Fs(Z.props,!1,G,N)}),z&&z(B)},!0},bind:function(h,_){var m,y,x,k,G;return _.props.svg?n.mouseHoverAnchor.llShow(_.props,!1,h.showEffectName):Di(function(){n.mouseHoverAnchor.llShow(_.props,!1,h.showEffectName)}),h.enabled||(h.styleSave=n.mouseHoverAnchor.getStyles(h.elmStyle,Object.keys(h.style)),n.mouseHoverAnchor.setStyles(h.elmStyle,h.style),h.removeEventListener=(m=h.element,y=h.mouseenter,x=h.mouseleave,"onmouseenter"in m&&"onmouseleave"in m?(m.addEventListener("mouseenter",y,!1),m.addEventListener("mouseleave",x,!1),function(){m.removeEventListener("mouseenter",y,!1),m.removeEventListener("mouseleave",x,!1)}):(console.warn("mouseenter and mouseleave events polyfill is enabled."),k=function(N){N.relatedTarget&&(N.relatedTarget===this||this.compareDocumentPosition(N.relatedTarget)&Node.DOCUMENT_POSITION_CONTAINED_BY)||y.apply(this,arguments)},m.addEventListener("mouseover",k),G=function(N){N.relatedTarget&&(N.relatedTarget===this||this.compareDocumentPosition(N.relatedTarget)&Node.DOCUMENT_POSITION_CONTAINED_BY)||x.apply(this,arguments)},m.addEventListener("mouseout",G),function(){m.removeEventListener("mouseover",k,!1),m.removeEventListener("mouseout",G,!1)})),h.enabled=!0),!0},unbind:function(h,_){h.enabled&&h.boundTargets.length<=1&&(h.removeEventListener(),n.mouseHoverAnchor.setStyles(h.elmStyle,h.styleSave),h.enabled=!1),n.mouseHoverAnchor.llShow(_.props,!0,h.showEffectName)},removeOption:function(h,_){n.pointAnchor.removeOption(h,_)},remove:function(h){h.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),h.boundTargets.forEach(function(_){n.mouseHoverAnchor.unbind(h,_)}))},getBBoxNest:function(h,_){return oi(h.element,_.baseWindow)},llShow:function(h,_,m){t[m||h.curStats.show_effect].stop(h,!0,_),h.aplStats.show_on=_},getStyles:function(h,_){return _.reduce(function(m,y){return m[y]=h[y],m},{})},setStyles:function(h,_){Object.keys(_).forEach(function(m){h[m]=_[m]})}},captionLabel:{type:"label",argOptions:[{optionName:"text",type:"string"}],stats:{color:{},x:{},y:{}},textStyleProps:["fontFamily","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","kerning","letterSpacing","wordSpacing","textDecoration"],init:function(h,_){return typeof _.text=="string"&&(h.text=_.text.trim()),!!h.text&&(typeof _.color=="string"&&(h.color=_.color.trim()),h.outlineColor=typeof _.outlineColor=="string"?_.outlineColor.trim():"#fff",Array.isArray(_.offset)&&mn(_.offset[0])&&mn(_.offset[1])&&(h.offset={x:_.offset[0],y:_.offset[1]}),mn(_.lineOffset)&&(h.lineOffset=_.lineOffset),n.captionLabel.textStyleProps.forEach(function(m){_[m]!=null&&(h[m]=_[m])}),h.updateColor=function(m){n.captionLabel.updateColor(h,m)},h.updateSocketXY=function(m){var y,x,k,G,N=h.curStats,z=h.aplStats,C=m.curStats,P=C.position_socketXYSE[h.socketIndex];P.x!=null&&(h.offset?(N.x=P.x+h.offset.x,N.y=P.y+h.offset.y):(y=h.height/2,x=Math.max(C.attach_plugSideLenSE[h.socketIndex]||0,C.line_strokeWidth/2),k=C.position_socketXYSE[h.socketIndex?0:1],P.socketId===ut||P.socketId===Q?(N.x=P.socketId===ut?P.x-y-h.width:P.x+y,N.y=k.y<P.y?P.y+x+y:P.y-x-y-h.height):(N.x=k.x<P.x?P.x+x+y:P.x-x-y-h.width,N.y=P.socketId===q?P.y-y-h.height:P.y+y)),wt(h,z,"x",G=N.x)&&(h.elmPosition.x.baseVal.getItem(0).value=G),wt(h,z,"y",G=N.y)&&(h.elmPosition.y.baseVal.getItem(0).value=G+h.height))},h.updatePath=function(m){var y,x,k=h.curStats,G=h.aplStats,N=m.pathList.animVal||m.pathList.baseVal;N&&(y=n.captionLabel.getMidPoint(N,h.lineOffset),k.x=y.x-h.width/2,k.y=y.y-h.height/2,wt(h,G,"x",x=k.x)&&(h.elmPosition.x.baseVal.getItem(0).value=x),wt(h,G,"y",x=k.y)&&(h.elmPosition.y.baseVal.getItem(0).value=x+h.height))},h.updateShow=function(m){n.captionLabel.updateShow(h,m)},ge&&(h.adjustEdge=function(m,y){var x=h.curStats;x.x!=null&&n.captionLabel.adjustEdge(y,{x:x.x,y:x.y,width:h.width,height:h.height},h.strokeWidth/2)}),!0)},updateColor:function(h,_){var m,y=h.curStats,x=h.aplStats,k=_.curStats;y.color=m=h.color||k.line_color,wt(h,x,"color",m)&&(h.styleFill.fill=m)},updateShow:function(h,_){var m=_.isShown===!0;m!==h.isShown&&(h.styleShow.visibility=m?"":"hidden",h.isShown=m)},adjustEdge:function(h,_,m){var y={x1:_.x-m,y1:_.y-m,x2:_.x+_.width+m,y2:_.y+_.height+m};y.x1<h.x1&&(h.x1=y.x1),y.y1<h.y1&&(h.y1=y.y1),y.x2>h.x2&&(h.x2=y.x2),y.y2>h.y2&&(h.y2=y.y2)},newText:function(h,_,m,y,x){var k,G,N,z,C,P;return(k=_.createElementNS(Nt,"text")).textContent=h,[k.x,k.y].forEach(function(X){var R=m.createSVGLength();R.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),X.baseVal.initialize(R)}),typeof f!="boolean"&&(f="paintOrder"in k.style),x&&!f?(N=_.createElementNS(Nt,"defs"),k.id=y,N.appendChild(k),(C=(G=_.createElementNS(Nt,"g")).appendChild(_.createElementNS(Nt,"use"))).href.baseVal="#"+y,(z=G.appendChild(_.createElementNS(Nt,"use"))).href.baseVal="#"+y,(P=C.style).strokeLinejoin="round",{elmPosition:k,styleText:k.style,styleFill:z.style,styleStroke:P,styleShow:G.style,elmsAppend:[N,G]}):(P=k.style,x&&(P.strokeLinejoin="round",P.paintOrder="stroke"),{elmPosition:k,styleText:P,styleFill:P,styleStroke:x?P:null,styleShow:P,elmsAppend:[k]})},getMidPoint:function(h,_){var m,y,x,k=Ka(h),G=k.segsLen,N=k.lenAll,z=-1;if((m=N/2+(_||0))<=0)return(y=h[0]).length===2?rs(y[0],y[1],0):Ii(y[0],y[1],y[2],y[3],0);if(N<=m)return(y=h[h.length-1]).length===2?rs(y[0],y[1],1):Ii(y[0],y[1],y[2],y[3],1);for(x=[];m>G[++z];)x.push(h[z]),m-=G[z];return(y=h[z]).length===2?rs(y[0],y[1],m/G[z]):Ii(y[0],y[1],y[2],y[3],Ms(y[0],y[1],y[2],y[3],m))},initSvg:function(h,_){var m,y,x=n.captionLabel.newText(h.text,_.baseWindow.document,_.svg,E+"-captionLabel-"+h._id,h.outlineColor);["elmPosition","styleFill","styleShow","elmsAppend"].forEach(function(k){h[k]=x[k]}),h.isShown=!1,h.styleShow.visibility="hidden",n.captionLabel.textStyleProps.forEach(function(k){h[k]!=null&&(x.styleText[k]=h[k])}),x.elmsAppend.forEach(function(k){_.svg.appendChild(k)}),m=x.elmPosition.getBBox(),h.width=m.width,h.height=m.height,h.outlineColor&&(y=10<(y=m.height/9)?10:y<2?2:y,x.styleStroke.strokeWidth=y+"px",x.styleStroke.stroke=h.outlineColor),h.strokeWidth=y||0,Qe(h.aplStats,n.captionLabel.stats),h.updateColor(_),h.refSocketXY?h.updateSocketXY(_):h.updatePath(_),ge&&Un(_,{}),h.updateShow(_)},bind:function(h,_){var m=_.props;return h.color||Ye(m,"cur_line_color",h.updateColor),(h.refSocketXY=_.optionName==="startLabel"||_.optionName==="endLabel")?(h.socketIndex=_.optionName==="startLabel"?0:1,Ye(m,"apl_position",h.updateSocketXY),h.offset||(Ye(m,"cur_attach_plugSideLenSE",h.updateSocketXY),Ye(m,"cur_line_strokeWidth",h.updateSocketXY))):Ye(m,"apl_path",h.updatePath),Ye(m,"svgShow",h.updateShow),ge&&Ye(m,"new_edge4viewBox",h.adjustEdge),n.captionLabel.initSvg(h,m),!0},unbind:function(h,_){var m=_.props;h.elmsAppend&&(h.elmsAppend.forEach(function(y){m.svg.removeChild(y)}),h.elmPosition=h.styleFill=h.styleShow=h.elmsAppend=null),Qe(h.curStats,n.captionLabel.stats),Qe(h.aplStats,n.captionLabel.stats),h.color||Ge(m,"cur_line_color",h.updateColor),h.refSocketXY?(Ge(m,"apl_position",h.updateSocketXY),h.offset||(Ge(m,"cur_attach_plugSideLenSE",h.updateSocketXY),Ge(m,"cur_line_strokeWidth",h.updateSocketXY))):Ge(m,"apl_path",h.updatePath),Ge(m,"svgShow",h.updateShow),ge&&(Ge(m,"new_edge4viewBox",h.adjustEdge),Un(m,{}))},removeOption:function(h,_){var m=_.props,y={};y[_.optionName]="",qs(m,y)},remove:function(h){h.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),h.boundTargets.forEach(function(_){n.captionLabel.unbind(h,_)}))}},pathLabel:{type:"label",argOptions:[{optionName:"text",type:"string"}],stats:{color:{},startOffset:{},pathData:{}},init:function(h,_){return typeof _.text=="string"&&(h.text=_.text.trim()),!!h.text&&(typeof _.color=="string"&&(h.color=_.color.trim()),h.outlineColor=typeof _.outlineColor=="string"?_.outlineColor.trim():"#fff",mn(_.lineOffset)&&(h.lineOffset=_.lineOffset),n.captionLabel.textStyleProps.forEach(function(m){_[m]!=null&&(h[m]=_[m])}),h.updateColor=function(m){n.captionLabel.updateColor(h,m)},h.updatePath=function(m){var y,x=h.curStats,k=h.aplStats,G=m.curStats,N=m.pathList.animVal||m.pathList.baseVal;N&&(x.pathData=y=n.pathLabel.getOffsetPathData(N,G.line_strokeWidth/2+h.strokeWidth/2+h.height/4,1.25*h.height),Ls(y,k.pathData)&&(h.elmPath.setPathData(y),k.pathData=y,h.bBox=h.elmPosition.getBBox(),h.updateStartOffset(m)))},h.updateStartOffset=function(m){var y,x,k,G,N=h.curStats,z=h.aplStats,C=m.curStats;N.pathData&&(h.semIndex!==2||h.lineOffset)&&(y=N.pathData.reduce(function(P,X){var R,D=X.values;switch(X.type){case"M":G={x:D[0],y:D[1]};break;case"L":R={x:D[0],y:D[1]},G&&(P+=Bn(G,R)),G=R;break;case"C":R={x:D[4],y:D[5]},G&&(P+=Ri(G,{x:D[0],y:D[1]},{x:D[2],y:D[3]},R)),G=R}return P},0),k=h.semIndex===0?0:h.semIndex===1?y:y/2,h.semIndex!==2&&(x=Math.max(C.attach_plugBackLenSE[h.semIndex]||0,C.line_strokeWidth/2)+h.strokeWidth/2+h.height/4,k=(k+=h.semIndex===0?x:-x)<0?0:y<k?y:k),h.lineOffset&&(k=(k+=h.lineOffset)<0?0:y<k?y:k),N.startOffset=k,wt(h,z,"startOffset",k)&&(h.elmOffset.startOffset.baseVal.value=k))},h.updateShow=function(m){n.captionLabel.updateShow(h,m)},ge&&(h.adjustEdge=function(m,y){h.bBox&&n.captionLabel.adjustEdge(y,h.bBox,h.strokeWidth/2)}),!0)},getOffsetPathData:function(h,_,m){var y,x,k=3,G=[];function N(z,C){return Math.abs(z.x-C.x)<k&&Math.abs(z.y-C.y)<k}return h.forEach(function(z){var C,P,X,R,D,O,B,Z,rt,lt,st,Y,L,V,F,vt,Et,_t,T,et,ct;z.length===2?(_t=z[0],T=z[1],et=_,ct=Math.atan2(_t.y-T.y,T.x-_t.x)+.5*Math.PI,C=[{x:_t.x+Math.cos(ct)*et,y:_t.y+Math.sin(ct)*et*-1},{x:T.x+Math.cos(ct)*et,y:T.y+Math.sin(ct)*et*-1}],y?(X=y.points,0<=(R=Math.atan2(X[1].y-X[0].y,X[0].x-X[1].x)-Math.atan2(z[0].y-z[1].y,z[1].x-z[0].x))&&R<=Math.PI?P={type:"line",points:C,inside:!0}:(O=Ps(X[0],X[1],_),D=Ps(C[1],C[0],_),Z=X[0],lt=D,st=C[1],Y=(rt=O).x-Z.x,L=rt.y-Z.y,V=st.x-lt.x,F=st.y-lt.y,vt=(-L*(Z.x-lt.x)+Y*(Z.y-lt.y))/(-V*L+Y*F),Et=(V*(Z.y-lt.y)-F*(Z.x-lt.x))/(-V*L+Y*F),(B=0<=vt&&vt<=1&&0<=Et&&Et<=1?{x:Z.x+Et*Y,y:Z.y+Et*L}:null)?P={type:"line",points:[X[1]=B,C[1]]}:(X[1]=N(D,O)?D:O,P={type:"line",points:[D,C[1]]}),y.len=Bn(X[0],X[1]))):P={type:"line",points:C},P.len=Bn(P.points[0],P.points[1]),G.push(y=P)):(G.push({type:"cubic",points:function(It,Dt,mt,K,Bt,we){for(var Mt,jt,Ie=Ri(It,Dt,mt,K)/we,Re=1/(we<Bt?Ie*(Bt/we):Ie),xe=[],hn=0;jt=(90-(Mt=Ii(It,Dt,mt,K,hn)).angle)*(Math.PI/180),xe.push({x:Mt.x+Math.cos(jt)*Bt,y:Mt.y+Math.sin(jt)*Bt*-1}),!(1<=hn);)1<(hn+=Re)&&(hn=1);return xe}(z[0],z[1],z[2],z[3],_,16)}),y=null)}),y=null,G.forEach(function(z){var C;z.type==="line"?(z.inside&&(y.len>_?((C=y.points)[1]=Ps(C[0],C[1],-_),y.len=Bn(C[0],C[1])):(y.points=null,y.len=0),z.len>_+m?((C=z.points)[0]=Ps(C[1],C[0],-(_+m)),z.len=Bn(C[0],C[1])):(z.points=null,z.len=0)),y=z):y=null}),G.reduce(function(z,C){var P=C.points;return P&&(x&&N(P[0],x)||z.push({type:"M",values:[P[0].x,P[0].y]}),C.type==="line"?z.push({type:"L",values:[P[1].x,P[1].y]}):(P.shift(),P.forEach(function(X){z.push({type:"L",values:[X.x,X.y]})})),x=P[P.length-1]),z},[])},newText:function(h,_,m,y){var x,k,G,N,z,C,P,X,R,D;return(N=(G=_.createElementNS(Nt,"defs")).appendChild(_.createElementNS(Nt,"path"))).id=x=m+"-path",(C=(z=_.createElementNS(Nt,"text")).appendChild(_.createElementNS(Nt,"textPath"))).href.baseVal="#"+x,C.startOffset.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),C.textContent=h,typeof f!="boolean"&&(f="paintOrder"in z.style),y&&!f?(z.id=k=m+"-text",G.appendChild(z),(R=(P=_.createElementNS(Nt,"g")).appendChild(_.createElementNS(Nt,"use"))).href.baseVal="#"+k,(X=P.appendChild(_.createElementNS(Nt,"use"))).href.baseVal="#"+k,(D=R.style).strokeLinejoin="round",{elmPosition:z,elmPath:N,elmOffset:C,styleText:z.style,styleFill:X.style,styleStroke:D,styleShow:P.style,elmsAppend:[G,P]}):(D=z.style,y&&(D.strokeLinejoin="round",D.paintOrder="stroke"),{elmPosition:z,elmPath:N,elmOffset:C,styleText:D,styleFill:D,styleStroke:y?D:null,styleShow:D,elmsAppend:[G,z]})},initSvg:function(h,_){var m,y,x=n.pathLabel.newText(h.text,_.baseWindow.document,E+"-pathLabel-"+h._id,h.outlineColor);["elmPosition","elmPath","elmOffset","styleFill","styleShow","elmsAppend"].forEach(function(k){h[k]=x[k]}),h.isShown=!1,h.styleShow.visibility="hidden",n.captionLabel.textStyleProps.forEach(function(k){h[k]!=null&&(x.styleText[k]=h[k])}),x.elmsAppend.forEach(function(k){_.svg.appendChild(k)}),x.elmPath.setPathData([{type:"M",values:[0,100]},{type:"h",values:[100]}]),m=x.elmPosition.getBBox(),x.styleText.textAnchor=["start","end","middle"][h.semIndex],h.semIndex!==2||h.lineOffset||x.elmOffset.startOffset.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,50),h.height=m.height,h.outlineColor&&(y=10<(y=m.height/9)?10:y<2?2:y,x.styleStroke.strokeWidth=y+"px",x.styleStroke.stroke=h.outlineColor),h.strokeWidth=y||0,Qe(h.aplStats,n.pathLabel.stats),h.updateColor(_),h.updatePath(_),h.updateStartOffset(_),ge&&Un(_,{}),h.updateShow(_)},bind:function(h,_){var m=_.props;return h.color||Ye(m,"cur_line_color",h.updateColor),Ye(m,"cur_line_strokeWidth",h.updatePath),Ye(m,"apl_path",h.updatePath),h.semIndex=_.optionName==="startLabel"?0:_.optionName==="endLabel"?1:2,(h.semIndex!==2||h.lineOffset)&&Ye(m,"cur_attach_plugBackLenSE",h.updateStartOffset),Ye(m,"svgShow",h.updateShow),ge&&Ye(m,"new_edge4viewBox",h.adjustEdge),n.pathLabel.initSvg(h,m),!0},unbind:function(h,_){var m=_.props;h.elmsAppend&&(h.elmsAppend.forEach(function(y){m.svg.removeChild(y)}),h.elmPosition=h.elmPath=h.elmOffset=h.styleFill=h.styleShow=h.elmsAppend=null),Qe(h.curStats,n.pathLabel.stats),Qe(h.aplStats,n.pathLabel.stats),h.color||Ge(m,"cur_line_color",h.updateColor),Ge(m,"cur_line_strokeWidth",h.updatePath),Ge(m,"apl_path",h.updatePath),(h.semIndex!==2||h.lineOffset)&&Ge(m,"cur_attach_plugBackLenSE",h.updateStartOffset),Ge(m,"svgShow",h.updateShow),ge&&(Ge(m,"new_edge4viewBox",h.adjustEdge),Un(m,{}))},removeOption:function(h,_){var m=_.props,y={};y[_.optionName]="",qs(m,y)},remove:function(h){h.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),h.boundTargets.forEach(function(_){n.pathLabel.unbind(h,_)}))}}},Object.keys(n).forEach(function(h){zn[h]=function(){return new r(n[h],Array.prototype.slice.call(arguments))}}),zn.positionByWindowResize=!0,window.addEventListener("resize",sr.add(function(){zn.positionByWindowResize&&Object.keys(un).forEach(function(h){Un(un[h],{position:!0})})}),!1),zn}();const V_={setLine:function(e,t,n={}){return new F_(e,t,n)},obj:F_};function ec(e){"@babel/helpers - typeof";return ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ec(e)}var RC=/^\s+/,DC=/\s+$/;function $t(e,t){if(e=e||"",t=t||{},e instanceof $t)return e;if(!(this instanceof $t))return new $t(e,t);var n=OC(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}$t.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),n,r,i,o,l,c;return n=t.r/255,r=t.g/255,i=t.b/255,n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),r<=.03928?l=r/12.92:l=Math.pow((r+.055)/1.055,2.4),i<=.03928?c=i/12.92:c=Math.pow((i+.055)/1.055,2.4),.2126*o+.7152*l+.0722*c},setAlpha:function(t){return this._a=Bm(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=B_(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=B_(this._r,this._g,this._b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.v*100);return this._a==1?"hsv("+n+", "+r+"%, "+i+"%)":"hsva("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=q_(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=q_(this._r,this._g,this._b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.l*100);return this._a==1?"hsl("+n+", "+r+"%, "+i+"%)":"hsla("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return U_(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return $C(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Ue(this._r,255)*100)+"%",g:Math.round(Ue(this._g,255)*100)+"%",b:Math.round(Ue(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Ue(this._r,255)*100)+"%, "+Math.round(Ue(this._g,255)*100)+"%, "+Math.round(Ue(this._b,255)*100)+"%)":"rgba("+Math.round(Ue(this._r,255)*100)+"%, "+Math.round(Ue(this._g,255)*100)+"%, "+Math.round(Ue(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:KC[U_(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var n="#"+z_(this._r,this._g,this._b,this._a),r=n,i=this._gradientType?"GradientType = 1, ":"";if(t){var o=$t(t);r="#"+z_(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+n+",endColorstr="+r+")"},toString:function(t){var n=!!t;t=t||this._format;var r=!1,i=this._a<1&&this._a>=0,o=!n&&i&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return o?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(r=this.toRgbString()),t==="prgb"&&(r=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(r=this.toHexString()),t==="hex3"&&(r=this.toHexString(!0)),t==="hex4"&&(r=this.toHex8String(!0)),t==="hex8"&&(r=this.toHex8String()),t==="name"&&(r=this.toName()),t==="hsl"&&(r=this.toHslString()),t==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return $t(this.toString())},_applyModification:function(t,n){var r=t.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(qC,arguments)},brighten:function(){return this._applyModification(BC,arguments)},darken:function(){return this._applyModification(UC,arguments)},desaturate:function(){return this._applyModification(NC,arguments)},saturate:function(){return this._applyModification(FC,arguments)},greyscale:function(){return this._applyModification(VC,arguments)},spin:function(){return this._applyModification(zC,arguments)},_applyCombination:function(t,n){return t.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(WC,arguments)},complement:function(){return this._applyCombination(HC,arguments)},monochromatic:function(){return this._applyCombination(jC,arguments)},splitcomplement:function(){return this._applyCombination(GC,arguments)},triad:function(){return this._applyCombination(H_,[3])},tetrad:function(){return this._applyCombination(H_,[4])}};$t.fromRatio=function(e,t){if(ec(e)=="object"){var n={};for(var r in e)e.hasOwnProperty(r)&&(r==="a"?n[r]=e[r]:n[r]=ea(e[r]));e=n}return $t(e,t)};function OC(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,o=null,l=!1,c=!1;return typeof e=="string"&&(e=XC(e)),ec(e)=="object"&&(mi(e.r)&&mi(e.g)&&mi(e.b)?(t=PC(e.r,e.g,e.b),l=!0,c=String(e.r).substr(-1)==="%"?"prgb":"rgb"):mi(e.h)&&mi(e.s)&&mi(e.v)?(r=ea(e.s),i=ea(e.v),t=LC(e.h,r,i),l=!0,c="hsv"):mi(e.h)&&mi(e.s)&&mi(e.l)&&(r=ea(e.s),o=ea(e.l),t=MC(e.h,r,o),l=!0,c="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=Bm(n),{ok:l,format:e.format||c,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}function PC(e,t,n){return{r:Ue(e,255)*255,g:Ue(t,255)*255,b:Ue(n,255)*255}}function q_(e,t,n){e=Ue(e,255),t=Ue(t,255),n=Ue(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),o,l,c=(r+i)/2;if(r==i)o=l=0;else{var f=r-i;switch(l=c>.5?f/(2-r-i):f/(r+i),r){case e:o=(t-n)/f+(t<n?6:0);break;case t:o=(n-e)/f+2;break;case n:o=(e-t)/f+4;break}o/=6}return{h:o,s:l,l:c}}function MC(e,t,n){var r,i,o;e=Ue(e,360),t=Ue(t,100),n=Ue(n,100);function l(d,g,v){return v<0&&(v+=1),v>1&&(v-=1),v<1/6?d+(g-d)*6*v:v<1/2?g:v<2/3?d+(g-d)*(2/3-v)*6:d}if(t===0)r=i=o=n;else{var c=n<.5?n*(1+t):n+t-n*t,f=2*n-c;r=l(f,c,e+1/3),i=l(f,c,e),o=l(f,c,e-1/3)}return{r:r*255,g:i*255,b:o*255}}function B_(e,t,n){e=Ue(e,255),t=Ue(t,255),n=Ue(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),o,l,c=r,f=r-i;if(l=r===0?0:f/r,r==i)o=0;else{switch(r){case e:o=(t-n)/f+(t<n?6:0);break;case t:o=(n-e)/f+2;break;case n:o=(e-t)/f+4;break}o/=6}return{h:o,s:l,v:c}}function LC(e,t,n){e=Ue(e,360)*6,t=Ue(t,100),n=Ue(n,100);var r=Math.floor(e),i=e-r,o=n*(1-t),l=n*(1-i*t),c=n*(1-(1-i)*t),f=r%6,d=[n,l,o,o,c,n][f],g=[c,n,n,l,o,o][f],v=[o,o,c,n,n,l][f];return{r:d*255,g:g*255,b:v*255}}function U_(e,t,n,r){var i=[Br(Math.round(e).toString(16)),Br(Math.round(t).toString(16)),Br(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function $C(e,t,n,r,i){var o=[Br(Math.round(e).toString(16)),Br(Math.round(t).toString(16)),Br(Math.round(n).toString(16)),Br(Um(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function z_(e,t,n,r){var i=[Br(Um(r)),Br(Math.round(e).toString(16)),Br(Math.round(t).toString(16)),Br(Math.round(n).toString(16))];return i.join("")}$t.equals=function(e,t){return!e||!t?!1:$t(e).toRgbString()==$t(t).toRgbString()};$t.random=function(){return $t.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function NC(e,t){t=t===0?0:t||10;var n=$t(e).toHsl();return n.s-=t/100,n.s=Ic(n.s),$t(n)}function FC(e,t){t=t===0?0:t||10;var n=$t(e).toHsl();return n.s+=t/100,n.s=Ic(n.s),$t(n)}function VC(e){return $t(e).desaturate(100)}function qC(e,t){t=t===0?0:t||10;var n=$t(e).toHsl();return n.l+=t/100,n.l=Ic(n.l),$t(n)}function BC(e,t){t=t===0?0:t||10;var n=$t(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),$t(n)}function UC(e,t){t=t===0?0:t||10;var n=$t(e).toHsl();return n.l-=t/100,n.l=Ic(n.l),$t(n)}function zC(e,t){var n=$t(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,$t(n)}function HC(e){var t=$t(e).toHsl();return t.h=(t.h+180)%360,$t(t)}function H_(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=$t(e).toHsl(),r=[$t(e)],i=360/t,o=1;o<t;o++)r.push($t({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function GC(e){var t=$t(e).toHsl(),n=t.h;return[$t(e),$t({h:(n+72)%360,s:t.s,l:t.l}),$t({h:(n+216)%360,s:t.s,l:t.l})]}function WC(e,t,n){t=t||6,n=n||30;var r=$t(e).toHsl(),i=360/n,o=[$t(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push($t(r));return o}function jC(e,t){t=t||6;for(var n=$t(e).toHsv(),r=n.h,i=n.s,o=n.v,l=[],c=1/t;t--;)l.push($t({h:r,s:i,v:o})),o=(o+c)%1;return l}$t.mix=function(e,t,n){n=n===0?0:n||50;var r=$t(e).toRgb(),i=$t(t).toRgb(),o=n/100,l={r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a};return $t(l)};$t.readability=function(e,t){var n=$t(e),r=$t(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)};$t.isReadable=function(e,t,n){var r=$t.readability(e,t),i,o;switch(o=!1,i=JC(n),i.level+i.size){case"AAsmall":case"AAAlarge":o=r>=4.5;break;case"AAlarge":o=r>=3;break;case"AAAsmall":o=r>=7;break}return o};$t.mostReadable=function(e,t,n){var r=null,i=0,o,l,c,f;n=n||{},l=n.includeFallbackColors,c=n.level,f=n.size;for(var d=0;d<t.length;d++)o=$t.readability(e,t[d]),o>i&&(i=o,r=$t(t[d]));return $t.isReadable(e,r,{level:c,size:f})||!l?r:(n.includeFallbackColors=!1,$t.mostReadable(e,["#fff","#000"],n))};var Xh=$t.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},KC=$t.hexNames=YC(Xh);function YC(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function Bm(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Ue(e,t){QC(e)&&(e="100%");var n=ZC(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function Ic(e){return Math.min(1,Math.max(0,e))}function fr(e){return parseInt(e,16)}function QC(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function ZC(e){return typeof e=="string"&&e.indexOf("%")!=-1}function Br(e){return e.length==1?"0"+e:""+e}function ea(e){return e<=1&&(e=e*100+"%"),e}function Um(e){return Math.round(parseFloat(e)*255).toString(16)}function G_(e){return fr(e)/255}var Fr=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function mi(e){return!!Fr.CSS_UNIT.exec(e)}function XC(e){e=e.replace(RC,"").replace(DC,"").toLowerCase();var t=!1;if(Xh[e])e=Xh[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=Fr.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=Fr.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Fr.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=Fr.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Fr.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=Fr.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Fr.hex8.exec(e))?{r:fr(n[1]),g:fr(n[2]),b:fr(n[3]),a:G_(n[4]),format:t?"name":"hex8"}:(n=Fr.hex6.exec(e))?{r:fr(n[1]),g:fr(n[2]),b:fr(n[3]),format:t?"name":"hex"}:(n=Fr.hex4.exec(e))?{r:fr(n[1]+""+n[1]),g:fr(n[2]+""+n[2]),b:fr(n[3]+""+n[3]),a:G_(n[4]+""+n[4]),format:t?"name":"hex8"}:(n=Fr.hex3.exec(e))?{r:fr(n[1]+""+n[1]),g:fr(n[2]+""+n[2]),b:fr(n[3]+""+n[3]),format:t?"name":"hex"}:!1}function JC(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:t,size:n}}const t2={props:["hits_data","set_hits_data","current_hit","edits_dict","set_edits_dict","editor_open","set_editor_state","refresh_interface_edit","annotating_edit_span_category_id","set_annotating_edit_span_category_id","annotating_edit_span","set_annotating_edit_span","lines","set_lines","config","set_boundary_editing_mode","set_boundary_editing_edit","set_original_boundary","boundary_editing_mode","set_hit_box_config","set_span_text","set_span_indices"],data(){return{edits_html:"",line_locked:!1}},watch:{current_hit(){$(`#circle-${this.current_hit}`).addClass("circle-active"),this.process_edits_html()},hits_data(){this.process_edits_html()},edits_dict(){}},methods:{annotate_edit(e){if(this.boundary_editing_mode)return;const t=this.hits_data[this.current_hit-1].source,n=this.hits_data[this.current_hit-1].target,r=this.edits_dict,i=e.target.dataset.category,o=e.target.dataset.id,l=parseInt(e.target.dataset.id.split("-")[1]);if($(".child-question").hide(),this.editor_open){const f=r.find(function(g){return g.category===i&&g.id===l});$(`.quality-selection[data-category=${i}]`).hide(300),$(".icon-default").removeClass("open"),$(e.target).removeClass(`txt-${i}`),$(`.${i}[data-id=${o}]`).removeClass(`white bg-${i} bg-${i}-light`),$(`.${i}_below[data-id=${o}]`).removeClass(`white bg-${i} bg-${i}-light`),$(`.edit-container[data-edit-id='${o}']`).css("background-color",""),f&&f.annotation&&f.annotation!=null?($(`.${i}[data-id=${o}]`).addClass(`border-${i}`),$(`.${i}_below[data-id=${o}]`).addClass(`txt-${i}`)):($(`.${i}[data-id=${o}]`).addClass(`border-${i}-light`),$(`.${i}_below[data-id=${o}]`).addClass(`txt-${i}-light`)),this.set_annotating_edit_span_category_id(null),this.set_annotating_edit_span(null,"source"),this.set_annotating_edit_span(null,"target"),this.set_annotating_edit_span(null,"composite"),this.refresh_interface_edit(),this.set_editor_state(!1);return}else{$(".quality-selection").hide(300);const f=$(`.quality-selection[data-category=${i}]`);this.config.box_position==="float"?(this.positionFloatingBox(f),this.makeBoxDraggable(f)):f.css({position:"relative",top:"auto",right:"auto",left:"auto",width:"100%"}),f.slideDown(300),$(e.target).addClass(`txt-${i}`),this.set_editor_state(!this.editor_open)}this.boundary_editing_mode||$(`.${i}[data-id=${o}]`).removeClass(`border-${i}-light`).addClass(`white border-${i} bg-${i}`);let c=r.find(function(f){return f.category===i&&f.id===l});if(this.getEditConfig(i).multi_span){let f=c.input_idx,d="";for(let v=0;v<f.length;v++)v!=0&&(d+=`<span class="edit-type txt-${i} f3"> and </span>`),d+=`<span class="pa1 edit-text br-pill-ns txt-${i} border-${i}-all ${i}_below">
                        &nbsp${t.substring(f[v][0],f[v][1])}&nbsp</span>`;this.set_annotating_edit_span(d,"source");let g=c.output_idx;d="";for(let v=0;v<g.length;v++)v!=0&&(d+=`<span class="edit-type txt-${i} f3"> and </span>`),d+=`<span class="pa1 edit-text br-pill-ns txt-${i} border-${i}-all ${i}_below">
                        &nbsp${n.substring(g[v][0],g[v][1])}&nbsp</span>`;this.set_annotating_edit_span(d,"target")}else if(this.getEditConfig(i).type=="composite"){let f="",d="";f+=`<span class="edit-type txt-${i}${d} f3"> (</span>`;for(let g=0;g<c.constituent_edits.length;g++){const v=c.constituent_edits[g],S=v.category;f+=this.render_edit_text(v,l,S,d),g==c.constituent_edits.length-1?f+=`<span class="edit-type txt-${i}${d} f3"> )</span>`:f+=`<span class="edit-type txt-${i}${d} f3"> , </span>`}this.set_annotating_edit_span(f,"composite")}else{if(c.hasOwnProperty("input_idx")){let f=c.input_idx[0],d="";d+=`<span class="pa1 edit-text br-pill-ns txt-${i} border-${i}-all ${i}_below">
                        &nbsp${t.substring(f[0],f[1])}&nbsp</span>`,this.set_annotating_edit_span(d,"source")}if(c.hasOwnProperty("output_idx")){let f="";const d=i==="checklist_extraction",g=v=>v;if(d){f+='<div class="mt3 mb3 pa2 tl" style="background-color: #f0f8ff; border-left: 4px solid #87CEEB; border-radius: 4px;">',f+='<p class="mt0 mb2 f5 b tracked-light">Evidences:</p>',f+='<div class="f5 lh-copy" style="color: #1e3a8a;">';const v=c.output_idx;for(let E=0;E<v.length;E++){let q=v[E];const Q=n.substring(q[0],q[1]),tt=g(Q);E>0&&(f+=", "),f+=`"${tt}"`}f+="</div></div>";let S="No value extracted yet";c.annotation&&c.annotation.explanation&&(S=c.annotation.explanation),f+='<div class="mb3 pa2 tl" style="background-color: #f0f8f0; border-left: 4px solid #90EE90; border-radius: 4px;">',f+='<p class="mt0 mb2 f5 b tracked-light">Current Extracted Value:</p>',f+=`<p class="ma0 f5" style="color: #2d5016;">${S}</p>`,f+="</div>"}else{let v=c.output_idx[0];const S=n.substring(v[0],v[1]),E=g(S);f+=`<span class="pa1 edit-text br-pill-ns txt-${i} border-${i}-all ${i}_below">
                            &nbsp${E}&nbsp</span>`}this.set_annotating_edit_span(f,"target")}}this.set_annotating_edit_span_category_id(l)},trash_edit(e){const t=parseInt(e.target.dataset.id.split("-")[1]),n=e.target.dataset.category,r=this.hits_data[this.current_hit-1].edits;let i=[];for(const l of r)l.id==t&&l.category==n||i.push(l);let o=ze.cloneDeep(this.hits_data);o[this.current_hit-1].edits=i,this.set_hits_data(o)},hasAnnotation(e){return e.annotation!=null||this.config.disable&&Object.values(this.config.disable).includes("annotation")},getEditConfig(e){return this.config.hasOwnProperty("edits")?this.config.edits.find(function(t){return t.name===e}):{}},linesDisabled(){return this.config.hasOwnProperty("display")&&Object.values(this.config.display).includes("disable-lines")},getAnnotationHtml(e,t){if(t==null)return"";let n="";for(let r of e){let i=r.name,o=r.label?r.label:i;if(o=o.replace("grammar_error","G"),!!r.hasOwnProperty("options"))if(r.options=="binary")t[i]=="yes"&&(n+=` <span class="brown ba bw1 pa1 br-pills mr2">${o}</span>`);else if(r.options=="likert-3"){if(t[i]!=null){let l=L_[t[i]]?L_[t[i]]:"black";n+=`<span class="${l} br-pills ba bw1 pa1">${o}: ${t[i]}</span>`}}else if(r.options=="textarea"||r.options=="textbox")t[i]!=null&&(n+='<div class="mt2 mb2">',n+='<div class="f6 b mb1" style="color: #166534;">Extracted Value:</div>',n+=`<div class="f5 lh-copy pl2" style="color: #166534; border-left: 3px solid #22c55e;">${t[i]}</div>`,n+="</div>");else{if(!t[i])continue;let l=t[i].val;if(l!=null&&l!=""){n+="";let c=r.options.find(f=>f.name===l);c=c.label?c.label:l,n+=`<span class="light-purple ba bw1 pa1 mr2">${c}</span>`,r.hasOwnProperty("options")&&(n+=this.getAnnotationHtml(r.options,t[i]))}}}return n},render_edit_text(e,t,n,r){var d,g;const i=this.getEditConfig(n);let o=i.label?i.label:n;n==="checklist_extraction"&&((g=(d=this.hits_data[this.current_hit-1])==null?void 0:d.metadata)!=null&&g.checklist_item)&&(o=this.hits_data[this.current_hit-1].metadata.checklist_item);let l="";if(l+=`
                <span data-id="${n}-${t}" data-category="${n}" class="default_cursor" @mouseover="hover_span" @mouseout="un_hover_span">
                    <span class="edit-type txt-${n}${r} f5">${o}</span>`,!e.hasOwnProperty("input_idx")&&!e.hasOwnProperty("output_idx"))return l;const c=(v,S)=>v,f=n==="checklist_extraction";if(i.type=="multi_span")if(f&&e.hasOwnProperty("output_idx")){l+='<div class="mt2 mb2">',l+='<div class="f6 b mb1" style="color: #1e3a8a;">Evidences:</div>';let v=e.output_idx;for(let S=0;S<v.length;S++){let E=v[S];const q=this.hits_data[this.current_hit-1].target.substring(E[0],E[1]),Q=c(q);l+=`<div class="f5 lh-copy mb1 pl2" style="color: #374151; border-left: 3px solid #1e3a8a;">${Q}</div>`}l+="</div>"}else{if(e.hasOwnProperty("input_idx")){let v=e.input_idx;for(let S=0;S<v.length;S++){let E=v[S];S!=0&&(l+=`<span class="edit-type txt-${n}${r} f3"> and </span>`);const q=this.hits_data[this.current_hit-1].source.substring(E[0],E[1]),Q=c(q);l+=`
                                <span class="pa1 edit-text br-pill-ns txt-${n}${r} border-${n}${r}-all ${n}_below" data-id="${n}-${t}" data-category="${n}">
                                    &nbsp${Q}&nbsp</span>`}}if(e.hasOwnProperty("input_idx")&&e.hasOwnProperty("output_idx")&&(l+=`<span class="edit-type txt-${n}${r} f3"> with </span>`),e.hasOwnProperty("output_idx")){let v=e.output_idx;for(let S=0;S<v.length;S++){let E=v[S];S!=0&&(l+=`<span class="edit-type txt-${n}${r} f3"> and </span>`);const q=this.hits_data[this.current_hit-1].target.substring(E[0],E[1]),Q=c(q);l+=`
                                <span class="pa1 edit-text br-pill-ns txt-${n}${r} border-${n}${r}-all ${n}_below" data-id="${n}-${t}" data-category="${n}">
                                    &nbsp${Q}&nbsp</span>`}}}else if(e.hasOwnProperty("input_idx")){let v=e.input_idx[0];const S=this.hits_data[this.current_hit-1].source.substring(v[0],v[1]),E=c(S);l+=`
                    <span class="pa1 edit-text br-pill-ns txt-${n}${r} border-${n}${r}-all ${n}_below" data-id="${n}-${t}" data-category="${n}">
                        &nbsp${E}&nbsp</span>`}else if(e.hasOwnProperty("output_idx"))if(f){l+='<div class="mt2 mb2">',l+='<div class="f6 b mb1" style="color: #1e3a8a;">Evidences:</div>';for(let v=0;v<e.output_idx.length;v++){let S=e.output_idx[v];const E=this.hits_data[this.current_hit-1].target.substring(S[0],S[1]),q=c(E);l+=`<div class="f5 lh-copy mb1 pl2" style="color: #374151; border-left: 3px solid #1e3a8a;">${q}</div>`}l+="</div>"}else{let v=e.output_idx[0];const S=this.hits_data[this.current_hit-1].target.substring(v[0],v[1]),E=c(S);l+=`
                        <span class="pa1 edit-text br-pill-ns txt-${n}${r} border-${n}${r}-all ${n}_below" data-id="${n}-${t}" data-category="${n}">
                            &nbsp${E}&nbsp</span>`}return l},process_edits_html(){var r,i;let e="",t=ze.cloneDeep(this.hits_data[this.current_hit-1].edits);const n=o=>o?Math.min(...o.map(l=>l[0])):1/0;t.sort((o,l)=>{const c=Math.min(n(o.input_idx),n(o.output_idx)),f=Math.min(n(l.input_idx),n(l.output_idx));return c-f});for(let o of t){let l=o.id,c=o.category,f=this.hasAnnotation(o)?"":"-light";e+=`
                    <div class='cf ba b--black-10 br2 pa3 mb3 edit-container' data-edit-id='${c}-${l}'>
                        <div class="fl w-80 edit" style="margin-bottom: 0 !important;">`;const d=this.getEditConfig(c);let g=d&&d.label?d.label:c;if(c==="checklist_extraction"&&((i=(r=this.hits_data[this.current_hit-1])==null?void 0:r.metadata)!=null&&i.checklist_item)&&(g=this.hits_data[this.current_hit-1].metadata.checklist_item),d==null)continue;if(d.type=="composite"){const q=this.getEditConfig(c).icon;e+=`
                        <span data-id="${c}-${l}" data-category="${c}" class="default_cursor" @mouseover="hover_span" @mouseout="un_hover_span">
                            <span class="edit-type txt-${c}${f} f5">${g}</span>
                            <span class="pa1 edit-text br-pill-ns txt-${c}${f} border-${c}${f}-all ${c}_below" data-id="${c}-${l}" data-category="${c}">
                                &nbsp<i class="fa-solid ${q}"></i>&nbsp</span>
                                <span class="edit-type txt-${c}${f} f3"> (</span>`;for(let Q=0;Q<o.constituent_edits.length;Q++){const tt=o.constituent_edits[Q],ut=tt.category;e+=this.render_edit_text(tt,l,ut,f),e+="</span>",Q!=o.constituent_edits.length-1?e+=`<span class="edit-type txt-${c}${f} f3"> , </span>`:e+=`<span class="edit-type txt-${c}${f} f3"> )</span>`}}else e+=this.render_edit_text(o,l,c,f);if(!this.hasAnnotation(o))(!this.config.disable||!Object.values(this.config.disable).includes("annotation"))&&(e+=`
                            <span class="f4 i black-60">${this.config.interface_text.annotation_viewer.not_annotated_text_1} <i class="fa-solid fa-pencil"></i> ${this.config.interface_text.annotation_viewer.not_annotated_text_2}</span>
                        `);else{const q=this.getEditConfig(c);let Q=this.getAnnotationHtml(q.annotation,o.annotation);e+=`<span class="f5">${Q}</span>`}let v="";this.config.disable&&Object.values(this.config.disable).includes("annotation")&&(v="disabled");let S="";this.config.disable&&Object.values(this.config.disable).includes("delete")&&(S="disabled");let E="disabled";this.config.enable&&(Object.values(this.config.enable).includes("edit_boundary")||Object.values(this.config.enable).includes("edit_boundary_multi"))&&(E=""),e+=`
                        </span>
                    </div>
                    <div class="fl w-20 mb4 operation tr">
                        <i @click="annotate_edit" class="annotation-icon fa-solid fa-pencil mr3 pointer dim ${v}" data-id="${c}-${l}" data-category="${c}"></i>
                        <i 
                            @click="edit_boundary" 
                            class="boundary-edit-icon fa-solid fa-pen-to-square mr2 pointer dim ${E}" 
                            data-id="${c}-${l}" 
                            data-category="${c}"
                            title="Edit boundary"></i>
                        <i 
                            @click="trash_edit" class="fa-solid fa-trash-can ml4 pointer dim ${S}" data-id="${c}-${l}" data-category="${c}"></i>
                    </div>
                </div>`}this.set_edits_dict(t),this.edits_html=e},clear_lines:function(){const e=[].concat(...Object.values(this.lines).map(t=>Object.values(t)));for(let t of e)if(t instanceof Array)Object.values(t).forEach(n=>{try{n.remove()}catch(r){console.warn(r)}});else try{t.remove()}catch(n){console.warn(n)}$(".leader-line").remove()},draw_lines:function(){if(this.line_locked||!this.config.hasOwnProperty("edits")||this.linesDisabled())return;this.line_locked=!0;try{this.clear_lines()}catch(n){console.warn(n)}let e=Object.fromEntries(this.config.edits.map(n=>[n.name,{}])),t=ze.cloneDeep(this.hits_data[this.current_hit-1].edits);for(let n of t){let r=n.id,i=n.category;const o=this.getEditConfig(i),l={endPlug:"behind",size:3,path:"straight"};let c=o.color;Xl.hasOwnProperty(c)&&(c=Xl[c]),this.hasAnnotation(n)||(c=$t(c).lighten(25).toHexString()),l.color=c;try{if(o.type=="composite")for(let f of n.constituent_edits){e[i][r]=[];const d=f.id,g=f.category,v=this.getEditConfig(g);v.enable_input&&v.enable_output&&e[i][r].push(V_.setLine($(`.${i}.source_span[data-id='${i}-${r}'][data-childcategory=${g}][data-childid=${d}]`)[0],$(`.${i}.target_span[data-id='${i}-${r}'][data-childcategory=${g}][data-childid=${d}]`)[0],l))}else o.enable_input&&o.enable_output&&($(`.${i}.source_span`)[0]==null&&console.warn("Something went wrong!"),e[i][r]=V_.setLine($(`.${i}.source_span[data-id='${i}-${r}']`)[0],$(`.${i}.target_span[data-id='${i}-${r}']`)[0],l))}catch(f){console.warn(f)}}this.set_lines(e),this.line_locked=!1},reposition_lines(){const e=[].concat(...Object.values(this.lines).map(t=>Object.values(t)));for(let t of e)if(t instanceof Array)Object.values(t).forEach(n=>{try{n.position()}catch(r){console.warn(r)}});else try{t.position()}catch(n){console.warn(n)}},edit_boundary(e){const t=parseInt(e.target.dataset.id.split("-")[1]),n=e.target.dataset.category;e.target.dataset.id;const r=this.hits_data[this.current_hit-1].edits.find(f=>f.category===n&&f.id===t);if(!r)return;const i=this.getEditConfig(n);let o=null;if(i.enable_input&&i.enable_output?o="target":i.enable_input?o="source":i.enable_output&&(o="target"),!o)return;const l=o==="source"?"input_idx":"output_idx";this.set_original_boundary(ze.cloneDeep(r[l]));const c=this.config.enable&&Object.values(this.config.enable).includes("edit_boundary_multi");this.set_boundary_editing_edit({category:n,id:t,type:o,multi:c}),this.set_boundary_editing_mode(!0),this.set_span_text("",o==="source"?"source":"target"),this.set_span_indices([],o==="source"?"source":"target"),this.setup_boundary_hit_box_config(o,c),this.enable_boundary_selection(o,n),this.highlight_current_boundary(r,o,n),this.$nextTick(()=>{const f=$("#boundary_edit_panel");this.config.box_position==="float"?(this.positionFloatingBox(f),this.makeBoxDraggable(f)):f.css({position:"relative",top:"auto",right:"auto",left:"auto",width:"100%"}),f.slideDown(300)})},setup_boundary_hit_box_config(e,t){let n={enable_select_source_sentence:!1,enable_select_target_sentence:!1,enable_multi_select_source_sentence:!1,enable_multi_select_target_sentence:!1};e==="source"?(n.enable_select_source_sentence=!0,t&&(n.enable_multi_select_source_sentence=!0)):e==="target"&&(n.enable_select_target_sentence=!0,t&&(n.enable_multi_select_target_sentence=!0)),this.set_hit_box_config(n)},enable_boundary_selection(e,t){const n=e==="source"?"#source-sentence":"#target-sentence";$(n).addClass(`boundary-editing-${t}`),$(n).attr("data-boundary-editing","true"),$(n).addClass("boundary-editing-active")},highlight_current_boundary(e,t,n){},is_boundary_editable(e){const t=this.getEditConfig(e.category);return t&&t.type!=="composite"&&(t.enable_input||t.enable_output)},positionEditBox(e,t){e.css({position:"absolute",width:t.outerWidth()+"px","z-index":"1000"});const n=t.offset(),r=n.top,i=e.outerHeight()||300,o=10,l=r-i-o,c=$(window).scrollTop();l<c+50?e.css({top:r+t.outerHeight()+o+"px",left:n.left+"px"}):e.css({top:l+"px",left:n.left+"px"})},positionFloatingBox(e){const t=$(window).width();let n;t<768?n="90vw":t<1024?n="60vw":t<1440?n="50vw":n="40vw",e.css({position:"fixed",top:"80px",right:"20px",width:n,"min-width":"400px","max-width":"800px","z-index":"1000",cursor:"move"})},makeBoxDraggable(e){let t=!1,n,r,i,o;e.find(".drag-handle").length||e.prepend('<div class="drag-handle" style="height: 30px; background: #e5e7eb; margin: -10px -10px 10px -10px; border-radius: 4px 4px 0 0; cursor: move; display: flex; align-items: center; padding: 0 10px;"><span style="font-size: 12px; color: #6b7280;">Drag to move</span></div>'),e.find(".drag-handle").on("mousedown",function(c){t=!0,n=c.clientX,r=c.clientY;const f=e.position();i=f.left,o=f.top,c.preventDefault(),$(document).on("mousemove.drag",function(d){if(!t)return;const g=d.clientX-n,v=d.clientY-r,S=i+g,E=o+v,q=$(window).width()-e.outerWidth(),Q=$(window).height()-e.outerHeight();e.css({left:Math.max(0,Math.min(S,q))+"px",top:Math.max(0,Math.min(E,Q))+"px",right:"auto"})}),$(document).on("mouseup.drag",function(){t=!1,$(document).off("mousemove.drag"),$(document).off("mouseup.drag")})})},hover_span(e){if(this.boundary_editing_mode)return;const t=e.currentTarget||e.target,n=t.dataset?t.dataset.category:$(t).data("category"),r=t.dataset?t.dataset.id:$(t).data("id");if(!n||!r)return;let i=$(`.${n}[data-id='${r}']`),o=$(`.${n}_below[data-id='${r}']`),l,c;const f=r.split("-")[1],d=this.hits_data[this.current_hit-1].edits.find(g=>g.category===n&&g.id===parseInt(f));d&&!this.hasAnnotation(d)?(l=`bg-${n}-light`,c="rgba(173, 197, 250, 1.0)"):(l=`bg-${n}`,c="rgba(33, 134, 235, 1.0)"),i.addClass(`white ${l}`),o.addClass(`white ${l}`),o.removeClass(`txt-${n} txt-${n}-light`);try{n==="substitution"&&this.lines[n]&&this.lines[n][f]&&(this.lines[n][f].color=c)}catch{}},un_hover_span(e){if(this.boundary_editing_mode)return;const t=e.currentTarget||e.target,n=t.dataset?t.dataset.category:$(t).data("category"),r=t.dataset?t.dataset.id:$(t).data("id");if(!n||!r)return;let i=$(`.${n}[data-id='${r}']`),o=$(`.${n}_below[data-id='${r}']`),l,c;const f=r.split("-")[1],d=this.hits_data[this.current_hit-1].edits.find(g=>g.category===n&&g.id===parseInt(f));d&&!this.hasAnnotation(d)?(l="rgba(173, 197, 250, 0.4)",c=`txt-${n}-light`):(l="rgba(33, 134, 235, 0.46)",c=`txt-${n}`),o.addClass(c),i.removeClass(`white bg-${n} bg-${n}-light`),o.removeClass(`white bg-${n} bg-${n}-light`);try{n==="substitution"&&this.lines[n]&&this.lines[n][f]&&(this.lines[n][f].color=l)}catch{}}},computed:{get_edits_html(){return{template:`<div id="edits_html" class="f4 lh-paras">${this.edits_html}</div>`,methods:{annotate_edit:this.annotate_edit,trash_edit:this.trash_edit,hover_span:this.hover_span,un_hover_span:this.un_hover_span,edit_boundary:this.edit_boundary}}}},mounted(){const e=this;$(document).on("mouseenter","#edits_html [data-category][data-id]",function(t){t.stopPropagation(),e.hover_span(t)}),$(document).on("mouseleave","#edits_html [data-category][data-id]",function(t){t.stopPropagation(),e.un_hover_span(t)})},created(){$(window).on("resize",this.reposition_lines),$("#sandbox").length&&($("#sandbox").on("scroll",this.reposition_lines),$("#sandbox").on("resize",this.reposition_lines),new ResizeObserver(t=>{for(const n of t)n.target.id==="sandbox"&&this.reposition_lines()}).observe(document.getElementById("sandbox")))}},e2=Object.assign(t2,{__name:"EditList",setup(e){return(t,n)=>(yt(),Tc(Df(t.get_edits_html)))}}),n2={class:"mt1 cf"},r2={class:"fl w-80"},i2={class:"f3 annotation-label ttu"},s2={key:0},o2={key:1},a2={class:"fl w-20 tr"},l2=H("i",{class:"fa-solid fa-plus fa-1-5x icon-default pointer mr2"},null,-1),c2={class:"f4"},u2={id:"hits-data",class:"mt1 dn"},h2={props:["hits_data","set_hits_data","current_hit","edits_dict","set_edits_dict","editor_open","set_editor_state","refresh_interface_edit","annotating_edit_span_category_id","set_annotating_edit_span_category_id","annotating_edit_span","set_annotating_edit_span","lines","set_lines","config","set_original_boundary","set_boundary_editing_mode","set_boundary_editing_edit","boundary_editing_mode","set_hit_box_config","set_span_text","set_span_indices"],data(){return{}},methods:{add_an_edit(){if(this.editor_open)$("#add_an_edit").slideUp(300),$(".add_button .icon-default").removeClass("open");else{const e=$("#add_an_edit");this.config.box_position==="float"?(this.positionFloatingBox(e),this.makeBoxDraggable(e)):e.css({position:"relative",top:"auto",right:"auto",left:"auto",width:"100%"}),e.slideDown(300),$(".add_button .icon-default").addClass("open")}this.set_editor_state(!this.editor_open)},positionFloatingBox(e){const t=$(window).width();let n;t<768?n="90vw":t<1024?n="60vw":t<1440?n="50vw":n="40vw",e.css({position:"fixed",top:"80px",right:"20px",width:n,"min-width":"400px","max-width":"800px","z-index":"1000",cursor:"move"})},makeBoxDraggable(e){let t=!1,n,r,i,o;e.find(".drag-handle").length||e.prepend('<div class="drag-handle" style="height: 30px; background: #e5e7eb; margin: -10px -10px 10px -10px; border-radius: 4px 4px 0 0; cursor: move; display: flex; align-items: center; padding: 0 10px;"><span style="font-size: 12px; color: #6b7280;">Drag to move</span></div>');const l=e.find(".drag-handle");l.off("mousedown"),l.on("mousedown",function(c){t=!0,n=c.clientX,r=c.clientY;const f=e.position();i=f.left,o=f.top,c.preventDefault(),$(document).on("mousemove.drag",function(d){if(!t)return;const g=d.clientX-n,v=d.clientY-r,S=i+g,E=o+v,q=$(window).width()-e.outerWidth(),Q=$(window).height()-e.outerHeight();e.css({left:Math.max(0,Math.min(S,q))+"px",top:Math.max(0,Math.min(E,Q))+"px",right:"auto"})}),$(document).on("mouseup.drag",function(){t=!1,$(document).off("mousemove.drag"),$(document).off("mouseup.drag")})})}},computed:{annotated_edits(){if(this.hits_data==null)return 0;let e=this.hits_data[this.current_hit-1].edits;if(e==null)return 0;var t=0;return e.forEach(function(n){n.hasOwnProperty("annotation")&&n.annotation!==null&&t++}),t},total_edits(){if(this.hits_data==null)return 0;let e=this.hits_data[this.current_hit-1].edits;return e==null?0:e.length}}},W_=Object.assign(h2,{__name:"AnnotationViewer",setup(e){return(t,n)=>(yt(),xt("section",null,[H("div",n2,[H("div",r2,[H("p",i2,[ke(Tt(e.config.interface_text.annotation_viewer.header)+" (",1),!e.config.disable||!Object.values(e.config.disable).includes("annotation")?(yt(),xt("span",s2,Tt(t.annotated_edits)+"/"+Tt(t.total_edits),1)):ne("",!0),e.config.disable&&Object.values(e.config.disable).includes("annotation")?(yt(),xt("span",o2,Tt(t.total_edits),1)):ne("",!0),ke(")")])]),H("div",a2,[H("p",{onClick:n[0]||(n[0]=(...r)=>t.add_an_edit&&t.add_an_edit(...r)),class:pe(["add_button pa2 br-pill-ns ba bw1 grow",{disabled:e.config.disable&&Object.values(e.config.disable).includes("selection")}])},[l2,H("span",c2,Tt(e.config.interface_text.buttons.add_edit_label),1)],2)])]),H("div",null,[sn(e2,dr(t.$props,{config:e.config}),null,16,["config"])]),H("div",u2,Tt(e.hits_data),1)]))}});var be={};const f2="Á",d2="á",p2="Ă",_2="ă",g2="∾",m2="∿",y2="∾̳",v2="Â",b2="â",w2="´",x2="А",E2="а",A2="Æ",S2="æ",k2="⁡",C2="𝔄",T2="𝔞",I2="À",R2="à",D2="ℵ",O2="ℵ",P2="Α",M2="α",L2="Ā",$2="ā",N2="⨿",F2="&",V2="&",q2="⩕",B2="⩓",U2="∧",z2="⩜",H2="⩘",G2="⩚",W2="∠",j2="⦤",K2="∠",Y2="⦨",Q2="⦩",Z2="⦪",X2="⦫",J2="⦬",tT="⦭",eT="⦮",nT="⦯",rT="∡",iT="∟",sT="⊾",oT="⦝",aT="∢",lT="Å",cT="⍼",uT="Ą",hT="ą",fT="𝔸",dT="𝕒",pT="⩯",_T="≈",gT="⩰",mT="≊",yT="≋",vT="'",bT="⁡",wT="≈",xT="≊",ET="Å",AT="å",ST="𝒜",kT="𝒶",CT="≔",TT="*",IT="≈",RT="≍",DT="Ã",OT="ã",PT="Ä",MT="ä",LT="∳",$T="⨑",NT="≌",FT="϶",VT="‵",qT="∽",BT="⋍",UT="∖",zT="⫧",HT="⊽",GT="⌅",WT="⌆",jT="⌅",KT="⎵",YT="⎶",QT="≌",ZT="Б",XT="б",JT="„",tI="∵",eI="∵",nI="∵",rI="⦰",iI="϶",sI="ℬ",oI="ℬ",aI="Β",lI="β",cI="ℶ",uI="≬",hI="𝔅",fI="𝔟",dI="⋂",pI="◯",_I="⋃",gI="⨀",mI="⨁",yI="⨂",vI="⨆",bI="★",wI="▽",xI="△",EI="⨄",AI="⋁",SI="⋀",kI="⤍",CI="⧫",TI="▪",II="▴",RI="▾",DI="◂",OI="▸",PI="␣",MI="▒",LI="░",$I="▓",NI="█",FI="=⃥",VI="≡⃥",qI="⫭",BI="⌐",UI="𝔹",zI="𝕓",HI="⊥",GI="⊥",WI="⋈",jI="⧉",KI="┐",YI="╕",QI="╖",ZI="╗",XI="┌",JI="╒",tR="╓",eR="╔",nR="─",rR="═",iR="┬",sR="╤",oR="╥",aR="╦",lR="┴",cR="╧",uR="╨",hR="╩",fR="⊟",dR="⊞",pR="⊠",_R="┘",gR="╛",mR="╜",yR="╝",vR="└",bR="╘",wR="╙",xR="╚",ER="│",AR="║",SR="┼",kR="╪",CR="╫",TR="╬",IR="┤",RR="╡",DR="╢",OR="╣",PR="├",MR="╞",LR="╟",$R="╠",NR="‵",FR="˘",VR="˘",qR="¦",BR="𝒷",UR="ℬ",zR="⁏",HR="∽",GR="⋍",WR="⧅",jR="\\",KR="⟈",YR="•",QR="•",ZR="≎",XR="⪮",JR="≏",tD="≎",eD="≏",nD="Ć",rD="ć",iD="⩄",sD="⩉",oD="⩋",aD="∩",lD="⋒",cD="⩇",uD="⩀",hD="ⅅ",fD="∩︀",dD="⁁",pD="ˇ",_D="ℭ",gD="⩍",mD="Č",yD="č",vD="Ç",bD="ç",wD="Ĉ",xD="ĉ",ED="∰",AD="⩌",SD="⩐",kD="Ċ",CD="ċ",TD="¸",ID="¸",RD="⦲",DD="¢",OD="·",PD="·",MD="𝔠",LD="ℭ",$D="Ч",ND="ч",FD="✓",VD="✓",qD="Χ",BD="χ",UD="ˆ",zD="≗",HD="↺",GD="↻",WD="⊛",jD="⊚",KD="⊝",YD="⊙",QD="®",ZD="Ⓢ",XD="⊖",JD="⊕",tO="⊗",eO="○",nO="⧃",rO="≗",iO="⨐",sO="⫯",oO="⧂",aO="∲",lO="”",cO="’",uO="♣",hO="♣",fO=":",dO="∷",pO="⩴",_O="≔",gO="≔",mO=",",yO="@",vO="∁",bO="∘",wO="∁",xO="ℂ",EO="≅",AO="⩭",SO="≡",kO="∮",CO="∯",TO="∮",IO="𝕔",RO="ℂ",DO="∐",OO="∐",PO="©",MO="©",LO="℗",$O="∳",NO="↵",FO="✗",VO="⨯",qO="𝒞",BO="𝒸",UO="⫏",zO="⫑",HO="⫐",GO="⫒",WO="⋯",jO="⤸",KO="⤵",YO="⋞",QO="⋟",ZO="↶",XO="⤽",JO="⩈",tP="⩆",eP="≍",nP="∪",rP="⋓",iP="⩊",sP="⊍",oP="⩅",aP="∪︀",lP="↷",cP="⤼",uP="⋞",hP="⋟",fP="⋎",dP="⋏",pP="¤",_P="↶",gP="↷",mP="⋎",yP="⋏",vP="∲",bP="∱",wP="⌭",xP="†",EP="‡",AP="ℸ",SP="↓",kP="↡",CP="⇓",TP="‐",IP="⫤",RP="⊣",DP="⤏",OP="˝",PP="Ď",MP="ď",LP="Д",$P="д",NP="‡",FP="⇊",VP="ⅅ",qP="ⅆ",BP="⤑",UP="⩷",zP="°",HP="∇",GP="Δ",WP="δ",jP="⦱",KP="⥿",YP="𝔇",QP="𝔡",ZP="⥥",XP="⇃",JP="⇂",tM="´",eM="˙",nM="˝",rM="`",iM="˜",sM="⋄",oM="⋄",aM="⋄",lM="♦",cM="♦",uM="¨",hM="ⅆ",fM="ϝ",dM="⋲",pM="÷",_M="÷",gM="⋇",mM="⋇",yM="Ђ",vM="ђ",bM="⌞",wM="⌍",xM="$",EM="𝔻",AM="𝕕",SM="¨",kM="˙",CM="⃜",TM="≐",IM="≑",RM="≐",DM="∸",OM="∔",PM="⊡",MM="⌆",LM="∯",$M="¨",NM="⇓",FM="⇐",VM="⇔",qM="⫤",BM="⟸",UM="⟺",zM="⟹",HM="⇒",GM="⊨",WM="⇑",jM="⇕",KM="∥",YM="⤓",QM="↓",ZM="↓",XM="⇓",JM="⇵",tL="̑",eL="⇊",nL="⇃",rL="⇂",iL="⥐",sL="⥞",oL="⥖",aL="↽",lL="⥟",cL="⥗",uL="⇁",hL="↧",fL="⊤",dL="⤐",pL="⌟",_L="⌌",gL="𝒟",mL="𝒹",yL="Ѕ",vL="ѕ",bL="⧶",wL="Đ",xL="đ",EL="⋱",AL="▿",SL="▾",kL="⇵",CL="⥯",TL="⦦",IL="Џ",RL="џ",DL="⟿",OL="É",PL="é",ML="⩮",LL="Ě",$L="ě",NL="Ê",FL="ê",VL="≖",qL="≕",BL="Э",UL="э",zL="⩷",HL="Ė",GL="ė",WL="≑",jL="ⅇ",KL="≒",YL="𝔈",QL="𝔢",ZL="⪚",XL="È",JL="è",t3="⪖",e3="⪘",n3="⪙",r3="∈",i3="⏧",s3="ℓ",o3="⪕",a3="⪗",l3="Ē",c3="ē",u3="∅",h3="∅",f3="◻",d3="∅",p3="▫",_3=" ",g3=" ",m3=" ",y3="Ŋ",v3="ŋ",b3=" ",w3="Ę",x3="ę",E3="𝔼",A3="𝕖",S3="⋕",k3="⧣",C3="⩱",T3="ε",I3="Ε",R3="ε",D3="ϵ",O3="≖",P3="≕",M3="≂",L3="⪖",$3="⪕",N3="⩵",F3="=",V3="≂",q3="≟",B3="⇌",U3="≡",z3="⩸",H3="⧥",G3="⥱",W3="≓",j3="ℯ",K3="ℰ",Y3="≐",Q3="⩳",Z3="≂",X3="Η",J3="η",t$="Ð",e$="ð",n$="Ë",r$="ë",i$="€",s$="!",o$="∃",a$="∃",l$="ℰ",c$="ⅇ",u$="ⅇ",h$="≒",f$="Ф",d$="ф",p$="♀",_$="ﬃ",g$="ﬀ",m$="ﬄ",y$="𝔉",v$="𝔣",b$="ﬁ",w$="◼",x$="▪",E$="fj",A$="♭",S$="ﬂ",k$="▱",C$="ƒ",T$="𝔽",I$="𝕗",R$="∀",D$="∀",O$="⋔",P$="⫙",M$="ℱ",L$="⨍",$$="½",N$="⅓",F$="¼",V$="⅕",q$="⅙",B$="⅛",U$="⅔",z$="⅖",H$="¾",G$="⅗",W$="⅜",j$="⅘",K$="⅚",Y$="⅝",Q$="⅞",Z$="⁄",X$="⌢",J$="𝒻",tN="ℱ",eN="ǵ",nN="Γ",rN="γ",iN="Ϝ",sN="ϝ",oN="⪆",aN="Ğ",lN="ğ",cN="Ģ",uN="Ĝ",hN="ĝ",fN="Г",dN="г",pN="Ġ",_N="ġ",gN="≥",mN="≧",yN="⪌",vN="⋛",bN="≥",wN="≧",xN="⩾",EN="⪩",AN="⩾",SN="⪀",kN="⪂",CN="⪄",TN="⋛︀",IN="⪔",RN="𝔊",DN="𝔤",ON="≫",PN="⋙",MN="⋙",LN="ℷ",$N="Ѓ",NN="ѓ",FN="⪥",VN="≷",qN="⪒",BN="⪤",UN="⪊",zN="⪊",HN="⪈",GN="≩",WN="⪈",jN="≩",KN="⋧",YN="𝔾",QN="𝕘",ZN="`",XN="≥",JN="⋛",tF="≧",eF="⪢",nF="≷",rF="⩾",iF="≳",sF="𝒢",oF="ℊ",aF="≳",lF="⪎",cF="⪐",uF="⪧",hF="⩺",fF=">",dF=">",pF="≫",_F="⋗",gF="⦕",mF="⩼",yF="⪆",vF="⥸",bF="⋗",wF="⋛",xF="⪌",EF="≷",AF="≳",SF="≩︀",kF="≩︀",CF="ˇ",TF=" ",IF="½",RF="ℋ",DF="Ъ",OF="ъ",PF="⥈",MF="↔",LF="⇔",$F="↭",NF="^",FF="ℏ",VF="Ĥ",qF="ĥ",BF="♥",UF="♥",zF="…",HF="⊹",GF="𝔥",WF="ℌ",jF="ℋ",KF="⤥",YF="⤦",QF="⇿",ZF="∻",XF="↩",JF="↪",t4="𝕙",e4="ℍ",n4="―",r4="─",i4="𝒽",s4="ℋ",o4="ℏ",a4="Ħ",l4="ħ",c4="≎",u4="≏",h4="⁃",f4="‐",d4="Í",p4="í",_4="⁣",g4="Î",m4="î",y4="И",v4="и",b4="İ",w4="Е",x4="е",E4="¡",A4="⇔",S4="𝔦",k4="ℑ",C4="Ì",T4="ì",I4="ⅈ",R4="⨌",D4="∭",O4="⧜",P4="℩",M4="Ĳ",L4="ĳ",$4="Ī",N4="ī",F4="ℑ",V4="ⅈ",q4="ℐ",B4="ℑ",U4="ı",z4="ℑ",H4="⊷",G4="Ƶ",W4="⇒",j4="℅",K4="∞",Y4="⧝",Q4="ı",Z4="⊺",X4="∫",J4="∬",tV="ℤ",eV="∫",nV="⊺",rV="⋂",iV="⨗",sV="⨼",oV="⁣",aV="⁢",lV="Ё",cV="ё",uV="Į",hV="į",fV="𝕀",dV="𝕚",pV="Ι",_V="ι",gV="⨼",mV="¿",yV="𝒾",vV="ℐ",bV="∈",wV="⋵",xV="⋹",EV="⋴",AV="⋳",SV="∈",kV="⁢",CV="Ĩ",TV="ĩ",IV="І",RV="і",DV="Ï",OV="ï",PV="Ĵ",MV="ĵ",LV="Й",$V="й",NV="𝔍",FV="𝔧",VV="ȷ",qV="𝕁",BV="𝕛",UV="𝒥",zV="𝒿",HV="Ј",GV="ј",WV="Є",jV="є",KV="Κ",YV="κ",QV="ϰ",ZV="Ķ",XV="ķ",JV="К",t9="к",e9="𝔎",n9="𝔨",r9="ĸ",i9="Х",s9="х",o9="Ќ",a9="ќ",l9="𝕂",c9="𝕜",u9="𝒦",h9="𝓀",f9="⇚",d9="Ĺ",p9="ĺ",_9="⦴",g9="ℒ",m9="Λ",y9="λ",v9="⟨",b9="⟪",w9="⦑",x9="⟨",E9="⪅",A9="ℒ",S9="«",k9="⇤",C9="⤟",T9="←",I9="↞",R9="⇐",D9="⤝",O9="↩",P9="↫",M9="⤹",L9="⥳",$9="↢",N9="⤙",F9="⤛",V9="⪫",q9="⪭",B9="⪭︀",U9="⤌",z9="⤎",H9="❲",G9="{",W9="[",j9="⦋",K9="⦏",Y9="⦍",Q9="Ľ",Z9="ľ",X9="Ļ",J9="ļ",t5="⌈",e5="{",n5="Л",r5="л",i5="⤶",s5="“",o5="„",a5="⥧",l5="⥋",c5="↲",u5="≤",h5="≦",f5="⟨",d5="⇤",p5="←",_5="←",g5="⇐",m5="⇆",y5="↢",v5="⌈",b5="⟦",w5="⥡",x5="⥙",E5="⇃",A5="⌊",S5="↽",k5="↼",C5="⇇",T5="↔",I5="↔",R5="⇔",D5="⇆",O5="⇋",P5="↭",M5="⥎",L5="↤",$5="⊣",N5="⥚",F5="⋋",V5="⧏",q5="⊲",B5="⊴",U5="⥑",z5="⥠",H5="⥘",G5="↿",W5="⥒",j5="↼",K5="⪋",Y5="⋚",Q5="≤",Z5="≦",X5="⩽",J5="⪨",t6="⩽",e6="⩿",n6="⪁",r6="⪃",i6="⋚︀",s6="⪓",o6="⪅",a6="⋖",l6="⋚",c6="⪋",u6="⋚",h6="≦",f6="≶",d6="≶",p6="⪡",_6="≲",g6="⩽",m6="≲",y6="⥼",v6="⌊",b6="𝔏",w6="𝔩",x6="≶",E6="⪑",A6="⥢",S6="↽",k6="↼",C6="⥪",T6="▄",I6="Љ",R6="љ",D6="⇇",O6="≪",P6="⋘",M6="⌞",L6="⇚",$6="⥫",N6="◺",F6="Ŀ",V6="ŀ",q6="⎰",B6="⎰",U6="⪉",z6="⪉",H6="⪇",G6="≨",W6="⪇",j6="≨",K6="⋦",Y6="⟬",Q6="⇽",Z6="⟦",X6="⟵",J6="⟵",tq="⟸",eq="⟷",nq="⟷",rq="⟺",iq="⟼",sq="⟶",oq="⟶",aq="⟹",lq="↫",cq="↬",uq="⦅",hq="𝕃",fq="𝕝",dq="⨭",pq="⨴",_q="∗",gq="_",mq="↙",yq="↘",vq="◊",bq="◊",wq="⧫",xq="(",Eq="⦓",Aq="⇆",Sq="⌟",kq="⇋",Cq="⥭",Tq="‎",Iq="⊿",Rq="‹",Dq="𝓁",Oq="ℒ",Pq="↰",Mq="↰",Lq="≲",$q="⪍",Nq="⪏",Fq="[",Vq="‘",qq="‚",Bq="Ł",Uq="ł",zq="⪦",Hq="⩹",Gq="<",Wq="<",jq="≪",Kq="⋖",Yq="⋋",Qq="⋉",Zq="⥶",Xq="⩻",Jq="◃",tB="⊴",eB="◂",nB="⦖",rB="⥊",iB="⥦",sB="≨︀",oB="≨︀",aB="¯",lB="♂",cB="✠",uB="✠",hB="↦",fB="↦",dB="↧",pB="↤",_B="↥",gB="▮",mB="⨩",yB="М",vB="м",bB="—",wB="∺",xB="∡",EB=" ",AB="ℳ",SB="𝔐",kB="𝔪",CB="℧",TB="µ",IB="*",RB="⫰",DB="∣",OB="·",PB="⊟",MB="−",LB="∸",$B="⨪",NB="∓",FB="⫛",VB="…",qB="∓",BB="⊧",UB="𝕄",zB="𝕞",HB="∓",GB="𝓂",WB="ℳ",jB="∾",KB="Μ",YB="μ",QB="⊸",ZB="⊸",XB="∇",JB="Ń",t8="ń",e8="∠⃒",n8="≉",r8="⩰̸",i8="≋̸",s8="ŉ",o8="≉",a8="♮",l8="ℕ",c8="♮",u8=" ",h8="≎̸",f8="≏̸",d8="⩃",p8="Ň",_8="ň",g8="Ņ",m8="ņ",y8="≇",v8="⩭̸",b8="⩂",w8="Н",x8="н",E8="–",A8="⤤",S8="↗",k8="⇗",C8="↗",T8="≠",I8="≐̸",R8="​",D8="​",O8="​",P8="​",M8="≢",L8="⤨",$8="≂̸",N8="≫",F8="≪",V8=`
`,q8="∄",B8="∄",U8="𝔑",z8="𝔫",H8="≧̸",G8="≱",W8="≱",j8="≧̸",K8="⩾̸",Y8="⩾̸",Q8="⋙̸",Z8="≵",X8="≫⃒",J8="≯",tU="≯",eU="≫̸",nU="↮",rU="⇎",iU="⫲",sU="∋",oU="⋼",aU="⋺",lU="∋",cU="Њ",uU="њ",hU="↚",fU="⇍",dU="‥",pU="≦̸",_U="≰",gU="↚",mU="⇍",yU="↮",vU="⇎",bU="≰",wU="≦̸",xU="⩽̸",EU="⩽̸",AU="≮",SU="⋘̸",kU="≴",CU="≪⃒",TU="≮",IU="⋪",RU="⋬",DU="≪̸",OU="∤",PU="⁠",MU=" ",LU="𝕟",$U="ℕ",NU="⫬",FU="¬",VU="≢",qU="≭",BU="∦",UU="∉",zU="≠",HU="≂̸",GU="∄",WU="≯",jU="≱",KU="≧̸",YU="≫̸",QU="≹",ZU="⩾̸",XU="≵",JU="≎̸",t7="≏̸",e7="∉",n7="⋵̸",r7="⋹̸",i7="∉",s7="⋷",o7="⋶",a7="⧏̸",l7="⋪",c7="⋬",u7="≮",h7="≰",f7="≸",d7="≪̸",p7="⩽̸",_7="≴",g7="⪢̸",m7="⪡̸",y7="∌",v7="∌",b7="⋾",w7="⋽",x7="⊀",E7="⪯̸",A7="⋠",S7="∌",k7="⧐̸",C7="⋫",T7="⋭",I7="⊏̸",R7="⋢",D7="⊐̸",O7="⋣",P7="⊂⃒",M7="⊈",L7="⊁",$7="⪰̸",N7="⋡",F7="≿̸",V7="⊃⃒",q7="⊉",B7="≁",U7="≄",z7="≇",H7="≉",G7="∤",W7="∦",j7="∦",K7="⫽⃥",Y7="∂̸",Q7="⨔",Z7="⊀",X7="⋠",J7="⊀",tz="⪯̸",ez="⪯̸",nz="⤳̸",rz="↛",iz="⇏",sz="↝̸",oz="↛",az="⇏",lz="⋫",cz="⋭",uz="⊁",hz="⋡",fz="⪰̸",dz="𝒩",pz="𝓃",_z="∤",gz="∦",mz="≁",yz="≄",vz="≄",bz="∤",wz="∦",xz="⋢",Ez="⋣",Az="⊄",Sz="⫅̸",kz="⊈",Cz="⊂⃒",Tz="⊈",Iz="⫅̸",Rz="⊁",Dz="⪰̸",Oz="⊅",Pz="⫆̸",Mz="⊉",Lz="⊃⃒",$z="⊉",Nz="⫆̸",Fz="≹",Vz="Ñ",qz="ñ",Bz="≸",Uz="⋪",zz="⋬",Hz="⋫",Gz="⋭",Wz="Ν",jz="ν",Kz="#",Yz="№",Qz=" ",Zz="≍⃒",Xz="⊬",Jz="⊭",tH="⊮",eH="⊯",nH="≥⃒",rH=">⃒",iH="⤄",sH="⧞",oH="⤂",aH="≤⃒",lH="<⃒",cH="⊴⃒",uH="⤃",hH="⊵⃒",fH="∼⃒",dH="⤣",pH="↖",_H="⇖",gH="↖",mH="⤧",yH="Ó",vH="ó",bH="⊛",wH="Ô",xH="ô",EH="⊚",AH="О",SH="о",kH="⊝",CH="Ő",TH="ő",IH="⨸",RH="⊙",DH="⦼",OH="Œ",PH="œ",MH="⦿",LH="𝔒",$H="𝔬",NH="˛",FH="Ò",VH="ò",qH="⧁",BH="⦵",UH="Ω",zH="∮",HH="↺",GH="⦾",WH="⦻",jH="‾",KH="⧀",YH="Ō",QH="ō",ZH="Ω",XH="ω",JH="Ο",tG="ο",eG="⦶",nG="⊖",rG="𝕆",iG="𝕠",sG="⦷",oG="“",aG="‘",lG="⦹",cG="⊕",uG="↻",hG="⩔",fG="∨",dG="⩝",pG="ℴ",_G="ℴ",gG="ª",mG="º",yG="⊶",vG="⩖",bG="⩗",wG="⩛",xG="Ⓢ",EG="𝒪",AG="ℴ",SG="Ø",kG="ø",CG="⊘",TG="Õ",IG="õ",RG="⨶",DG="⨷",OG="⊗",PG="Ö",MG="ö",LG="⌽",$G="‾",NG="⏞",FG="⎴",VG="⏜",qG="¶",BG="∥",UG="∥",zG="⫳",HG="⫽",GG="∂",WG="∂",jG="П",KG="п",YG="%",QG=".",ZG="‰",XG="⊥",JG="‱",tW="𝔓",eW="𝔭",nW="Φ",rW="φ",iW="ϕ",sW="ℳ",oW="☎",aW="Π",lW="π",cW="⋔",uW="ϖ",hW="ℏ",fW="ℎ",dW="ℏ",pW="⨣",_W="⊞",gW="⨢",mW="+",yW="∔",vW="⨥",bW="⩲",wW="±",xW="±",EW="⨦",AW="⨧",SW="±",kW="ℌ",CW="⨕",TW="𝕡",IW="ℙ",RW="£",DW="⪷",OW="⪻",PW="≺",MW="≼",LW="⪷",$W="≺",NW="≼",FW="≺",VW="⪯",qW="≼",BW="≾",UW="⪯",zW="⪹",HW="⪵",GW="⋨",WW="⪯",jW="⪳",KW="≾",YW="′",QW="″",ZW="ℙ",XW="⪹",JW="⪵",tj="⋨",ej="∏",nj="∏",rj="⌮",ij="⌒",sj="⌓",oj="∝",aj="∝",lj="∷",cj="∝",uj="≾",hj="⊰",fj="𝒫",dj="𝓅",pj="Ψ",_j="ψ",gj=" ",mj="𝔔",yj="𝔮",vj="⨌",bj="𝕢",wj="ℚ",xj="⁗",Ej="𝒬",Aj="𝓆",Sj="ℍ",kj="⨖",Cj="?",Tj="≟",Ij='"',Rj='"',Dj="⇛",Oj="∽̱",Pj="Ŕ",Mj="ŕ",Lj="√",$j="⦳",Nj="⟩",Fj="⟫",Vj="⦒",qj="⦥",Bj="⟩",Uj="»",zj="⥵",Hj="⇥",Gj="⤠",Wj="⤳",jj="→",Kj="↠",Yj="⇒",Qj="⤞",Zj="↪",Xj="↬",Jj="⥅",tK="⥴",eK="⤖",nK="↣",rK="↝",iK="⤚",sK="⤜",oK="∶",aK="ℚ",lK="⤍",cK="⤏",uK="⤐",hK="❳",fK="}",dK="]",pK="⦌",_K="⦎",gK="⦐",mK="Ř",yK="ř",vK="Ŗ",bK="ŗ",wK="⌉",xK="}",EK="Р",AK="р",SK="⤷",kK="⥩",CK="”",TK="”",IK="↳",RK="ℜ",DK="ℛ",OK="ℜ",PK="ℝ",MK="ℜ",LK="▭",$K="®",NK="®",FK="∋",VK="⇋",qK="⥯",BK="⥽",UK="⌋",zK="𝔯",HK="ℜ",GK="⥤",WK="⇁",jK="⇀",KK="⥬",YK="Ρ",QK="ρ",ZK="ϱ",XK="⟩",JK="⇥",tY="→",eY="→",nY="⇒",rY="⇄",iY="↣",sY="⌉",oY="⟧",aY="⥝",lY="⥕",cY="⇂",uY="⌋",hY="⇁",fY="⇀",dY="⇄",pY="⇌",_Y="⇉",gY="↝",mY="↦",yY="⊢",vY="⥛",bY="⋌",wY="⧐",xY="⊳",EY="⊵",AY="⥏",SY="⥜",kY="⥔",CY="↾",TY="⥓",IY="⇀",RY="˚",DY="≓",OY="⇄",PY="⇌",MY="‏",LY="⎱",$Y="⎱",NY="⫮",FY="⟭",VY="⇾",qY="⟧",BY="⦆",UY="𝕣",zY="ℝ",HY="⨮",GY="⨵",WY="⥰",jY=")",KY="⦔",YY="⨒",QY="⇉",ZY="⇛",XY="›",JY="𝓇",tQ="ℛ",eQ="↱",nQ="↱",rQ="]",iQ="’",sQ="’",oQ="⋌",aQ="⋊",lQ="▹",cQ="⊵",uQ="▸",hQ="⧎",fQ="⧴",dQ="⥨",pQ="℞",_Q="Ś",gQ="ś",mQ="‚",yQ="⪸",vQ="Š",bQ="š",wQ="⪼",xQ="≻",EQ="≽",AQ="⪰",SQ="⪴",kQ="Ş",CQ="ş",TQ="Ŝ",IQ="ŝ",RQ="⪺",DQ="⪶",OQ="⋩",PQ="⨓",MQ="≿",LQ="С",$Q="с",NQ="⊡",FQ="⋅",VQ="⩦",qQ="⤥",BQ="↘",UQ="⇘",zQ="↘",HQ="§",GQ=";",WQ="⤩",jQ="∖",KQ="∖",YQ="✶",QQ="𝔖",ZQ="𝔰",XQ="⌢",JQ="♯",tZ="Щ",eZ="щ",nZ="Ш",rZ="ш",iZ="↓",sZ="←",oZ="∣",aZ="∥",lZ="→",cZ="↑",uZ="­",hZ="Σ",fZ="σ",dZ="ς",pZ="ς",_Z="∼",gZ="⩪",mZ="≃",yZ="≃",vZ="⪞",bZ="⪠",wZ="⪝",xZ="⪟",EZ="≆",AZ="⨤",SZ="⥲",kZ="←",CZ="∘",TZ="∖",IZ="⨳",RZ="⧤",DZ="∣",OZ="⌣",PZ="⪪",MZ="⪬",LZ="⪬︀",$Z="Ь",NZ="ь",FZ="⌿",VZ="⧄",qZ="/",BZ="𝕊",UZ="𝕤",zZ="♠",HZ="♠",GZ="∥",WZ="⊓",jZ="⊓︀",KZ="⊔",YZ="⊔︀",QZ="√",ZZ="⊏",XZ="⊑",JZ="⊏",tX="⊑",eX="⊐",nX="⊒",rX="⊐",iX="⊒",sX="□",oX="□",aX="⊓",lX="⊏",cX="⊑",uX="⊐",hX="⊒",fX="⊔",dX="▪",pX="□",_X="▪",gX="→",mX="𝒮",yX="𝓈",vX="∖",bX="⌣",wX="⋆",xX="⋆",EX="☆",AX="★",SX="ϵ",kX="ϕ",CX="¯",TX="⊂",IX="⋐",RX="⪽",DX="⫅",OX="⊆",PX="⫃",MX="⫁",LX="⫋",$X="⊊",NX="⪿",FX="⥹",VX="⊂",qX="⋐",BX="⊆",UX="⫅",zX="⊆",HX="⊊",GX="⫋",WX="⫇",jX="⫕",KX="⫓",YX="⪸",QX="≻",ZX="≽",XX="≻",JX="⪰",tJ="≽",eJ="≿",nJ="⪰",rJ="⪺",iJ="⪶",sJ="⋩",oJ="≿",aJ="∋",lJ="∑",cJ="∑",uJ="♪",hJ="¹",fJ="²",dJ="³",pJ="⊃",_J="⋑",gJ="⪾",mJ="⫘",yJ="⫆",vJ="⊇",bJ="⫄",wJ="⊃",xJ="⊇",EJ="⟉",AJ="⫗",SJ="⥻",kJ="⫂",CJ="⫌",TJ="⊋",IJ="⫀",RJ="⊃",DJ="⋑",OJ="⊇",PJ="⫆",MJ="⊋",LJ="⫌",$J="⫈",NJ="⫔",FJ="⫖",VJ="⤦",qJ="↙",BJ="⇙",UJ="↙",zJ="⤪",HJ="ß",GJ="	",WJ="⌖",jJ="Τ",KJ="τ",YJ="⎴",QJ="Ť",ZJ="ť",XJ="Ţ",JJ="ţ",ttt="Т",ett="т",ntt="⃛",rtt="⌕",itt="𝔗",stt="𝔱",ott="∴",att="∴",ltt="∴",ctt="Θ",utt="θ",htt="ϑ",ftt="ϑ",dtt="≈",ptt="∼",_tt="  ",gtt=" ",mtt=" ",ytt="≈",vtt="∼",btt="Þ",wtt="þ",xtt="˜",Ett="∼",Att="≃",Stt="≅",ktt="≈",Ctt="⨱",Ttt="⊠",Itt="×",Rtt="⨰",Dtt="∭",Ott="⤨",Ptt="⌶",Mtt="⫱",Ltt="⊤",$tt="𝕋",Ntt="𝕥",Ftt="⫚",Vtt="⤩",qtt="‴",Btt="™",Utt="™",ztt="▵",Htt="▿",Gtt="◃",Wtt="⊴",jtt="≜",Ktt="▹",Ytt="⊵",Qtt="◬",Ztt="≜",Xtt="⨺",Jtt="⃛",tet="⨹",eet="⧍",net="⨻",ret="⏢",iet="𝒯",set="𝓉",oet="Ц",aet="ц",cet="Ћ",uet="ћ",het="Ŧ",fet="ŧ",det="≬",pet="↞",_et="↠",get="Ú",met="ú",yet="↑",vet="↟",bet="⇑",wet="⥉",xet="Ў",Eet="ў",Aet="Ŭ",ket="ŭ",Cet="Û",Tet="û",Iet="У",Ret="у",Det="⇅",Oet="Ű",Pet="ű",Met="⥮",Let="⥾",$et="𝔘",Net="𝔲",Fet="Ù",Vet="ù",qet="⥣",Bet="↿",Uet="↾",zet="▀",Het="⌜",Get="⌜",Wet="⌏",jet="◸",Ket="Ū",Yet="ū",Qet="¨",Zet="_",Xet="⏟",Jet="⎵",tnt="⏝",ent="⋃",nnt="⊎",rnt="Ų",int="ų",snt="𝕌",ont="𝕦",ant="⤒",lnt="↑",cnt="↑",unt="⇑",hnt="⇅",fnt="↕",dnt="↕",pnt="⇕",_nt="⥮",gnt="↿",mnt="↾",ynt="⊎",vnt="↖",bnt="↗",wnt="υ",xnt="ϒ",Ent="ϒ",Ant="Υ",Snt="υ",knt="↥",Cnt="⊥",Tnt="⇈",Int="⌝",Rnt="⌝",Dnt="⌎",Ont="Ů",Pnt="ů",Mnt="◹",Lnt="𝒰",$nt="𝓊",Nnt="⋰",Fnt="Ũ",Vnt="ũ",qnt="▵",Bnt="▴",Unt="⇈",znt="Ü",Hnt="ü",Gnt="⦧",Wnt="⦜",jnt="ϵ",Knt="ϰ",Ynt="∅",Qnt="ϕ",Znt="ϖ",Xnt="∝",Jnt="↕",trt="⇕",ert="ϱ",nrt="ς",rrt="⊊︀",irt="⫋︀",srt="⊋︀",ort="⫌︀",art="ϑ",lrt="⊲",crt="⊳",urt="⫨",hrt="⫫",frt="⫩",drt="В",prt="в",_rt="⊢",grt="⊨",mrt="⊩",yrt="⊫",vrt="⫦",brt="⊻",wrt="∨",xrt="⋁",Ert="≚",Art="⋮",Srt="|",krt="‖",Crt="|",Trt="‖",Irt="∣",Rrt="|",Drt="❘",Ort="≀",Prt=" ",Mrt="𝔙",Lrt="𝔳",$rt="⊲",Nrt="⊂⃒",Frt="⊃⃒",Vrt="𝕍",qrt="𝕧",Brt="∝",Urt="⊳",zrt="𝒱",Hrt="𝓋",Grt="⫋︀",Wrt="⊊︀",jrt="⫌︀",Krt="⊋︀",Yrt="⊪",Qrt="⦚",Zrt="Ŵ",Xrt="ŵ",Jrt="⩟",tit="∧",eit="⋀",nit="≙",rit="℘",iit="𝔚",sit="𝔴",oit="𝕎",ait="𝕨",lit="℘",cit="≀",uit="≀",hit="𝒲",fit="𝓌",dit="⋂",pit="◯",_it="⋃",git="▽",mit="𝔛",yit="𝔵",vit="⟷",bit="⟺",wit="Ξ",xit="ξ",Eit="⟵",Ait="⟸",Sit="⟼",kit="⋻",Cit="⨀",Tit="𝕏",Iit="𝕩",Rit="⨁",Dit="⨂",Oit="⟶",Pit="⟹",Mit="𝒳",Lit="𝓍",$it="⨆",Nit="⨄",Fit="△",Vit="⋁",qit="⋀",Bit="Ý",Uit="ý",zit="Я",Hit="я",Git="Ŷ",Wit="ŷ",jit="Ы",Kit="ы",Yit="¥",Qit="𝔜",Zit="𝔶",Xit="Ї",Jit="ї",tst="𝕐",est="𝕪",nst="𝒴",rst="𝓎",ist="Ю",sst="ю",ost="ÿ",ast="Ÿ",lst="Ź",cst="ź",ust="Ž",hst="ž",fst="З",dst="з",pst="Ż",_st="ż",gst="ℨ",mst="​",yst="Ζ",vst="ζ",bst="𝔷",wst="ℨ",xst="Ж",Est="ж",Ast="⇝",Sst="𝕫",kst="ℤ",Cst="𝒵",Tst="𝓏",Ist="‍",Rst="‌",Dst={Aacute:f2,aacute:d2,Abreve:p2,abreve:_2,ac:g2,acd:m2,acE:y2,Acirc:v2,acirc:b2,acute:w2,Acy:x2,acy:E2,AElig:A2,aelig:S2,af:k2,Afr:C2,afr:T2,Agrave:I2,agrave:R2,alefsym:D2,aleph:O2,Alpha:P2,alpha:M2,Amacr:L2,amacr:$2,amalg:N2,amp:F2,AMP:V2,andand:q2,And:B2,and:U2,andd:z2,andslope:H2,andv:G2,ang:W2,ange:j2,angle:K2,angmsdaa:Y2,angmsdab:Q2,angmsdac:Z2,angmsdad:X2,angmsdae:J2,angmsdaf:tT,angmsdag:eT,angmsdah:nT,angmsd:rT,angrt:iT,angrtvb:sT,angrtvbd:oT,angsph:aT,angst:lT,angzarr:cT,Aogon:uT,aogon:hT,Aopf:fT,aopf:dT,apacir:pT,ap:_T,apE:gT,ape:mT,apid:yT,apos:vT,ApplyFunction:bT,approx:wT,approxeq:xT,Aring:ET,aring:AT,Ascr:ST,ascr:kT,Assign:CT,ast:TT,asymp:IT,asympeq:RT,Atilde:DT,atilde:OT,Auml:PT,auml:MT,awconint:LT,awint:$T,backcong:NT,backepsilon:FT,backprime:VT,backsim:qT,backsimeq:BT,Backslash:UT,Barv:zT,barvee:HT,barwed:GT,Barwed:WT,barwedge:jT,bbrk:KT,bbrktbrk:YT,bcong:QT,Bcy:ZT,bcy:XT,bdquo:JT,becaus:tI,because:eI,Because:nI,bemptyv:rI,bepsi:iI,bernou:sI,Bernoullis:oI,Beta:aI,beta:lI,beth:cI,between:uI,Bfr:hI,bfr:fI,bigcap:dI,bigcirc:pI,bigcup:_I,bigodot:gI,bigoplus:mI,bigotimes:yI,bigsqcup:vI,bigstar:bI,bigtriangledown:wI,bigtriangleup:xI,biguplus:EI,bigvee:AI,bigwedge:SI,bkarow:kI,blacklozenge:CI,blacksquare:TI,blacktriangle:II,blacktriangledown:RI,blacktriangleleft:DI,blacktriangleright:OI,blank:PI,blk12:MI,blk14:LI,blk34:$I,block:NI,bne:FI,bnequiv:VI,bNot:qI,bnot:BI,Bopf:UI,bopf:zI,bot:HI,bottom:GI,bowtie:WI,boxbox:jI,boxdl:KI,boxdL:YI,boxDl:QI,boxDL:ZI,boxdr:XI,boxdR:JI,boxDr:tR,boxDR:eR,boxh:nR,boxH:rR,boxhd:iR,boxHd:sR,boxhD:oR,boxHD:aR,boxhu:lR,boxHu:cR,boxhU:uR,boxHU:hR,boxminus:fR,boxplus:dR,boxtimes:pR,boxul:_R,boxuL:gR,boxUl:mR,boxUL:yR,boxur:vR,boxuR:bR,boxUr:wR,boxUR:xR,boxv:ER,boxV:AR,boxvh:SR,boxvH:kR,boxVh:CR,boxVH:TR,boxvl:IR,boxvL:RR,boxVl:DR,boxVL:OR,boxvr:PR,boxvR:MR,boxVr:LR,boxVR:$R,bprime:NR,breve:FR,Breve:VR,brvbar:qR,bscr:BR,Bscr:UR,bsemi:zR,bsim:HR,bsime:GR,bsolb:WR,bsol:jR,bsolhsub:KR,bull:YR,bullet:QR,bump:ZR,bumpE:XR,bumpe:JR,Bumpeq:tD,bumpeq:eD,Cacute:nD,cacute:rD,capand:iD,capbrcup:sD,capcap:oD,cap:aD,Cap:lD,capcup:cD,capdot:uD,CapitalDifferentialD:hD,caps:fD,caret:dD,caron:pD,Cayleys:_D,ccaps:gD,Ccaron:mD,ccaron:yD,Ccedil:vD,ccedil:bD,Ccirc:wD,ccirc:xD,Cconint:ED,ccups:AD,ccupssm:SD,Cdot:kD,cdot:CD,cedil:TD,Cedilla:ID,cemptyv:RD,cent:DD,centerdot:OD,CenterDot:PD,cfr:MD,Cfr:LD,CHcy:$D,chcy:ND,check:FD,checkmark:VD,Chi:qD,chi:BD,circ:UD,circeq:zD,circlearrowleft:HD,circlearrowright:GD,circledast:WD,circledcirc:jD,circleddash:KD,CircleDot:YD,circledR:QD,circledS:ZD,CircleMinus:XD,CirclePlus:JD,CircleTimes:tO,cir:eO,cirE:nO,cire:rO,cirfnint:iO,cirmid:sO,cirscir:oO,ClockwiseContourIntegral:aO,CloseCurlyDoubleQuote:lO,CloseCurlyQuote:cO,clubs:uO,clubsuit:hO,colon:fO,Colon:dO,Colone:pO,colone:_O,coloneq:gO,comma:mO,commat:yO,comp:vO,compfn:bO,complement:wO,complexes:xO,cong:EO,congdot:AO,Congruent:SO,conint:kO,Conint:CO,ContourIntegral:TO,copf:IO,Copf:RO,coprod:DO,Coproduct:OO,copy:PO,COPY:MO,copysr:LO,CounterClockwiseContourIntegral:$O,crarr:NO,cross:FO,Cross:VO,Cscr:qO,cscr:BO,csub:UO,csube:zO,csup:HO,csupe:GO,ctdot:WO,cudarrl:jO,cudarrr:KO,cuepr:YO,cuesc:QO,cularr:ZO,cularrp:XO,cupbrcap:JO,cupcap:tP,CupCap:eP,cup:nP,Cup:rP,cupcup:iP,cupdot:sP,cupor:oP,cups:aP,curarr:lP,curarrm:cP,curlyeqprec:uP,curlyeqsucc:hP,curlyvee:fP,curlywedge:dP,curren:pP,curvearrowleft:_P,curvearrowright:gP,cuvee:mP,cuwed:yP,cwconint:vP,cwint:bP,cylcty:wP,dagger:xP,Dagger:EP,daleth:AP,darr:SP,Darr:kP,dArr:CP,dash:TP,Dashv:IP,dashv:RP,dbkarow:DP,dblac:OP,Dcaron:PP,dcaron:MP,Dcy:LP,dcy:$P,ddagger:NP,ddarr:FP,DD:VP,dd:qP,DDotrahd:BP,ddotseq:UP,deg:zP,Del:HP,Delta:GP,delta:WP,demptyv:jP,dfisht:KP,Dfr:YP,dfr:QP,dHar:ZP,dharl:XP,dharr:JP,DiacriticalAcute:tM,DiacriticalDot:eM,DiacriticalDoubleAcute:nM,DiacriticalGrave:rM,DiacriticalTilde:iM,diam:sM,diamond:oM,Diamond:aM,diamondsuit:lM,diams:cM,die:uM,DifferentialD:hM,digamma:fM,disin:dM,div:pM,divide:_M,divideontimes:gM,divonx:mM,DJcy:yM,djcy:vM,dlcorn:bM,dlcrop:wM,dollar:xM,Dopf:EM,dopf:AM,Dot:SM,dot:kM,DotDot:CM,doteq:TM,doteqdot:IM,DotEqual:RM,dotminus:DM,dotplus:OM,dotsquare:PM,doublebarwedge:MM,DoubleContourIntegral:LM,DoubleDot:$M,DoubleDownArrow:NM,DoubleLeftArrow:FM,DoubleLeftRightArrow:VM,DoubleLeftTee:qM,DoubleLongLeftArrow:BM,DoubleLongLeftRightArrow:UM,DoubleLongRightArrow:zM,DoubleRightArrow:HM,DoubleRightTee:GM,DoubleUpArrow:WM,DoubleUpDownArrow:jM,DoubleVerticalBar:KM,DownArrowBar:YM,downarrow:QM,DownArrow:ZM,Downarrow:XM,DownArrowUpArrow:JM,DownBreve:tL,downdownarrows:eL,downharpoonleft:nL,downharpoonright:rL,DownLeftRightVector:iL,DownLeftTeeVector:sL,DownLeftVectorBar:oL,DownLeftVector:aL,DownRightTeeVector:lL,DownRightVectorBar:cL,DownRightVector:uL,DownTeeArrow:hL,DownTee:fL,drbkarow:dL,drcorn:pL,drcrop:_L,Dscr:gL,dscr:mL,DScy:yL,dscy:vL,dsol:bL,Dstrok:wL,dstrok:xL,dtdot:EL,dtri:AL,dtrif:SL,duarr:kL,duhar:CL,dwangle:TL,DZcy:IL,dzcy:RL,dzigrarr:DL,Eacute:OL,eacute:PL,easter:ML,Ecaron:LL,ecaron:$L,Ecirc:NL,ecirc:FL,ecir:VL,ecolon:qL,Ecy:BL,ecy:UL,eDDot:zL,Edot:HL,edot:GL,eDot:WL,ee:jL,efDot:KL,Efr:YL,efr:QL,eg:ZL,Egrave:XL,egrave:JL,egs:t3,egsdot:e3,el:n3,Element:r3,elinters:i3,ell:s3,els:o3,elsdot:a3,Emacr:l3,emacr:c3,empty:u3,emptyset:h3,EmptySmallSquare:f3,emptyv:d3,EmptyVerySmallSquare:p3,emsp13:_3,emsp14:g3,emsp:m3,ENG:y3,eng:v3,ensp:b3,Eogon:w3,eogon:x3,Eopf:E3,eopf:A3,epar:S3,eparsl:k3,eplus:C3,epsi:T3,Epsilon:I3,epsilon:R3,epsiv:D3,eqcirc:O3,eqcolon:P3,eqsim:M3,eqslantgtr:L3,eqslantless:$3,Equal:N3,equals:F3,EqualTilde:V3,equest:q3,Equilibrium:B3,equiv:U3,equivDD:z3,eqvparsl:H3,erarr:G3,erDot:W3,escr:j3,Escr:K3,esdot:Y3,Esim:Q3,esim:Z3,Eta:X3,eta:J3,ETH:t$,eth:e$,Euml:n$,euml:r$,euro:i$,excl:s$,exist:o$,Exists:a$,expectation:l$,exponentiale:c$,ExponentialE:u$,fallingdotseq:h$,Fcy:f$,fcy:d$,female:p$,ffilig:_$,fflig:g$,ffllig:m$,Ffr:y$,ffr:v$,filig:b$,FilledSmallSquare:w$,FilledVerySmallSquare:x$,fjlig:E$,flat:A$,fllig:S$,fltns:k$,fnof:C$,Fopf:T$,fopf:I$,forall:R$,ForAll:D$,fork:O$,forkv:P$,Fouriertrf:M$,fpartint:L$,frac12:$$,frac13:N$,frac14:F$,frac15:V$,frac16:q$,frac18:B$,frac23:U$,frac25:z$,frac34:H$,frac35:G$,frac38:W$,frac45:j$,frac56:K$,frac58:Y$,frac78:Q$,frasl:Z$,frown:X$,fscr:J$,Fscr:tN,gacute:eN,Gamma:nN,gamma:rN,Gammad:iN,gammad:sN,gap:oN,Gbreve:aN,gbreve:lN,Gcedil:cN,Gcirc:uN,gcirc:hN,Gcy:fN,gcy:dN,Gdot:pN,gdot:_N,ge:gN,gE:mN,gEl:yN,gel:vN,geq:bN,geqq:wN,geqslant:xN,gescc:EN,ges:AN,gesdot:SN,gesdoto:kN,gesdotol:CN,gesl:TN,gesles:IN,Gfr:RN,gfr:DN,gg:ON,Gg:PN,ggg:MN,gimel:LN,GJcy:$N,gjcy:NN,gla:FN,gl:VN,glE:qN,glj:BN,gnap:UN,gnapprox:zN,gne:HN,gnE:GN,gneq:WN,gneqq:jN,gnsim:KN,Gopf:YN,gopf:QN,grave:ZN,GreaterEqual:XN,GreaterEqualLess:JN,GreaterFullEqual:tF,GreaterGreater:eF,GreaterLess:nF,GreaterSlantEqual:rF,GreaterTilde:iF,Gscr:sF,gscr:oF,gsim:aF,gsime:lF,gsiml:cF,gtcc:uF,gtcir:hF,gt:fF,GT:dF,Gt:pF,gtdot:_F,gtlPar:gF,gtquest:mF,gtrapprox:yF,gtrarr:vF,gtrdot:bF,gtreqless:wF,gtreqqless:xF,gtrless:EF,gtrsim:AF,gvertneqq:SF,gvnE:kF,Hacek:CF,hairsp:TF,half:IF,hamilt:RF,HARDcy:DF,hardcy:OF,harrcir:PF,harr:MF,hArr:LF,harrw:$F,Hat:NF,hbar:FF,Hcirc:VF,hcirc:qF,hearts:BF,heartsuit:UF,hellip:zF,hercon:HF,hfr:GF,Hfr:WF,HilbertSpace:jF,hksearow:KF,hkswarow:YF,hoarr:QF,homtht:ZF,hookleftarrow:XF,hookrightarrow:JF,hopf:t4,Hopf:e4,horbar:n4,HorizontalLine:r4,hscr:i4,Hscr:s4,hslash:o4,Hstrok:a4,hstrok:l4,HumpDownHump:c4,HumpEqual:u4,hybull:h4,hyphen:f4,Iacute:d4,iacute:p4,ic:_4,Icirc:g4,icirc:m4,Icy:y4,icy:v4,Idot:b4,IEcy:w4,iecy:x4,iexcl:E4,iff:A4,ifr:S4,Ifr:k4,Igrave:C4,igrave:T4,ii:I4,iiiint:R4,iiint:D4,iinfin:O4,iiota:P4,IJlig:M4,ijlig:L4,Imacr:$4,imacr:N4,image:F4,ImaginaryI:V4,imagline:q4,imagpart:B4,imath:U4,Im:z4,imof:H4,imped:G4,Implies:W4,incare:j4,in:"∈",infin:K4,infintie:Y4,inodot:Q4,intcal:Z4,int:X4,Int:J4,integers:tV,Integral:eV,intercal:nV,Intersection:rV,intlarhk:iV,intprod:sV,InvisibleComma:oV,InvisibleTimes:aV,IOcy:lV,iocy:cV,Iogon:uV,iogon:hV,Iopf:fV,iopf:dV,Iota:pV,iota:_V,iprod:gV,iquest:mV,iscr:yV,Iscr:vV,isin:bV,isindot:wV,isinE:xV,isins:EV,isinsv:AV,isinv:SV,it:kV,Itilde:CV,itilde:TV,Iukcy:IV,iukcy:RV,Iuml:DV,iuml:OV,Jcirc:PV,jcirc:MV,Jcy:LV,jcy:$V,Jfr:NV,jfr:FV,jmath:VV,Jopf:qV,jopf:BV,Jscr:UV,jscr:zV,Jsercy:HV,jsercy:GV,Jukcy:WV,jukcy:jV,Kappa:KV,kappa:YV,kappav:QV,Kcedil:ZV,kcedil:XV,Kcy:JV,kcy:t9,Kfr:e9,kfr:n9,kgreen:r9,KHcy:i9,khcy:s9,KJcy:o9,kjcy:a9,Kopf:l9,kopf:c9,Kscr:u9,kscr:h9,lAarr:f9,Lacute:d9,lacute:p9,laemptyv:_9,lagran:g9,Lambda:m9,lambda:y9,lang:v9,Lang:b9,langd:w9,langle:x9,lap:E9,Laplacetrf:A9,laquo:S9,larrb:k9,larrbfs:C9,larr:T9,Larr:I9,lArr:R9,larrfs:D9,larrhk:O9,larrlp:P9,larrpl:M9,larrsim:L9,larrtl:$9,latail:N9,lAtail:F9,lat:V9,late:q9,lates:B9,lbarr:U9,lBarr:z9,lbbrk:H9,lbrace:G9,lbrack:W9,lbrke:j9,lbrksld:K9,lbrkslu:Y9,Lcaron:Q9,lcaron:Z9,Lcedil:X9,lcedil:J9,lceil:t5,lcub:e5,Lcy:n5,lcy:r5,ldca:i5,ldquo:s5,ldquor:o5,ldrdhar:a5,ldrushar:l5,ldsh:c5,le:u5,lE:h5,LeftAngleBracket:f5,LeftArrowBar:d5,leftarrow:p5,LeftArrow:_5,Leftarrow:g5,LeftArrowRightArrow:m5,leftarrowtail:y5,LeftCeiling:v5,LeftDoubleBracket:b5,LeftDownTeeVector:w5,LeftDownVectorBar:x5,LeftDownVector:E5,LeftFloor:A5,leftharpoondown:S5,leftharpoonup:k5,leftleftarrows:C5,leftrightarrow:T5,LeftRightArrow:I5,Leftrightarrow:R5,leftrightarrows:D5,leftrightharpoons:O5,leftrightsquigarrow:P5,LeftRightVector:M5,LeftTeeArrow:L5,LeftTee:$5,LeftTeeVector:N5,leftthreetimes:F5,LeftTriangleBar:V5,LeftTriangle:q5,LeftTriangleEqual:B5,LeftUpDownVector:U5,LeftUpTeeVector:z5,LeftUpVectorBar:H5,LeftUpVector:G5,LeftVectorBar:W5,LeftVector:j5,lEg:K5,leg:Y5,leq:Q5,leqq:Z5,leqslant:X5,lescc:J5,les:t6,lesdot:e6,lesdoto:n6,lesdotor:r6,lesg:i6,lesges:s6,lessapprox:o6,lessdot:a6,lesseqgtr:l6,lesseqqgtr:c6,LessEqualGreater:u6,LessFullEqual:h6,LessGreater:f6,lessgtr:d6,LessLess:p6,lesssim:_6,LessSlantEqual:g6,LessTilde:m6,lfisht:y6,lfloor:v6,Lfr:b6,lfr:w6,lg:x6,lgE:E6,lHar:A6,lhard:S6,lharu:k6,lharul:C6,lhblk:T6,LJcy:I6,ljcy:R6,llarr:D6,ll:O6,Ll:P6,llcorner:M6,Lleftarrow:L6,llhard:$6,lltri:N6,Lmidot:F6,lmidot:V6,lmoustache:q6,lmoust:B6,lnap:U6,lnapprox:z6,lne:H6,lnE:G6,lneq:W6,lneqq:j6,lnsim:K6,loang:Y6,loarr:Q6,lobrk:Z6,longleftarrow:X6,LongLeftArrow:J6,Longleftarrow:tq,longleftrightarrow:eq,LongLeftRightArrow:nq,Longleftrightarrow:rq,longmapsto:iq,longrightarrow:sq,LongRightArrow:oq,Longrightarrow:aq,looparrowleft:lq,looparrowright:cq,lopar:uq,Lopf:hq,lopf:fq,loplus:dq,lotimes:pq,lowast:_q,lowbar:gq,LowerLeftArrow:mq,LowerRightArrow:yq,loz:vq,lozenge:bq,lozf:wq,lpar:xq,lparlt:Eq,lrarr:Aq,lrcorner:Sq,lrhar:kq,lrhard:Cq,lrm:Tq,lrtri:Iq,lsaquo:Rq,lscr:Dq,Lscr:Oq,lsh:Pq,Lsh:Mq,lsim:Lq,lsime:$q,lsimg:Nq,lsqb:Fq,lsquo:Vq,lsquor:qq,Lstrok:Bq,lstrok:Uq,ltcc:zq,ltcir:Hq,lt:Gq,LT:Wq,Lt:jq,ltdot:Kq,lthree:Yq,ltimes:Qq,ltlarr:Zq,ltquest:Xq,ltri:Jq,ltrie:tB,ltrif:eB,ltrPar:nB,lurdshar:rB,luruhar:iB,lvertneqq:sB,lvnE:oB,macr:aB,male:lB,malt:cB,maltese:uB,Map:"⤅",map:hB,mapsto:fB,mapstodown:dB,mapstoleft:pB,mapstoup:_B,marker:gB,mcomma:mB,Mcy:yB,mcy:vB,mdash:bB,mDDot:wB,measuredangle:xB,MediumSpace:EB,Mellintrf:AB,Mfr:SB,mfr:kB,mho:CB,micro:TB,midast:IB,midcir:RB,mid:DB,middot:OB,minusb:PB,minus:MB,minusd:LB,minusdu:$B,MinusPlus:NB,mlcp:FB,mldr:VB,mnplus:qB,models:BB,Mopf:UB,mopf:zB,mp:HB,mscr:GB,Mscr:WB,mstpos:jB,Mu:KB,mu:YB,multimap:QB,mumap:ZB,nabla:XB,Nacute:JB,nacute:t8,nang:e8,nap:n8,napE:r8,napid:i8,napos:s8,napprox:o8,natural:a8,naturals:l8,natur:c8,nbsp:u8,nbump:h8,nbumpe:f8,ncap:d8,Ncaron:p8,ncaron:_8,Ncedil:g8,ncedil:m8,ncong:y8,ncongdot:v8,ncup:b8,Ncy:w8,ncy:x8,ndash:E8,nearhk:A8,nearr:S8,neArr:k8,nearrow:C8,ne:T8,nedot:I8,NegativeMediumSpace:R8,NegativeThickSpace:D8,NegativeThinSpace:O8,NegativeVeryThinSpace:P8,nequiv:M8,nesear:L8,nesim:$8,NestedGreaterGreater:N8,NestedLessLess:F8,NewLine:V8,nexist:q8,nexists:B8,Nfr:U8,nfr:z8,ngE:H8,nge:G8,ngeq:W8,ngeqq:j8,ngeqslant:K8,nges:Y8,nGg:Q8,ngsim:Z8,nGt:X8,ngt:J8,ngtr:tU,nGtv:eU,nharr:nU,nhArr:rU,nhpar:iU,ni:sU,nis:oU,nisd:aU,niv:lU,NJcy:cU,njcy:uU,nlarr:hU,nlArr:fU,nldr:dU,nlE:pU,nle:_U,nleftarrow:gU,nLeftarrow:mU,nleftrightarrow:yU,nLeftrightarrow:vU,nleq:bU,nleqq:wU,nleqslant:xU,nles:EU,nless:AU,nLl:SU,nlsim:kU,nLt:CU,nlt:TU,nltri:IU,nltrie:RU,nLtv:DU,nmid:OU,NoBreak:PU,NonBreakingSpace:MU,nopf:LU,Nopf:$U,Not:NU,not:FU,NotCongruent:VU,NotCupCap:qU,NotDoubleVerticalBar:BU,NotElement:UU,NotEqual:zU,NotEqualTilde:HU,NotExists:GU,NotGreater:WU,NotGreaterEqual:jU,NotGreaterFullEqual:KU,NotGreaterGreater:YU,NotGreaterLess:QU,NotGreaterSlantEqual:ZU,NotGreaterTilde:XU,NotHumpDownHump:JU,NotHumpEqual:t7,notin:e7,notindot:n7,notinE:r7,notinva:i7,notinvb:s7,notinvc:o7,NotLeftTriangleBar:a7,NotLeftTriangle:l7,NotLeftTriangleEqual:c7,NotLess:u7,NotLessEqual:h7,NotLessGreater:f7,NotLessLess:d7,NotLessSlantEqual:p7,NotLessTilde:_7,NotNestedGreaterGreater:g7,NotNestedLessLess:m7,notni:y7,notniva:v7,notnivb:b7,notnivc:w7,NotPrecedes:x7,NotPrecedesEqual:E7,NotPrecedesSlantEqual:A7,NotReverseElement:S7,NotRightTriangleBar:k7,NotRightTriangle:C7,NotRightTriangleEqual:T7,NotSquareSubset:I7,NotSquareSubsetEqual:R7,NotSquareSuperset:D7,NotSquareSupersetEqual:O7,NotSubset:P7,NotSubsetEqual:M7,NotSucceeds:L7,NotSucceedsEqual:$7,NotSucceedsSlantEqual:N7,NotSucceedsTilde:F7,NotSuperset:V7,NotSupersetEqual:q7,NotTilde:B7,NotTildeEqual:U7,NotTildeFullEqual:z7,NotTildeTilde:H7,NotVerticalBar:G7,nparallel:W7,npar:j7,nparsl:K7,npart:Y7,npolint:Q7,npr:Z7,nprcue:X7,nprec:J7,npreceq:tz,npre:ez,nrarrc:nz,nrarr:rz,nrArr:iz,nrarrw:sz,nrightarrow:oz,nRightarrow:az,nrtri:lz,nrtrie:cz,nsc:uz,nsccue:hz,nsce:fz,Nscr:dz,nscr:pz,nshortmid:_z,nshortparallel:gz,nsim:mz,nsime:yz,nsimeq:vz,nsmid:bz,nspar:wz,nsqsube:xz,nsqsupe:Ez,nsub:Az,nsubE:Sz,nsube:kz,nsubset:Cz,nsubseteq:Tz,nsubseteqq:Iz,nsucc:Rz,nsucceq:Dz,nsup:Oz,nsupE:Pz,nsupe:Mz,nsupset:Lz,nsupseteq:$z,nsupseteqq:Nz,ntgl:Fz,Ntilde:Vz,ntilde:qz,ntlg:Bz,ntriangleleft:Uz,ntrianglelefteq:zz,ntriangleright:Hz,ntrianglerighteq:Gz,Nu:Wz,nu:jz,num:Kz,numero:Yz,numsp:Qz,nvap:Zz,nvdash:Xz,nvDash:Jz,nVdash:tH,nVDash:eH,nvge:nH,nvgt:rH,nvHarr:iH,nvinfin:sH,nvlArr:oH,nvle:aH,nvlt:lH,nvltrie:cH,nvrArr:uH,nvrtrie:hH,nvsim:fH,nwarhk:dH,nwarr:pH,nwArr:_H,nwarrow:gH,nwnear:mH,Oacute:yH,oacute:vH,oast:bH,Ocirc:wH,ocirc:xH,ocir:EH,Ocy:AH,ocy:SH,odash:kH,Odblac:CH,odblac:TH,odiv:IH,odot:RH,odsold:DH,OElig:OH,oelig:PH,ofcir:MH,Ofr:LH,ofr:$H,ogon:NH,Ograve:FH,ograve:VH,ogt:qH,ohbar:BH,ohm:UH,oint:zH,olarr:HH,olcir:GH,olcross:WH,oline:jH,olt:KH,Omacr:YH,omacr:QH,Omega:ZH,omega:XH,Omicron:JH,omicron:tG,omid:eG,ominus:nG,Oopf:rG,oopf:iG,opar:sG,OpenCurlyDoubleQuote:oG,OpenCurlyQuote:aG,operp:lG,oplus:cG,orarr:uG,Or:hG,or:fG,ord:dG,order:pG,orderof:_G,ordf:gG,ordm:mG,origof:yG,oror:vG,orslope:bG,orv:wG,oS:xG,Oscr:EG,oscr:AG,Oslash:SG,oslash:kG,osol:CG,Otilde:TG,otilde:IG,otimesas:RG,Otimes:DG,otimes:OG,Ouml:PG,ouml:MG,ovbar:LG,OverBar:$G,OverBrace:NG,OverBracket:FG,OverParenthesis:VG,para:qG,parallel:BG,par:UG,parsim:zG,parsl:HG,part:GG,PartialD:WG,Pcy:jG,pcy:KG,percnt:YG,period:QG,permil:ZG,perp:XG,pertenk:JG,Pfr:tW,pfr:eW,Phi:nW,phi:rW,phiv:iW,phmmat:sW,phone:oW,Pi:aW,pi:lW,pitchfork:cW,piv:uW,planck:hW,planckh:fW,plankv:dW,plusacir:pW,plusb:_W,pluscir:gW,plus:mW,plusdo:yW,plusdu:vW,pluse:bW,PlusMinus:wW,plusmn:xW,plussim:EW,plustwo:AW,pm:SW,Poincareplane:kW,pointint:CW,popf:TW,Popf:IW,pound:RW,prap:DW,Pr:OW,pr:PW,prcue:MW,precapprox:LW,prec:$W,preccurlyeq:NW,Precedes:FW,PrecedesEqual:VW,PrecedesSlantEqual:qW,PrecedesTilde:BW,preceq:UW,precnapprox:zW,precneqq:HW,precnsim:GW,pre:WW,prE:jW,precsim:KW,prime:YW,Prime:QW,primes:ZW,prnap:XW,prnE:JW,prnsim:tj,prod:ej,Product:nj,profalar:rj,profline:ij,profsurf:sj,prop:oj,Proportional:aj,Proportion:lj,propto:cj,prsim:uj,prurel:hj,Pscr:fj,pscr:dj,Psi:pj,psi:_j,puncsp:gj,Qfr:mj,qfr:yj,qint:vj,qopf:bj,Qopf:wj,qprime:xj,Qscr:Ej,qscr:Aj,quaternions:Sj,quatint:kj,quest:Cj,questeq:Tj,quot:Ij,QUOT:Rj,rAarr:Dj,race:Oj,Racute:Pj,racute:Mj,radic:Lj,raemptyv:$j,rang:Nj,Rang:Fj,rangd:Vj,range:qj,rangle:Bj,raquo:Uj,rarrap:zj,rarrb:Hj,rarrbfs:Gj,rarrc:Wj,rarr:jj,Rarr:Kj,rArr:Yj,rarrfs:Qj,rarrhk:Zj,rarrlp:Xj,rarrpl:Jj,rarrsim:tK,Rarrtl:eK,rarrtl:nK,rarrw:rK,ratail:iK,rAtail:sK,ratio:oK,rationals:aK,rbarr:lK,rBarr:cK,RBarr:uK,rbbrk:hK,rbrace:fK,rbrack:dK,rbrke:pK,rbrksld:_K,rbrkslu:gK,Rcaron:mK,rcaron:yK,Rcedil:vK,rcedil:bK,rceil:wK,rcub:xK,Rcy:EK,rcy:AK,rdca:SK,rdldhar:kK,rdquo:CK,rdquor:TK,rdsh:IK,real:RK,realine:DK,realpart:OK,reals:PK,Re:MK,rect:LK,reg:$K,REG:NK,ReverseElement:FK,ReverseEquilibrium:VK,ReverseUpEquilibrium:qK,rfisht:BK,rfloor:UK,rfr:zK,Rfr:HK,rHar:GK,rhard:WK,rharu:jK,rharul:KK,Rho:YK,rho:QK,rhov:ZK,RightAngleBracket:XK,RightArrowBar:JK,rightarrow:tY,RightArrow:eY,Rightarrow:nY,RightArrowLeftArrow:rY,rightarrowtail:iY,RightCeiling:sY,RightDoubleBracket:oY,RightDownTeeVector:aY,RightDownVectorBar:lY,RightDownVector:cY,RightFloor:uY,rightharpoondown:hY,rightharpoonup:fY,rightleftarrows:dY,rightleftharpoons:pY,rightrightarrows:_Y,rightsquigarrow:gY,RightTeeArrow:mY,RightTee:yY,RightTeeVector:vY,rightthreetimes:bY,RightTriangleBar:wY,RightTriangle:xY,RightTriangleEqual:EY,RightUpDownVector:AY,RightUpTeeVector:SY,RightUpVectorBar:kY,RightUpVector:CY,RightVectorBar:TY,RightVector:IY,ring:RY,risingdotseq:DY,rlarr:OY,rlhar:PY,rlm:MY,rmoustache:LY,rmoust:$Y,rnmid:NY,roang:FY,roarr:VY,robrk:qY,ropar:BY,ropf:UY,Ropf:zY,roplus:HY,rotimes:GY,RoundImplies:WY,rpar:jY,rpargt:KY,rppolint:YY,rrarr:QY,Rrightarrow:ZY,rsaquo:XY,rscr:JY,Rscr:tQ,rsh:eQ,Rsh:nQ,rsqb:rQ,rsquo:iQ,rsquor:sQ,rthree:oQ,rtimes:aQ,rtri:lQ,rtrie:cQ,rtrif:uQ,rtriltri:hQ,RuleDelayed:fQ,ruluhar:dQ,rx:pQ,Sacute:_Q,sacute:gQ,sbquo:mQ,scap:yQ,Scaron:vQ,scaron:bQ,Sc:wQ,sc:xQ,sccue:EQ,sce:AQ,scE:SQ,Scedil:kQ,scedil:CQ,Scirc:TQ,scirc:IQ,scnap:RQ,scnE:DQ,scnsim:OQ,scpolint:PQ,scsim:MQ,Scy:LQ,scy:$Q,sdotb:NQ,sdot:FQ,sdote:VQ,searhk:qQ,searr:BQ,seArr:UQ,searrow:zQ,sect:HQ,semi:GQ,seswar:WQ,setminus:jQ,setmn:KQ,sext:YQ,Sfr:QQ,sfr:ZQ,sfrown:XQ,sharp:JQ,SHCHcy:tZ,shchcy:eZ,SHcy:nZ,shcy:rZ,ShortDownArrow:iZ,ShortLeftArrow:sZ,shortmid:oZ,shortparallel:aZ,ShortRightArrow:lZ,ShortUpArrow:cZ,shy:uZ,Sigma:hZ,sigma:fZ,sigmaf:dZ,sigmav:pZ,sim:_Z,simdot:gZ,sime:mZ,simeq:yZ,simg:vZ,simgE:bZ,siml:wZ,simlE:xZ,simne:EZ,simplus:AZ,simrarr:SZ,slarr:kZ,SmallCircle:CZ,smallsetminus:TZ,smashp:IZ,smeparsl:RZ,smid:DZ,smile:OZ,smt:PZ,smte:MZ,smtes:LZ,SOFTcy:$Z,softcy:NZ,solbar:FZ,solb:VZ,sol:qZ,Sopf:BZ,sopf:UZ,spades:zZ,spadesuit:HZ,spar:GZ,sqcap:WZ,sqcaps:jZ,sqcup:KZ,sqcups:YZ,Sqrt:QZ,sqsub:ZZ,sqsube:XZ,sqsubset:JZ,sqsubseteq:tX,sqsup:eX,sqsupe:nX,sqsupset:rX,sqsupseteq:iX,square:sX,Square:oX,SquareIntersection:aX,SquareSubset:lX,SquareSubsetEqual:cX,SquareSuperset:uX,SquareSupersetEqual:hX,SquareUnion:fX,squarf:dX,squ:pX,squf:_X,srarr:gX,Sscr:mX,sscr:yX,ssetmn:vX,ssmile:bX,sstarf:wX,Star:xX,star:EX,starf:AX,straightepsilon:SX,straightphi:kX,strns:CX,sub:TX,Sub:IX,subdot:RX,subE:DX,sube:OX,subedot:PX,submult:MX,subnE:LX,subne:$X,subplus:NX,subrarr:FX,subset:VX,Subset:qX,subseteq:BX,subseteqq:UX,SubsetEqual:zX,subsetneq:HX,subsetneqq:GX,subsim:WX,subsub:jX,subsup:KX,succapprox:YX,succ:QX,succcurlyeq:ZX,Succeeds:XX,SucceedsEqual:JX,SucceedsSlantEqual:tJ,SucceedsTilde:eJ,succeq:nJ,succnapprox:rJ,succneqq:iJ,succnsim:sJ,succsim:oJ,SuchThat:aJ,sum:lJ,Sum:cJ,sung:uJ,sup1:hJ,sup2:fJ,sup3:dJ,sup:pJ,Sup:_J,supdot:gJ,supdsub:mJ,supE:yJ,supe:vJ,supedot:bJ,Superset:wJ,SupersetEqual:xJ,suphsol:EJ,suphsub:AJ,suplarr:SJ,supmult:kJ,supnE:CJ,supne:TJ,supplus:IJ,supset:RJ,Supset:DJ,supseteq:OJ,supseteqq:PJ,supsetneq:MJ,supsetneqq:LJ,supsim:$J,supsub:NJ,supsup:FJ,swarhk:VJ,swarr:qJ,swArr:BJ,swarrow:UJ,swnwar:zJ,szlig:HJ,Tab:GJ,target:WJ,Tau:jJ,tau:KJ,tbrk:YJ,Tcaron:QJ,tcaron:ZJ,Tcedil:XJ,tcedil:JJ,Tcy:ttt,tcy:ett,tdot:ntt,telrec:rtt,Tfr:itt,tfr:stt,there4:ott,therefore:att,Therefore:ltt,Theta:ctt,theta:utt,thetasym:htt,thetav:ftt,thickapprox:dtt,thicksim:ptt,ThickSpace:_tt,ThinSpace:gtt,thinsp:mtt,thkap:ytt,thksim:vtt,THORN:btt,thorn:wtt,tilde:xtt,Tilde:Ett,TildeEqual:Att,TildeFullEqual:Stt,TildeTilde:ktt,timesbar:Ctt,timesb:Ttt,times:Itt,timesd:Rtt,tint:Dtt,toea:Ott,topbot:Ptt,topcir:Mtt,top:Ltt,Topf:$tt,topf:Ntt,topfork:Ftt,tosa:Vtt,tprime:qtt,trade:Btt,TRADE:Utt,triangle:ztt,triangledown:Htt,triangleleft:Gtt,trianglelefteq:Wtt,triangleq:jtt,triangleright:Ktt,trianglerighteq:Ytt,tridot:Qtt,trie:Ztt,triminus:Xtt,TripleDot:Jtt,triplus:tet,trisb:eet,tritime:net,trpezium:ret,Tscr:iet,tscr:set,TScy:oet,tscy:aet,TSHcy:cet,tshcy:uet,Tstrok:het,tstrok:fet,twixt:det,twoheadleftarrow:pet,twoheadrightarrow:_et,Uacute:get,uacute:met,uarr:yet,Uarr:vet,uArr:bet,Uarrocir:wet,Ubrcy:xet,ubrcy:Eet,Ubreve:Aet,ubreve:ket,Ucirc:Cet,ucirc:Tet,Ucy:Iet,ucy:Ret,udarr:Det,Udblac:Oet,udblac:Pet,udhar:Met,ufisht:Let,Ufr:$et,ufr:Net,Ugrave:Fet,ugrave:Vet,uHar:qet,uharl:Bet,uharr:Uet,uhblk:zet,ulcorn:Het,ulcorner:Get,ulcrop:Wet,ultri:jet,Umacr:Ket,umacr:Yet,uml:Qet,UnderBar:Zet,UnderBrace:Xet,UnderBracket:Jet,UnderParenthesis:tnt,Union:ent,UnionPlus:nnt,Uogon:rnt,uogon:int,Uopf:snt,uopf:ont,UpArrowBar:ant,uparrow:lnt,UpArrow:cnt,Uparrow:unt,UpArrowDownArrow:hnt,updownarrow:fnt,UpDownArrow:dnt,Updownarrow:pnt,UpEquilibrium:_nt,upharpoonleft:gnt,upharpoonright:mnt,uplus:ynt,UpperLeftArrow:vnt,UpperRightArrow:bnt,upsi:wnt,Upsi:xnt,upsih:Ent,Upsilon:Ant,upsilon:Snt,UpTeeArrow:knt,UpTee:Cnt,upuparrows:Tnt,urcorn:Int,urcorner:Rnt,urcrop:Dnt,Uring:Ont,uring:Pnt,urtri:Mnt,Uscr:Lnt,uscr:$nt,utdot:Nnt,Utilde:Fnt,utilde:Vnt,utri:qnt,utrif:Bnt,uuarr:Unt,Uuml:znt,uuml:Hnt,uwangle:Gnt,vangrt:Wnt,varepsilon:jnt,varkappa:Knt,varnothing:Ynt,varphi:Qnt,varpi:Znt,varpropto:Xnt,varr:Jnt,vArr:trt,varrho:ert,varsigma:nrt,varsubsetneq:rrt,varsubsetneqq:irt,varsupsetneq:srt,varsupsetneqq:ort,vartheta:art,vartriangleleft:lrt,vartriangleright:crt,vBar:urt,Vbar:hrt,vBarv:frt,Vcy:drt,vcy:prt,vdash:_rt,vDash:grt,Vdash:mrt,VDash:yrt,Vdashl:vrt,veebar:brt,vee:wrt,Vee:xrt,veeeq:Ert,vellip:Art,verbar:Srt,Verbar:krt,vert:Crt,Vert:Trt,VerticalBar:Irt,VerticalLine:Rrt,VerticalSeparator:Drt,VerticalTilde:Ort,VeryThinSpace:Prt,Vfr:Mrt,vfr:Lrt,vltri:$rt,vnsub:Nrt,vnsup:Frt,Vopf:Vrt,vopf:qrt,vprop:Brt,vrtri:Urt,Vscr:zrt,vscr:Hrt,vsubnE:Grt,vsubne:Wrt,vsupnE:jrt,vsupne:Krt,Vvdash:Yrt,vzigzag:Qrt,Wcirc:Zrt,wcirc:Xrt,wedbar:Jrt,wedge:tit,Wedge:eit,wedgeq:nit,weierp:rit,Wfr:iit,wfr:sit,Wopf:oit,wopf:ait,wp:lit,wr:cit,wreath:uit,Wscr:hit,wscr:fit,xcap:dit,xcirc:pit,xcup:_it,xdtri:git,Xfr:mit,xfr:yit,xharr:vit,xhArr:bit,Xi:wit,xi:xit,xlarr:Eit,xlArr:Ait,xmap:Sit,xnis:kit,xodot:Cit,Xopf:Tit,xopf:Iit,xoplus:Rit,xotime:Dit,xrarr:Oit,xrArr:Pit,Xscr:Mit,xscr:Lit,xsqcup:$it,xuplus:Nit,xutri:Fit,xvee:Vit,xwedge:qit,Yacute:Bit,yacute:Uit,YAcy:zit,yacy:Hit,Ycirc:Git,ycirc:Wit,Ycy:jit,ycy:Kit,yen:Yit,Yfr:Qit,yfr:Zit,YIcy:Xit,yicy:Jit,Yopf:tst,yopf:est,Yscr:nst,yscr:rst,YUcy:ist,yucy:sst,yuml:ost,Yuml:ast,Zacute:lst,zacute:cst,Zcaron:ust,zcaron:hst,Zcy:fst,zcy:dst,Zdot:pst,zdot:_st,zeetrf:gst,ZeroWidthSpace:mst,Zeta:yst,zeta:vst,zfr:bst,Zfr:wst,ZHcy:xst,zhcy:Est,zigrarr:Ast,zopf:Sst,Zopf:kst,Zscr:Cst,zscr:Tst,zwj:Ist,zwnj:Rst};var zm=Dst,Of=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,xo={},j_={};function Ost(e){var t,n,r=j_[e];if(r)return r;for(r=j_[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)r[e.charCodeAt(t)]=e[t];return r}function Rc(e,t,n){var r,i,o,l,c,f="";for(typeof t!="string"&&(n=t,t=Rc.defaultChars),typeof n>"u"&&(n=!0),c=Ost(t),r=0,i=e.length;r<i;r++){if(o=e.charCodeAt(r),n&&o===37&&r+2<i&&/^[0-9a-f]{2}$/i.test(e.slice(r+1,r+3))){f+=e.slice(r,r+3),r+=2;continue}if(o<128){f+=c[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&r+1<i&&(l=e.charCodeAt(r+1),l>=56320&&l<=57343)){f+=encodeURIComponent(e[r]+e[r+1]),r++;continue}f+="%EF%BF%BD";continue}f+=encodeURIComponent(e[r])}return f}Rc.defaultChars=";/?:@&=+$,-_.!~*'()#";Rc.componentChars="-_.!~*'()";var Pst=Rc,K_={};function Mst(e){var t,n,r=K_[e];if(r)return r;for(r=K_[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),r.push(n);for(t=0;t<e.length;t++)n=e.charCodeAt(t),r[n]="%"+("0"+n.toString(16).toUpperCase()).slice(-2);return r}function Dc(e,t){var n;return typeof t!="string"&&(t=Dc.defaultChars),n=Mst(t),e.replace(/(%[a-f0-9]{2})+/gi,function(r){var i,o,l,c,f,d,g,v="";for(i=0,o=r.length;i<o;i+=3){if(l=parseInt(r.slice(i+1,i+3),16),l<128){v+=n[l];continue}if((l&224)===192&&i+3<o&&(c=parseInt(r.slice(i+4,i+6),16),(c&192)===128)){g=l<<6&1984|c&63,g<128?v+="��":v+=String.fromCharCode(g),i+=3;continue}if((l&240)===224&&i+6<o&&(c=parseInt(r.slice(i+4,i+6),16),f=parseInt(r.slice(i+7,i+9),16),(c&192)===128&&(f&192)===128)){g=l<<12&61440|c<<6&4032|f&63,g<2048||g>=55296&&g<=57343?v+="���":v+=String.fromCharCode(g),i+=6;continue}if((l&248)===240&&i+9<o&&(c=parseInt(r.slice(i+4,i+6),16),f=parseInt(r.slice(i+7,i+9),16),d=parseInt(r.slice(i+10,i+12),16),(c&192)===128&&(f&192)===128&&(d&192)===128)){g=l<<18&1835008|c<<12&258048|f<<6&4032|d&63,g<65536||g>1114111?v+="����":(g-=65536,v+=String.fromCharCode(55296+(g>>10),56320+(g&1023))),i+=9;continue}v+="�"}return v})}Dc.defaultChars=";/?:@&=+$,#";Dc.componentChars="";var Lst=Dc,$st=function(t){var n="";return n+=t.protocol||"",n+=t.slashes?"//":"",n+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?n+="["+t.hostname+"]":n+=t.hostname||"",n+=t.port?":"+t.port:"",n+=t.pathname||"",n+=t.search||"",n+=t.hash||"",n};function nc(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var Nst=/^([a-z0-9.+-]+:)/i,Fst=/:[0-9]*$/,Vst=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,qst=["<",">",'"',"`"," ","\r",`
`,"	"],Bst=["{","}","|","\\","^","`"].concat(qst),Ust=["'"].concat(Bst),Y_=["%","/","?",";","#"].concat(Ust),Q_=["/","?","#"],zst=255,Z_=/^[+a-z0-9A-Z_-]{0,63}$/,Hst=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,X_={javascript:!0,"javascript:":!0},J_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Gst(e,t){if(e&&e instanceof nc)return e;var n=new nc;return n.parse(e,t),n}nc.prototype.parse=function(e,t){var n,r,i,o,l,c=e;if(c=c.trim(),!t&&e.split("#").length===1){var f=Vst.exec(c);if(f)return this.pathname=f[1],f[2]&&(this.search=f[2]),this}var d=Nst.exec(c);if(d&&(d=d[0],i=d.toLowerCase(),this.protocol=d,c=c.substr(d.length)),(t||d||c.match(/^\/\/[^@\/]+@[^@\/]+/))&&(l=c.substr(0,2)==="//",l&&!(d&&X_[d])&&(c=c.substr(2),this.slashes=!0)),!X_[d]&&(l||d&&!J_[d])){var g=-1;for(n=0;n<Q_.length;n++)o=c.indexOf(Q_[n]),o!==-1&&(g===-1||o<g)&&(g=o);var v,S;for(g===-1?S=c.lastIndexOf("@"):S=c.lastIndexOf("@",g),S!==-1&&(v=c.slice(0,S),c=c.slice(S+1),this.auth=v),g=-1,n=0;n<Y_.length;n++)o=c.indexOf(Y_[n]),o!==-1&&(g===-1||o<g)&&(g=o);g===-1&&(g=c.length),c[g-1]===":"&&g--;var E=c.slice(0,g);c=c.slice(g),this.parseHost(E),this.hostname=this.hostname||"";var q=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!q){var Q=this.hostname.split(/\./);for(n=0,r=Q.length;n<r;n++){var tt=Q[n];if(tt&&!tt.match(Z_)){for(var ut="",nt=0,gt=tt.length;nt<gt;nt++)tt.charCodeAt(nt)>127?ut+="x":ut+=tt[nt];if(!ut.match(Z_)){var Pt=Q.slice(0,n),Vt=Q.slice(n+1),pt=tt.match(Hst);pt&&(Pt.push(pt[1]),Vt.unshift(pt[2])),Vt.length&&(c=Vt.join(".")+c),this.hostname=Pt.join(".");break}}}}this.hostname.length>zst&&(this.hostname=""),q&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var Kt=c.indexOf("#");Kt!==-1&&(this.hash=c.substr(Kt),c=c.slice(0,Kt));var ye=c.indexOf("?");return ye!==-1&&(this.search=c.substr(ye),c=c.slice(0,ye)),c&&(this.pathname=c),J_[i]&&this.hostname&&!this.pathname&&(this.pathname=""),this};nc.prototype.parseHost=function(e){var t=Fst.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var Wst=Gst;xo.encode=Pst;xo.decode=Lst;xo.format=$st;xo.parse=Wst;var ds={},xh,tg;function Hm(){return tg||(tg=1,xh=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/),xh}var Eh,eg;function Gm(){return eg||(eg=1,Eh=/[\0-\x1F\x7F-\x9F]/),Eh}var Ah,ng;function jst(){return ng||(ng=1,Ah=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/),Ah}var Sh,rg;function Wm(){return rg||(rg=1,Sh=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/),Sh}var ig;function Kst(){return ig||(ig=1,ds.Any=Hm(),ds.Cc=Gm(),ds.Cf=jst(),ds.P=Of,ds.Z=Wm()),ds}(function(e){function t(bt){return Object.prototype.toString.call(bt)}function n(bt){return t(bt)==="[object String]"}var r=Object.prototype.hasOwnProperty;function i(bt,Te){return r.call(bt,Te)}function o(bt){var Te=Array.prototype.slice.call(arguments,1);return Te.forEach(function(re){if(re){if(typeof re!="object")throw new TypeError(re+"must be object");Object.keys(re).forEach(function(ln){bt[ln]=re[ln]})}}),bt}function l(bt,Te,re){return[].concat(bt.slice(0,Te),re,bt.slice(Te+1))}function c(bt){return!(bt>=55296&&bt<=57343||bt>=64976&&bt<=65007||(bt&65535)===65535||(bt&65535)===65534||bt>=0&&bt<=8||bt===11||bt>=14&&bt<=31||bt>=127&&bt<=159||bt>1114111)}function f(bt){if(bt>65535){bt-=65536;var Te=55296+(bt>>10),re=56320+(bt&1023);return String.fromCharCode(Te,re)}return String.fromCharCode(bt)}var d=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,g=/&([a-z#][a-z0-9]{1,31});/gi,v=new RegExp(d.source+"|"+g.source,"gi"),S=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,E=zm;function q(bt,Te){var re=0;return i(E,Te)?E[Te]:Te.charCodeAt(0)===35&&S.test(Te)&&(re=Te[1].toLowerCase()==="x"?parseInt(Te.slice(2),16):parseInt(Te.slice(1),10),c(re))?f(re):bt}function Q(bt){return bt.indexOf("\\")<0?bt:bt.replace(d,"$1")}function tt(bt){return bt.indexOf("\\")<0&&bt.indexOf("&")<0?bt:bt.replace(v,function(Te,re,ln){return re||q(Te,ln)})}var ut=/[&<>"]/,nt=/[&<>"]/g,gt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Pt(bt){return gt[bt]}function Vt(bt){return ut.test(bt)?bt.replace(nt,Pt):bt}var pt=/[.?*+^$[\]\\(){}|-]/g;function Kt(bt){return bt.replace(pt,"\\$&")}function ye(bt){switch(bt){case 9:case 32:return!0}return!1}function He(bt){if(bt>=8192&&bt<=8202)return!0;switch(bt){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var oe=Of;function Pe(bt){return oe.test(bt)}function _r(bt){switch(bt){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function gr(bt){return bt=bt.trim().replace(/\s+/g," "),"ẞ".toLowerCase()==="Ṿ"&&(bt=bt.replace(/ẞ/g,"ß")),bt.toLowerCase().toUpperCase()}e.lib={},e.lib.mdurl=xo,e.lib.ucmicro=Kst(),e.assign=o,e.isString=n,e.has=i,e.unescapeMd=Q,e.unescapeAll=tt,e.isValidEntityCode=c,e.fromCodePoint=f,e.escapeHtml=Vt,e.arrayReplaceAt=l,e.isSpace=ye,e.isWhiteSpace=He,e.isMdAsciiPunct=_r,e.isPunctChar=Pe,e.escapeRE=Kt,e.normalizeReference=gr})(be);var Oc={},Yst=function(t,n,r){var i,o,l,c,f=-1,d=t.posMax,g=t.pos;for(t.pos=n+1,i=1;t.pos<d;){if(l=t.src.charCodeAt(t.pos),l===93&&(i--,i===0)){o=!0;break}if(c=t.pos,t.md.inline.skipToken(t),l===91){if(c===t.pos-1)i++;else if(r)return t.pos=g,-1}}return o&&(f=t.pos),t.pos=g,f},sg=be.unescapeAll,Qst=function(t,n,r){var i,o,l=0,c=n,f={ok:!1,pos:0,lines:0,str:""};if(t.charCodeAt(n)===60){for(n++;n<r;){if(i=t.charCodeAt(n),i===10||i===60)return f;if(i===62)return f.pos=n+1,f.str=sg(t.slice(c+1,n)),f.ok=!0,f;if(i===92&&n+1<r){n+=2;continue}n++}return f}for(o=0;n<r&&(i=t.charCodeAt(n),!(i===32||i<32||i===127));){if(i===92&&n+1<r){if(t.charCodeAt(n+1)===32)break;n+=2;continue}if(i===40&&(o++,o>32))return f;if(i===41){if(o===0)break;o--}n++}return c===n||o!==0||(f.str=sg(t.slice(c,n)),f.lines=l,f.pos=n,f.ok=!0),f},Zst=be.unescapeAll,Xst=function(t,n,r){var i,o,l=0,c=n,f={ok:!1,pos:0,lines:0,str:""};if(n>=r||(o=t.charCodeAt(n),o!==34&&o!==39&&o!==40))return f;for(n++,o===40&&(o=41);n<r;){if(i=t.charCodeAt(n),i===o)return f.pos=n+1,f.lines=l,f.str=Zst(t.slice(c+1,n)),f.ok=!0,f;if(i===40&&o===41)return f;i===10?l++:i===92&&n+1<r&&(n++,t.charCodeAt(n)===10&&l++),n++}return f};Oc.parseLinkLabel=Yst;Oc.parseLinkDestination=Qst;Oc.parseLinkTitle=Xst;var Jst=be.assign,tot=be.unescapeAll,Es=be.escapeHtml,Jr={};Jr.code_inline=function(e,t,n,r,i){var o=e[t];return"<code"+i.renderAttrs(o)+">"+Es(e[t].content)+"</code>"};Jr.code_block=function(e,t,n,r,i){var o=e[t];return"<pre"+i.renderAttrs(o)+"><code>"+Es(e[t].content)+`</code></pre>
`};Jr.fence=function(e,t,n,r,i){var o=e[t],l=o.info?tot(o.info).trim():"",c="",f="",d,g,v,S,E;return l&&(v=l.split(/(\s+)/g),c=v[0],f=v.slice(2).join("")),n.highlight?d=n.highlight(o.content,c,f)||Es(o.content):d=Es(o.content),d.indexOf("<pre")===0?d+`
`:l?(g=o.attrIndex("class"),S=o.attrs?o.attrs.slice():[],g<0?S.push(["class",n.langPrefix+c]):(S[g]=S[g].slice(),S[g][1]+=" "+n.langPrefix+c),E={attrs:S},"<pre><code"+i.renderAttrs(E)+">"+d+`</code></pre>
`):"<pre><code"+i.renderAttrs(o)+">"+d+`</code></pre>
`};Jr.image=function(e,t,n,r,i){var o=e[t];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,n,r),i.renderToken(e,t,n)};Jr.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};Jr.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Jr.text=function(e,t){return Es(e[t].content)};Jr.html_block=function(e,t){return e[t].content};Jr.html_inline=function(e,t){return e[t].content};function Eo(){this.rules=Jst({},Jr)}Eo.prototype.renderAttrs=function(t){var n,r,i;if(!t.attrs)return"";for(i="",n=0,r=t.attrs.length;n<r;n++)i+=" "+Es(t.attrs[n][0])+'="'+Es(t.attrs[n][1])+'"';return i};Eo.prototype.renderToken=function(t,n,r){var i,o="",l=!1,c=t[n];return c.hidden?"":(c.block&&c.nesting!==-1&&n&&t[n-1].hidden&&(o+=`
`),o+=(c.nesting===-1?"</":"<")+c.tag,o+=this.renderAttrs(c),c.nesting===0&&r.xhtmlOut&&(o+=" /"),c.block&&(l=!0,c.nesting===1&&n+1<t.length&&(i=t[n+1],(i.type==="inline"||i.hidden||i.nesting===-1&&i.tag===c.tag)&&(l=!1))),o+=l?`>
`:">",o)};Eo.prototype.renderInline=function(e,t,n){for(var r,i="",o=this.rules,l=0,c=e.length;l<c;l++)r=e[l].type,typeof o[r]<"u"?i+=o[r](e,l,t,n,this):i+=this.renderToken(e,l,t);return i};Eo.prototype.renderInlineAsText=function(e,t,n){for(var r="",i=0,o=e.length;i<o;i++)e[i].type==="text"?r+=e[i].content:e[i].type==="image"?r+=this.renderInlineAsText(e[i].children,t,n):e[i].type==="softbreak"&&(r+=`
`);return r};Eo.prototype.render=function(e,t,n){var r,i,o,l="",c=this.rules;for(r=0,i=e.length;r<i;r++)o=e[r].type,o==="inline"?l+=this.renderInline(e[r].children,t,n):typeof c[o]<"u"?l+=c[e[r].type](e,r,t,n,this):l+=this.renderToken(e,r,t,n);return l};var eot=Eo;function zr(){this.__rules__=[],this.__cache__=null}zr.prototype.__find__=function(e){for(var t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};zr.prototype.__compile__=function(){var e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};zr.prototype.at=function(e,t,n){var r=this.__find__(e),i=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=i.alt||[],this.__cache__=null};zr.prototype.before=function(e,t,n,r){var i=this.__find__(e),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null};zr.prototype.after=function(e,t,n,r){var i=this.__find__(e),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null};zr.prototype.push=function(e,t,n){var r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};zr.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach(function(r){var i=this.__find__(r);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,n.push(r)},this),this.__cache__=null,n};zr.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};zr.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach(function(r){var i=this.__find__(r);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,n.push(r)},this),this.__cache__=null,n};zr.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};var Pf=zr,not=/\r\n?|\n/g,rot=/\0/g,iot=function(t){var n;n=t.src.replace(not,`
`),n=n.replace(rot,"�"),t.src=n},sot=function(t){var n;t.inlineMode?(n=new t.Token("inline","",0),n.content=t.src,n.map=[0,1],n.children=[],t.tokens.push(n)):t.md.block.parse(t.src,t.md,t.env,t.tokens)},oot=function(t){var n=t.tokens,r,i,o;for(i=0,o=n.length;i<o;i++)r=n[i],r.type==="inline"&&t.md.inline.parse(r.content,t.md,t.env,r.children)},aot=be.arrayReplaceAt;function lot(e){return/^<a[>\s]/i.test(e)}function cot(e){return/^<\/a\s*>/i.test(e)}var uot=function(t){var n,r,i,o,l,c,f,d,g,v,S,E,q,Q,tt,ut,nt=t.tokens,gt;if(t.md.options.linkify){for(r=0,i=nt.length;r<i;r++)if(!(nt[r].type!=="inline"||!t.md.linkify.pretest(nt[r].content)))for(o=nt[r].children,q=0,n=o.length-1;n>=0;n--){if(c=o[n],c.type==="link_close"){for(n--;o[n].level!==c.level&&o[n].type!=="link_open";)n--;continue}if(c.type==="html_inline"&&(lot(c.content)&&q>0&&q--,cot(c.content)&&q++),!(q>0)&&c.type==="text"&&t.md.linkify.test(c.content)){for(g=c.content,gt=t.md.linkify.match(g),f=[],E=c.level,S=0,d=0;d<gt.length;d++)Q=gt[d].url,tt=t.md.normalizeLink(Q),t.md.validateLink(tt)&&(ut=gt[d].text,gt[d].schema?gt[d].schema==="mailto:"&&!/^mailto:/i.test(ut)?ut=t.md.normalizeLinkText("mailto:"+ut).replace(/^mailto:/,""):ut=t.md.normalizeLinkText(ut):ut=t.md.normalizeLinkText("http://"+ut).replace(/^http:\/\//,""),v=gt[d].index,v>S&&(l=new t.Token("text","",0),l.content=g.slice(S,v),l.level=E,f.push(l)),l=new t.Token("link_open","a",1),l.attrs=[["href",tt]],l.level=E++,l.markup="linkify",l.info="auto",f.push(l),l=new t.Token("text","",0),l.content=ut,l.level=E,f.push(l),l=new t.Token("link_close","a",-1),l.level=--E,l.markup="linkify",l.info="auto",f.push(l),S=gt[d].lastIndex);S<g.length&&(l=new t.Token("text","",0),l.content=g.slice(S),l.level=E,f.push(l)),nt[r].children=o=aot(o,n,f)}}}},jm=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,hot=/\((c|tm|r|p)\)/i,fot=/\((c|tm|r|p)\)/ig,dot={c:"©",r:"®",p:"§",tm:"™"};function pot(e,t){return dot[t.toLowerCase()]}function _ot(e){var t,n,r=0;for(t=e.length-1;t>=0;t--)n=e[t],n.type==="text"&&!r&&(n.content=n.content.replace(fot,pot)),n.type==="link_open"&&n.info==="auto"&&r--,n.type==="link_close"&&n.info==="auto"&&r++}function got(e){var t,n,r=0;for(t=e.length-1;t>=0;t--)n=e[t],n.type==="text"&&!r&&jm.test(n.content)&&(n.content=n.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1—").replace(/(^|\s)--(?=\s|$)/mg,"$1–").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1–")),n.type==="link_open"&&n.info==="auto"&&r--,n.type==="link_close"&&n.info==="auto"&&r++}var mot=function(t){var n;if(t.md.options.typographer)for(n=t.tokens.length-1;n>=0;n--)t.tokens[n].type==="inline"&&(hot.test(t.tokens[n].content)&&_ot(t.tokens[n].children),jm.test(t.tokens[n].content)&&got(t.tokens[n].children))},og=be.isWhiteSpace,ag=be.isPunctChar,lg=be.isMdAsciiPunct,yot=/['"]/,cg=/['"]/g,ug="’";function Fl(e,t,n){return e.substr(0,t)+n+e.substr(t+1)}function vot(e,t){var n,r,i,o,l,c,f,d,g,v,S,E,q,Q,tt,ut,nt,gt,Pt,Vt,pt;for(Pt=[],n=0;n<e.length;n++){for(r=e[n],f=e[n].level,nt=Pt.length-1;nt>=0&&!(Pt[nt].level<=f);nt--);if(Pt.length=nt+1,r.type==="text"){i=r.content,l=0,c=i.length;t:for(;l<c&&(cg.lastIndex=l,o=cg.exec(i),!!o);){if(tt=ut=!0,l=o.index+1,gt=o[0]==="'",g=32,o.index-1>=0)g=i.charCodeAt(o.index-1);else for(nt=n-1;nt>=0&&!(e[nt].type==="softbreak"||e[nt].type==="hardbreak");nt--)if(e[nt].content){g=e[nt].content.charCodeAt(e[nt].content.length-1);break}if(v=32,l<c)v=i.charCodeAt(l);else for(nt=n+1;nt<e.length&&!(e[nt].type==="softbreak"||e[nt].type==="hardbreak");nt++)if(e[nt].content){v=e[nt].content.charCodeAt(0);break}if(S=lg(g)||ag(String.fromCharCode(g)),E=lg(v)||ag(String.fromCharCode(v)),q=og(g),Q=og(v),Q?tt=!1:E&&(q||S||(tt=!1)),q?ut=!1:S&&(Q||E||(ut=!1)),v===34&&o[0]==='"'&&g>=48&&g<=57&&(ut=tt=!1),tt&&ut&&(tt=S,ut=E),!tt&&!ut){gt&&(r.content=Fl(r.content,o.index,ug));continue}if(ut){for(nt=Pt.length-1;nt>=0&&(d=Pt[nt],!(Pt[nt].level<f));nt--)if(d.single===gt&&Pt[nt].level===f){d=Pt[nt],gt?(Vt=t.md.options.quotes[2],pt=t.md.options.quotes[3]):(Vt=t.md.options.quotes[0],pt=t.md.options.quotes[1]),r.content=Fl(r.content,o.index,pt),e[d.token].content=Fl(e[d.token].content,d.pos,Vt),l+=pt.length-1,d.token===n&&(l+=Vt.length-1),i=r.content,c=i.length,Pt.length=nt;continue t}}tt?Pt.push({token:n,pos:o.index,single:gt,level:f}):ut&&gt&&(r.content=Fl(r.content,o.index,ug))}}}}var bot=function(t){var n;if(t.md.options.typographer)for(n=t.tokens.length-1;n>=0;n--)t.tokens[n].type!=="inline"||!yot.test(t.tokens[n].content)||vot(t.tokens[n].children,t)};function Ao(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Ao.prototype.attrIndex=function(t){var n,r,i;if(!this.attrs)return-1;for(n=this.attrs,r=0,i=n.length;r<i;r++)if(n[r][0]===t)return r;return-1};Ao.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Ao.prototype.attrSet=function(t,n){var r=this.attrIndex(t),i=[t,n];r<0?this.attrPush(i):this.attrs[r]=i};Ao.prototype.attrGet=function(t){var n=this.attrIndex(t),r=null;return n>=0&&(r=this.attrs[n][1]),r};Ao.prototype.attrJoin=function(t,n){var r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};var Mf=Ao,wot=Mf;function Km(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}Km.prototype.Token=wot;var xot=Km,Eot=Pf,kh=[["normalize",iot],["block",sot],["inline",oot],["linkify",uot],["replacements",mot],["smartquotes",bot]];function Lf(){this.ruler=new Eot;for(var e=0;e<kh.length;e++)this.ruler.push(kh[e][0],kh[e][1])}Lf.prototype.process=function(e){var t,n,r;for(r=this.ruler.getRules(""),t=0,n=r.length;t<n;t++)r[t](e)};Lf.prototype.State=xot;var Aot=Lf,Ch=be.isSpace;function Th(e,t){var n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.substr(n,r-n)}function hg(e){var t=[],n=0,r=e.length,i,o=!1,l=0,c="";for(i=e.charCodeAt(n);n<r;)i===124&&(o?(c+=e.substring(l,n-1),l=n):(t.push(c+e.substring(l,n)),c="",l=n+1)),o=i===92,n++,i=e.charCodeAt(n);return t.push(c+e.substring(l)),t}var Sot=function(t,n,r,i){var o,l,c,f,d,g,v,S,E,q,Q,tt,ut,nt,gt,Pt,Vt,pt;if(n+2>r||(g=n+1,t.sCount[g]<t.blkIndent)||t.sCount[g]-t.blkIndent>=4||(c=t.bMarks[g]+t.tShift[g],c>=t.eMarks[g])||(Vt=t.src.charCodeAt(c++),Vt!==124&&Vt!==45&&Vt!==58)||c>=t.eMarks[g]||(pt=t.src.charCodeAt(c++),pt!==124&&pt!==45&&pt!==58&&!Ch(pt))||Vt===45&&Ch(pt))return!1;for(;c<t.eMarks[g];){if(o=t.src.charCodeAt(c),o!==124&&o!==45&&o!==58&&!Ch(o))return!1;c++}for(l=Th(t,n+1),v=l.split("|"),q=[],f=0;f<v.length;f++){if(Q=v[f].trim(),!Q){if(f===0||f===v.length-1)continue;return!1}if(!/^:?-+:?$/.test(Q))return!1;Q.charCodeAt(Q.length-1)===58?q.push(Q.charCodeAt(0)===58?"center":"right"):Q.charCodeAt(0)===58?q.push("left"):q.push("")}if(l=Th(t,n).trim(),l.indexOf("|")===-1||t.sCount[n]-t.blkIndent>=4||(v=hg(l),v.length&&v[0]===""&&v.shift(),v.length&&v[v.length-1]===""&&v.pop(),S=v.length,S===0||S!==q.length))return!1;if(i)return!0;for(nt=t.parentType,t.parentType="table",Pt=t.md.block.ruler.getRules("blockquote"),E=t.push("table_open","table",1),E.map=tt=[n,0],E=t.push("thead_open","thead",1),E.map=[n,n+1],E=t.push("tr_open","tr",1),E.map=[n,n+1],f=0;f<v.length;f++)E=t.push("th_open","th",1),q[f]&&(E.attrs=[["style","text-align:"+q[f]]]),E=t.push("inline","",0),E.content=v[f].trim(),E.children=[],E=t.push("th_close","th",-1);for(E=t.push("tr_close","tr",-1),E=t.push("thead_close","thead",-1),g=n+2;g<r&&!(t.sCount[g]<t.blkIndent);g++){for(gt=!1,f=0,d=Pt.length;f<d;f++)if(Pt[f](t,g,r,!0)){gt=!0;break}if(gt||(l=Th(t,g).trim(),!l)||t.sCount[g]-t.blkIndent>=4)break;for(v=hg(l),v.length&&v[0]===""&&v.shift(),v.length&&v[v.length-1]===""&&v.pop(),g===n+2&&(E=t.push("tbody_open","tbody",1),E.map=ut=[n+2,0]),E=t.push("tr_open","tr",1),E.map=[g,g+1],f=0;f<S;f++)E=t.push("td_open","td",1),q[f]&&(E.attrs=[["style","text-align:"+q[f]]]),E=t.push("inline","",0),E.content=v[f]?v[f].trim():"",E.children=[],E=t.push("td_close","td",-1);E=t.push("tr_close","tr",-1)}return ut&&(E=t.push("tbody_close","tbody",-1),ut[1]=g),E=t.push("table_close","table",-1),tt[1]=g,t.parentType=nt,t.line=g,!0},kot=function(t,n,r){var i,o,l;if(t.sCount[n]-t.blkIndent<4)return!1;for(o=i=n+1;i<r;){if(t.isEmpty(i)){i++;continue}if(t.sCount[i]-t.blkIndent>=4){i++,o=i;continue}break}return t.line=o,l=t.push("code_block","code",0),l.content=t.getLines(n,o,4+t.blkIndent,!1)+`
`,l.map=[n,t.line],!0},Cot=function(t,n,r,i){var o,l,c,f,d,g,v,S=!1,E=t.bMarks[n]+t.tShift[n],q=t.eMarks[n];if(t.sCount[n]-t.blkIndent>=4||E+3>q||(o=t.src.charCodeAt(E),o!==126&&o!==96)||(d=E,E=t.skipChars(E,o),l=E-d,l<3)||(v=t.src.slice(d,E),c=t.src.slice(E,q),o===96&&c.indexOf(String.fromCharCode(o))>=0))return!1;if(i)return!0;for(f=n;f++,!(f>=r||(E=d=t.bMarks[f]+t.tShift[f],q=t.eMarks[f],E<q&&t.sCount[f]<t.blkIndent));)if(t.src.charCodeAt(E)===o&&!(t.sCount[f]-t.blkIndent>=4)&&(E=t.skipChars(E,o),!(E-d<l)&&(E=t.skipSpaces(E),!(E<q)))){S=!0;break}return l=t.sCount[n],t.line=f+(S?1:0),g=t.push("fence","code",0),g.info=c,g.content=t.getLines(n+1,f,l,!0),g.markup=v,g.map=[n,t.line],!0},fg=be.isSpace,Tot=function(t,n,r,i){var o,l,c,f,d,g,v,S,E,q,Q,tt,ut,nt,gt,Pt,Vt,pt,Kt,ye,He=t.lineMax,oe=t.bMarks[n]+t.tShift[n],Pe=t.eMarks[n];if(t.sCount[n]-t.blkIndent>=4||t.src.charCodeAt(oe++)!==62)return!1;if(i)return!0;for(f=E=t.sCount[n]+1,t.src.charCodeAt(oe)===32?(oe++,f++,E++,o=!1,Pt=!0):t.src.charCodeAt(oe)===9?(Pt=!0,(t.bsCount[n]+E)%4===3?(oe++,f++,E++,o=!1):o=!0):Pt=!1,q=[t.bMarks[n]],t.bMarks[n]=oe;oe<Pe&&(l=t.src.charCodeAt(oe),fg(l));){l===9?E+=4-(E+t.bsCount[n]+(o?1:0))%4:E++;oe++}for(Q=[t.bsCount[n]],t.bsCount[n]=t.sCount[n]+1+(Pt?1:0),g=oe>=Pe,nt=[t.sCount[n]],t.sCount[n]=E-f,gt=[t.tShift[n]],t.tShift[n]=oe-t.bMarks[n],pt=t.md.block.ruler.getRules("blockquote"),ut=t.parentType,t.parentType="blockquote",S=n+1;S<r&&(ye=t.sCount[S]<t.blkIndent,oe=t.bMarks[S]+t.tShift[S],Pe=t.eMarks[S],!(oe>=Pe));S++){if(t.src.charCodeAt(oe++)===62&&!ye){for(f=E=t.sCount[S]+1,t.src.charCodeAt(oe)===32?(oe++,f++,E++,o=!1,Pt=!0):t.src.charCodeAt(oe)===9?(Pt=!0,(t.bsCount[S]+E)%4===3?(oe++,f++,E++,o=!1):o=!0):Pt=!1,q.push(t.bMarks[S]),t.bMarks[S]=oe;oe<Pe&&(l=t.src.charCodeAt(oe),fg(l));){l===9?E+=4-(E+t.bsCount[S]+(o?1:0))%4:E++;oe++}g=oe>=Pe,Q.push(t.bsCount[S]),t.bsCount[S]=t.sCount[S]+1+(Pt?1:0),nt.push(t.sCount[S]),t.sCount[S]=E-f,gt.push(t.tShift[S]),t.tShift[S]=oe-t.bMarks[S];continue}if(g)break;for(Vt=!1,c=0,d=pt.length;c<d;c++)if(pt[c](t,S,r,!0)){Vt=!0;break}if(Vt){t.lineMax=S,t.blkIndent!==0&&(q.push(t.bMarks[S]),Q.push(t.bsCount[S]),gt.push(t.tShift[S]),nt.push(t.sCount[S]),t.sCount[S]-=t.blkIndent);break}q.push(t.bMarks[S]),Q.push(t.bsCount[S]),gt.push(t.tShift[S]),nt.push(t.sCount[S]),t.sCount[S]=-1}for(tt=t.blkIndent,t.blkIndent=0,Kt=t.push("blockquote_open","blockquote",1),Kt.markup=">",Kt.map=v=[n,0],t.md.block.tokenize(t,n,S),Kt=t.push("blockquote_close","blockquote",-1),Kt.markup=">",t.lineMax=He,t.parentType=ut,v[1]=t.line,c=0;c<gt.length;c++)t.bMarks[c+n]=q[c],t.tShift[c+n]=gt[c],t.sCount[c+n]=nt[c],t.bsCount[c+n]=Q[c];return t.blkIndent=tt,!0},Iot=be.isSpace,Rot=function(t,n,r,i){var o,l,c,f,d=t.bMarks[n]+t.tShift[n],g=t.eMarks[n];if(t.sCount[n]-t.blkIndent>=4||(o=t.src.charCodeAt(d++),o!==42&&o!==45&&o!==95))return!1;for(l=1;d<g;){if(c=t.src.charCodeAt(d++),c!==o&&!Iot(c))return!1;c===o&&l++}return l<3?!1:(i||(t.line=n+1,f=t.push("hr","hr",0),f.map=[n,t.line],f.markup=Array(l+1).join(String.fromCharCode(o))),!0)},Ym=be.isSpace;function dg(e,t){var n,r,i,o;return r=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],n=e.src.charCodeAt(r++),n!==42&&n!==45&&n!==43||r<i&&(o=e.src.charCodeAt(r),!Ym(o))?-1:r}function pg(e,t){var n,r=e.bMarks[t]+e.tShift[t],i=r,o=e.eMarks[t];if(i+1>=o||(n=e.src.charCodeAt(i++),n<48||n>57))return-1;for(;;){if(i>=o)return-1;if(n=e.src.charCodeAt(i++),n>=48&&n<=57){if(i-r>=10)return-1;continue}if(n===41||n===46)break;return-1}return i<o&&(n=e.src.charCodeAt(i),!Ym(n))?-1:i}function Dot(e,t){var n,r,i=e.level+2;for(n=t+2,r=e.tokens.length-2;n<r;n++)e.tokens[n].level===i&&e.tokens[n].type==="paragraph_open"&&(e.tokens[n+2].hidden=!0,e.tokens[n].hidden=!0,n+=2)}var Oot=function(t,n,r,i){var o,l,c,f,d,g,v,S,E,q,Q,tt,ut,nt,gt,Pt,Vt,pt,Kt,ye,He,oe,Pe,_r,gr,bt,Te,re,ln=!1,ir=!0;if(t.sCount[n]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[n]-t.listIndent>=4&&t.sCount[n]<t.blkIndent)return!1;if(i&&t.parentType==="paragraph"&&t.sCount[n]>=t.blkIndent&&(ln=!0),(Pe=pg(t,n))>=0){if(v=!0,gr=t.bMarks[n]+t.tShift[n],ut=Number(t.src.slice(gr,Pe-1)),ln&&ut!==1)return!1}else if((Pe=dg(t,n))>=0)v=!1;else return!1;if(ln&&t.skipSpaces(Pe)>=t.eMarks[n])return!1;if(tt=t.src.charCodeAt(Pe-1),i)return!0;for(Q=t.tokens.length,v?(re=t.push("ordered_list_open","ol",1),ut!==1&&(re.attrs=[["start",ut]])):re=t.push("bullet_list_open","ul",1),re.map=q=[n,0],re.markup=String.fromCharCode(tt),gt=n,_r=!1,Te=t.md.block.ruler.getRules("list"),pt=t.parentType,t.parentType="list";gt<r;){for(oe=Pe,nt=t.eMarks[gt],g=Pt=t.sCount[gt]+Pe-(t.bMarks[n]+t.tShift[n]);oe<nt;){if(o=t.src.charCodeAt(oe),o===9)Pt+=4-(Pt+t.bsCount[gt])%4;else if(o===32)Pt++;else break;oe++}if(l=oe,l>=nt?d=1:d=Pt-g,d>4&&(d=1),f=g+d,re=t.push("list_item_open","li",1),re.markup=String.fromCharCode(tt),re.map=S=[n,0],v&&(re.info=t.src.slice(gr,Pe-1)),He=t.tight,ye=t.tShift[n],Kt=t.sCount[n],Vt=t.listIndent,t.listIndent=t.blkIndent,t.blkIndent=f,t.tight=!0,t.tShift[n]=l-t.bMarks[n],t.sCount[n]=Pt,l>=nt&&t.isEmpty(n+1)?t.line=Math.min(t.line+2,r):t.md.block.tokenize(t,n,r,!0),(!t.tight||_r)&&(ir=!1),_r=t.line-n>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=Vt,t.tShift[n]=ye,t.sCount[n]=Kt,t.tight=He,re=t.push("list_item_close","li",-1),re.markup=String.fromCharCode(tt),gt=n=t.line,S[1]=gt,l=t.bMarks[n],gt>=r||t.sCount[gt]<t.blkIndent||t.sCount[n]-t.blkIndent>=4)break;for(bt=!1,c=0,E=Te.length;c<E;c++)if(Te[c](t,gt,r,!0)){bt=!0;break}if(bt)break;if(v){if(Pe=pg(t,gt),Pe<0)break;gr=t.bMarks[gt]+t.tShift[gt]}else if(Pe=dg(t,gt),Pe<0)break;if(tt!==t.src.charCodeAt(Pe-1))break}return v?re=t.push("ordered_list_close","ol",-1):re=t.push("bullet_list_close","ul",-1),re.markup=String.fromCharCode(tt),q[1]=gt,t.line=gt,t.parentType=pt,ir&&Dot(t,Q),!0},Pot=be.normalizeReference,Vl=be.isSpace,Mot=function(t,n,r,i){var o,l,c,f,d,g,v,S,E,q,Q,tt,ut,nt,gt,Pt,Vt=0,pt=t.bMarks[n]+t.tShift[n],Kt=t.eMarks[n],ye=n+1;if(t.sCount[n]-t.blkIndent>=4||t.src.charCodeAt(pt)!==91)return!1;for(;++pt<Kt;)if(t.src.charCodeAt(pt)===93&&t.src.charCodeAt(pt-1)!==92){if(pt+1===Kt||t.src.charCodeAt(pt+1)!==58)return!1;break}for(f=t.lineMax,gt=t.md.block.ruler.getRules("reference"),q=t.parentType,t.parentType="reference";ye<f&&!t.isEmpty(ye);ye++)if(!(t.sCount[ye]-t.blkIndent>3)&&!(t.sCount[ye]<0)){for(nt=!1,g=0,v=gt.length;g<v;g++)if(gt[g](t,ye,f,!0)){nt=!0;break}if(nt)break}for(ut=t.getLines(n,ye,t.blkIndent,!1).trim(),Kt=ut.length,pt=1;pt<Kt;pt++){if(o=ut.charCodeAt(pt),o===91)return!1;if(o===93){E=pt;break}else o===10?Vt++:o===92&&(pt++,pt<Kt&&ut.charCodeAt(pt)===10&&Vt++)}if(E<0||ut.charCodeAt(E+1)!==58)return!1;for(pt=E+2;pt<Kt;pt++)if(o=ut.charCodeAt(pt),o===10)Vt++;else if(!Vl(o))break;if(Q=t.md.helpers.parseLinkDestination(ut,pt,Kt),!Q.ok||(d=t.md.normalizeLink(Q.str),!t.md.validateLink(d)))return!1;for(pt=Q.pos,Vt+=Q.lines,l=pt,c=Vt,tt=pt;pt<Kt;pt++)if(o=ut.charCodeAt(pt),o===10)Vt++;else if(!Vl(o))break;for(Q=t.md.helpers.parseLinkTitle(ut,pt,Kt),pt<Kt&&tt!==pt&&Q.ok?(Pt=Q.str,pt=Q.pos,Vt+=Q.lines):(Pt="",pt=l,Vt=c);pt<Kt&&(o=ut.charCodeAt(pt),!!Vl(o));)pt++;if(pt<Kt&&ut.charCodeAt(pt)!==10&&Pt)for(Pt="",pt=l,Vt=c;pt<Kt&&(o=ut.charCodeAt(pt),!!Vl(o));)pt++;return pt<Kt&&ut.charCodeAt(pt)!==10||(S=Pot(ut.slice(1,E)),!S)?!1:(i||(typeof t.env.references>"u"&&(t.env.references={}),typeof t.env.references[S]>"u"&&(t.env.references[S]={title:Pt,href:d}),t.parentType=q,t.line=n+Vt+1),!0)},Lot=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Pc={},$ot="[a-zA-Z_:][a-zA-Z0-9:._-]*",Not="[^\"'=<>`\\x00-\\x20]+",Fot="'[^']*'",Vot='"[^"]*"',qot="(?:"+Not+"|"+Fot+"|"+Vot+")",Bot="(?:\\s+"+$ot+"(?:\\s*=\\s*"+qot+")?)",Qm="<[A-Za-z][A-Za-z0-9\\-]*"+Bot+"*\\s*\\/?>",Zm="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Uot="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",zot="<[?][\\s\\S]*?[?]>",Hot="<![A-Z]+\\s+[^>]*>",Got="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Wot=new RegExp("^(?:"+Qm+"|"+Zm+"|"+Uot+"|"+zot+"|"+Hot+"|"+Got+")"),jot=new RegExp("^(?:"+Qm+"|"+Zm+")");Pc.HTML_TAG_RE=Wot;Pc.HTML_OPEN_CLOSE_TAG_RE=jot;var Kot=Lot,Yot=Pc.HTML_OPEN_CLOSE_TAG_RE,eo=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Kot.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Yot.source+"\\s*$"),/^$/,!1]],Qot=function(t,n,r,i){var o,l,c,f,d=t.bMarks[n]+t.tShift[n],g=t.eMarks[n];if(t.sCount[n]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(d)!==60)return!1;for(f=t.src.slice(d,g),o=0;o<eo.length&&!eo[o][0].test(f);o++);if(o===eo.length)return!1;if(i)return eo[o][2];if(l=n+1,!eo[o][1].test(f)){for(;l<r&&!(t.sCount[l]<t.blkIndent);l++)if(d=t.bMarks[l]+t.tShift[l],g=t.eMarks[l],f=t.src.slice(d,g),eo[o][1].test(f)){f.length!==0&&l++;break}}return t.line=l,c=t.push("html_block","",0),c.map=[n,l],c.content=t.getLines(n,l,t.blkIndent,!0),!0},_g=be.isSpace,Zot=function(t,n,r,i){var o,l,c,f,d=t.bMarks[n]+t.tShift[n],g=t.eMarks[n];if(t.sCount[n]-t.blkIndent>=4||(o=t.src.charCodeAt(d),o!==35||d>=g))return!1;for(l=1,o=t.src.charCodeAt(++d);o===35&&d<g&&l<=6;)l++,o=t.src.charCodeAt(++d);return l>6||d<g&&!_g(o)?!1:(i||(g=t.skipSpacesBack(g,d),c=t.skipCharsBack(g,35,d),c>d&&_g(t.src.charCodeAt(c-1))&&(g=c),t.line=n+1,f=t.push("heading_open","h"+String(l),1),f.markup="########".slice(0,l),f.map=[n,t.line],f=t.push("inline","",0),f.content=t.src.slice(d,g).trim(),f.map=[n,t.line],f.children=[],f=t.push("heading_close","h"+String(l),-1),f.markup="########".slice(0,l)),!0)},Xot=function(t,n,r){var i,o,l,c,f,d,g,v,S,E=n+1,q,Q=t.md.block.ruler.getRules("paragraph");if(t.sCount[n]-t.blkIndent>=4)return!1;for(q=t.parentType,t.parentType="paragraph";E<r&&!t.isEmpty(E);E++)if(!(t.sCount[E]-t.blkIndent>3)){if(t.sCount[E]>=t.blkIndent&&(d=t.bMarks[E]+t.tShift[E],g=t.eMarks[E],d<g&&(S=t.src.charCodeAt(d),(S===45||S===61)&&(d=t.skipChars(d,S),d=t.skipSpaces(d),d>=g)))){v=S===61?1:2;break}if(!(t.sCount[E]<0)){for(o=!1,l=0,c=Q.length;l<c;l++)if(Q[l](t,E,r,!0)){o=!0;break}if(o)break}}return v?(i=t.getLines(n,E,t.blkIndent,!1).trim(),t.line=E+1,f=t.push("heading_open","h"+String(v),1),f.markup=String.fromCharCode(S),f.map=[n,t.line],f=t.push("inline","",0),f.content=i,f.map=[n,t.line-1],f.children=[],f=t.push("heading_close","h"+String(v),-1),f.markup=String.fromCharCode(S),t.parentType=q,!0):!1},Jot=function(t,n){var r,i,o,l,c,f,d=n+1,g=t.md.block.ruler.getRules("paragraph"),v=t.lineMax;for(f=t.parentType,t.parentType="paragraph";d<v&&!t.isEmpty(d);d++)if(!(t.sCount[d]-t.blkIndent>3)&&!(t.sCount[d]<0)){for(i=!1,o=0,l=g.length;o<l;o++)if(g[o](t,d,v,!0)){i=!0;break}if(i)break}return r=t.getLines(n,d,t.blkIndent,!1).trim(),t.line=d,c=t.push("paragraph_open","p",1),c.map=[n,t.line],c=t.push("inline","",0),c.content=r,c.map=[n,t.line],c.children=[],c=t.push("paragraph_close","p",-1),t.parentType=f,!0},Xm=Mf,Mc=be.isSpace;function ti(e,t,n,r){var i,o,l,c,f,d,g,v;for(this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",o=this.src,v=!1,l=c=d=g=0,f=o.length;c<f;c++){if(i=o.charCodeAt(c),!v)if(Mc(i)){d++,i===9?g+=4-g%4:g++;continue}else v=!0;(i===10||c===f-1)&&(i!==10&&c++,this.bMarks.push(l),this.eMarks.push(c),this.tShift.push(d),this.sCount.push(g),this.bsCount.push(0),v=!1,d=0,g=0,l=c+1)}this.bMarks.push(o.length),this.eMarks.push(o.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}ti.prototype.push=function(e,t,n){var r=new Xm(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};ti.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};ti.prototype.skipEmptyLines=function(t){for(var n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};ti.prototype.skipSpaces=function(t){for(var n,r=this.src.length;t<r&&(n=this.src.charCodeAt(t),!!Mc(n));t++);return t};ti.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Mc(this.src.charCodeAt(--t)))return t+1;return t};ti.prototype.skipChars=function(t,n){for(var r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};ti.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};ti.prototype.getLines=function(t,n,r,i){var o,l,c,f,d,g,v,S=t;if(t>=n)return"";for(g=new Array(n-t),o=0;S<n;S++,o++){for(l=0,v=f=this.bMarks[S],S+1<n||i?d=this.eMarks[S]+1:d=this.eMarks[S];f<d&&l<r;){if(c=this.src.charCodeAt(f),Mc(c))c===9?l+=4-(l+this.bsCount[S])%4:l++;else if(f-v<this.tShift[S])l++;else break;f++}l>r?g[o]=new Array(l-r+1).join(" ")+this.src.slice(f,d):g[o]=this.src.slice(f,d)}return g.join("")};ti.prototype.Token=Xm;var tat=ti,eat=Pf,ql=[["table",Sot,["paragraph","reference"]],["code",kot],["fence",Cot,["paragraph","reference","blockquote","list"]],["blockquote",Tot,["paragraph","reference","blockquote","list"]],["hr",Rot,["paragraph","reference","blockquote","list"]],["list",Oot,["paragraph","reference","blockquote"]],["reference",Mot],["html_block",Qot,["paragraph","reference","blockquote"]],["heading",Zot,["paragraph","reference","blockquote"]],["lheading",Xot],["paragraph",Jot]];function Lc(){this.ruler=new eat;for(var e=0;e<ql.length;e++)this.ruler.push(ql[e][0],ql[e][1],{alt:(ql[e][2]||[]).slice()})}Lc.prototype.tokenize=function(e,t,n){for(var r,i,o=this.ruler.getRules(""),l=o.length,c=t,f=!1,d=e.md.options.maxNesting;c<n&&(e.line=c=e.skipEmptyLines(c),!(c>=n||e.sCount[c]<e.blkIndent));){if(e.level>=d){e.line=n;break}for(i=0;i<l&&(r=o[i](e,c,n,!1),!r);i++);e.tight=!f,e.isEmpty(e.line-1)&&(f=!0),c=e.line,c<n&&e.isEmpty(c)&&(f=!0,c++,e.line=c)}};Lc.prototype.parse=function(e,t,n,r){var i;e&&(i=new this.State(e,t,n,r),this.tokenize(i,i.line,i.lineMax))};Lc.prototype.State=tat;var nat=Lc;function rat(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}var iat=function(t,n){for(var r=t.pos;r<t.posMax&&!rat(t.src.charCodeAt(r));)r++;return r===t.pos?!1:(n||(t.pending+=t.src.slice(t.pos,r)),t.pos=r,!0)},sat=be.isSpace,oat=function(t,n){var r,i,o,l=t.pos;if(t.src.charCodeAt(l)!==10)return!1;if(r=t.pending.length-1,i=t.posMax,!n)if(r>=0&&t.pending.charCodeAt(r)===32)if(r>=1&&t.pending.charCodeAt(r-1)===32){for(o=r-1;o>=1&&t.pending.charCodeAt(o-1)===32;)o--;t.pending=t.pending.slice(0,o),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(l++;l<i&&sat(t.src.charCodeAt(l));)l++;return t.pos=l,!0},aat=be.isSpace,$f=[];for(var gg=0;gg<256;gg++)$f.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){$f[e.charCodeAt(0)]=1});var lat=function(t,n){var r,i=t.pos,o=t.posMax;if(t.src.charCodeAt(i)!==92)return!1;if(i++,i<o){if(r=t.src.charCodeAt(i),r<256&&$f[r]!==0)return n||(t.pending+=t.src[i]),t.pos+=2,!0;if(r===10){for(n||t.push("hardbreak","br",0),i++;i<o&&(r=t.src.charCodeAt(i),!!aat(r));)i++;return t.pos=i,!0}}return n||(t.pending+="\\"),t.pos++,!0},cat=function(t,n){var r,i,o,l,c,f,d,g,v=t.pos,S=t.src.charCodeAt(v);if(S!==96)return!1;for(r=v,v++,i=t.posMax;v<i&&t.src.charCodeAt(v)===96;)v++;if(o=t.src.slice(r,v),d=o.length,t.backticksScanned&&(t.backticks[d]||0)<=r)return n||(t.pending+=o),t.pos+=d,!0;for(c=f=v;(c=t.src.indexOf("`",f))!==-1;){for(f=c+1;f<i&&t.src.charCodeAt(f)===96;)f++;if(g=f-c,g===d)return n||(l=t.push("code_inline","code",0),l.markup=o,l.content=t.src.slice(v,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),t.pos=f,!0;t.backticks[g]=c}return t.backticksScanned=!0,n||(t.pending+=o),t.pos+=d,!0},$c={};$c.tokenize=function(t,n){var r,i,o,l,c,f=t.pos,d=t.src.charCodeAt(f);if(n||d!==126||(i=t.scanDelims(t.pos,!0),l=i.length,c=String.fromCharCode(d),l<2))return!1;for(l%2&&(o=t.push("text","",0),o.content=c,l--),r=0;r<l;r+=2)o=t.push("text","",0),o.content=c+c,t.delimiters.push({marker:d,length:0,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return t.pos+=i.length,!0};function mg(e,t){var n,r,i,o,l,c=[],f=t.length;for(n=0;n<f;n++)i=t[n],i.marker===126&&i.end!==-1&&(o=t[i.end],l=e.tokens[i.token],l.type="s_open",l.tag="s",l.nesting=1,l.markup="~~",l.content="",l=e.tokens[o.token],l.type="s_close",l.tag="s",l.nesting=-1,l.markup="~~",l.content="",e.tokens[o.token-1].type==="text"&&e.tokens[o.token-1].content==="~"&&c.push(o.token-1));for(;c.length;){for(n=c.pop(),r=n+1;r<e.tokens.length&&e.tokens[r].type==="s_close";)r++;r--,n!==r&&(l=e.tokens[r],e.tokens[r]=e.tokens[n],e.tokens[n]=l)}}$c.postProcess=function(t){var n,r=t.tokens_meta,i=t.tokens_meta.length;for(mg(t,t.delimiters),n=0;n<i;n++)r[n]&&r[n].delimiters&&mg(t,r[n].delimiters)};var Nc={};Nc.tokenize=function(t,n){var r,i,o,l=t.pos,c=t.src.charCodeAt(l);if(n||c!==95&&c!==42)return!1;for(i=t.scanDelims(t.pos,c===42),r=0;r<i.length;r++)o=t.push("text","",0),o.content=String.fromCharCode(c),t.delimiters.push({marker:c,length:i.length,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return t.pos+=i.length,!0};function yg(e,t){var n,r,i,o,l,c,f=t.length;for(n=f-1;n>=0;n--)r=t[n],!(r.marker!==95&&r.marker!==42)&&r.end!==-1&&(i=t[r.end],c=n>0&&t[n-1].end===r.end+1&&t[n-1].marker===r.marker&&t[n-1].token===r.token-1&&t[r.end+1].token===i.token+1,l=String.fromCharCode(r.marker),o=e.tokens[r.token],o.type=c?"strong_open":"em_open",o.tag=c?"strong":"em",o.nesting=1,o.markup=c?l+l:l,o.content="",o=e.tokens[i.token],o.type=c?"strong_close":"em_close",o.tag=c?"strong":"em",o.nesting=-1,o.markup=c?l+l:l,o.content="",c&&(e.tokens[t[n-1].token].content="",e.tokens[t[r.end+1].token].content="",n--))}Nc.postProcess=function(t){var n,r=t.tokens_meta,i=t.tokens_meta.length;for(yg(t,t.delimiters),n=0;n<i;n++)r[n]&&r[n].delimiters&&yg(t,r[n].delimiters)};var uat=be.normalizeReference,Ih=be.isSpace,hat=function(t,n){var r,i,o,l,c,f,d,g,v,S="",E="",q=t.pos,Q=t.posMax,tt=t.pos,ut=!0;if(t.src.charCodeAt(t.pos)!==91||(c=t.pos+1,l=t.md.helpers.parseLinkLabel(t,t.pos,!0),l<0))return!1;if(f=l+1,f<Q&&t.src.charCodeAt(f)===40){for(ut=!1,f++;f<Q&&(i=t.src.charCodeAt(f),!(!Ih(i)&&i!==10));f++);if(f>=Q)return!1;if(tt=f,d=t.md.helpers.parseLinkDestination(t.src,f,t.posMax),d.ok){for(S=t.md.normalizeLink(d.str),t.md.validateLink(S)?f=d.pos:S="",tt=f;f<Q&&(i=t.src.charCodeAt(f),!(!Ih(i)&&i!==10));f++);if(d=t.md.helpers.parseLinkTitle(t.src,f,t.posMax),f<Q&&tt!==f&&d.ok)for(E=d.str,f=d.pos;f<Q&&(i=t.src.charCodeAt(f),!(!Ih(i)&&i!==10));f++);}(f>=Q||t.src.charCodeAt(f)!==41)&&(ut=!0),f++}if(ut){if(typeof t.env.references>"u")return!1;if(f<Q&&t.src.charCodeAt(f)===91?(tt=f+1,f=t.md.helpers.parseLinkLabel(t,f),f>=0?o=t.src.slice(tt,f++):f=l+1):f=l+1,o||(o=t.src.slice(c,l)),g=t.env.references[uat(o)],!g)return t.pos=q,!1;S=g.href,E=g.title}return n||(t.pos=c,t.posMax=l,v=t.push("link_open","a",1),v.attrs=r=[["href",S]],E&&r.push(["title",E]),t.md.inline.tokenize(t),v=t.push("link_close","a",-1)),t.pos=f,t.posMax=Q,!0},fat=be.normalizeReference,Rh=be.isSpace,dat=function(t,n){var r,i,o,l,c,f,d,g,v,S,E,q,Q,tt="",ut=t.pos,nt=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91||(f=t.pos+2,c=t.md.helpers.parseLinkLabel(t,t.pos+1,!1),c<0))return!1;if(d=c+1,d<nt&&t.src.charCodeAt(d)===40){for(d++;d<nt&&(i=t.src.charCodeAt(d),!(!Rh(i)&&i!==10));d++);if(d>=nt)return!1;for(Q=d,v=t.md.helpers.parseLinkDestination(t.src,d,t.posMax),v.ok&&(tt=t.md.normalizeLink(v.str),t.md.validateLink(tt)?d=v.pos:tt=""),Q=d;d<nt&&(i=t.src.charCodeAt(d),!(!Rh(i)&&i!==10));d++);if(v=t.md.helpers.parseLinkTitle(t.src,d,t.posMax),d<nt&&Q!==d&&v.ok)for(S=v.str,d=v.pos;d<nt&&(i=t.src.charCodeAt(d),!(!Rh(i)&&i!==10));d++);else S="";if(d>=nt||t.src.charCodeAt(d)!==41)return t.pos=ut,!1;d++}else{if(typeof t.env.references>"u")return!1;if(d<nt&&t.src.charCodeAt(d)===91?(Q=d+1,d=t.md.helpers.parseLinkLabel(t,d),d>=0?l=t.src.slice(Q,d++):d=c+1):d=c+1,l||(l=t.src.slice(f,c)),g=t.env.references[fat(l)],!g)return t.pos=ut,!1;tt=g.href,S=g.title}return n||(o=t.src.slice(f,c),t.md.inline.parse(o,t.md,t.env,q=[]),E=t.push("image","img",0),E.attrs=r=[["src",tt],["alt",""]],E.children=q,E.content=o,S&&r.push(["title",S])),t.pos=d,t.posMax=nt,!0},pat=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,_at=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/,gat=function(t,n){var r,i,o,l,c,f,d=t.pos;if(t.src.charCodeAt(d)!==60)return!1;for(c=t.pos,f=t.posMax;;){if(++d>=f||(l=t.src.charCodeAt(d),l===60))return!1;if(l===62)break}return r=t.src.slice(c+1,d),_at.test(r)?(i=t.md.normalizeLink(r),t.md.validateLink(i)?(n||(o=t.push("link_open","a",1),o.attrs=[["href",i]],o.markup="autolink",o.info="auto",o=t.push("text","",0),o.content=t.md.normalizeLinkText(r),o=t.push("link_close","a",-1),o.markup="autolink",o.info="auto"),t.pos+=r.length+2,!0):!1):pat.test(r)?(i=t.md.normalizeLink("mailto:"+r),t.md.validateLink(i)?(n||(o=t.push("link_open","a",1),o.attrs=[["href",i]],o.markup="autolink",o.info="auto",o=t.push("text","",0),o.content=t.md.normalizeLinkText(r),o=t.push("link_close","a",-1),o.markup="autolink",o.info="auto"),t.pos+=r.length+2,!0):!1):!1},mat=Pc.HTML_TAG_RE;function yat(e){var t=e|32;return t>=97&&t<=122}var vat=function(t,n){var r,i,o,l,c=t.pos;return!t.md.options.html||(o=t.posMax,t.src.charCodeAt(c)!==60||c+2>=o)||(r=t.src.charCodeAt(c+1),r!==33&&r!==63&&r!==47&&!yat(r))||(i=t.src.slice(c).match(mat),!i)?!1:(n||(l=t.push("html_inline","",0),l.content=t.src.slice(c,c+i[0].length)),t.pos+=i[0].length,!0)},vg=zm,bat=be.has,wat=be.isValidEntityCode,bg=be.fromCodePoint,xat=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Eat=/^&([a-z][a-z0-9]{1,31});/i,Aat=function(t,n){var r,i,o,l=t.pos,c=t.posMax;if(t.src.charCodeAt(l)!==38)return!1;if(l+1<c){if(r=t.src.charCodeAt(l+1),r===35){if(o=t.src.slice(l).match(xat),o)return n||(i=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),t.pending+=wat(i)?bg(i):bg(65533)),t.pos+=o[0].length,!0}else if(o=t.src.slice(l).match(Eat),o&&bat(vg,o[1]))return n||(t.pending+=vg[o[1]]),t.pos+=o[0].length,!0}return n||(t.pending+="&"),t.pos++,!0};function wg(e,t){var n,r,i,o,l,c,f,d,g={},v=t.length;if(v){var S=0,E=-2,q=[];for(n=0;n<v;n++)if(i=t[n],q.push(0),(t[S].marker!==i.marker||E!==i.token-1)&&(S=n),E=i.token,i.length=i.length||0,!!i.close){for(g.hasOwnProperty(i.marker)||(g[i.marker]=[-1,-1,-1,-1,-1,-1]),l=g[i.marker][(i.open?3:0)+i.length%3],r=S-q[S]-1,c=r;r>l;r-=q[r]+1)if(o=t[r],o.marker===i.marker&&o.open&&o.end<0&&(f=!1,(o.close||i.open)&&(o.length+i.length)%3===0&&(o.length%3!==0||i.length%3!==0)&&(f=!0),!f)){d=r>0&&!t[r-1].open?q[r-1]+1:0,q[n]=n-r+d,q[r]=d,i.open=!1,o.end=n,o.close=!1,c=-1,E=-2;break}c!==-1&&(g[i.marker][(i.open?3:0)+(i.length||0)%3]=c)}}}var Sat=function(t){var n,r=t.tokens_meta,i=t.tokens_meta.length;for(wg(t,t.delimiters),n=0;n<i;n++)r[n]&&r[n].delimiters&&wg(t,r[n].delimiters)},kat=function(t){var n,r,i=0,o=t.tokens,l=t.tokens.length;for(n=r=0;n<l;n++)o[n].nesting<0&&i--,o[n].level=i,o[n].nesting>0&&i++,o[n].type==="text"&&n+1<l&&o[n+1].type==="text"?o[n+1].content=o[n].content+o[n+1].content:(n!==r&&(o[r]=o[n]),r++);n!==r&&(o.length=r)},Nf=Mf,xg=be.isWhiteSpace,Eg=be.isPunctChar,Ag=be.isMdAsciiPunct;function Oa(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1}Oa.prototype.pushPending=function(){var e=new Nf("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};Oa.prototype.push=function(e,t,n){this.pending&&this.pushPending();var r=new Nf(e,t,n),i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};Oa.prototype.scanDelims=function(e,t){var n=e,r,i,o,l,c,f,d,g,v,S=!0,E=!0,q=this.posMax,Q=this.src.charCodeAt(e);for(r=e>0?this.src.charCodeAt(e-1):32;n<q&&this.src.charCodeAt(n)===Q;)n++;return o=n-e,i=n<q?this.src.charCodeAt(n):32,d=Ag(r)||Eg(String.fromCharCode(r)),v=Ag(i)||Eg(String.fromCharCode(i)),f=xg(r),g=xg(i),g?S=!1:v&&(f||d||(S=!1)),f?E=!1:d&&(g||v||(E=!1)),t?(l=S,c=E):(l=S&&(!E||d),c=E&&(!S||v)),{can_open:l,can_close:c,length:o}};Oa.prototype.Token=Nf;var Cat=Oa,Sg=Pf,Dh=[["text",iat],["newline",oat],["escape",lat],["backticks",cat],["strikethrough",$c.tokenize],["emphasis",Nc.tokenize],["link",hat],["image",dat],["autolink",gat],["html_inline",vat],["entity",Aat]],Oh=[["balance_pairs",Sat],["strikethrough",$c.postProcess],["emphasis",Nc.postProcess],["text_collapse",kat]];function Pa(){var e;for(this.ruler=new Sg,e=0;e<Dh.length;e++)this.ruler.push(Dh[e][0],Dh[e][1]);for(this.ruler2=new Sg,e=0;e<Oh.length;e++)this.ruler2.push(Oh[e][0],Oh[e][1])}Pa.prototype.skipToken=function(e){var t,n,r=e.pos,i=this.ruler.getRules(""),o=i.length,l=e.md.options.maxNesting,c=e.cache;if(typeof c[r]<"u"){e.pos=c[r];return}if(e.level<l)for(n=0;n<o&&(e.level++,t=i[n](e,!0),e.level--,!t);n++);else e.pos=e.posMax;t||e.pos++,c[r]=e.pos};Pa.prototype.tokenize=function(e){for(var t,n,r=this.ruler.getRules(""),i=r.length,o=e.posMax,l=e.md.options.maxNesting;e.pos<o;){if(e.level<l)for(n=0;n<i&&(t=r[n](e,!1),!t);n++);if(t){if(e.pos>=o)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};Pa.prototype.parse=function(e,t,n,r){var i,o,l,c=new this.State(e,t,n,r);for(this.tokenize(c),o=this.ruler2.getRules(""),l=o.length,i=0;i<l;i++)o[i](c)};Pa.prototype.State=Cat;var Tat=Pa,Ph,kg;function Iat(){return kg||(kg=1,Ph=function(e){var t={};t.src_Any=Hm().source,t.src_Cc=Gm().source,t.src_Z=Wm().source,t.src_P=Of.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");var n="[><｜]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-]).|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]).|"+(e&&e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+").|;(?!"+t.src_ZCc+").|\\!+(?!"+t.src_ZCc+"|[!]).|\\?(?!"+t.src_ZCc+"|[?]).)+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}),Ph}function Jh(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function Fc(e){return Object.prototype.toString.call(e)}function Rat(e){return Fc(e)==="[object String]"}function Dat(e){return Fc(e)==="[object Object]"}function Oat(e){return Fc(e)==="[object RegExp]"}function Cg(e){return Fc(e)==="[object Function]"}function Pat(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var Jm={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Mat(e){return Object.keys(e||{}).reduce(function(t,n){return t||Jm.hasOwnProperty(n)},!1)}var Lat={"http:":{validate:function(e,t,n){var r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){var r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){var r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},$at="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Nat="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function Fat(e){e.__index__=-1,e.__text_cache__=""}function Vat(e){return function(t,n){var r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function Tg(){return function(e,t){t.normalize(e)}}function rc(e){var t=e.re=Iat()(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push($at),n.push(t.src_xn),t.src_tlds=n.join("|");function r(c){return c.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");var i=[];e.__compiled__={};function o(c,f){throw new Error('(LinkifyIt) Invalid schema "'+c+'": '+f)}Object.keys(e.__schemas__).forEach(function(c){var f=e.__schemas__[c];if(f!==null){var d={validate:null,link:null};if(e.__compiled__[c]=d,Dat(f)){Oat(f.validate)?d.validate=Vat(f.validate):Cg(f.validate)?d.validate=f.validate:o(c,f),Cg(f.normalize)?d.normalize=f.normalize:f.normalize?o(c,f):d.normalize=Tg();return}if(Rat(f)){i.push(c);return}o(c,f)}}),i.forEach(function(c){e.__compiled__[e.__schemas__[c]]&&(e.__compiled__[c].validate=e.__compiled__[e.__schemas__[c]].validate,e.__compiled__[c].normalize=e.__compiled__[e.__schemas__[c]].normalize)}),e.__compiled__[""]={validate:null,normalize:Tg()};var l=Object.keys(e.__compiled__).filter(function(c){return c.length>0&&e.__compiled__[c]}).map(Pat).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+l+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+l+")","ig"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),Fat(e)}function qat(e,t){var n=e.__index__,r=e.__last_index__,i=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=i,this.text=i,this.url=i}function Ig(e,t){var n=new qat(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function Ir(e,t){if(!(this instanceof Ir))return new Ir(e,t);t||Mat(e)&&(t=e,e={}),this.__opts__=Jh({},Jm,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Jh({},Lat,e),this.__compiled__={},this.__tlds__=Nat,this.__tlds_replaced__=!1,this.re={},rc(this)}Ir.prototype.add=function(t,n){return this.__schemas__[t]=n,rc(this),this};Ir.prototype.set=function(t){return this.__opts__=Jh(this.__opts__,t),this};Ir.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;var n,r,i,o,l,c,f,d,g;if(this.re.schema_test.test(t)){for(f=this.re.schema_search,f.lastIndex=0;(n=f.exec(t))!==null;)if(o=this.testSchemaAt(t,n[2],f.lastIndex),o){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(d=t.search(this.re.host_fuzzy_test),d>=0&&(this.__index__<0||d<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(l=r.index+r[1].length,(this.__index__<0||l<this.__index__)&&(this.__schema__="",this.__index__=l,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(g=t.indexOf("@"),g>=0&&(i=t.match(this.re.email_fuzzy))!==null&&(l=i.index+i[1].length,c=i.index+i[0].length,(this.__index__<0||l<this.__index__||l===this.__index__&&c>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=l,this.__last_index__=c))),this.__index__>=0};Ir.prototype.pretest=function(t){return this.re.pretest.test(t)};Ir.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};Ir.prototype.match=function(t){var n=0,r=[];this.__index__>=0&&this.__text_cache__===t&&(r.push(Ig(this,n)),n=this.__last_index__);for(var i=n?t.slice(n):t;this.test(i);)r.push(Ig(this,n)),i=i.slice(this.__last_index__),n+=this.__last_index__;return r.length?r:null};Ir.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,i,o){return r!==o[i-1]}).reverse(),rc(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,rc(this),this)};Ir.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Ir.prototype.onCompile=function(){};var Bat=Ir;const Uat={},zat=Object.freeze(Object.defineProperty({__proto__:null,default:Uat},Symbol.toStringTag,{value:"Module"})),Hat=IS(zat);var Gat={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Wat={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}},jat={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}},sa=be,Kat=Oc,Yat=eot,Qat=Aot,Zat=nat,Xat=Tat,Jat=Bat,_s=xo,t0=Hat,tlt={default:Gat,zero:Wat,commonmark:jat},elt=/^(vbscript|javascript|file|data):/,nlt=/^data:image\/(gif|png|jpeg|webp);/;function rlt(e){var t=e.trim().toLowerCase();return elt.test(t)?!!nlt.test(t):!0}var e0=["http:","https:","mailto:"];function ilt(e){var t=_s.parse(e,!0);if(t.hostname&&(!t.protocol||e0.indexOf(t.protocol)>=0))try{t.hostname=t0.toASCII(t.hostname)}catch{}return _s.encode(_s.format(t))}function slt(e){var t=_s.parse(e,!0);if(t.hostname&&(!t.protocol||e0.indexOf(t.protocol)>=0))try{t.hostname=t0.toUnicode(t.hostname)}catch{}return _s.decode(_s.format(t),_s.decode.defaultChars+"%")}function Rr(e,t){if(!(this instanceof Rr))return new Rr(e,t);t||sa.isString(e)||(t=e||{},e="default"),this.inline=new Xat,this.block=new Zat,this.core=new Qat,this.renderer=new Yat,this.linkify=new Jat,this.validateLink=rlt,this.normalizeLink=ilt,this.normalizeLinkText=slt,this.utils=sa,this.helpers=sa.assign({},Kat),this.options={},this.configure(e),t&&this.set(t)}Rr.prototype.set=function(e){return sa.assign(this.options,e),this};Rr.prototype.configure=function(e){var t=this,n;if(sa.isString(e)&&(n=e,e=tlt[n],!e))throw new Error('Wrong `markdown-it` preset "'+n+'", check name');if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(r){e.components[r].rules&&t[r].ruler.enableOnly(e.components[r].rules),e.components[r].rules2&&t[r].ruler2.enableOnly(e.components[r].rules2)}),this};Rr.prototype.enable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));var r=e.filter(function(i){return n.indexOf(i)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Rr.prototype.disable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));var r=e.filter(function(i){return n.indexOf(i)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Rr.prototype.use=function(e){var t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};Rr.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");var n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};Rr.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};Rr.prototype.parseInline=function(e,t){var n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};Rr.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};var olt=Rr,alt=olt;const llt=Vm(alt);var clt=RS({name:"VueMarkdown",props:{source:{type:String,required:!0},options:{type:Object,required:!1}},data:function(){return{md:null}},computed:{content:function(){var e,t=this.source;return(e=this.md)===null||e===void 0?void 0:e.render(t)}},created:function(){var e;this.md=new llt((e=this.options)!==null&&e!==void 0?e:{})},render:function(){return DS("div",{innerHTML:this.content})}});const fo=clt,ult={key:0},hlt=H("br",null,null,-1),flt=H("hr",null,null,-1),dlt=H("br",null,null,-1),plt={key:2,class:"modal br-pill-ns"},_lt={components:{VueMarkdown:fo},props:["config","instructions_open","toggle_instructions"],mounted(){$(".container").removeClass("container-extra-space"),this.config.prepend_instructions&&$(".container").addClass("container-extra-space")}},Rg=Object.assign(_lt,{__name:"Instructions",setup(e){return(t,n)=>(yt(),xt("main",null,[e.config.instructions&&e.config.prepend_instructions?(yt(),xt("section",ult,[sn(Jl(fo),{source:e.config.instructions,options:t.options,class:"mt0 mb0"},null,8,["source","options"]),hlt,flt,dlt])):ne("",!0),e.instructions_open?(yt(),xt("div",{key:1,class:"overlay",onClick:n[0]||(n[0]=(...r)=>e.toggle_instructions&&e.toggle_instructions(...r))})):ne("",!0),e.instructions_open?(yt(),xt("section",plt,[sn(Jl(fo),{source:e.config.instructions,options:t.options,class:"mt0 mb0"},null,8,["source","options"])])):ne("",!0)]))}}),glt={data(){return{source_html:""}},props:["hits_data","current_hit","edits_dict","selected_state","selected_edits_html","selected_edits","set_selected_edits","set_span_text","set_span_indices","set_span_category","remove_selected","lines","set_lines","handle_tokenization_rendering","process_edit_list","hasAnnotations","is_selected","get_selected_index","multi_select_enabled","render_sentence","click_span","hover_span","un_hover_span","hit_box_config","config"],watch:{current_hit(){this.process_source_html()},hits_data(){this.process_source_html()},set_span_text(){this.process_source_html()},selected_state(){this.process_source_html_with_selected_span(this.selected_state.source_category)},boundary_editing_mode(){this.process_source_html()},boundary_editing_edit:{handler(){this.process_source_html()},deep:!0}},methods:{process_source_html(){try{this.process_source_html_with_selected_span(null)}catch(e){this.source_html="",console.warn(e)}},process_source_html_with_selected_span(e){const t="input_idx",n="source_span",r=this.hits_data[this.current_hit-1].source;try{this.source_html=this.render_sentence(r,t,n,e)}catch(i){this.source_html="",console.warn(i)}},getAbsoluteOffset(e,t,n){let r=0;const i=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);let o;for(;o=i.nextNode();){if(o===t)return r+=n,r;r+=o.textContent.length}return r},select_source_html(e){if(!this.hit_box_config.enable_select_source_sentence)return;let t=$("input[name=edit_cotegory]:checked").val(),n=window.getSelection(),r=this.hits_data[this.current_hit-1].source,i=n.getRangeAt(0);const o=e.currentTarget;let l=this.getAbsoluteOffset(o,i.startContainer,i.startOffset),c=this.getAbsoluteOffset(o,i.endContainer,i.endOffset);if(l==c||!r.substring(l,c).trim()){this.process_source_html(null);return}if(n.anchorNode!=n.focusNode||n.anchorNode==null){this.process_source_html_with_selected_span(t);return}$("#source-sentence").addClass(`select-color-${t}`);let f=[" ",`
`];if(this.config.tokenization&&this.config.tokenization=="tokenized"&&(f=["Ġ"," ",`
`]),!this.config.tokenization||this.config.tokenization!="char"){for(c-=1;f.includes(r.charAt(l));)l+=1;for(;l-1>=0&&!f.includes(r.charAt(l-1));)l-=1;for(;f.includes(r.charAt(c));)c-=1;for(;c+1<=r.length-1&&!f.includes(r.charAt(c+1));)c+=1;c+=1}if(l>=c){this.process_source_html_with_selected_span(t);return}let d=`<span class="selected-span-text bg-${t}-light"> ${r.substring(l,c)} </span>`;if(this.set_span_text(d,"source"),this.hit_box_config.enable_multi_select_source_sentence){let g=this.selected_state.source_idx;(g==null||g.length==0)&&(g=[]),g.push([l,c]),this.set_span_indices(g,"source");let v="";for(let S=0;S<g.length;S++){let[E,q]=g[S];v+=`
                    <span class="selected-span-text bg-${t}-light"> 
                        <span onclick="removeSelected('${t}', ${E}, ${q})" class="hover-white black br-pill mr1 pointer">✘</span>
                            ${r.substring(E,q)} </span>&nbsp&nbsp`}this.set_span_text(v,"source")}else this.set_span_indices([l,c],"source");this.set_span_category(t,"source"),this.process_source_html_with_selected_span(t)},deselect_source_html(){this.hit_box_config.enable_select_source_sentence&&this.process_source_html()}},computed:{get_source_html(){return{template:`<pre @mousedown='deselect_source_html' @mouseup='select_source_html' id="source-sentence" class="f4 lh-paras sans-serif selection-area">${this.source_html}</pre>`,methods:{select_source_html:this.select_source_html,deselect_source_html:this.deselect_source_html,remove_selected:this.remove_selected,hover_span:this.hover_span,un_hover_span:this.un_hover_span,click_span:this.click_span,handle_tokenization_rendering:this.handle_tokenization_rendering},mounted(){this.handle_tokenization_rendering()}}}}},mlt=Object.assign(glt,{__name:"SourceSent",setup(e){return(t,n)=>(yt(),Tc(Df(t.get_source_html)))}}),ylt={data(){return{target_html:""}},props:["hits_data","current_hit","edits_dict","selected_edits_html","selected_edits","set_selected_edits","selected_state","set_span_text","set_span_indices","set_span_category","remove_selected","lines","set_lines","handle_tokenization_rendering","process_edit_list","hasAnnotations","is_selected","get_selected_index","multi_select_enabled","render_sentence","click_span","hover_span","un_hover_span","hit_box_config","config","boundary_editing_mode","boundary_editing_edit"],watch:{current_hit(){this.process_target_html()},hits_data(){this.process_target_html()},set_span_text(){this.process_target_html()},selected_state:{handler(){this.process_target_html_with_selected_span(this.selected_state.target_category)},deep:!0},"selected_state.target_idx":{handler(){this.process_target_html_with_selected_span(this.selected_state.target_category)},deep:!0},boundary_editing_mode(){this.process_target_html()},boundary_editing_edit:{handler(){this.process_target_html()},deep:!0}},methods:{process_target_html(){const e="output_idx",t="target_span",n=this.hits_data[this.current_hit-1].target;try{this.target_html=this.render_sentence(n,e,t,null)}catch(r){this.target_html="",console.warn(r)}},process_target_html_with_selected_span(e){const t="output_idx",n="target_span",r=this.hits_data[this.current_hit-1].target;try{this.target_html=this.render_sentence(r,t,n,e)}catch(i){this.target_html="",console.warn(i)}},getAbsoluteOffset(e,t,n){let r=0;const i=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);let o;for(;o=i.nextNode();){if(o===t)return r+=n,r;r+=o.textContent.length}return r},handle_boundary_selection(e){let t=window.getSelection(),n=this.hits_data[this.current_hit-1].target,r=t.getRangeAt(0);const i=e.currentTarget;let o=this.getAbsoluteOffset(i,r.startContainer,r.startOffset),l=this.getAbsoluteOffset(i,r.endContainer,r.endOffset);if(o==l||!n.substring(o,l).trim())return;const{category:c,multi:f}=this.boundary_editing_edit;let d=[" ",`
`];if(this.config.tokenization&&this.config.tokenization=="tokenized"&&(d=["Ġ"," ",`
`]),!this.config.tokenization||this.config.tokenization!="char"){for(l-=1;d.includes(n.charAt(o));)o+=1;for(;o-1>=0&&!d.includes(n.charAt(o-1));)o-=1;for(;d.includes(n.charAt(l));)l-=1;for(;l+1<=n.length-1&&!d.includes(n.charAt(l+1));)l+=1;l+=1}if(!(o>=l)){if(f&&this.hit_box_config.enable_multi_select_target_sentence){let v=[...this.selected_state.target_idx||[],[o,l]];this.set_span_indices(v,"target");let S="";for(let E=0;E<v.length;E++){let[q,Q]=v[E];S+=`<span class="selected-span-text" style="background-color: rgb(144, 238, 144); padding: 4px; border-radius: 3px;"> 
                        <span onclick="removeBoundarySpan('${c}',${q},${Q})" class="hover-white black br-pill mr1 pointer">✘</span>
                            ${n.substring(q,Q)} </span>&nbsp&nbsp`}this.set_span_text(S,"target")}else{this.set_span_indices([[o,l]],"target");let g=`<span class="selected-span-text boundary-edit-selection" style="background-color: rgb(144, 238, 144); padding: 4px; border-radius: 3px;"> ${n.substring(o,l)} </span>`;this.set_span_text(g,"target")}this.set_span_category(c,"target"),this.updateBoundaryHighlighting(c),$("#target-sentence").addClass(`boundary-selected-${c}`)}},updateBoundaryHighlighting(e){let t=this.selected_state.target_idx||[];if(t.length>0&&typeof t[0]=="number"&&(t=[t]),$("#target-sentence").find(".boundary-selected-span").contents().unwrap(),t.length===0){this.boundary_editing_mode||$("#target-sentence").find(`.${e}`).each(function(){$(this).hasClass(`border-${e}-light`)?$(this).addClass(`bg-${e}-light`):$(this).addClass(`bg-${e}`)});return}this.$nextTick(()=>{let n=document.getElementById("target-sentence");if(!n)return;this.boundary_editing_mode||$("#target-sentence").find(`.${e}`).each(function(){$(this).hasClass(`border-${e}-light`)?$(this).addClass(`bg-${e}-light`):$(this).addClass(`bg-${e}`)});const r=[...t].sort((i,o)=>i[0]-o[0]);this.applyGreenHighlighting(n,r)})},applyGreenHighlighting(e,t){this.hits_data[this.current_hit-1].target;for(let n=t.length-1;n>=0;n--){const[r,i]=t[n];this.wrapTextRange(e,r,i)}},wrapTextRange(e,t,n){let r=0,i=null,o=null,l=0,c=0;const f=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);let d;for(;d=f.nextNode();){const g=d.textContent.length,v=r,S=r+g;if(!i&&t>=v&&t<S&&(i=d,l=t-v),!o&&n>v&&n<=S&&(o=d,c=n-v),r+=g,i&&o)break}if(!(!i||!o))try{const g=document.createRange();g.setStart(i,l),g.setEnd(o,c);const v=document.createElement("span");v.className="boundary-selected-span",v.style.backgroundColor="#90EE90";try{g.surroundContents(v)}catch{const E=g.extractContents();v.appendChild(E),g.insertNode(v)}}catch(g){console.warn("Could not apply green highlighting:",g)}},select_target_html(e){if(this.boundary_editing_mode)return this.handle_boundary_selection(e);if(!this.hit_box_config.enable_select_target_sentence)return;let t=$("input[name=edit_cotegory]:checked").val(),n=window.getSelection(),r=this.hits_data[this.current_hit-1].target,i=n.getRangeAt(0);const o=e.currentTarget;let l=this.getAbsoluteOffset(o,i.startContainer,i.startOffset),c=this.getAbsoluteOffset(o,i.endContainer,i.endOffset);if(l==c||!r.substring(l,c).trim()){this.process_target_html(null);return}$("#target-sentence").addClass(`select-color-${t}`);let f=[" ",`
`];if(this.config.tokenization&&this.config.tokenization=="tokenized"&&(f=["Ġ"," ",`
`]),!this.config.tokenization||this.config.tokenization!="char"){for(c-=1;f.includes(r.charAt(l));)l+=1;for(;l-1>=0&&!f.includes(r.charAt(l-1));)l-=1;for(;f.includes(r.charAt(c));)c-=1;for(;c+1<=r.length-1&&!f.includes(r.charAt(c+1));)c+=1;c+=1}if(l>=c){this.process_target_html_with_selected_span(t);return}let d=`<span class="selected-span-text bg-${t}-light"> ${r.substring(l,c)} </span>`;if(this.set_span_text(d,"target"),this.hit_box_config.enable_multi_select_target_sentence){let g=this.selected_state.target_idx;(g==null||g.length==0)&&(g=[]),g.push([l,c]),this.set_span_indices(g,"target");let v="";for(let S=0;S<g.length;S++){let[E,q]=g[S];v+=`<span class="selected-span-text bg-${t}-light"> 
                        <span onclick="removeSelected('${t}',${E},${q})" class="hover-white black br-pill mr1 pointer">✘</span>
                            ${r.substring(E,q)} </span>&nbsp&nbsp`}this.set_span_text(v,"target")}else this.set_span_indices([l,c],"target");this.set_span_category(t,"target"),this.process_target_html_with_selected_span(t)},deselect_target_html(e){this.hit_box_config.enable_select_target_sentence&&this.process_target_html()}},computed:{get_target_html(){let e="f4 lh-paras sans-serif selection-area",t="";return this.boundary_editing_mode&&this.boundary_editing_edit&&(e+=` boundary-editing-${this.boundary_editing_edit.category} boundary-editing-active`,t=' data-boundary-editing="true"'),{template:`<pre @mousedown='deselect_target_html' @mouseup='select_target_html' id="target-sentence" class="${e}"${t}>${this.target_html}</pre> `,methods:{select_target_html:this.select_target_html,deselect_target_html:this.deselect_target_html,remove_selected:this.remove_selected,hover_span:this.hover_span,un_hover_span:this.un_hover_span,click_span:this.click_span,handle_tokenization_rendering:this.handle_tokenization_rendering},mounted(){this.handle_tokenization_rendering()}}}}},vlt=Object.assign(ylt,{__name:"TargetSent",setup(e){return(t,n)=>(yt(),Tc(Df(t.get_target_html)))}}),blt={key:0,class:"f4 lh-paras context-span"},wlt={key:1,class:"f4 lh-paras context-span"},xlt={key:0,class:"f4 lh-paras context-span"},Elt={key:1,class:"f4 lh-paras context-span"},Alt={data(){return{}},props:["hits_data","current_hit","edits_dict","selected_edits_html","selected_edits","set_selected_edits","set_span_text","set_span_indices","set_span_category","remove_selected","lines","set_lines","set_edit_html","hit_box_config","config","sent_type","selected_state","boundary_editing_mode","boundary_editing_edit"],methods:{process_edit_list(e,t){return e=e.map(n=>{let r=[];if(n.hasOwnProperty("constituent_edits")){for(const i of n.constituent_edits)if(i.hasOwnProperty(t))for(const o of i[t])r.push({[t]:o,category:n.category,child_category:i.category,id:n.id,child_id:i.id,annotation:n.annotation})}if(n.hasOwnProperty(t))for(const i of n[t])r.push({[t]:i,category:n.category,id:n.id,annotation:n.annotation});return r}),e=[].concat(...e),e.sort(function(n,r){return n[t][0]-r[t][0]||n[t][1]-r[t][1]}),e},hasAnnotations(e){return"annotation"in e&&e.annotation!=null&&e.annotation!=""||this.config.disable&&Object.values(this.config.disable).includes("annotation")},is_selected(e,t,n){let r;const i=this.get_selected_index(t);return this.multi_select_enabled(t)?r=i.some(o=>e[t][0]==o[0]&&e[t][1]==o[1]&&e.category==n):r=e[t][0]==i[0]&&e[t][1]==i[1]&&e.category==n,r},get_selected_index(e){if(e=="input_idx")return ze.cloneDeep(this.selected_state.source_idx);if(e=="output_idx")return ze.cloneDeep(this.selected_state.target_idx)},multi_select_enabled(e){if(e=="input_idx")return this.hit_box_config.enable_multi_select_source_sentence;if(e=="output_idx")return this.hit_box_config.enable_multi_select_target_sentence},hover_span(e){if(this.boundary_editing_mode||$(".quality-selection").is(":visible"))return;const t=e.target.dataset.category,n=e.target.dataset.id,r=n.split("-")[1];let i,o;e.target.classList.contains(`border-${t}-light`)?(i=`bg-${t}-light`,o="rgba(173, 197, 250, 1.0)"):(i=`bg-${t}`,o="rgba(33, 134, 235, 1.0)");let l=$(`.${t}[data-id=${n}]`),c=$(`.${t}_below[data-id=${n}]`);this.boundary_editing_mode||(l.addClass(`white ${i}`),c.addClass(`white ${i}`)),c.removeClass(`txt-${t} txt-${t}-light`),$(`.edit-container[data-edit-id='${n}']`).css("background-color","#e0f2fe");try{t=="substitution"&&(this.lines[t][r].color=o)}catch{}},un_hover_span(e){if(this.boundary_editing_mode||$(".quality-selection").is(":visible"))return;const t=e.target.dataset.category,n=e.target.dataset.id,r=n.split("-")[1];let i,o;e.target.classList.contains(`border-${t}-light`)?(i="rgba(173, 197, 250, 0.4)",o=`txt-${t}-light`):(i="rgba(33, 134, 235, 0.46)",o=`txt-${t}`);let l=$(`.${t}[data-id=${n}]`),c=$(`.${t}_below[data-id=${n}]`);c.addClass(o),this.boundary_editing_mode||(l.removeClass(`white bg-${t} bg-${t}-light`),c.removeClass(`white bg-${t} bg-${t}-light`)),$(`.edit-container[data-edit-id='${n}']`).css("background-color","");try{t=="substitution"&&(this.lines[t][r].color=i)}catch{}},getEditConfig(e){return this.config.edits.find(function(t){return t.name===e})},click_span(e){this.edits_dict;const t=e.target.dataset.category,n=e.target.dataset.id,r=n.split("-")[1];if($(".quality-selection").is(":visible")){if(this.getEditConfig(t).type&&this.getEditConfig(t).type=="composite")return;const i=this.hits_data[this.current_hit-1].edits.find(function(f){return f.category===t&&f.id===parseInt(r)}),o=this.selected_edits.find(function(f){return f.category===t&&f.id===parseInt(r)})!==void 0;if($("input[name=edit_cotegory]:checked").val()=="split"){let f=parseInt(r)+1;e.target.classList.contains("split-sign")&&(f==1?this.selected_state.selected_split="the 1st split":f==2?this.selected_state.selected_split="the 2nd split":f==3?this.selected_state.selected_split="the 3rd split":this.selected_state.selected_split=`the ${f}th split`,this.selected_state.split_id=parseInt(r))}let l=ze.cloneDeep(this.selected_edits);o?l=l.filter(f=>f.category!==t||f.id!==parseInt(r)):l.push(i);let c="";for(const f of l)c+=this.render_selected_constituent_edit(f);this.set_selected_edits(l),this.set_edit_html(c)}else $(`.annotation-icon[data-id=${n}]`).click()},render_selected_constituent_edit(e){let t="";const n=e.category;if(this.getEditConfig(n).type=="multi_span"){t+=`<span class="edit-type txt-${n}">substitute </span>`;let r=e.input_idx;for(let o=0;o<r.length;o++)o!=0&&(t+=`<span class="edit-type txt-${n}"> and </span>`),t+=`<span class="pa1 edit-text br-pill-ns txt-${n} border-${n}-all">
                        &nbsp${this.hits_data[this.current_hit-1].source.substring(r[o][0],r[o][1])}&nbsp</span>`;t+=`<span class="edit-type txt-${n}"> with </span>`;let i=e.output_idx;for(let o=0;o<i.length;o++)o!=0&&(t+=`<span class="edit-type txt-${n}"> and </span>`),t+=`<span class="pa1 edit-text br-pill-ns txt-${n} border-${n}-all">
                        &nbsp${this.hits_data[this.current_hit-1].target.substring(i[o][0],i[o][1])}&nbsp</span>`;t+=",&nbsp&nbsp"}else{if(e.hasOwnProperty("input_idx")){let r=e.input_idx[0];t+=`<span class="edit-type txt-${n}">${n} </span>
                        <span class="pa1 edit-text br-pill-ns txt-${n} border-${n}-all">
                            &nbsp${this.hits_data[this.current_hit-1].source.substring(r[0],r[1])}&nbsp</span>,&nbsp&nbsp`}if(e.hasOwnProperty("output_idx")){let r=e.output_idx[0];t+=`<span class="edit-type txt-${n}">${n} </span>
                        <span class="pa1 edit-text br-pill-ns txt-${n} border-${n}-all">
                            &nbsp${this.hits_data[this.current_hit-1].target.substring(r[0],r[1])}&nbsp</span>,&nbsp&nbsp`}}return t},handle_tokenization_rendering(){this.config.tokenization&&this.config.tokenization=="tokenized"?$("span#source-sentence, span#target-sentence, .edit-text, .selected-span-text").addClass("hide-tokenization-chars"):$("span#source-sentence, span#target-sentence, .edit-text, .selected-span-text").removeClass("hide-tokenization-chars")},_buildSpanOpenTag(e,t,n,r,i){let o=this.hasAnnotations(e)?"":"-light",l=e.hasOwnProperty("child_category")?`data-childcategory=${e.child_category} data-childid=${e.child_id}`:"";if(e.category==="focus-area")return'<span class="focus-area-highlight">';if(i&&this.is_selected(e,t,r))return`<span @mouseover.stop @mouseout.stop class="bg-${e.category}-light span">`;{let c="";return this.boundary_editing_mode&&this.boundary_editing_edit&&this.boundary_editing_edit.category===e.category&&this.boundary_editing_edit.id===e.id&&(c=" boundary-editing-highlight"),`<span @click="click_span" @mouseover="hover_span" @mouseout="un_hover_span" class="${e.category} border-${e.category}${o} pointer span ${n}${c}" data-category="${e.category}" data-id="${e.category}-${e.id}" ${l}>`}},render_sentence(e,t,n,r){const i=this.hits_data[this.current_hit-1];let o=ze.cloneDeep(i.edits);const l=r!=null&&r!="",f=i[t==="input_idx"?"source_focus_areas":"target_focus_areas"];if(f&&Array.isArray(f)&&f.forEach((E,q)=>{o.push({category:"focus-area",id:`focus-${t}-${q}`,[t]:[E]})}),l){const E=this.get_selected_index(t);if(this.multi_select_enabled(t)&&Array.isArray(E[0]))for(let q=0;q<E.length;q++)o.push({category:r,[t]:[E[q]]});else o.push({category:r,[t]:[E]})}const d=this.process_edit_list(o,t);if(d.length===0)return e;const g=new Set([0,e.length]);d.forEach(E=>{g.add(E[t][0]),g.add(E[t][1])});const v=Array.from(g).sort((E,q)=>E-q);let S="";for(let E=0;E<v.length-1;E++){const q=v[E],Q=v[E+1];if(q>=Q)continue;const tt=e.substring(q,Q),ut=d.filter(gt=>gt[t][0]<=q&&gt[t][1]>=Q);ut.sort((gt,Pt)=>{const Vt=gt[t][0],pt=Pt[t][0];if(Vt!==pt)return pt-Vt;const Kt=gt[t][1],ye=Pt[t][1];return Kt-ye});let nt=tt;for(const gt of ut)nt=`${this._buildSpanOpenTag(gt,t,n,r,l)}${nt}</span>`;S+=nt}return S}}},Dg=Object.assign(Alt,{__name:"Sent",setup(e){return(t,n)=>(yt(),xt("div",null,[e.sent_type==="source"?(yt(),xt(qr,{key:0},[e.hits_data&&e.hits_data[e.current_hit-1]&&e.hits_data[e.current_hit-1].source_context_before?(yt(),xt("span",blt,Tt(e.hits_data[e.current_hit-1].source_context_before)+"  ",1)):ne("",!0),sn(mlt,dr({sent_type:"source"},t.$props,{remove_selected:e.remove_selected,process_edit_list:t.process_edit_list,handle_tokenization_rendering:t.handle_tokenization_rendering,hasAnnotations:t.hasAnnotations,is_selected:t.is_selected,get_selected_index:t.get_selected_index,multi_select_enabled:t.multi_select_enabled,render_sentence:t.render_sentence,click_span:t.click_span,hover_span:t.hover_span,un_hover_span:t.un_hover_span,config:e.config}),null,16,["remove_selected","process_edit_list","handle_tokenization_rendering","hasAnnotations","is_selected","get_selected_index","multi_select_enabled","render_sentence","click_span","hover_span","un_hover_span","config"]),e.hits_data&&e.hits_data[e.current_hit-1]&&e.hits_data[e.current_hit-1].source_context_after?(yt(),xt("span",wlt,"  "+Tt(e.hits_data[e.current_hit-1].source_context_after),1)):ne("",!0)],64)):e.sent_type==="target"?(yt(),xt(qr,{key:1},[e.hits_data&&e.hits_data[e.current_hit-1]&&e.hits_data[e.current_hit-1].target_context_before?(yt(),xt("span",xlt,Tt(e.hits_data[e.current_hit-1].target_context_before)+"  ",1)):ne("",!0),sn(vlt,dr({sent_type:"target"},t.$props,{remove_selected:e.remove_selected,process_edit_list:t.process_edit_list,handle_tokenization_rendering:t.handle_tokenization_rendering,hasAnnotations:t.hasAnnotations,is_selected:t.is_selected,get_selected_index:t.get_selected_index,multi_select_enabled:t.multi_select_enabled,render_sentence:t.render_sentence,click_span:t.click_span,hover_span:t.hover_span,un_hover_span:t.un_hover_span,config:e.config}),null,16,["remove_selected","process_edit_list","handle_tokenization_rendering","hasAnnotations","is_selected","get_selected_index","multi_select_enabled","render_sentence","click_span","hover_span","un_hover_span","config"]),e.hits_data&&e.hits_data[e.current_hit-1]&&e.hits_data[e.current_hit-1].target_context_after?(yt(),xt("span",Elt,"  "+Tt(e.hits_data[e.current_hit-1].target_context_after),1)):ne("",!0)],64)):ne("",!0)]))}});const Slt={props:["hits_data","current_hit","config"],computed:{currentChecklistItem(){var e;return!this.hits_data||!this.hits_data[this.current_hit-1]?null:(e=this.hits_data[this.current_hit-1].metadata)==null?void 0:e.checklist_item},checklistDefinitions(){return{"Filing Date":"The date the case was initially filed with the court","Cause of Action":"e.g., a statute (e.g., 42 USC 1983) or a case (e.g., Ex Parte Young)","Statutory or Constitutional Basis for the Case":"A case can either be based on a statute or a provision of the Constitution. For constitutional cases, refer to the specific clause and amendment (e.g., 'the plaintiffs alleged violations of the Fourteenth Amendment's Equal Protection Clause')","Remedy Sought":"e.g., declaratory judgment, injunctive relief, monetary damages","Type of Counsel":"Private, legal services, ACLU, etc.","First and Last name of Judge":"e.g., Judge John Smith","All Reported Opinions Cited with Shortened Bluebook Citation":"Use shortened Bluebook citation format (e.g., '2020 WL 4218003'). No need to include case name, court, or date unless helpful","Class Action or Individual Plaintiffs":"If there are class action plaintiffs the summary should say it's a class action; if there are individual plaintiffs it can just describe the plaintiffs","Related Cases Listed by Their Case Code Number":"Other cases referenced or connected to this case","How Long Decrees will Last":"Duration or expiration date of court orders","Date of Settlement":"When the settlement agreement was reached","How Long Settlement will Last":"Duration or expiration date of settlement terms","Whether the Settlement is Court-enforced or Not":"If the court retains jurisdiction to enforce the settlement","Name of the Monitor":"Court-appointed monitor or special master overseeing compliance",Appeal:"Whether the case was appealed, to which court, and the result","Who are the Parties":"Use specific terms like 'The city' or 'The parents' rather than general terms like 'The defendant' or 'The plaintiffs'","Consolidated Cases Noted":"Cases that were combined with this case for joint proceedings","Dates of All Decrees":"When court orders or decrees were issued","Factual Basis of Case":"The underlying facts and evidence supporting the legal claims","Note Important Filings":"Note motions for temporary restraining orders or preliminary injunctions, motions to dismiss, motions for summary judgment, etc.","Significant Terms of Decrees":"The substance of what the judge orders the defendants to do","Significant Terms of Settlement":"The substance of what the defendants agree to do","Monitor Reports":"Summary of monitor's findings on compliance with court orders, including which terms are being complied with",Trials:"Note if the case went to trial, including trial dates and outcomes","Court Rulings":"Rulings on motions to dismiss, summary judgment, preliminary injunctions, class certification, and other significant filings","Disputes Over Settlement Enforcement":"Any subsequent disputes about compliance with settlement terms"}},currentDefinition(){return this.currentChecklistItem?this.checklistDefinitions[this.currentChecklistItem]:null},isLegalChecklistTask(){var e;return((e=this.config)==null?void 0:e.template_name)==="legal_checklist_extraction"||this.currentChecklistItem!==null}}},n0=e=>(OS("data-v-686fd865"),e=e(),PS(),e),klt={key:0,class:"checklist-definition ba b--black-20 br2 pa3 mb3 bg-light-gray"},Clt={class:"f4 b mb2"},Tlt=n0(()=>H("i",{class:"fa fa-clipboard-check mr2"},null,-1)),Ilt={class:"dark-blue"},Rlt={class:"f5 lh-copy"},Dlt=n0(()=>H("strong",null,"Definition:",-1));function Olt(e,t,n,r,i,o){return o.isLegalChecklistTask&&o.currentChecklistItem?(yt(),xt("div",klt,[H("div",Clt,[Tlt,ke(" Current Checklist Item: "),H("span",Ilt,Tt(o.currentChecklistItem),1)]),H("div",Rlt,[Dlt,ke(" "+Tt(o.currentDefinition||"Definition not available"),1)])])):ne("",!0)}const r0=qm(Slt,[["render",Olt],["__scopeId","data-v-686fd865"]]);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Plt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=e[n++],l=e[n++],c=e[n++],f=((i&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;t[r++]=String.fromCharCode(55296+(f>>10)),t[r++]=String.fromCharCode(56320+(f&1023))}else{const o=e[n++],l=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return t.join("")},s0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const o=e[i],l=i+1<e.length,c=l?e[i+1]:0,f=i+2<e.length,d=f?e[i+2]:0,g=o>>2,v=(o&3)<<4|c>>4;let S=(c&15)<<2|d>>6,E=d&63;f||(E=64,l||(S=64)),r.push(n[g],n[v],n[S],n[E])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i0(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Plt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const o=n[e.charAt(i++)],c=i<e.length?n[e.charAt(i)]:0;++i;const d=i<e.length?n[e.charAt(i)]:64;++i;const v=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||c==null||d==null||v==null)throw new Mlt;const S=o<<2|c>>4;if(r.push(S),d!==64){const E=c<<4&240|d>>2;if(r.push(E),v!==64){const q=d<<6&192|v;r.push(q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Mlt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Llt=function(e){const t=i0(e);return s0.encodeByteArray(t,!0)},ic=function(e){return Llt(e).replace(/\./g,"")},$lt=function(e){try{return s0.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nlt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Flt=()=>Nlt().__FIREBASE_DEFAULTS__,Vlt=()=>{if(typeof process>"u"||typeof process.env>"u")return;const e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},qlt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&$lt(e[1]);return t&&JSON.parse(t)},o0=()=>{try{return Flt()||Vlt()||qlt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Blt=e=>{var t,n;return(n=(t=o0())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Ult=e=>{const t=Blt(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},a0=()=>{var e;return(e=o0())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zlt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hlt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e),c="";return[ic(JSON.stringify(n)),ic(JSON.stringify(l)),c].join(".")}function Glt(){try{return typeof indexedDB=="object"}catch{return!1}}function Wlt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;t(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jlt="FirebaseError";class So extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=jlt,Object.setPrototypeOf(this,So.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,l0.prototype.create)}}class l0{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],l=o?Klt(o,r):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new So(i,c,r)}}function Klt(e,t){return e.replace(Ylt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const Ylt=/\{\$([^}]+)}/g;function tf(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const o=e[i],l=t[i];if(Og(o)&&Og(l)){if(!tf(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Og(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(e){return e&&e._delegate?e._delegate:e}class fa{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qlt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new zlt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Xlt(t))try{this.getOrInitializeService({instanceIdentifier:ps})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=ps){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ps){return this.instances.has(t)}getOptions(t=ps){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&t(l,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Zlt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=ps){return this.component?this.component.multipleInstances?t:ps:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Zlt(e){return e===ps?void 0:e}function Xlt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jlt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Qlt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(_e||(_e={}));const tct={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},ect=_e.INFO,nct={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},rct=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=nct[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class c0{constructor(t){this.name=t,this._logLevel=ect,this._logHandler=rct,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in _e))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?tct[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...t),this._logHandler(this,_e.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...t),this._logHandler(this,_e.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...t),this._logHandler(this,_e.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...t),this._logHandler(this,_e.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...t),this._logHandler(this,_e.ERROR,...t)}}const ict=(e,t)=>t.some(n=>e instanceof n);let Pg,Mg;function sct(){return Pg||(Pg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oct(){return Mg||(Mg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const u0=new WeakMap,ef=new WeakMap,h0=new WeakMap,Mh=new WeakMap,Ff=new WeakMap;function act(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",l)},o=()=>{n(zi(e.result)),i()},l=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",l)});return t.then(n=>{n instanceof IDBCursor&&u0.set(n,e)}).catch(()=>{}),Ff.set(t,e),t}function lct(e){if(ef.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",l),e.removeEventListener("abort",l)},o=()=>{n(),i()},l=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",l),e.addEventListener("abort",l)});ef.set(e,t)}let nf={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ef.get(e);if(t==="objectStoreNames")return e.objectStoreNames||h0.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zi(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function cct(e){nf=e(nf)}function uct(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Lh(this),t,...n);return h0.set(r,t.sort?t.sort():[t]),zi(r)}:oct().includes(e)?function(...t){return e.apply(Lh(this),t),zi(u0.get(this))}:function(...t){return zi(e.apply(Lh(this),t))}}function hct(e){return typeof e=="function"?uct(e):(e instanceof IDBTransaction&&lct(e),ict(e,sct())?new Proxy(e,nf):e)}function zi(e){if(e instanceof IDBRequest)return act(e);if(Mh.has(e))return Mh.get(e);const t=hct(e);return t!==e&&(Mh.set(e,t),Ff.set(t,e)),t}const Lh=e=>Ff.get(e);function fct(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(e,t),c=zi(l);return r&&l.addEventListener("upgradeneeded",f=>{r(zi(l.result),f.oldVersion,f.newVersion,zi(l.transaction),f)}),n&&l.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),c.then(f=>{o&&f.addEventListener("close",()=>o()),i&&f.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const dct=["get","getKey","getAll","getAllKeys","count"],pct=["put","add","delete","clear"],$h=new Map;function Lg(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if($h.get(t))return $h.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=pct.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||dct.includes(n)))return;const o=async function(l,...c){const f=this.transaction(l,i?"readwrite":"readonly");let d=f.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&f.done]))[0]};return $h.set(t,o),o}cct(e=>({...e,get:(t,n,r)=>Lg(t,n)||e.get(t,n,r),has:(t,n)=>!!Lg(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ct{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gct(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function gct(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const rf="@firebase/app",$g="0.9.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new c0("@firebase/app"),mct="@firebase/app-compat",yct="@firebase/analytics-compat",vct="@firebase/analytics",bct="@firebase/app-check-compat",wct="@firebase/app-check",xct="@firebase/auth",Ect="@firebase/auth-compat",Act="@firebase/database",Sct="@firebase/database-compat",kct="@firebase/functions",Cct="@firebase/functions-compat",Tct="@firebase/installations",Ict="@firebase/installations-compat",Rct="@firebase/messaging",Dct="@firebase/messaging-compat",Oct="@firebase/performance",Pct="@firebase/performance-compat",Mct="@firebase/remote-config",Lct="@firebase/remote-config-compat",$ct="@firebase/storage",Nct="@firebase/storage-compat",Fct="@firebase/firestore",Vct="@firebase/firestore-compat",qct="firebase",Bct="10.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="[DEFAULT]",Uct={[rf]:"fire-core",[mct]:"fire-core-compat",[vct]:"fire-analytics",[yct]:"fire-analytics-compat",[wct]:"fire-app-check",[bct]:"fire-app-check-compat",[xct]:"fire-auth",[Ect]:"fire-auth-compat",[Act]:"fire-rtdb",[Sct]:"fire-rtdb-compat",[kct]:"fire-fn",[Cct]:"fire-fn-compat",[Tct]:"fire-iid",[Ict]:"fire-iid-compat",[Rct]:"fire-fcm",[Dct]:"fire-fcm-compat",[Oct]:"fire-perf",[Pct]:"fire-perf-compat",[Mct]:"fire-rc",[Lct]:"fire-rc-compat",[$ct]:"fire-gcs",[Nct]:"fire-gcs-compat",[Fct]:"fire-fst",[Vct]:"fire-fst-compat","fire-js":"fire-js",[qct]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=new Map,of=new Map;function zct(e,t){try{e.container.addComponent(t)}catch(n){Ss.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function oc(e){const t=e.name;if(of.has(t))return Ss.debug(`There were multiple attempts to register component ${t}.`),!1;of.set(t,e);for(const n of sc.values())zct(n,e);return!0}function Hct(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gct={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Hi=new l0("app","Firebase",Gct);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wct{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Hi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jct=Bct;function f0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:sf,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw Hi.create("bad-app-name",{appName:String(i)});if(n||(n=a0()),!n)throw Hi.create("no-options");const o=sc.get(i);if(o){if(tf(n,o.options)&&tf(r,o.config))return o;throw Hi.create("duplicate-app",{appName:i})}const l=new Jlt(i);for(const f of of.values())l.addComponent(f);const c=new Wct(n,r,l);return sc.set(i,c),c}function Kct(e=sf){const t=sc.get(e);if(!t&&e===sf&&a0())return f0();if(!t)throw Hi.create("no-app",{appName:e});return t}function co(e,t,n){var r;let i=(r=Uct[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),l=t.match(/\s|\//);if(o||l){const c=[`Unable to register library "${i}" with version "${t}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ss.warn(c.join(" "));return}oc(new fa(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yct="firebase-heartbeat-database",Qct=1,da="firebase-heartbeat-store";let Nh=null;function d0(){return Nh||(Nh=fct(Yct,Qct,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(da)}}}).catch(e=>{throw Hi.create("idb-open",{originalErrorMessage:e.message})})),Nh}async function Zct(e){try{return await(await d0()).transaction(da).objectStore(da).get(p0(e))}catch(t){if(t instanceof So)Ss.warn(t.message);else{const n=Hi.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ss.warn(n.message)}}}async function Ng(e,t){try{const r=(await d0()).transaction(da,"readwrite");await r.objectStore(da).put(t,p0(e)),await r.done}catch(n){if(n instanceof So)Ss.warn(n.message);else{const r=Hi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ss.warn(r.message)}}}function p0(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xct=1024,Jct=30*24*60*60*1e3;class tut{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nut(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Fg();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const o=new Date(i.date).valueOf();return Date.now()-o<=Jct}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Fg(),{heartbeatsToSend:n,unsentEntries:r}=eut(this._heartbeatsCache.heartbeats),i=ic(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Fg(){return new Date().toISOString().substring(0,10)}function eut(e,t=Xct){const n=[];let r=e.slice();for(const i of e){const o=n.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),Vg(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Vg(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class nut{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Glt()?Wlt().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Zct(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ng(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ng(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Vg(e){return ic(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rut(e){oc(new fa("platform-logger",t=>new _ct(t),"PRIVATE")),oc(new fa("heartbeat",t=>new tut(t),"PRIVATE")),co(rf,$g,e),co(rf,$g,"esm2017"),co("fire-js","")}rut("");var iut="firebase",sut="10.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */co(iut,sut,"app");var out=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},St,Vf=Vf||{},Zt=out||self;function Vc(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Ma(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function aut(e){return Object.prototype.hasOwnProperty.call(e,Fh)&&e[Fh]||(e[Fh]=++lut)}var Fh="closure_uid_"+(1e9*Math.random()>>>0),lut=0;function cut(e,t,n){return e.call.apply(e.bind,arguments)}function uut(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function Fn(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Fn=cut:Fn=uut,Fn.apply(null,arguments)}function Bl(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function An(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,i,o){for(var l=Array(arguments.length-2),c=2;c<arguments.length;c++)l[c-2]=arguments[c];return t.prototype[i].apply(r,l)}}function Qi(){this.s=this.s,this.o=this.o}var hut=0;Qi.prototype.s=!1;Qi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),hut!=0)&&aut(this)};Qi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const _0=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function qf(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function qg(e,t){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Vc(r)){const i=e.length||0,o=r.length||0;e.length=i+o;for(let l=0;l<o;l++)e[i+l]=r[l]}else e.push(r)}}function Vn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Vn.prototype.h=function(){this.defaultPrevented=!0};var fut=function(){if(!Zt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Zt.addEventListener("test",()=>{},t),Zt.removeEventListener("test",()=>{},t)}catch{}return e}();function pa(e){return/^[\s\xa0]*$/.test(e)}function qc(){var e=Zt.navigator;return e&&(e=e.userAgent)?e:""}function jr(e){return qc().indexOf(e)!=-1}function Bf(e){return Bf[" "](e),e}Bf[" "]=function(){};function dut(e,t){var n=sht;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var put=jr("Opera"),po=jr("Trident")||jr("MSIE"),g0=jr("Edge"),af=g0||po,m0=jr("Gecko")&&!(qc().toLowerCase().indexOf("webkit")!=-1&&!jr("Edge"))&&!(jr("Trident")||jr("MSIE"))&&!jr("Edge"),_ut=qc().toLowerCase().indexOf("webkit")!=-1&&!jr("Edge");function y0(){var e=Zt.document;return e?e.documentMode:void 0}var lf;t:{var Vh="",qh=function(){var e=qc();if(m0)return/rv:([^\);]+)(\)|;)/.exec(e);if(g0)return/Edge\/([\d\.]+)/.exec(e);if(po)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(_ut)return/WebKit\/(\S+)/.exec(e);if(put)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(qh&&(Vh=qh?qh[1]:""),po){var Bh=y0();if(Bh!=null&&Bh>parseFloat(Vh)){lf=String(Bh);break t}}lf=Vh}var cf;if(Zt.document&&po){var Bg=y0();cf=Bg||parseInt(lf,10)||void 0}else cf=void 0;var gut=cf;function _a(e,t){if(Vn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(m0){t:{try{Bf(t.nodeName);var i=!0;break t}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:mut[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&_a.$.h.call(this)}}An(_a,Vn);var mut={2:"touch",3:"pen",4:"mouse"};_a.prototype.h=function(){_a.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var La="closure_listenable_"+(1e6*Math.random()|0),yut=0;function vut(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++yut,this.fa=this.ia=!1}function Bc(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Uf(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function but(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function v0(e){const t={};for(const n in e)t[n]=e[n];return t}const Ug="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b0(e,t){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(let o=0;o<Ug.length;o++)n=Ug[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Uc(e){this.src=e,this.g={},this.h=0}Uc.prototype.add=function(e,t,n,r,i){var o=e.toString();e=this.g[o],e||(e=this.g[o]=[],this.h++);var l=hf(e,t,r,i);return-1<l?(t=e[l],n||(t.ia=!1)):(t=new vut(t,this.src,o,!!r,i),t.ia=n,e.push(t)),t};function uf(e,t){var n=t.type;if(n in e.g){var r=e.g[n],i=_0(r,t),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Bc(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function hf(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}var zf="closure_lm_"+(1e6*Math.random()|0),Uh={};function w0(e,t,n,r,i){if(r&&r.once)return E0(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)w0(e,t[o],n,r,i);return null}return n=Wf(n),e&&e[La]?e.O(t,n,Ma(r)?!!r.capture:!!r,i):x0(e,t,n,!1,r,i)}function x0(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var l=Ma(i)?!!i.capture:!!i,c=Gf(e);if(c||(e[zf]=c=new Uc(e)),n=c.add(t,n,r,l,o),n.proxy)return n;if(r=wut(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)fut||(i=l),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(S0(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function wut(){function e(n){return t.call(e.src,e.listener,n)}const t=xut;return e}function E0(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)E0(e,t[o],n,r,i);return null}return n=Wf(n),e&&e[La]?e.P(t,n,Ma(r)?!!r.capture:!!r,i):x0(e,t,n,!0,r,i)}function A0(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)A0(e,t[o],n,r,i);else r=Ma(r)?!!r.capture:!!r,n=Wf(n),e&&e[La]?(e=e.i,t=String(t).toString(),t in e.g&&(o=e.g[t],n=hf(o,n,r,i),-1<n&&(Bc(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete e.g[t],e.h--)))):e&&(e=Gf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=hf(t,n,r,i)),(n=-1<e?t[e]:null)&&Hf(n))}function Hf(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[La])uf(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(S0(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Gf(t))?(uf(n,e),n.h==0&&(n.src=null,t[zf]=null)):Bc(e)}}}function S0(e){return e in Uh?Uh[e]:Uh[e]="on"+e}function xut(e,t){if(e.fa)e=!0;else{t=new _a(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Hf(e),e=n.call(r,t)}return e}function Gf(e){return e=e[zf],e instanceof Uc?e:null}var zh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wf(e){return typeof e=="function"?e:(e[zh]||(e[zh]=function(t){return e.handleEvent(t)}),e[zh])}function xn(){Qi.call(this),this.i=new Uc(this),this.S=this,this.J=null}An(xn,Qi);xn.prototype[La]=!0;xn.prototype.removeEventListener=function(e,t,n,r){A0(this,e,t,n,r)};function In(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new Vn(t,e);else if(t instanceof Vn)t.target=t.target||e;else{var i=t;t=new Vn(r,e),b0(t,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var l=t.g=n[o];i=Ul(l,r,!0,t)&&i}if(l=t.g=e,i=Ul(l,r,!0,t)&&i,i=Ul(l,r,!1,t)&&i,n)for(o=0;o<n.length;o++)l=t.g=n[o],i=Ul(l,r,!1,t)&&i}xn.prototype.N=function(){if(xn.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Bc(n[r]);delete e.g[t],e.h--}}this.J=null};xn.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};xn.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Ul(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var l=t[o];if(l&&!l.fa&&l.capture==n){var c=l.listener,f=l.la||l.src;l.ia&&uf(e.i,l),i=c.call(f,r)!==!1&&i}}return i&&!r.defaultPrevented}var jf=Zt.JSON.stringify;class Eut{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function Aut(){var e=Kf;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class Sut{constructor(){this.h=this.g=null}add(t,n){const r=k0.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var k0=new Eut(()=>new kut,e=>e.reset());class kut{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Cut(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Tut(e){Zt.setTimeout(()=>{throw e},0)}let ga,ma=!1,Kf=new Sut,C0=()=>{const e=Zt.Promise.resolve(void 0);ga=()=>{e.then(Iut)}};var Iut=()=>{for(var e;e=Aut();){try{e.h.call(e.g)}catch(n){Tut(n)}var t=k0;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ma=!1};function zc(e,t){xn.call(this),this.h=e||1,this.g=t||Zt,this.j=Fn(this.qb,this),this.l=Date.now()}An(zc,xn);St=zc.prototype;St.ga=!1;St.T=null;St.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),In(this,"tick"),this.ga&&(Yf(this),this.start()))}};St.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Yf(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}St.N=function(){zc.$.N.call(this),Yf(this),delete this.g};function Qf(e,t,n){if(typeof e=="function")n&&(e=Fn(e,n));else if(e&&typeof e.handleEvent=="function")e=Fn(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:Zt.setTimeout(e,t||0)}function T0(e){e.g=Qf(()=>{e.g=null,e.i&&(e.i=!1,T0(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class Rut extends Qi{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:T0(this)}N(){super.N(),this.g&&(Zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ya(e){Qi.call(this),this.h=e,this.g={}}An(ya,Qi);var zg=[];function I0(e,t,n,r){Array.isArray(n)||(n&&(zg[0]=n.toString()),n=zg);for(var i=0;i<n.length;i++){var o=w0(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function R0(e){Uf(e.g,function(t,n){this.g.hasOwnProperty(n)&&Hf(t)},e),e.g={}}ya.prototype.N=function(){ya.$.N.call(this),R0(this)};ya.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Hc(){this.g=!0}Hc.prototype.Ea=function(){this.g=!1};function Dut(e,t,n,r,i,o){e.info(function(){if(e.g)if(o)for(var l="",c=o.split("&"),f=0;f<c.length;f++){var d=c[f].split("=");if(1<d.length){var g=d[0];d=d[1];var v=g.split("_");l=2<=v.length&&v[1]=="type"?l+(g+"="+d+"&"):l+(g+"=redacted&")}}else l=null;else l=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+l})}function Out(e,t,n,r,i,o,l){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+o+" "+l})}function oo(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+Mut(e,n)+(r?" "+r:"")})}function Put(e,t){e.info(function(){return"TIMEOUT: "+t})}Hc.prototype.info=function(){};function Mut(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var l=1;l<i.length;l++)i[l]=""}}}}return jf(n)}catch{return t}}var Is={},Hg=null;function Gc(){return Hg=Hg||new xn}Is.Ta="serverreachability";function D0(e){Vn.call(this,Is.Ta,e)}An(D0,Vn);function va(e){const t=Gc();In(t,new D0(t))}Is.STAT_EVENT="statevent";function O0(e,t){Vn.call(this,Is.STAT_EVENT,e),this.stat=t}An(O0,Vn);function Qn(e){const t=Gc();In(t,new O0(t,e))}Is.Ua="timingevent";function P0(e,t){Vn.call(this,Is.Ua,e),this.size=t}An(P0,Vn);function $a(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return Zt.setTimeout(function(){e()},t)}var Wc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},M0={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Zf(){}Zf.prototype.h=null;function Gg(e){return e.h||(e.h=e.i())}function L0(){}var Na={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Xf(){Vn.call(this,"d")}An(Xf,Vn);function Jf(){Vn.call(this,"c")}An(Jf,Vn);var ff;function jc(){}An(jc,Zf);jc.prototype.g=function(){return new XMLHttpRequest};jc.prototype.i=function(){return{}};ff=new jc;function Fa(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new ya(this),this.P=Lut,e=af?125:void 0,this.V=new zc(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new $0}function $0(){this.i=null,this.g="",this.h=!1}var Lut=45e3,df={},ac={};St=Fa.prototype;St.setTimeout=function(e){this.P=e};function pf(e,t,n){e.L=1,e.v=Yc(xi(t)),e.s=n,e.S=!0,N0(e,null)}function N0(e,t){e.G=Date.now(),Va(e),e.A=xi(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),G0(n.i,"t",r),e.C=0,n=e.l.J,e.h=new $0,e.g=fy(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Rut(Fn(e.Pa,e,e.g),e.O)),I0(e.U,e.g,"readystatechange",e.nb),t=e.I?v0(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),va(),Dut(e.j,e.u,e.A,e.m,e.W,e.s)}St.nb=function(e){e=e.target;const t=this.M;t&&Kr(e)==3?t.l():this.Pa(e)};St.Pa=function(e){try{if(e==this.g)t:{const g=Kr(this.g);var t=this.g.Ia();const v=this.g.da();if(!(3>g)&&(g!=3||af||this.g&&(this.h.h||this.g.ja()||Yg(this.g)))){this.J||g!=4||t==7||(t==8||0>=v?va(3):va(2)),Kc(this);var n=this.g.da();this.ca=n;e:if(F0(this)){var r=Yg(this.g);e="";var i=r.length,o=Kr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gs(this),oa(this);var l="";break e}this.h.i=new Zt.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=n==200,Out(this.j,this.u,this.A,this.m,this.W,g,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var c,f=this.g;if((c=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pa(c)){var d=c;break e}}d=null}if(n=d)oo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_f(this,n);else{this.i=!1,this.o=3,Qn(12),gs(this),oa(this);break t}}this.S?(V0(this,g,l),af&&this.i&&g==3&&(I0(this.U,this.V,"tick",this.mb),this.V.start())):(oo(this.j,this.m,l,null),_f(this,l)),g==4&&gs(this),this.i&&!this.J&&(g==4?ly(this.l,this):(this.i=!1,Va(this)))}else nht(this.g),n==400&&0<l.indexOf("Unknown SID")?(this.o=3,Qn(12)):(this.o=0,Qn(13)),gs(this),oa(this)}}}catch{}finally{}};function F0(e){return e.g?e.u=="GET"&&e.L!=2&&e.l.Ha:!1}function V0(e,t,n){let r=!0,i;for(;!e.J&&e.C<n.length;)if(i=$ut(e,n),i==ac){t==4&&(e.o=4,Qn(14),r=!1),oo(e.j,e.m,null,"[Incomplete Response]");break}else if(i==df){e.o=4,Qn(15),oo(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else oo(e.j,e.m,i,null),_f(e,i);F0(e)&&i!=ac&&i!=df&&(e.h.g="",e.C=0),t!=4||n.length!=0||e.h.h||(e.o=1,Qn(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),sd(t),t.M=!0,Qn(11))):(oo(e.j,e.m,n,"[Invalid Chunked Response]"),gs(e),oa(e))}St.mb=function(){if(this.g){var e=Kr(this.g),t=this.g.ja();this.C<t.length&&(Kc(this),V0(this,e,t),this.i&&e!=4&&Va(this))}};function $ut(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?ac:(n=Number(t.substring(n,r)),isNaN(n)?df:(r+=1,r+n>t.length?ac:(t=t.slice(r,r+n),e.C=r+n,t)))}St.cancel=function(){this.J=!0,gs(this)};function Va(e){e.Y=Date.now()+e.P,q0(e,e.P)}function q0(e,t){if(e.B!=null)throw Error("WatchDog timer not null");e.B=$a(Fn(e.lb,e),t)}function Kc(e){e.B&&(Zt.clearTimeout(e.B),e.B=null)}St.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(Put(this.j,this.A),this.L!=2&&(va(),Qn(17)),gs(this),this.o=2,oa(this)):q0(this,this.Y-e)};function oa(e){e.l.H==0||e.J||ly(e.l,e)}function gs(e){Kc(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,Yf(e.V),R0(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function _f(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||gf(n.i,e))){if(!e.K&&gf(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)uc(n),Jc(n);else break t;id(n),Qn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=$a(Fn(n.ib,n),6e3));if(1>=K0(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ms(n,11)}else if((e.K||n.g==e)&&uc(n),!pa(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let d=i[t];if(n.V=d[0],d=d[1],n.H==2)if(d[0]=="c"){n.K=d[1],n.pa=d[2];const g=d[3];g!=null&&(n.ra=g,n.l.info("VER="+n.ra));const v=d[4];v!=null&&(n.Ga=v,n.l.info("SVER="+n.Ga));const S=d[5];S!=null&&typeof S=="number"&&0<S&&(r=1.5*S,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const E=e.g;if(E){const q=E.g?E.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(q){var o=r.i;o.g||q.indexOf("spdy")==-1&&q.indexOf("quic")==-1&&q.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(td(o,o.h),o.h=null))}if(r.F){const Q=E.g?E.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(r.Da=Q,Fe(r.I,r.F,Q))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var l=e;if(r.wa=hy(r,r.J?r.pa:null,r.Y),l.K){Y0(r.i,l);var c=l,f=r.L;f&&c.setTimeout(f),c.B&&(Kc(c),Va(c)),r.g=l}else oy(r);0<n.j.length&&tu(n)}else d[0]!="stop"&&d[0]!="close"||ms(n,7);else n.H==3&&(d[0]=="stop"||d[0]=="close"?d[0]=="stop"?ms(n,7):rd(n):d[0]!="noop"&&n.h&&n.h.Aa(d),n.A=0)}}va(4)}catch{}}function Nut(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(Vc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function Fut(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(Vc(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}function B0(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(Vc(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=Fut(e),r=Nut(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}var U0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vut(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function vs(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof vs){this.h=e.h,lc(this,e.j),this.s=e.s,this.g=e.g,cc(this,e.m),this.l=e.l;var t=e.i,n=new ba;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Wg(this,n),this.o=e.o}else e&&(t=String(e).match(U0))?(this.h=!1,lc(this,t[1]||"",!0),this.s=na(t[2]||""),this.g=na(t[3]||"",!0),cc(this,t[4]),this.l=na(t[5]||"",!0),Wg(this,t[6]||"",!0),this.o=na(t[7]||"")):(this.h=!1,this.i=new ba(null,this.h))}vs.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ra(t,jg,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(ra(t,jg,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(ra(n,n.charAt(0)=="/"?Uut:But,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ra(n,Hut)),e.join("")};function xi(e){return new vs(e)}function lc(e,t,n){e.j=n?na(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function cc(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Wg(e,t,n){t instanceof ba?(e.i=t,Gut(e.i,e.h)):(n||(t=ra(t,zut)),e.i=new ba(t,e.h))}function Fe(e,t,n){e.i.set(t,n)}function Yc(e){return Fe(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function na(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ra(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,qut),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function qut(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var jg=/[#\/\?@]/g,But=/[#\?:]/g,Uut=/[#\?]/g,zut=/[#\?@]/g,Hut=/#/g;function ba(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Zi(e){e.g||(e.g=new Map,e.h=0,e.i&&Vut(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}St=ba.prototype;St.add=function(e,t){Zi(this),this.i=null,e=ko(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function z0(e,t){Zi(e),t=ko(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function H0(e,t){return Zi(e),t=ko(e,t),e.g.has(t)}St.forEach=function(e,t){Zi(this),this.g.forEach(function(n,r){n.forEach(function(i){e.call(t,i,r,this)},this)},this)};St.ta=function(){Zi(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let o=0;o<i.length;o++)n.push(t[r])}return n};St.Z=function(e){Zi(this);let t=[];if(typeof e=="string")H0(this,e)&&(t=t.concat(this.g.get(ko(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};St.set=function(e,t){return Zi(this),this.i=null,e=ko(this,e),H0(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};St.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function G0(e,t,n){z0(e,t),0<n.length&&(e.i=null,e.g.set(ko(e,t),qf(n)),e.h+=n.length)}St.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=o;l[r]!==""&&(i+="="+encodeURIComponent(String(l[r]))),e.push(i)}}return this.i=e.join("&")};function ko(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Gut(e,t){t&&!e.j&&(Zi(e),e.i=null,e.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(z0(this,r),G0(this,i,n))},e)),e.j=t}var Wut=class{constructor(e,t){this.g=e,this.map=t}};function W0(e){this.l=e||jut,Zt.PerformanceNavigationTiming?(e=Zt.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(Zt.g&&Zt.g.Ka&&Zt.g.Ka()&&Zt.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var jut=10;function j0(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function K0(e){return e.h?1:e.g?e.g.size:0}function gf(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function td(e,t){e.g?e.g.add(t):e.h=t}function Y0(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}W0.prototype.cancel=function(){if(this.i=Q0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function Q0(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return qf(e.i)}var Kut=class{stringify(e){return Zt.JSON.stringify(e,void 0)}parse(e){return Zt.JSON.parse(e,void 0)}};function Yut(){this.g=new Kut}function Qut(e,t,n){const r=n||"";try{B0(e,function(i,o){let l=i;Ma(i)&&(l=jf(i)),t.push(r+o+"="+encodeURIComponent(l))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Zut(e,t){const n=new Hc;if(Zt.Image){const r=new Image;r.onload=Bl(zl,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Bl(zl,n,r,"TestLoadImage: error",!1,t),r.onabort=Bl(zl,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Bl(zl,n,r,"TestLoadImage: timeout",!1,t),Zt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function zl(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function Qc(e){this.l=e.fc||null,this.j=e.ob||!1}An(Qc,Zf);Qc.prototype.g=function(){return new Zc(this.l,this.j)};Qc.prototype.i=function(e){return function(){return e}}({});function Zc(e,t){xn.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=ed,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}An(Zc,xn);var ed=0;St=Zc.prototype;St.open=function(e,t){if(this.readyState!=ed)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,wa(this)};St.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Zt).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};St.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qa(this)),this.readyState=ed};St.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,wa(this)),this.g&&(this.readyState=3,wa(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Zt.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Z0(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function Z0(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}St.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?qa(this):wa(this),this.readyState==3&&Z0(this)}};St.Za=function(e){this.g&&(this.response=this.responseText=e,qa(this))};St.Ya=function(e){this.g&&(this.response=e,qa(this))};St.ka=function(){this.g&&qa(this)};function qa(e){e.readyState=4,e.l=null,e.j=null,e.A=null,wa(e)}St.setRequestHeader=function(e,t){this.v.append(e,t)};St.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};St.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function wa(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Zc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var Xut=Zt.JSON.parse;function Xe(e){xn.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=X0,this.L=this.M=!1}An(Xe,xn);var X0="",Jut=/^https?$/i,tht=["POST","PUT"];St=Xe.prototype;St.Oa=function(e){this.M=e};St.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ff.g(),this.C=this.u?Gg(this.u):Gg(ff),this.g.onreadystatechange=Fn(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){Kg(this,o);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=Zt.FormData&&e instanceof Zt.FormData,!(0<=_0(tht,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,l]of n)this.g.setRequestHeader(o,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ey(this),0<this.B&&((this.L=eht(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fn(this.ua,this)):this.A=Qf(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){Kg(this,o)}};function eht(e){return po&&typeof e.timeout=="number"&&e.ontimeout!==void 0}St.ua=function(){typeof Vf<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,In(this,"timeout"),this.abort(8))};function Kg(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,J0(e),Xc(e)}function J0(e){e.F||(e.F=!0,In(e,"complete"),In(e,"error"))}St.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,In(this,"complete"),In(this,"abort"),Xc(this))};St.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xc(this,!0)),Xe.$.N.call(this)};St.La=function(){this.s||(this.G||this.v||this.l?ty(this):this.kb())};St.kb=function(){ty(this)};function ty(e){if(e.h&&typeof Vf<"u"&&(!e.C[1]||Kr(e)!=4||e.da()!=2)){if(e.v&&Kr(e)==4)Qf(e.La,0,e);else if(In(e,"readystatechange"),Kr(e)==4){e.h=!1;try{const l=e.da();t:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var r;if(r=l===0){var i=String(e.I).match(U0)[1]||null;!i&&Zt.self&&Zt.self.location&&(i=Zt.self.location.protocol.slice(0,-1)),r=!Jut.test(i?i.toLowerCase():"")}n=r}if(n)In(e,"complete"),In(e,"success");else{e.m=6;try{var o=2<Kr(e)?e.g.statusText:""}catch{o=""}e.j=o+" ["+e.da()+"]",J0(e)}}finally{Xc(e)}}}}function Xc(e,t){if(e.g){ey(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||In(e,"ready");try{n.onreadystatechange=r}catch{}}}function ey(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Zt.clearTimeout(e.A),e.A=null)}St.isActive=function(){return!!this.g};function Kr(e){return e.g?e.g.readyState:0}St.da=function(){try{return 2<Kr(this)?this.g.status:-1}catch{return-1}};St.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};St.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Xut(t)}};function Yg(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case X0:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function nht(e){const t={};e=(e.g&&2<=Kr(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(pa(e[r]))continue;var n=Cut(e[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}but(t,function(r){return r.join(", ")})}St.Ia=function(){return this.m};St.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function ny(e){let t="";return Uf(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function nd(e,t,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=ny(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):Fe(e,t,n))}function Zo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ry(e){this.Ga=0,this.j=[],this.l=new Hc,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Zo("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Zo("baseRetryDelayMs",5e3,e),this.hb=Zo("retryDelaySeedMs",1e4,e),this.eb=Zo("forwardChannelMaxRetries",2,e),this.xa=Zo("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new W0(e&&e.concurrentRequestLimit),this.Ja=new Yut,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}St=ry.prototype;St.ra=8;St.H=1;function rd(e){if(iy(e),e.H==3){var t=e.W++,n=xi(e.I);if(Fe(n,"SID",e.K),Fe(n,"RID",t),Fe(n,"TYPE","terminate"),Ba(e,n),t=new Fa(e,e.l,t),t.L=2,t.v=Yc(xi(n)),n=!1,Zt.navigator&&Zt.navigator.sendBeacon)try{n=Zt.navigator.sendBeacon(t.v.toString(),"")}catch{}!n&&Zt.Image&&(new Image().src=t.v,n=!0),n||(t.g=fy(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Va(t)}uy(e)}function Jc(e){e.g&&(sd(e),e.g.cancel(),e.g=null)}function iy(e){Jc(e),e.u&&(Zt.clearTimeout(e.u),e.u=null),uc(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&Zt.clearTimeout(e.m),e.m=null)}function tu(e){if(!j0(e.i)&&!e.m){e.m=!0;var t=e.Na;ga||C0(),ma||(ga(),ma=!0),Kf.add(t,e),e.C=0}}function rht(e,t){return K0(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=$a(Fn(e.Na,e,t),cy(e,e.C)),e.C++,!0)}St.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Fa(this,this.l,e);let o=this.s;if(this.U&&(o?(o=v0(o),b0(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break e}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=sy(this,i,t),n=xi(this.I),Fe(n,"RID",e),Fe(n,"CVER",22),this.F&&Fe(n,"X-HTTP-Session-Id",this.F),Ba(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(ny(o)))+"&"+t:this.o&&nd(n,this.o,o)),td(this.i,i),this.bb&&Fe(n,"TYPE","init"),this.P?(Fe(n,"$req",t),Fe(n,"SID","null"),i.aa=!0,pf(i,n,null)):pf(i,n,t),this.H=2}}else this.H==3&&(e?Qg(this,e):this.j.length==0||j0(this.i)||Qg(this))};function Qg(e,t){var n;t?n=t.m:n=e.W++;const r=xi(e.I);Fe(r,"SID",e.K),Fe(r,"RID",n),Fe(r,"AID",e.V),Ba(e,r),e.o&&e.s&&nd(r,e.o,e.s),n=new Fa(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=sy(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),td(e.i,n),pf(n,r,t)}function Ba(e,t){e.na&&Uf(e.na,function(n,r){Fe(t,r,n)}),e.h&&B0({},function(n,r){Fe(t,r,n)})}function sy(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Fn(e.h.Va,e.h,e):null;t:{var i=e.j;let o=-1;for(;;){const l=["count="+n];o==-1?0<n?(o=i[0].g,l.push("ofs="+o)):o=0:l.push("ofs="+o);let c=!0;for(let f=0;f<n;f++){let d=i[f].g;const g=i[f].map;if(d-=o,0>d)o=Math.max(0,i[f].g-100),c=!1;else try{Qut(g,l,"req"+d+"_")}catch{r&&r(g)}}if(c){r=l.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,r}function oy(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;ga||C0(),ma||(ga(),ma=!0),Kf.add(t,e),e.A=0}}function id(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=$a(Fn(e.Ma,e),cy(e,e.A)),e.A++,!0)}St.Ma=function(){if(this.u=null,ay(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=$a(Fn(this.jb,this),e)}};St.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Qn(10),Jc(this),ay(this))};function sd(e){e.B!=null&&(Zt.clearTimeout(e.B),e.B=null)}function ay(e){e.g=new Fa(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=xi(e.wa);Fe(t,"RID","rpc"),Fe(t,"SID",e.K),Fe(t,"AID",e.V),Fe(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Fe(t,"TO",e.qa),Fe(t,"TYPE","xmlhttp"),Ba(e,t),e.o&&e.s&&nd(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Yc(xi(t)),n.s=null,n.S=!0,N0(n,e)}St.ib=function(){this.v!=null&&(this.v=null,Jc(this),id(this),Qn(19))};function uc(e){e.v!=null&&(Zt.clearTimeout(e.v),e.v=null)}function ly(e,t){var n=null;if(e.g==t){uc(e),sd(e),e.g=null;var r=2}else if(gf(e.i,t))n=t.F,Y0(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;r=Gc(),In(r,new P0(r,n)),tu(e)}else oy(e);else if(i=t.o,i==3||i==0&&0<t.ca||!(r==1&&rht(e,t)||r==2&&id(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ms(e,5);break;case 4:ms(e,10);break;case 3:ms(e,6);break;default:ms(e,2)}}}function cy(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function ms(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=Fn(e.pb,e);n||(n=new vs("//www.google.com/images/cleardot.gif"),Zt.location&&Zt.location.protocol=="http"||lc(n,"https"),Yc(n)),Zut(n.toString(),r)}else Qn(2);e.H=0,e.h&&e.h.za(t),uy(e),iy(e)}St.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Qn(2)):(this.l.info("Failed to ping google.com"),Qn(1))};function uy(e){if(e.H=0,e.ma=[],e.h){const t=Q0(e.i);(t.length!=0||e.j.length!=0)&&(qg(e.ma,t),qg(e.ma,e.j),e.i.i.length=0,qf(e.j),e.j.length=0),e.h.ya()}}function hy(e,t,n){var r=n instanceof vs?xi(n):new vs(n);if(r.g!="")t&&(r.g=t+"."+r.g),cc(r,r.m);else{var i=Zt.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new vs(null);r&&lc(o,r),t&&(o.g=t),i&&cc(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&Fe(r,n,t),Fe(r,"VER",e.ra),Ba(e,r),r}function fy(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ha&&!e.va?new Xe(new Qc({ob:!0})):new Xe(e.va),t.Oa(e.J),t}St.isActive=function(){return!!this.h&&this.h.isActive(this)};function dy(){}St=dy.prototype;St.Ba=function(){};St.Aa=function(){};St.za=function(){};St.ya=function(){};St.isActive=function(){return!0};St.Va=function(){};function hc(){if(po&&!(10<=Number(gut)))throw Error("Environmental error: no available transport.")}hc.prototype.g=function(e,t){return new pr(e,t)};function pr(e,t){xn.call(this),this.g=new ry(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!pa(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!pa(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Co(this)}An(pr,xn);pr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Qn(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=hy(e,null,e.Y),tu(e)};pr.prototype.close=function(){rd(this.g)};pr.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=jf(e),e=n);t.j.push(new Wut(t.fb++,e)),t.H==3&&tu(t)};pr.prototype.N=function(){this.g.h=null,delete this.j,rd(this.g),delete this.g,pr.$.N.call(this)};function py(e){Xf.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(const n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}An(py,Xf);function _y(){Jf.call(this),this.status=1}An(_y,Jf);function Co(e){this.g=e}An(Co,dy);Co.prototype.Ba=function(){In(this.g,"a")};Co.prototype.Aa=function(e){In(this.g,new py(e))};Co.prototype.za=function(e){In(this.g,new _y)};Co.prototype.ya=function(){In(this.g,"b")};function iht(){this.blockSize=-1}function Zr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}An(Zr,iht);Zr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Hh(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],l=t+(o^n&(i^o))+r[0]+3614090360&4294967295;t=n+(l<<7&4294967295|l>>>25),l=o+(i^t&(n^i))+r[1]+3905402710&4294967295,o=t+(l<<12&4294967295|l>>>20),l=i+(n^o&(t^n))+r[2]+606105819&4294967295,i=o+(l<<17&4294967295|l>>>15),l=n+(t^i&(o^t))+r[3]+3250441966&4294967295,n=i+(l<<22&4294967295|l>>>10),l=t+(o^n&(i^o))+r[4]+4118548399&4294967295,t=n+(l<<7&4294967295|l>>>25),l=o+(i^t&(n^i))+r[5]+1200080426&4294967295,o=t+(l<<12&4294967295|l>>>20),l=i+(n^o&(t^n))+r[6]+2821735955&4294967295,i=o+(l<<17&4294967295|l>>>15),l=n+(t^i&(o^t))+r[7]+4249261313&4294967295,n=i+(l<<22&4294967295|l>>>10),l=t+(o^n&(i^o))+r[8]+1770035416&4294967295,t=n+(l<<7&4294967295|l>>>25),l=o+(i^t&(n^i))+r[9]+2336552879&4294967295,o=t+(l<<12&4294967295|l>>>20),l=i+(n^o&(t^n))+r[10]+4294925233&4294967295,i=o+(l<<17&4294967295|l>>>15),l=n+(t^i&(o^t))+r[11]+2304563134&4294967295,n=i+(l<<22&4294967295|l>>>10),l=t+(o^n&(i^o))+r[12]+1804603682&4294967295,t=n+(l<<7&4294967295|l>>>25),l=o+(i^t&(n^i))+r[13]+4254626195&4294967295,o=t+(l<<12&4294967295|l>>>20),l=i+(n^o&(t^n))+r[14]+2792965006&4294967295,i=o+(l<<17&4294967295|l>>>15),l=n+(t^i&(o^t))+r[15]+1236535329&4294967295,n=i+(l<<22&4294967295|l>>>10),l=t+(i^o&(n^i))+r[1]+4129170786&4294967295,t=n+(l<<5&4294967295|l>>>27),l=o+(n^i&(t^n))+r[6]+3225465664&4294967295,o=t+(l<<9&4294967295|l>>>23),l=i+(t^n&(o^t))+r[11]+643717713&4294967295,i=o+(l<<14&4294967295|l>>>18),l=n+(o^t&(i^o))+r[0]+3921069994&4294967295,n=i+(l<<20&4294967295|l>>>12),l=t+(i^o&(n^i))+r[5]+3593408605&4294967295,t=n+(l<<5&4294967295|l>>>27),l=o+(n^i&(t^n))+r[10]+38016083&4294967295,o=t+(l<<9&4294967295|l>>>23),l=i+(t^n&(o^t))+r[15]+3634488961&4294967295,i=o+(l<<14&4294967295|l>>>18),l=n+(o^t&(i^o))+r[4]+3889429448&4294967295,n=i+(l<<20&4294967295|l>>>12),l=t+(i^o&(n^i))+r[9]+568446438&4294967295,t=n+(l<<5&4294967295|l>>>27),l=o+(n^i&(t^n))+r[14]+3275163606&4294967295,o=t+(l<<9&4294967295|l>>>23),l=i+(t^n&(o^t))+r[3]+4107603335&4294967295,i=o+(l<<14&4294967295|l>>>18),l=n+(o^t&(i^o))+r[8]+1163531501&4294967295,n=i+(l<<20&4294967295|l>>>12),l=t+(i^o&(n^i))+r[13]+2850285829&4294967295,t=n+(l<<5&4294967295|l>>>27),l=o+(n^i&(t^n))+r[2]+4243563512&4294967295,o=t+(l<<9&4294967295|l>>>23),l=i+(t^n&(o^t))+r[7]+1735328473&4294967295,i=o+(l<<14&4294967295|l>>>18),l=n+(o^t&(i^o))+r[12]+2368359562&4294967295,n=i+(l<<20&4294967295|l>>>12),l=t+(n^i^o)+r[5]+4294588738&4294967295,t=n+(l<<4&4294967295|l>>>28),l=o+(t^n^i)+r[8]+2272392833&4294967295,o=t+(l<<11&4294967295|l>>>21),l=i+(o^t^n)+r[11]+1839030562&4294967295,i=o+(l<<16&4294967295|l>>>16),l=n+(i^o^t)+r[14]+4259657740&4294967295,n=i+(l<<23&4294967295|l>>>9),l=t+(n^i^o)+r[1]+2763975236&4294967295,t=n+(l<<4&4294967295|l>>>28),l=o+(t^n^i)+r[4]+1272893353&4294967295,o=t+(l<<11&4294967295|l>>>21),l=i+(o^t^n)+r[7]+4139469664&4294967295,i=o+(l<<16&4294967295|l>>>16),l=n+(i^o^t)+r[10]+3200236656&4294967295,n=i+(l<<23&4294967295|l>>>9),l=t+(n^i^o)+r[13]+681279174&4294967295,t=n+(l<<4&4294967295|l>>>28),l=o+(t^n^i)+r[0]+3936430074&4294967295,o=t+(l<<11&4294967295|l>>>21),l=i+(o^t^n)+r[3]+3572445317&4294967295,i=o+(l<<16&4294967295|l>>>16),l=n+(i^o^t)+r[6]+76029189&4294967295,n=i+(l<<23&4294967295|l>>>9),l=t+(n^i^o)+r[9]+3654602809&4294967295,t=n+(l<<4&4294967295|l>>>28),l=o+(t^n^i)+r[12]+3873151461&4294967295,o=t+(l<<11&4294967295|l>>>21),l=i+(o^t^n)+r[15]+530742520&4294967295,i=o+(l<<16&4294967295|l>>>16),l=n+(i^o^t)+r[2]+3299628645&4294967295,n=i+(l<<23&4294967295|l>>>9),l=t+(i^(n|~o))+r[0]+4096336452&4294967295,t=n+(l<<6&4294967295|l>>>26),l=o+(n^(t|~i))+r[7]+1126891415&4294967295,o=t+(l<<10&4294967295|l>>>22),l=i+(t^(o|~n))+r[14]+2878612391&4294967295,i=o+(l<<15&4294967295|l>>>17),l=n+(o^(i|~t))+r[5]+4237533241&4294967295,n=i+(l<<21&4294967295|l>>>11),l=t+(i^(n|~o))+r[12]+1700485571&4294967295,t=n+(l<<6&4294967295|l>>>26),l=o+(n^(t|~i))+r[3]+2399980690&4294967295,o=t+(l<<10&4294967295|l>>>22),l=i+(t^(o|~n))+r[10]+4293915773&4294967295,i=o+(l<<15&4294967295|l>>>17),l=n+(o^(i|~t))+r[1]+2240044497&4294967295,n=i+(l<<21&4294967295|l>>>11),l=t+(i^(n|~o))+r[8]+1873313359&4294967295,t=n+(l<<6&4294967295|l>>>26),l=o+(n^(t|~i))+r[15]+4264355552&4294967295,o=t+(l<<10&4294967295|l>>>22),l=i+(t^(o|~n))+r[6]+2734768916&4294967295,i=o+(l<<15&4294967295|l>>>17),l=n+(o^(i|~t))+r[13]+1309151649&4294967295,n=i+(l<<21&4294967295|l>>>11),l=t+(i^(n|~o))+r[4]+4149444226&4294967295,t=n+(l<<6&4294967295|l>>>26),l=o+(n^(t|~i))+r[11]+3174756917&4294967295,o=t+(l<<10&4294967295|l>>>22),l=i+(t^(o|~n))+r[2]+718787259&4294967295,i=o+(l<<15&4294967295|l>>>17),l=n+(o^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}Zr.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(i==0)for(;o<=n;)Hh(this,e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){Hh(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){Hh(this,r),i=0;break}}this.h=i,this.i+=t};Zr.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function Ce(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=e[i]|0;r&&o==t||(n[i]=o,r=!1)}this.g=n}var sht={};function od(e){return-128<=e&&128>e?dut(e,function(t){return new Ce([t|0],0>t?-1:0)}):new Ce([e|0],0>e?-1:0)}function Yr(e){if(isNaN(e)||!isFinite(e))return uo;if(0>e)return Tn(Yr(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=mf;return new Ce(t,0)}function gy(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return Tn(gy(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Yr(Math.pow(t,8)),r=uo,i=0;i<e.length;i+=8){var o=Math.min(8,e.length-i),l=parseInt(e.substring(i,i+o),t);8>o?(o=Yr(Math.pow(t,o)),r=r.R(o).add(Yr(l))):(r=r.R(n),r=r.add(Yr(l)))}return r}var mf=4294967296,uo=od(0),yf=od(1),Zg=od(16777216);St=Ce.prototype;St.ea=function(){if(Cr(this))return-Tn(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:mf+r)*t,t*=mf}return e};St.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(vi(this))return"0";if(Cr(this))return"-"+Tn(this).toString(e);for(var t=Yr(Math.pow(e,6)),n=this,r="";;){var i=dc(n,t).g;n=fc(n,i.R(t));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=i,vi(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};St.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function vi(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function Cr(e){return e.h==-1}St.X=function(e){return e=fc(this,e),Cr(e)?-1:vi(e)?0:1};function Tn(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Ce(n,~e.h).add(yf)}St.abs=function(){return Cr(this)?Tn(this):this};St.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(this.D(i)&65535)+(e.D(i)&65535),l=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=l>>>16,o&=65535,l&=65535,n[i]=l<<16|o}return new Ce(n,n[n.length-1]&-2147483648?-1:0)};function fc(e,t){return e.add(Tn(t))}St.R=function(e){if(vi(this)||vi(e))return uo;if(Cr(this))return Cr(e)?Tn(this).R(Tn(e)):Tn(Tn(this).R(e));if(Cr(e))return Tn(this.R(Tn(e)));if(0>this.X(Zg)&&0>e.X(Zg))return Yr(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,l=this.D(r)&65535,c=e.D(i)>>>16,f=e.D(i)&65535;n[2*r+2*i]+=l*f,Hl(n,2*r+2*i),n[2*r+2*i+1]+=o*f,Hl(n,2*r+2*i+1),n[2*r+2*i+1]+=l*c,Hl(n,2*r+2*i+1),n[2*r+2*i+2]+=o*c,Hl(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Ce(n,0)};function Hl(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Xo(e,t){this.g=e,this.h=t}function dc(e,t){if(vi(t))throw Error("division by zero");if(vi(e))return new Xo(uo,uo);if(Cr(e))return t=dc(Tn(e),t),new Xo(Tn(t.g),Tn(t.h));if(Cr(t))return t=dc(e,Tn(t)),new Xo(Tn(t.g),t.h);if(30<e.g.length){if(Cr(e)||Cr(t))throw Error("slowDivide_ only works with positive integers.");for(var n=yf,r=t;0>=r.X(e);)n=Xg(n),r=Xg(r);var i=no(n,1),o=no(r,1);for(r=no(r,2),n=no(n,2);!vi(r);){var l=o.add(r);0>=l.X(e)&&(i=i.add(n),o=l),r=no(r,1),n=no(n,1)}return t=fc(e,i.R(t)),new Xo(i,t)}for(i=uo;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=Yr(n),l=o.R(t);Cr(l)||0<l.X(e);)n-=r,o=Yr(n),l=o.R(t);vi(o)&&(o=yf),i=i.add(o),e=fc(e,l)}return new Xo(i,e)}St.gb=function(e){return dc(this,e).h};St.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Ce(n,this.h&e.h)};St.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Ce(n,this.h|e.h)};St.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Ce(n,this.h^e.h)};function Xg(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Ce(n,e.h)}function no(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new Ce(i,e.h)}hc.prototype.createWebChannel=hc.prototype.g;pr.prototype.send=pr.prototype.u;pr.prototype.open=pr.prototype.m;pr.prototype.close=pr.prototype.close;Wc.NO_ERROR=0;Wc.TIMEOUT=8;Wc.HTTP_ERROR=6;M0.COMPLETE="complete";L0.EventType=Na;Na.OPEN="a";Na.CLOSE="b";Na.ERROR="c";Na.MESSAGE="d";xn.prototype.listen=xn.prototype.O;Xe.prototype.listenOnce=Xe.prototype.P;Xe.prototype.getLastError=Xe.prototype.Sa;Xe.prototype.getLastErrorCode=Xe.prototype.Ia;Xe.prototype.getStatus=Xe.prototype.da;Xe.prototype.getResponseJson=Xe.prototype.Wa;Xe.prototype.getResponseText=Xe.prototype.ja;Xe.prototype.send=Xe.prototype.ha;Xe.prototype.setWithCredentials=Xe.prototype.Oa;Zr.prototype.digest=Zr.prototype.l;Zr.prototype.reset=Zr.prototype.reset;Zr.prototype.update=Zr.prototype.j;Ce.prototype.add=Ce.prototype.add;Ce.prototype.multiply=Ce.prototype.R;Ce.prototype.modulo=Ce.prototype.gb;Ce.prototype.compare=Ce.prototype.X;Ce.prototype.toNumber=Ce.prototype.ea;Ce.prototype.toString=Ce.prototype.toString;Ce.prototype.getBits=Ce.prototype.D;Ce.fromNumber=Yr;Ce.fromString=gy;var oht=function(){return new hc},aht=function(){return Gc()},Gh=Wc,lht=M0,cht=Is,Jg={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Gl=L0,uht=Xe,hht=Ce;const tm="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let To="10.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new c0("@firebase/firestore");function Jo(){return ks.logLevel}function qt(e,...t){if(ks.logLevel<=_e.DEBUG){const n=t.map(ad);ks.debug(`Firestore (${To}): ${e}`,...n)}}function Cs(e,...t){if(ks.logLevel<=_e.ERROR){const n=t.map(ad);ks.error(`Firestore (${To}): ${e}`,...n)}}function pc(e,...t){if(ks.logLevel<=_e.WARN){const n=t.map(ad);ks.warn(`Firestore (${To}): ${e}`,...n)}}function ad(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(e="Unexpected state"){const t=`FIRESTORE (${To}) INTERNAL ASSERTION FAILED: `+e;throw Cs(t),new Error(t)}function En(e,t){e||fe()}function Ve(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xt extends So{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class fht{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ln.UNAUTHENTICATED))}shutdown(){}}class dht{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class pht{constructor(t){this.t=t,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let o=new bs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new bs,t.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const f=o;t.enqueueRetryable(async()=>{await f.promise,await i(this.currentUser)})},c=f=>{qt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.auth.addAuthTokenListener(this.o),l()};this.t.onInit(f=>c(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?c(f):(qt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new bs)}},0),l()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(qt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(En(typeof r.accessToken=="string"),new my(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return En(t===null||typeof t=="string"),new Ln(t)}}class _ht{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ght{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new _ht(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mht{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yht{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=o=>{o.error!=null&&qt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,qt("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>r(o))};const i=o=>{qt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):qt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(En(typeof n.token=="string"),this.R=n.token,new mht(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vht(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{static V(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=vht(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=t.charAt(i[o]%t.length))}return r}}function Me(e,t){return e<t?-1:e>t?1:0}function _o(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Xt(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Xt(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Xt(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Xt(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return wn.fromMillis(Date.now())}static fromDate(t){return wn.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new wn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Me(this.nanoseconds,t.nanoseconds):Me(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Ke(t)}static min(){return new Ke(new wn(0,0))}static max(){return new Ke(new wn(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(t,n,r){n===void 0?n=0:n>t.length&&fe(),r===void 0?r=t.length-n:r>t.length-n&&fe(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return xa.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof xa?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const o=t.get(i),l=n.get(i);if(o<l)return-1;if(o>l)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class on extends xa{construct(t,n,r){return new on(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Xt(dt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new on(n)}static emptyPath(){return new on([])}}const bht=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nn extends xa{construct(t,n,r){return new Nn(t,n,r)}static isValidIdentifier(t){return bht.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Nn(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Xt(dt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;i<t.length;){const c=t[i];if(c==="\\"){if(i+1===t.length)throw new Xt(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Xt(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=f,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(r+=c,i++):(o(),i++)}if(o(),l)throw new Xt(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Nn(n)}static emptyPath(){return new Nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(t){this.path=t}static fromPath(t){return new le(on.fromString(t))}static fromName(t){return new le(on.fromString(t).popFirst(5))}static empty(){return new le(on.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&on.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return on.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new le(new on(t.slice()))}}function wht(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ke.fromTimestamp(r===1e9?new wn(n+1,0):new wn(n,r));return new Wi(i,le.empty(),t)}function xht(e){return new Wi(e.readTime,e.key,-1)}class Wi{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Wi(Ke.min(),le.empty(),-1)}static max(){return new Wi(Ke.max(),le.empty(),-1)}}function Eht(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=le.comparator(e.documentKey,t.documentKey),n!==0?n:Me(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aht="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sht{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vy(e){if(e.code!==dt.FAILED_PRECONDITION||e.message!==Aht)throw e;qt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new ft((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof ft?n:ft.resolve(n)}catch(n){return ft.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):ft.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):ft.reject(n)}static resolve(t){return new ft((n,r)=>{n(t)})}static reject(t){return new ft((n,r)=>{r(t)})}static waitFor(t){return new ft((n,r)=>{let i=0,o=0,l=!1;t.forEach(c=>{++i,c.next(()=>{++o,l&&o===i&&n()},f=>r(f))}),l=!0,o===i&&n()})}static or(t){let n=ft.resolve(!1);for(const r of t)n=n.next(i=>i?ft.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(t,n){return new ft((r,i)=>{const o=t.length,l=new Array(o);let c=0;for(let f=0;f<o;f++){const d=f;n(t[d]).next(g=>{l[d]=g,++c,c===o&&r(l)},g=>i(g))}})}static doWhile(t,n){return new ft((r,i)=>{const o=()=>{t()===!0?n().next(()=>{o()},i):r()};o()})}}function eu(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}by.ae=-1;function ld(e){return e==null}function _c(e){return e===0&&1/e==-1/0}function kht(e){return typeof e=="number"&&Number.isInteger(e)&&!_c(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Io(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function wy(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(t,n){this.comparator=t,this.root=n||kn.EMPTY}insert(t,n){return new rr(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,kn.BLACK,null,null))}remove(t){return new rr(this.comparator,this.root.remove(t,this.comparator).copy(null,null,kn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Wl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Wl(this.root,t,this.comparator,!1)}getReverseIterator(){return new Wl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Wl(this.root,t,this.comparator,!0)}}class Wl{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=n?r(t.key,n):1,n&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class kn{constructor(t,n,r,i,o){this.key=t,this.value=n,this.color=r??kn.RED,this.left=i??kn.EMPTY,this.right=o??kn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,o){return new kn(t??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const o=r(t,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(t,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return kn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return kn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,kn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,kn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const t=this.left.check();if(t!==this.right.check())throw fe();return t+(this.isRed()?0:1)}}kn.EMPTY=null,kn.RED=!0,kn.BLACK=!1;kn.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(t,n,r,i,o){return this}insert(t,n,r){return new kn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(t){this.comparator=t,this.data=new rr(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new nm(this.data.getIterator())}getIteratorFrom(t){return new nm(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Zn)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Zn(this.comparator);return n.data=t,n}}class nm{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t){this.fields=t,t.sort(Nn.comparator)}static empty(){return new Ur([])}unionWith(t){let n=new Zn(Nn.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Ur(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return _o(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cht extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Cht("Invalid base64 string: "+o):o}}(t);return new Ei(n)}static fromUint8Array(t){const n=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(t);return new Ei(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Me(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ei.EMPTY_BYTE_STRING=new Ei("");const Tht=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ts(e){if(En(!!e),typeof e=="string"){let t=0;const n=Tht.exec(e);if(En(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Cn(e.seconds),nanos:Cn(e.nanos)}}function Cn(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Ea(e){return typeof e=="string"?Ei.fromBase64String(e):Ei.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function xy(e){const t=e.mapValue.fields.__previous_value__;return cd(t)?xy(t):t}function gc(e){const t=Ts(e.mapValue.fields.__local_write_time__.timestampValue);return new wn(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iht{constructor(t,n,r,i,o,l,c,f,d){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=f,this.useFetchStreams=d}}class mc{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new mc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof mc&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function go(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?cd(e)?4:Rht(e)?9007199254740991:10:fe()}function Xr(e,t){if(e===t)return!0;const n=go(e);if(n!==go(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return gc(e).isEqual(gc(t));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=Ts(i.timestampValue),c=Ts(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,o){return Ea(i.bytesValue).isEqual(Ea(o.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,o){return Cn(i.geoPointValue.latitude)===Cn(o.geoPointValue.latitude)&&Cn(i.geoPointValue.longitude)===Cn(o.geoPointValue.longitude)}(e,t);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Cn(i.integerValue)===Cn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=Cn(i.doubleValue),c=Cn(o.doubleValue);return l===c?_c(l)===_c(c):isNaN(l)&&isNaN(c)}return!1}(e,t);case 9:return _o(e.arrayValue.values||[],t.arrayValue.values||[],Xr);case 10:return function(i,o){const l=i.mapValue.fields||{},c=o.mapValue.fields||{};if(em(l)!==em(c))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(c[f]===void 0||!Xr(l[f],c[f])))return!1;return!0}(e,t);default:return fe()}}function Aa(e,t){return(e.values||[]).find(n=>Xr(n,t))!==void 0}function mo(e,t){if(e===t)return 0;const n=go(e),r=go(t);if(n!==r)return Me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(e.booleanValue,t.booleanValue);case 2:return function(o,l){const c=Cn(o.integerValue||o.doubleValue),f=Cn(l.integerValue||l.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(e,t);case 3:return rm(e.timestampValue,t.timestampValue);case 4:return rm(gc(e),gc(t));case 5:return Me(e.stringValue,t.stringValue);case 6:return function(o,l){const c=Ea(o),f=Ea(l);return c.compareTo(f)}(e.bytesValue,t.bytesValue);case 7:return function(o,l){const c=o.split("/"),f=l.split("/");for(let d=0;d<c.length&&d<f.length;d++){const g=Me(c[d],f[d]);if(g!==0)return g}return Me(c.length,f.length)}(e.referenceValue,t.referenceValue);case 8:return function(o,l){const c=Me(Cn(o.latitude),Cn(l.latitude));return c!==0?c:Me(Cn(o.longitude),Cn(l.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(o,l){const c=o.values||[],f=l.values||[];for(let d=0;d<c.length&&d<f.length;++d){const g=mo(c[d],f[d]);if(g)return g}return Me(c.length,f.length)}(e.arrayValue,t.arrayValue);case 10:return function(o,l){if(o===jl.mapValue&&l===jl.mapValue)return 0;if(o===jl.mapValue)return 1;if(l===jl.mapValue)return-1;const c=o.fields||{},f=Object.keys(c),d=l.fields||{},g=Object.keys(d);f.sort(),g.sort();for(let v=0;v<f.length&&v<g.length;++v){const S=Me(f[v],g[v]);if(S!==0)return S;const E=mo(c[f[v]],d[g[v]]);if(E!==0)return E}return Me(f.length,g.length)}(e.mapValue,t.mapValue);default:throw fe()}}function rm(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Me(e,t);const n=Ts(e),r=Ts(t),i=Me(n.seconds,r.seconds);return i!==0?i:Me(n.nanos,r.nanos)}function yo(e){return vf(e)}function vf(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Ts(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Ea(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return le.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=vf(o);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${vf(n.fields[l])}`;return i+"}"}(e.mapValue):fe()}function bf(e){return!!e&&"integerValue"in e}function ud(e){return!!e&&"arrayValue"in e}function Ql(e){return!!e&&"mapValue"in e}function aa(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Io(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=aa(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=aa(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Rht(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(t){this.value=t}static empty(){return new Tr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Ql(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=aa(n)}setAll(t){let n=Nn.emptyPath(),r={},i=[];t.forEach((l,c)=>{if(!n.isImmediateParentOf(c)){const f=this.getFieldsMap(n);this.applyChanges(f,r,i),r={},i=[],n=c.popLast()}l?r[c.lastSegment()]=aa(l):i.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(t){const n=this.field(t.popLast());Ql(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Xr(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];Ql(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Io(n,(i,o)=>t[i]=o);for(const i of r)delete t[i]}clone(){return new Tr(aa(this.value))}}function Ey(e){const t=[];return Io(e.fields,(n,r)=>{const i=new Nn([n]);if(Ql(r)){const o=Ey(r.mapValue).fields;if(o.length===0)t.push(i);else for(const l of o)t.push(i.child(l))}else t.push(i)}),new Ur(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(t,n,r,i,o,l,c){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(t){return new Vr(t,0,Ke.min(),Ke.min(),Ke.min(),Tr.empty(),0)}static newFoundDocument(t,n,r,i){return new Vr(t,1,n,Ke.min(),r,i,0)}static newNoDocument(t,n){return new Vr(t,2,n,Ke.min(),Ke.min(),Tr.empty(),0)}static newUnknownDocument(t,n){return new Vr(t,3,n,Ke.min(),Ke.min(),Tr.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Tr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Tr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ke.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Vr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Vr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(t,n){this.position=t,this.inclusive=n}}function im(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],l=e.position[i];if(o.field.isKeyField()?r=le.comparator(le.fromName(l.referenceValue),n.key):r=mo(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function sm(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Xr(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(t,n="asc"){this.field=t,this.dir=n}}function Dht(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{}class bn extends Ay{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new Pht(t,n,r):n==="array-contains"?new $ht(t,r):n==="in"?new Nht(t,r):n==="not-in"?new Fht(t,r):n==="array-contains-any"?new Vht(t,r):new bn(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new Mht(t,r):new Lht(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(mo(n,this.value)):n!==null&&go(this.value)===go(n)&&this.matchesComparison(mo(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ji extends Ay{constructor(t,n){super(),this.filters=t,this.op=n,this.ce=null}static create(t,n){return new ji(t,n)}matches(t){return Sy(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.le(n=>n.isInequality());return t!==null?t.field:null}le(t){for(const n of this.getFlattenedFilters())if(t(n))return n;return null}}function Sy(e){return e.op==="and"}function ky(e){return Oht(e)&&Sy(e)}function Oht(e){for(const t of e.filters)if(t instanceof ji)return!1;return!0}function wf(e){if(e instanceof bn)return e.field.canonicalString()+e.op.toString()+yo(e.value);if(ky(e))return e.filters.map(t=>wf(t)).join(",");{const t=e.filters.map(n=>wf(n)).join(",");return`${e.op}(${t})`}}function Cy(e,t){return e instanceof bn?function(r,i){return i instanceof bn&&r.op===i.op&&r.field.isEqual(i.field)&&Xr(r.value,i.value)}(e,t):e instanceof ji?function(r,i){return i instanceof ji&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,l,c)=>o&&Cy(l,i.filters[c]),!0):!1}(e,t):void fe()}function Ty(e){return e instanceof bn?function(n){return`${n.field.canonicalString()} ${n.op} ${yo(n.value)}`}(e):e instanceof ji?function(n){return n.op.toString()+" {"+n.getFilters().map(Ty).join(" ,")+"}"}(e):"Filter"}class Pht extends bn{constructor(t,n,r){super(t,n,r),this.key=le.fromName(r.referenceValue)}matches(t){const n=le.comparator(t.key,this.key);return this.matchesComparison(n)}}class Mht extends bn{constructor(t,n){super(t,"in",n),this.keys=Iy("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Lht extends bn{constructor(t,n){super(t,"not-in",n),this.keys=Iy("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Iy(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class $ht extends bn{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return ud(n)&&Aa(n.arrayValue,this.value)}}class Nht extends bn{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Aa(this.value.arrayValue,n)}}class Fht extends bn{constructor(t,n){super(t,"not-in",n)}matches(t){if(Aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Aa(this.value.arrayValue,n)}}class Vht extends bn{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!ud(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Aa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qht{constructor(t,n=null,r=[],i=[],o=null,l=null,c=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=c,this.he=null}}function om(e,t=null,n=[],r=[],i=null,o=null,l=null){return new qht(e,t,n,r,i,o,l)}function hd(e){const t=Ve(e);if(t.he===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>wf(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),ld(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>yo(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>yo(r)).join(",")),t.he=n}return t.he}function fd(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Dht(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Cy(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!sm(e.startAt,t.startAt)&&sm(e.endAt,t.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(t,n=null,r=[],i=[],o=null,l="F",c=null,f=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=f,this.Pe=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Bht(e,t,n,r,i,o,l,c){return new nu(e,t,n,r,i,o,l,c)}function Uht(e){return new nu(e)}function am(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function zht(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Hht(e){for(const t of e.filters){const n=t.getFirstInequalityField();if(n!==null)return n}return null}function Ght(e){return e.collectionGroup!==null}function ca(e){const t=Ve(e);if(t.Pe===null){t.Pe=[];const n=Hht(t),r=zht(t);if(n!==null&&r===null)n.isKeyField()||t.Pe.push(new la(n)),t.Pe.push(new la(Nn.keyField(),"asc"));else{let i=!1;for(const o of t.explicitOrderBy)t.Pe.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new la(Nn.keyField(),o))}}}return t.Pe}function ws(e){const t=Ve(e);return t.Ie||(t.Ie=Wht(t,ca(e))),t.Ie}function Wht(e,t){if(e.limitType==="F")return om(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new la(i.field,o)});const n=e.endAt?new yc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new yc(e.startAt.position,e.startAt.inclusive):null;return om(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function xf(e,t,n){return new nu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ry(e,t){return fd(ws(e),ws(t))&&e.limitType===t.limitType}function Dy(e){return`${hd(ws(e))}|lt:${e.limitType}`}function ta(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Ty(i)).join(", ")}]`),ld(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>yo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>yo(i)).join(",")),`Target(${r})`}(ws(e))}; limitType=${e.limitType})`}function dd(e,t){return t.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):le.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(e,t)&&function(r,i){for(const o of ca(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(l,c,f){const d=im(l,c,f);return l.inclusive?d<=0:d<0}(r.startAt,ca(r),i)||r.endAt&&!function(l,c,f){const d=im(l,c,f);return l.inclusive?d>=0:d>0}(r.endAt,ca(r),i))}(e,t)}function jht(e){return(t,n)=>{let r=!1;for(const i of ca(e)){const o=Kht(i,t,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Kht(e,t,n){const r=e.field.isKeyField()?le.comparator(t.key,n.key):function(o,l,c){const f=l.data.field(o),d=c.data.field(o);return f!==null&&d!==null?mo(f,d):fe()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,t))return o}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Io(this.inner,(n,r)=>{for(const[i,o]of r)t(i,o)})}isEmpty(){return wy(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yht=new rr(le.comparator);function vc(){return Yht}const Oy=new rr(le.comparator);function Kl(...e){let t=Oy;for(const n of e)t=t.insert(n.key,n);return t}function Py(e){let t=Oy;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function ys(){return ua()}function My(){return ua()}function ua(){return new Ro(e=>e.toString(),(e,t)=>e.isEqual(t))}const Qht=new rr(le.comparator),Zht=new Zn(le.comparator);function $n(...e){let t=Zht;for(const n of e)t=t.add(n);return t}const Xht=new Zn(Me);function Jht(){return Xht}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_c(t)?"-0":t}}function $y(e){return{integerValue:""+e}}function tft(e,t){return kht(t)?$y(t):Ly(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(){this._=void 0}}function eft(e,t,n){return e instanceof bc?function(i,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&cd(o)&&(o=xy(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(n,t):e instanceof vo?Fy(e,t):e instanceof Sa?Vy(e,t):function(i,o){const l=Ny(i,o),c=lm(l)+lm(i.Te);return bf(l)&&bf(i.Te)?$y(c):Ly(i.serializer,c)}(e,t)}function nft(e,t,n){return e instanceof vo?Fy(e,t):e instanceof Sa?Vy(e,t):n}function Ny(e,t){return e instanceof wc?function(r){return bf(r)||function(o){return!!o&&"doubleValue"in o}(r)}(t)?t:{integerValue:0}:null}class bc extends ru{}class vo extends ru{constructor(t){super(),this.elements=t}}function Fy(e,t){const n=qy(t);for(const r of e.elements)n.some(i=>Xr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Sa extends ru{constructor(t){super(),this.elements=t}}function Vy(e,t){let n=qy(t);for(const r of e.elements)n=n.filter(i=>!Xr(i,r));return{arrayValue:{values:n}}}class wc extends ru{constructor(t,n){super(),this.serializer=t,this.Te=n}}function lm(e){return Cn(e.integerValue||e.doubleValue)}function qy(e){return ud(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rft{constructor(t,n){this.field=t,this.transform=n}}function ift(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof vo&&i instanceof vo||r instanceof Sa&&i instanceof Sa?_o(r.elements,i.elements,Xr):r instanceof wc&&i instanceof wc?Xr(r.Te,i.Te):r instanceof bc&&i instanceof bc}(e.transform,t.transform)}class sft{constructor(t,n){this.version=t,this.transformResults=n}}class bi{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new bi}static exists(t){return new bi(void 0,t)}static updateTime(t){return new bi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Zl(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class iu{}function By(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new zy(e.key,bi.none()):new su(e.key,e.data,bi.none());{const n=e.data,r=Tr.empty();let i=new Zn(Nn.comparator);for(let o of t.fields)if(!i.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new Rs(e.key,r,new Ur(i.toArray()),bi.none())}}function oft(e,t,n){e instanceof su?function(i,o,l){const c=i.value.clone(),f=um(i.fieldTransforms,o,l.transformResults);c.setAll(f),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(e,t,n):e instanceof Rs?function(i,o,l){if(!Zl(i.precondition,o))return void o.convertToUnknownDocument(l.version);const c=um(i.fieldTransforms,o,l.transformResults),f=o.data;f.setAll(Uy(i)),f.setAll(c),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(e,t,n):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,t,n)}function ha(e,t,n,r){return e instanceof su?function(o,l,c,f){if(!Zl(o.precondition,l))return c;const d=o.value.clone(),g=hm(o.fieldTransforms,f,l);return d.setAll(g),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null}(e,t,n,r):e instanceof Rs?function(o,l,c,f){if(!Zl(o.precondition,l))return c;const d=hm(o.fieldTransforms,f,l),g=l.data;return g.setAll(Uy(o)),g.setAll(d),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(e,t,n,r):function(o,l,c){return Zl(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(e,t,n)}function aft(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),o=Ny(r.transform,i||null);o!=null&&(n===null&&(n=Tr.empty()),n.set(r.field,o))}return n||null}function cm(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&_o(r,i,(o,l)=>ift(o,l))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class su extends iu{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Rs extends iu{constructor(t,n,r,i,o=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Uy(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function um(e,t,n){const r=new Map;En(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],l=o.transform,c=t.data.field(o.field);r.set(o.field,nft(l,c,n[i]))}return r}function hm(e,t,n){const r=new Map;for(const i of e){const o=i.transform,l=n.data.field(i.field);r.set(i.field,eft(o,l,t))}return r}class zy extends iu{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lft extends iu{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cft{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(t.key)&&oft(o,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=ha(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=ha(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=My();return this.mutations.forEach(i=>{const o=t.get(i.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=n.has(i.key)?null:c;const f=By(l,c);f!==null&&r.set(i.key,f),l.isValidDocument()||l.convertToNoDocument(Ke.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),$n())}isEqual(t){return this.batchId===t.batchId&&_o(this.mutations,t.mutations,(n,r)=>cm(n,r))&&_o(this.baseMutations,t.baseMutations,(n,r)=>cm(n,r))}}class pd{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){En(t.mutations.length===r.length);let i=function(){return Qht}();const o=t.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new pd(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uft{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rn,de;function hft(e){switch(e){default:return fe();case dt.CANCELLED:case dt.UNKNOWN:case dt.DEADLINE_EXCEEDED:case dt.RESOURCE_EXHAUSTED:case dt.INTERNAL:case dt.UNAVAILABLE:case dt.UNAUTHENTICATED:return!1;case dt.INVALID_ARGUMENT:case dt.NOT_FOUND:case dt.ALREADY_EXISTS:case dt.PERMISSION_DENIED:case dt.FAILED_PRECONDITION:case dt.ABORTED:case dt.OUT_OF_RANGE:case dt.UNIMPLEMENTED:case dt.DATA_LOSS:return!0}}function fft(e){if(e===void 0)return Cs("GRPC error has no .code"),dt.UNKNOWN;switch(e){case rn.OK:return dt.OK;case rn.CANCELLED:return dt.CANCELLED;case rn.UNKNOWN:return dt.UNKNOWN;case rn.DEADLINE_EXCEEDED:return dt.DEADLINE_EXCEEDED;case rn.RESOURCE_EXHAUSTED:return dt.RESOURCE_EXHAUSTED;case rn.INTERNAL:return dt.INTERNAL;case rn.UNAVAILABLE:return dt.UNAVAILABLE;case rn.UNAUTHENTICATED:return dt.UNAUTHENTICATED;case rn.INVALID_ARGUMENT:return dt.INVALID_ARGUMENT;case rn.NOT_FOUND:return dt.NOT_FOUND;case rn.ALREADY_EXISTS:return dt.ALREADY_EXISTS;case rn.PERMISSION_DENIED:return dt.PERMISSION_DENIED;case rn.FAILED_PRECONDITION:return dt.FAILED_PRECONDITION;case rn.ABORTED:return dt.ABORTED;case rn.OUT_OF_RANGE:return dt.OUT_OF_RANGE;case rn.UNIMPLEMENTED:return dt.UNIMPLEMENTED;case rn.DATA_LOSS:return dt.DATA_LOSS;default:return fe()}}(de=rn||(rn={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new hht([4294967295,4294967295],0);class dft{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Ef(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function pft(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function _ft(e,t){return Ef(e,t.toTimestamp())}function ho(e){return En(!!e),Ke.fromTimestamp(function(n){const r=Ts(n);return new wn(r.seconds,r.nanos)}(e))}function Hy(e,t){return function(r){return new on(["projects",r.projectId,"databases",r.database])}(e).child("documents").child(t).canonicalString()}function gft(e){const t=on.fromString(e);return En(Aft(t)),t}function Af(e,t){return Hy(e.databaseId,t.path)}function mft(e){const t=gft(e);return t.length===4?on.emptyPath():vft(t)}function yft(e){return new on(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function vft(e){return En(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function fm(e,t,n){return{name:Af(e,t),fields:n.value.mapValue.fields}}function bft(e,t){let n;if(t instanceof su)n={update:fm(e,t.key,t.value)};else if(t instanceof zy)n={delete:Af(e,t.key)};else if(t instanceof Rs)n={update:fm(e,t.key,t.data),updateMask:Eft(t.fieldMask)};else{if(!(t instanceof lft))return fe();n={verify:Af(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof bc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof vo)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Sa)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof wc)return{fieldPath:l.field.canonicalString(),increment:c.Te};throw fe()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:_ft(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:fe()}(e,t.precondition)),n}function wft(e,t){return e&&e.length>0?(En(t!==void 0),e.map(n=>function(i,o){let l=i.updateTime?ho(i.updateTime):ho(o);return l.isEqual(Ke.min())&&(l=ho(o)),new sft(l,i.transformResults||[])}(n,t))):[]}function xft(e){let t=mft(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){En(r===1);const g=n.from[0];g.allDescendants?i=g.collectionId:t=t.child(g.collectionId)}let o=[];n.where&&(o=function(v){const S=Gy(v);return S instanceof ji&&ky(S)?S.getFilters():[S]}(n.where));let l=[];n.orderBy&&(l=function(v){return v.map(S=>function(q){return new la(io(q.field),function(tt){switch(tt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(q.direction))}(S))}(n.orderBy));let c=null;n.limit&&(c=function(v){let S;return S=typeof v=="object"?v.value:v,ld(S)?null:S}(n.limit));let f=null;n.startAt&&(f=function(v){const S=!!v.before,E=v.values||[];return new yc(E,S)}(n.startAt));let d=null;return n.endAt&&(d=function(v){const S=!v.before,E=v.values||[];return new yc(E,S)}(n.endAt)),Bht(t,i,l,o,c,"F",f,d)}function Gy(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=io(n.unaryFilter.field);return bn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=io(n.unaryFilter.field);return bn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=io(n.unaryFilter.field);return bn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=io(n.unaryFilter.field);return bn.create(l,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(e):e.fieldFilter!==void 0?function(n){return bn.create(io(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return ji.create(n.compositeFilter.filters.map(r=>Gy(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fe()}}(n.compositeFilter.op))}(e):fe()}function io(e){return Nn.fromServerFormat(e.fieldPath)}function Eft(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Aft(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sft{constructor(t){this.ht=t}}function kft(e){const t=xft({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?xf(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cft{constructor(){this.an=new Tft}addToCollectionParentIndex(t,n){return this.an.add(n),ft.resolve()}getCollectionParents(t,n){return ft.resolve(this.an.getEntries(n))}addFieldIndex(t,n){return ft.resolve()}deleteFieldIndex(t,n){return ft.resolve()}deleteAllFieldIndexes(t){return ft.resolve()}createTargetIndexes(t,n){return ft.resolve()}getDocumentsMatchingTarget(t,n){return ft.resolve(null)}getIndexType(t,n){return ft.resolve(0)}getFieldIndexes(t,n){return ft.resolve([])}getNextCollectionGroupToUpdate(t){return ft.resolve(null)}getMinOffset(t,n){return ft.resolve(Wi.min())}getMinOffsetFromCollectionGroup(t,n){return ft.resolve(Wi.min())}updateCollectionGroup(t,n,r){return ft.resolve()}updateIndexEntries(t,n){return ft.resolve()}}class Tft{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Zn(on.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Zn(on.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static Bn(){return new bo(0)}static Ln(){return new bo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ift{constructor(){this.changes=new Ro(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Vr.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ft.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rft{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dft{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&ha(r.mutation,i,Ur.empty(),wn.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,$n()).next(()=>r))}getLocalViewOfDocuments(t,n,r=$n()){const i=ys();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(o=>{let l=Kl();return o.forEach((c,f)=>{l=l.insert(c,f.overlayedDocument)}),l}))}getOverlayedDocuments(t,n){const r=ys();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,$n()))}populateOverlays(t,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(t,i).next(o=>{o.forEach((l,c)=>{n.set(l,c)})})}computeViews(t,n,r,i){let o=vc();const l=ua(),c=function(){return ua()}();return n.forEach((f,d)=>{const g=r.get(d.key);i.has(d.key)&&(g===void 0||g.mutation instanceof Rs)?o=o.insert(d.key,d):g!==void 0?(l.set(d.key,g.mutation.getFieldMask()),ha(g.mutation,d,g.mutation.getFieldMask(),wn.now())):l.set(d.key,Ur.empty())}),this.recalculateAndSaveOverlays(t,o).next(f=>(f.forEach((d,g)=>l.set(d,g)),n.forEach((d,g)=>{var v;return c.set(d,new Rft(g,(v=l.get(d))!==null&&v!==void 0?v:null))}),c))}recalculateAndSaveOverlays(t,n){const r=ua();let i=new rr((l,c)=>l-c),o=$n();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(l=>{for(const c of l)c.keys().forEach(f=>{const d=n.get(f);if(d===null)return;let g=r.get(f)||Ur.empty();g=c.applyToLocalView(d,g),r.set(f,g);const v=(i.get(c.batchId)||$n()).add(f);i=i.insert(c.batchId,v)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const f=c.getNext(),d=f.key,g=f.value,v=My();g.forEach(S=>{if(!o.has(S)){const E=By(n.get(S),r.get(S));E!==null&&v.set(S,E),o=o.add(S)}}),l.push(this.documentOverlayCache.saveOverlays(t,d,v))}return ft.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(l){return le.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Ght(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-o.size):ft.resolve(ys());let c=-1,f=o;return l.next(d=>ft.forEach(d,(g,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),o.get(g)?ft.resolve():this.remoteDocumentCache.getEntry(t,g).next(S=>{f=f.insert(g,S)}))).next(()=>this.populateOverlays(t,d,o)).next(()=>this.computeViews(t,f,d,$n())).next(g=>({batchId:c,changes:Py(g)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new le(n)).next(r=>{let i=Kl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const o=n.collectionGroup;let l=Kl();return this.indexManager.getCollectionParents(t,o).next(c=>ft.forEach(c,f=>{const d=function(v,S){return new nu(S,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,f.child(o));return this.getDocumentsMatchingCollectionQuery(t,d,r,i).next(g=>{g.forEach((v,S)=>{l=l.insert(v,S)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(t,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,o,i))).next(l=>{o.forEach((f,d)=>{const g=d.getKey();l.get(g)===null&&(l=l.insert(g,Vr.newInvalidDocument(g)))});let c=Kl();return l.forEach((f,d)=>{const g=o.get(f);g!==void 0&&ha(g.mutation,d,Ur.empty(),wn.now()),dd(n,d)&&(c=c.insert(f,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oft{constructor(t){this.serializer=t,this.lr=new Map,this.hr=new Map}getBundleMetadata(t,n){return ft.resolve(this.lr.get(n))}saveBundleMetadata(t,n){return this.lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ho(i.createTime)}}(n)),ft.resolve()}getNamedQuery(t,n){return ft.resolve(this.hr.get(n))}saveNamedQuery(t,n){return this.hr.set(n.name,function(i){return{name:i.name,query:kft(i.bundledQuery),readTime:ho(i.readTime)}}(n)),ft.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pft{constructor(){this.overlays=new rr(le.comparator),this.Pr=new Map}getOverlay(t,n){return ft.resolve(this.overlays.get(n))}getOverlays(t,n){const r=ys();return ft.forEach(n,i=>this.getOverlay(t,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,o)=>{this.It(t,n,o)}),ft.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.Pr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Pr.delete(r)),ft.resolve()}getOverlaysForCollection(t,n,r){const i=ys(),o=n.length+1,l=new le(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const f=c.getNext().value,d=f.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&f.largestBatchId>r&&i.set(f.getKey(),f)}return ft.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let o=new rr((d,g)=>d-g);const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let g=o.get(d.largestBatchId);g===null&&(g=ys(),o=o.insert(d.largestBatchId,g)),g.set(d.getKey(),d)}}const c=ys(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((d,g)=>c.set(d,g)),!(c.size()>=i)););return ft.resolve(c)}It(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Pr.get(i.largestBatchId).delete(r.key);this.Pr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new uft(n,r));let o=this.Pr.get(n);o===void 0&&(o=$n(),this.Pr.set(n,o)),this.Pr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(){this.Ir=new Zn(vn.dr),this.Tr=new Zn(vn.Er)}isEmpty(){return this.Ir.isEmpty()}addReference(t,n){const r=new vn(t,n);this.Ir=this.Ir.add(r),this.Tr=this.Tr.add(r)}Ar(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Rr(new vn(t,n))}Vr(t,n){t.forEach(r=>this.removeReference(r,n))}mr(t){const n=new le(new on([])),r=new vn(n,t),i=new vn(n,t+1),o=[];return this.Tr.forEachInRange([r,i],l=>{this.Rr(l),o.push(l.key)}),o}gr(){this.Ir.forEach(t=>this.Rr(t))}Rr(t){this.Ir=this.Ir.delete(t),this.Tr=this.Tr.delete(t)}pr(t){const n=new le(new on([])),r=new vn(n,t),i=new vn(n,t+1);let o=$n();return this.Tr.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(t){const n=new vn(t,0),r=this.Ir.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class vn{constructor(t,n){this.key=t,this.yr=n}static dr(t,n){return le.comparator(t.key,n.key)||Me(t.yr,n.yr)}static Er(t,n){return Me(t.yr,n.yr)||le.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mft{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new Zn(vn.dr)}checkEmpty(t){return ft.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const o=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new cft(o,n,r,i);this.mutationQueue.push(l);for(const c of i)this.Sr=this.Sr.add(new vn(c.key,o)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return ft.resolve(l)}lookupMutationBatch(t,n){return ft.resolve(this.br(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Dr(r),o=i<0?0:i;return ft.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ft.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(t){return ft.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new vn(n,0),i=new vn(n,Number.POSITIVE_INFINITY),o=[];return this.Sr.forEachInRange([r,i],l=>{const c=this.br(l.yr);o.push(c)}),ft.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Zn(Me);return n.forEach(i=>{const o=new vn(i,0),l=new vn(i,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([o,l],c=>{r=r.add(c.yr)})}),ft.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let o=r;le.isDocumentKey(o)||(o=o.child(""));const l=new vn(new le(o),0);let c=new Zn(Me);return this.Sr.forEachWhile(f=>{const d=f.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(f.yr)),!0)},l),ft.resolve(this.Cr(c))}Cr(t){const n=[];return t.forEach(r=>{const i=this.br(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){En(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Sr;return ft.forEach(n.mutations,i=>{const o=new vn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Sr=r})}xn(t){}containsKey(t,n){const r=new vn(n,0),i=this.Sr.firstAfterOrEqual(r);return ft.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,ft.resolve()}vr(t,n){return this.Dr(t)}Dr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}br(t){const n=this.Dr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lft{constructor(t){this.Fr=t,this.docs=function(){return new rr(le.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,l=this.Fr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return ft.resolve(r?r.document.mutableCopy():Vr.newInvalidDocument(n))}getEntries(t,n){let r=vc();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Vr.newInvalidDocument(i))}),ft.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let o=vc();const l=n.path,c=new le(l.child("")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:d,value:{document:g}}=f.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||Eht(xht(g),r)<=0||(i.has(g.key)||dd(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return ft.resolve(o)}getAllFromCollectionGroup(t,n,r,i){fe()}Mr(t,n){return ft.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new $ft(this)}getSize(t){return ft.resolve(this.size)}}class $ft extends Ift{constructor(t){super(),this.ur=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ur.addEntry(t,i)):this.ur.removeEntry(r)}),ft.waitFor(n)}getFromCache(t,n){return this.ur.getEntry(t,n)}getAllFromCache(t,n){return this.ur.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nft{constructor(t){this.persistence=t,this.Or=new Ro(n=>hd(n),fd),this.lastRemoteSnapshotVersion=Ke.min(),this.highestTargetId=0,this.Nr=0,this.Br=new _d,this.targetCount=0,this.Lr=bo.Bn()}forEachTarget(t,n){return this.Or.forEach((r,i)=>n(i)),ft.resolve()}getLastRemoteSnapshotVersion(t){return ft.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ft.resolve(this.Nr)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),ft.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Nr&&(this.Nr=n),ft.resolve()}Qn(t){this.Or.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new bo(n),this.highestTargetId=n),t.sequenceNumber>this.Nr&&(this.Nr=t.sequenceNumber)}addTargetData(t,n){return this.Qn(n),this.targetCount+=1,ft.resolve()}updateTargetData(t,n){return this.Qn(n),ft.resolve()}removeTargetData(t,n){return this.Or.delete(n.target),this.Br.mr(n.targetId),this.targetCount-=1,ft.resolve()}removeTargets(t,n,r){let i=0;const o=[];return this.Or.forEach((l,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Or.delete(l),o.push(this.removeMatchingKeysForTargetId(t,c.targetId)),i++)}),ft.waitFor(o).next(()=>i)}getTargetCount(t){return ft.resolve(this.targetCount)}getTargetData(t,n){const r=this.Or.get(n)||null;return ft.resolve(r)}addMatchingKeys(t,n,r){return this.Br.Ar(n,r),ft.resolve()}removeMatchingKeys(t,n,r){this.Br.Vr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(l=>{o.push(i.markPotentiallyOrphaned(t,l))}),ft.waitFor(o)}removeMatchingKeysForTargetId(t,n){return this.Br.mr(n),ft.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Br.pr(n);return ft.resolve(r)}containsKey(t,n){return ft.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fft{constructor(t,n){this.kr={},this.overlays={},this.qr=new by(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=t(this),this.Kr=new Nft(this),this.indexManager=new Cft,this.remoteDocumentCache=function(i){return new Lft(i)}(r=>this.referenceDelegate.$r(r)),this.serializer=new Sft(n),this.Ur=new Oft(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Pft,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.kr[t.toKey()];return r||(r=new Mft(n,this.referenceDelegate),this.kr[t.toKey()]=r),r}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ur}runTransaction(t,n,r){qt("MemoryPersistence","Starting transaction:",t);const i=new Vft(this.qr.next());return this.referenceDelegate.Wr(),r(i).next(o=>this.referenceDelegate.Gr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}zr(t,n){return ft.or(Object.values(this.kr).map(r=>()=>r.containsKey(t,n)))}}class Vft extends Sht{constructor(t){super(),this.currentSequenceNumber=t}}class gd{constructor(t){this.persistence=t,this.jr=new _d,this.Hr=null}static Jr(t){return new gd(t)}get Yr(){if(this.Hr)return this.Hr;throw fe()}addReference(t,n,r){return this.jr.addReference(r,n),this.Yr.delete(r.toString()),ft.resolve()}removeReference(t,n,r){return this.jr.removeReference(r,n),this.Yr.add(r.toString()),ft.resolve()}markPotentiallyOrphaned(t,n){return this.Yr.add(n.toString()),ft.resolve()}removeTarget(t,n){this.jr.mr(n.targetId).forEach(i=>this.Yr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(o=>this.Yr.add(o.toString()))}).next(()=>r.removeTargetData(t,n))}Wr(){this.Hr=new Set}Gr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ft.forEach(this.Yr,r=>{const i=le.fromPath(r);return this.Zr(t,i).next(o=>{o||n.removeEntry(i,Ke.min())})}).next(()=>(this.Hr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Zr(t,n).next(r=>{r?this.Yr.delete(n.toString()):this.Yr.add(n.toString())})}$r(t){return 0}Zr(t,n){return ft.or([()=>ft.resolve(this.jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.zr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.Qi=r,this.Ki=i}static $i(t,n){let r=$n(),i=$n();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new md(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qft{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bft{constructor(){this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=2}initialize(t,n){this.ji=t,this.indexManager=n,this.Ui=!0}getDocumentsMatchingQuery(t,n,r,i){const o={result:null};return this.Hi(t,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Ji(t,n,i,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new qft;return this.Yi(t,n,l).next(c=>{if(o.result=c,this.Wi)return this.Zi(t,n,l,c.size)})}).next(()=>o.result)}Zi(t,n,r,i){return r.documentReadCount<this.Gi?(Jo()<=_e.DEBUG&&qt("QueryEngine","SDK will not create cache indexes for query:",ta(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),ft.resolve()):(Jo()<=_e.DEBUG&&qt("QueryEngine","Query:",ta(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.zi*i?(Jo()<=_e.DEBUG&&qt("QueryEngine","The SDK decides to create cache indexes for query:",ta(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ws(n))):ft.resolve())}Hi(t,n){if(am(n))return ft.resolve(null);let r=ws(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=xf(n,null,"F"),r=ws(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(o=>{const l=$n(...o);return this.ji.getDocuments(t,l).next(c=>this.indexManager.getMinOffset(t,r).next(f=>{const d=this.Xi(n,c);return this.es(n,d,l,f.readTime)?this.Hi(t,xf(n,null,"F")):this.ts(t,d,n,f)}))})))}Ji(t,n,r,i){return am(n)||i.isEqual(Ke.min())?ft.resolve(null):this.ji.getDocuments(t,r).next(o=>{const l=this.Xi(n,o);return this.es(n,l,r,i)?ft.resolve(null):(Jo()<=_e.DEBUG&&qt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ta(n)),this.ts(t,l,n,wht(i,-1)).next(c=>c))})}Xi(t,n){let r=new Zn(jht(t));return n.forEach((i,o)=>{dd(t,o)&&(r=r.add(o))}),r}es(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const o=t.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Yi(t,n,r){return Jo()<=_e.DEBUG&&qt("QueryEngine","Using full collection scan to execute query:",ta(n)),this.ji.getDocumentsMatchingQuery(t,n,Wi.min(),r)}ts(t,n,r,i){return this.ji.getDocumentsMatchingQuery(t,r,i).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uft{constructor(t,n,r,i){this.persistence=t,this.ns=n,this.serializer=i,this.rs=new rr(Me),this.ss=new Ro(o=>hd(o),fd),this.os=new Map,this._s=t.getRemoteDocumentCache(),this.Kr=t.getTargetCache(),this.Ur=t.getBundleCache(),this.us(r)}us(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Dft(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.rs))}}function zft(e,t,n,r){return new Uft(e,t,n,r)}async function Wy(e,t){const n=Ve(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.us(t),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let f=$n();for(const d of i){l.push(d.batchId);for(const g of d.mutations)f=f.add(g.key)}for(const d of o){c.push(d.batchId);for(const g of d.mutations)f=f.add(g.key)}return n.localDocuments.getDocuments(r,f).next(d=>({cs:d,removedBatchIds:l,addedBatchIds:c}))})})}function Hft(e,t){const n=Ve(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),o=n._s.newChangeBuffer({trackRemovals:!0});return function(c,f,d,g){const v=d.batch,S=v.keys();let E=ft.resolve();return S.forEach(q=>{E=E.next(()=>g.getEntry(f,q)).next(Q=>{const tt=d.docVersions.get(q);En(tt!==null),Q.version.compareTo(tt)<0&&(v.applyToRemoteDocument(Q,d),Q.isValidDocument()&&(Q.setReadTime(d.commitVersion),g.addEntry(Q)))})}),E.next(()=>c.mutationQueue.removeMutationBatch(f,v))}(n,r,t,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=$n();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(f=f.add(c.batch.mutations[d].key));return f}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function Gft(e){const t=Ve(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Kr.getLastRemoteSnapshotVersion(n))}function Wft(e,t){const n=Ve(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}class dm{constructor(){this.activeTargetIds=Jht()}Rs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}As(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class jft{constructor(){this.ro=new dm,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.ro.Rs(t),this.io[t]||"not-current"}updateQueryState(t,n,r){this.io[t]=n}removeLocalQueryTarget(t){this.ro.Vs(t)}isLocalQueryTarget(t){return this.ro.activeTargetIds.has(t)}clearQueryState(t){delete this.io[t]}getAllActiveQueryTargets(){return this.ro.activeTargetIds}isActiveQueryTarget(t){return this.ro.activeTargetIds.has(t)}start(){return this.ro=new dm,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kft{so(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(){this.oo=()=>this._o(),this.ao=()=>this.uo(),this.co=[],this.lo()}so(t){this.co.push(t)}shutdown(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}lo(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}_o(){qt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.co)t(0)}uo(){qt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.co)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yl=null;function Wh(){return Yl===null?Yl=function(){return 268435456+Math.round(2147483648*Math.random())}():Yl++,"0x"+Yl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yft={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qft{constructor(t){this.ho=t.ho,this.Po=t.Po}Io(t){this.To=t}Eo(t){this.Ao=t}onMessage(t){this.Ro=t}close(){this.Po()}send(t){this.ho(t)}Vo(){this.To()}mo(t){this.Ao(t)}fo(t){this.Ro(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn="WebChannelConnection";class Zft extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=r+"://"+n.host,this.yo=`projects/${i}/databases/${o}`,this.wo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get So(){return!1}bo(n,r,i,o,l){const c=Wh(),f=this.Do(n,r);qt("RestConnection",`Sending RPC '${n}' ${c}:`,f,i);const d={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(d,o,l),this.vo(n,f,d,i).then(g=>(qt("RestConnection",`Received RPC '${n}' ${c}: `,g),g),g=>{throw pc("RestConnection",`RPC '${n}' ${c} failed with error: `,g,"url: ",f,"request:",i),g})}Fo(n,r,i,o,l,c){return this.bo(n,r,i,o,l)}Co(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+To}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,l)=>n[l]=o),i&&i.headers.forEach((o,l)=>n[l]=o)}Do(n,r){const i=Yft[n];return`${this.po}/v1/${r}:${i}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,n,r,i){const o=Wh();return new Promise((l,c)=>{const f=new uht;f.setWithCredentials(!0),f.listenOnce(lht.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Gh.NO_ERROR:const g=f.getResponseJson();qt(Mn,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(g)),l(g);break;case Gh.TIMEOUT:qt(Mn,`RPC '${t}' ${o} timed out`),c(new Xt(dt.DEADLINE_EXCEEDED,"Request time out"));break;case Gh.HTTP_ERROR:const v=f.getStatus();if(qt(Mn,`RPC '${t}' ${o} failed with status:`,v,"response text:",f.getResponseText()),v>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const E=S==null?void 0:S.error;if(E&&E.status&&E.message){const q=function(tt){const ut=tt.toLowerCase().replace(/_/g,"-");return Object.values(dt).indexOf(ut)>=0?ut:dt.UNKNOWN}(E.status);c(new Xt(q,E.message))}else c(new Xt(dt.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Xt(dt.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{qt(Mn,`RPC '${t}' ${o} completed.`)}});const d=JSON.stringify(i);qt(Mn,`RPC '${t}' ${o} sending request:`,i),f.send(n,"POST",d,r,15)})}Mo(t,n,r){const i=Wh(),o=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=oht(),c=aht(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Co(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const g=o.join("");qt(Mn,`Creating RPC '${t}' stream ${i}: ${g}`,f);const v=l.createWebChannel(g,f);let S=!1,E=!1;const q=new Qft({ho:tt=>{E?qt(Mn,`Not sending because RPC '${t}' stream ${i} is closed:`,tt):(S||(qt(Mn,`Opening RPC '${t}' stream ${i} transport.`),v.open(),S=!0),qt(Mn,`RPC '${t}' stream ${i} sending:`,tt),v.send(tt))},Po:()=>v.close()}),Q=(tt,ut,nt)=>{tt.listen(ut,gt=>{try{nt(gt)}catch(Pt){setTimeout(()=>{throw Pt},0)}})};return Q(v,Gl.EventType.OPEN,()=>{E||qt(Mn,`RPC '${t}' stream ${i} transport opened.`)}),Q(v,Gl.EventType.CLOSE,()=>{E||(E=!0,qt(Mn,`RPC '${t}' stream ${i} transport closed`),q.mo())}),Q(v,Gl.EventType.ERROR,tt=>{E||(E=!0,pc(Mn,`RPC '${t}' stream ${i} transport errored:`,tt),q.mo(new Xt(dt.UNAVAILABLE,"The operation could not be completed")))}),Q(v,Gl.EventType.MESSAGE,tt=>{var ut;if(!E){const nt=tt.data[0];En(!!nt);const gt=nt,Pt=gt.error||((ut=gt[0])===null||ut===void 0?void 0:ut.error);if(Pt){qt(Mn,`RPC '${t}' stream ${i} received error:`,Pt);const Vt=Pt.status;let pt=function(He){const oe=rn[He];if(oe!==void 0)return fft(oe)}(Vt),Kt=Pt.message;pt===void 0&&(pt=dt.INTERNAL,Kt="Unknown error status: "+Vt+" with message "+Pt.message),E=!0,q.mo(new Xt(pt,Kt)),v.close()}else qt(Mn,`RPC '${t}' stream ${i} received:`,nt),q.fo(nt)}}),Q(c,cht.STAT_EVENT,tt=>{tt.stat===Jg.PROXY?qt(Mn,`RPC '${t}' stream ${i} detected buffering proxy`):tt.stat===Jg.NOPROXY&&qt(Mn,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{q.Vo()},0),q}}function jh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(e){return new dft(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(t,n,r=1e3,i=1.5,o=6e4){this._i=t,this.timerId=n,this.xo=r,this.Oo=i,this.No=o,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}reset(){this.Bo=0}qo(){this.Bo=this.No}Qo(t){this.cancel();const n=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),i=Math.max(0,n-r);i>0&&qt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this._i.enqueueAfterDelay(this.timerId,i,()=>(this.ko=Date.now(),t())),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}$o(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Ko(){return(Math.random()-.5)*this.Bo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xft{constructor(t,n,r,i,o,l,c,f){this._i=t,this.Uo=r,this.Wo=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new jy(t,n)}Jo(){return this.state===1||this.state===5||this.Yo()}Yo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Zo()}async stop(){this.Jo()&&await this.close(0)}Xo(){this.state=0,this.Ho.reset()}e_(){this.Yo()&&this.zo===null&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,()=>this.t_()))}n_(t){this.r_(),this.stream.send(t)}async t_(){if(this.Yo())return this.close(0)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}async close(t,n){this.r_(),this.i_(),this.Ho.cancel(),this.Go++,t!==4?this.Ho.reset():n&&n.code===dt.RESOURCE_EXHAUSTED?(Cs(n.toString()),Cs("Using maximum backoff delay to prevent overloading the backend."),this.Ho.qo()):n&&n.code===dt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.s_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Eo(n)}s_(){}auth(){this.state=1;const t=this.o_(this.Go),n=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Go===n&&this.__(r,i)},r=>{t(()=>{const i=new Xt(dt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.a_(i)})})}__(t,n){const r=this.o_(this.Go);this.stream=this.u_(t,n),this.stream.Io(()=>{r(()=>(this.state=2,this.jo=this._i.enqueueAfterDelay(this.Wo,1e4,()=>(this.Yo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.a_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Zo(){this.state=5,this.Ho.Qo(async()=>{this.state=0,this.start()})}a_(t){return qt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}o_(t){return n=>{this._i.enqueueAndForget(()=>this.Go===t?n():(qt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jft extends Xft{constructor(t,n,r,i,o,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,l),this.serializer=o,this.P_=!1}get I_(){return this.P_}start(){this.P_=!1,this.lastStreamToken=void 0,super.start()}s_(){this.P_&&this.d_([])}u_(t,n){return this.connection.Mo("Write",t,n)}onMessage(t){if(En(!!t.streamToken),this.lastStreamToken=t.streamToken,this.P_){this.Ho.reset();const n=wft(t.writeResults,t.commitTime),r=ho(t.commitTime);return this.listener.T_(r,n)}return En(!t.writeResults||t.writeResults.length===0),this.P_=!0,this.listener.E_()}A_(){const t={};t.database=yft(this.serializer),this.n_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>bft(this.serializer,r))};this.n_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tdt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.R_=!1}V_(){if(this.R_)throw new Xt(dt.FAILED_PRECONDITION,"The client has already been terminated.")}bo(t,n,r){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.bo(t,n,r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Xt(dt.UNKNOWN,i.toString())})}Fo(t,n,r,i){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Fo(t,n,r,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Xt(dt.UNKNOWN,o.toString())})}terminate(){this.R_=!0}}class edt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}y_(){this.f_===0&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.g_=null,this.S_("Backend didn't respond within 10 seconds."),this.w_("Offline"),Promise.resolve())))}b_(t){this.state==="Online"?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.w_("Offline")))}set(t){this.D_(),this.f_=0,t==="Online"&&(this.p_=!1),this.w_(t)}w_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}S_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.p_?(Cs(n),this.p_=!1):qt("OnlineStateTracker",n)}D_(){this.g_!==null&&(this.g_.cancel(),this.g_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ndt{constructor(t,n,r,i,o){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=o,this.x_.so(l=>{r.enqueueAndForget(async()=>{za(this)&&(qt("RemoteStore","Restarting streams for network reachability change."),await async function(f){const d=Ve(f);d.F_.add(4),await Ua(d),d.O_.set("Unknown"),d.F_.delete(4),await au(d)}(this))})}),this.O_=new edt(r,i)}}async function au(e){if(za(e))for(const t of e.M_)await t(!0)}async function Ua(e){for(const t of e.M_)await t(!1)}function za(e){return Ve(e).F_.size===0}async function Ky(e,t,n){if(!eu(t))throw t;e.F_.add(1),await Ua(e),e.O_.set("Offline"),n||(n=()=>Gft(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{qt("RemoteStore","Retrying IndexedDB access"),await n(),e.F_.delete(1),await au(e)})}function Yy(e,t){return t().catch(n=>Ky(e,n,t))}async function lu(e){const t=Ve(e),n=Ki(t);let r=t.C_.length>0?t.C_[t.C_.length-1].batchId:-1;for(;rdt(t);)try{const i=await Wft(t.localStore,r);if(i===null){t.C_.length===0&&n.e_();break}r=i.batchId,idt(t,i)}catch(i){await Ky(t,i)}Qy(t)&&Zy(t)}function rdt(e){return za(e)&&e.C_.length<10}function idt(e,t){e.C_.push(t);const n=Ki(e);n.Yo()&&n.I_&&n.d_(t.mutations)}function Qy(e){return za(e)&&!Ki(e).Jo()&&e.C_.length>0}function Zy(e){Ki(e).start()}async function sdt(e){Ki(e).A_()}async function odt(e){const t=Ki(e);for(const n of e.C_)t.d_(n.mutations)}async function adt(e,t,n){const r=e.C_.shift(),i=pd.from(r,t,n);await Yy(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await lu(e)}async function ldt(e,t){t&&Ki(e).I_&&await async function(r,i){if(function(l){return hft(l)&&l!==dt.ABORTED}(i.code)){const o=r.C_.shift();Ki(r).Xo(),await Yy(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await lu(r)}}(e,t),Qy(e)&&Zy(e)}async function _m(e,t){const n=Ve(e);n.asyncQueue.verifyOperationInProgress(),qt("RemoteStore","RemoteStore received new credentials");const r=za(n);n.F_.add(3),await Ua(n),r&&n.O_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.F_.delete(3),await au(n)}async function cdt(e,t){const n=Ve(e);t?(n.F_.delete(2),await au(n)):t||(n.F_.add(2),await Ua(n),n.O_.set("Unknown"))}function Ki(e){return e.L_||(e.L_=function(n,r,i){const o=Ve(n);return o.V_(),new Jft(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(e.datastore,e.asyncQueue,{Io:sdt.bind(null,e),Eo:ldt.bind(null,e),E_:odt.bind(null,e),T_:adt.bind(null,e)}),e.M_.push(async t=>{t?(e.L_.Xo(),await lu(e)):(await e.L_.stop(),e.C_.length>0&&(qt("RemoteStore",`Stopping write stream with ${e.C_.length} pending writes`),e.C_=[]))})),e.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(t,n,r,i,o){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,o){const l=Date.now()+r,c=new yd(t,n,l,i,o);return c.start(r),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xt(dt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xy(e,t){if(Cs("AsyncQueue",`${t}: ${e}`),eu(e))return new Xt(dt.UNAVAILABLE,`${t}: ${e}`);throw e}class udt{constructor(){this.queries=new Ro(t=>Dy(t),Ry),this.onlineState="Unknown",this.K_=new Set}}function hdt(e){e.K_.forEach(t=>{t.next()})}class fdt{constructor(t,n,r,i,o,l){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.fa={},this.ga=new Ro(c=>Dy(c),Ry),this.pa=new Map,this.ya=new Set,this.wa=new rr(le.comparator),this.Sa=new Map,this.ba=new _d,this.Da={},this.Ca=new Map,this.va=bo.Ln(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function ddt(e,t,n){const r=mdt(e);try{const i=await function(l,c){const f=Ve(l),d=wn.now(),g=c.reduce((E,q)=>E.add(q.key),$n());let v,S;return f.persistence.runTransaction("Locally write mutations","readwrite",E=>{let q=vc(),Q=$n();return f._s.getEntries(E,g).next(tt=>{q=tt,q.forEach((ut,nt)=>{nt.isValidDocument()||(Q=Q.add(ut))})}).next(()=>f.localDocuments.getOverlayedDocuments(E,q)).next(tt=>{v=tt;const ut=[];for(const nt of c){const gt=aft(nt,v.get(nt.key).overlayedDocument);gt!=null&&ut.push(new Rs(nt.key,gt,Ey(gt.value.mapValue),bi.exists(!0)))}return f.mutationQueue.addMutationBatch(E,d,ut,c)}).next(tt=>{S=tt;const ut=tt.applyToLocalDocumentSet(v,Q);return f.documentOverlayCache.saveOverlays(E,tt.batchId,ut)})}).then(()=>({batchId:S.batchId,changes:Py(v)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(l,c,f){let d=l.Da[l.currentUser.toKey()];d||(d=new rr(Me)),d=d.insert(c,f),l.Da[l.currentUser.toKey()]=d}(r,i.batchId,n),await cu(r,i.changes),await lu(r.remoteStore)}catch(i){const o=Xy(i,"Failed to persist write");n.reject(o)}}function gm(e,t,n){const r=Ve(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ga.forEach((o,l)=>{const c=l.view.U_(t);c.snapshot&&i.push(c.snapshot)}),function(l,c){const f=Ve(l);f.onlineState=c;let d=!1;f.queries.forEach((g,v)=>{for(const S of v.listeners)S.U_(c)&&(d=!0)}),d&&hdt(f)}(r.eventManager,t),i.length&&r.fa.c_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function pdt(e,t){const n=Ve(e),r=t.batch.batchId;try{const i=await Hft(n.localStore,t);tv(n,r,null),Jy(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await cu(n,i)}catch(i){await vy(i)}}async function _dt(e,t,n){const r=Ve(e);try{const i=await function(l,c){const f=Ve(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let g;return f.mutationQueue.lookupMutationBatch(d,c).next(v=>(En(v!==null),g=v.keys(),f.mutationQueue.removeMutationBatch(d,v))).next(()=>f.mutationQueue.performConsistencyCheck(d)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(d,g,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g)).next(()=>f.localDocuments.getDocuments(d,g))})}(r.localStore,t);tv(r,t,n),Jy(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await cu(r,i)}catch(i){await vy(i)}}function Jy(e,t){(e.Ca.get(t)||[]).forEach(n=>{n.resolve()}),e.Ca.delete(t)}function tv(e,t,n){const r=Ve(e);let i=r.Da[r.currentUser.toKey()];if(i){const o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}async function cu(e,t,n){const r=Ve(e),i=[],o=[],l=[];r.ga.isEmpty()||(r.ga.forEach((c,f)=>{l.push(r.Ma(f,t,n).then(d=>{if((d||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,d!=null&&d.fromCache?"not-current":"current"),d){i.push(d);const g=md.$i(f.targetId,d);o.push(g)}}))}),await Promise.all(l),r.fa.c_(i),await async function(f,d){const g=Ve(f);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>ft.forEach(d,S=>ft.forEach(S.Qi,E=>g.persistence.referenceDelegate.addReference(v,S.targetId,E)).next(()=>ft.forEach(S.Ki,E=>g.persistence.referenceDelegate.removeReference(v,S.targetId,E)))))}catch(v){if(!eu(v))throw v;qt("LocalStore","Failed to update sequence numbers: "+v)}for(const v of d){const S=v.targetId;if(!v.fromCache){const E=g.rs.get(S),q=E.snapshotVersion,Q=E.withLastLimboFreeSnapshotVersion(q);g.rs=g.rs.insert(S,Q)}}}(r.localStore,o))}async function gdt(e,t){const n=Ve(e);if(!n.currentUser.isEqual(t)){qt("SyncEngine","User change. New user:",t.toKey());const r=await Wy(n.localStore,t);n.currentUser=t,function(o,l){o.Ca.forEach(c=>{c.forEach(f=>{f.reject(new Xt(dt.CANCELLED,l))})}),o.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await cu(n,r.cs)}}function mdt(e){const t=Ve(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=pdt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=_dt.bind(null,t),t}class mm{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=ou(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return zft(this.persistence,new Bft,t.initialUser,this.serializer)}createPersistence(t){return new Fft(gd.Jr,this.serializer)}createSharedClientState(t){return new jft}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ydt{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=gdt.bind(null,this.syncEngine),await cdt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new udt}()}createDatastore(t){const n=ou(t.databaseInfo.databaseId),r=function(o){return new Zft(o)}(t.databaseInfo);return function(o,l,c,f){return new tdt(o,l,c,f)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,o,l,c){return new ndt(r,i,o,l,c)}(this.localStore,this.datastore,t.asyncQueue,n=>gm(this.syncEngine,n,0),function(){return pm.C()?new pm:new Kft}())}createSyncEngine(t,n){return function(i,o,l,c,f,d,g){const v=new fdt(i,o,l,c,f,d);return g&&(v.Fa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=Ve(n);qt("RemoteStore","RemoteStore shutting down."),r.F_.add(5),await Ua(r),r.x_.shutdown(),r.O_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vdt{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ln.UNAUTHENTICATED,this.clientId=yy.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async o=>{qt("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(qt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Xt(dt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Xy(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Kh(e,t){e.asyncQueue.verifyOperationInProgress(),qt("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Wy(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function ym(e,t){e.asyncQueue.verifyOperationInProgress();const n=await wdt(e);qt("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(i=>_m(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,o)=>_m(t.remoteStore,o)),e._onlineComponents=t}function bdt(e){return e.name==="FirebaseError"?e.code===dt.FAILED_PRECONDITION||e.code===dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function wdt(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){qt("FirestoreClient","Using user provided OfflineComponentProvider");try{await Kh(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!bdt(n))throw n;pc("Error using user provided cache. Falling back to memory cache: "+n),await Kh(e,new mm)}}else qt("FirestoreClient","Using default OfflineComponentProvider"),await Kh(e,new mm);return e._offlineComponents}async function xdt(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(qt("FirestoreClient","Using user provided OnlineComponentProvider"),await ym(e,e._uninitializedComponentsProvider._online)):(qt("FirestoreClient","Using default OnlineComponentProvider"),await ym(e,new ydt))),e._onlineComponents}function Edt(e){return xdt(e).then(t=>t.syncEngine)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Adt(e,t,n){if(!n)throw new Xt(dt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Sdt(e,t,n,r){if(t===!0&&r===!0)throw new Xt(dt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function bm(e){if(!le.isDocumentKey(e))throw new Xt(dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function vd(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":fe()}function Sf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xt(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vd(e);throw new Xt(dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Xt(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Xt(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Sdt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ev((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Xt(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Xt(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Xt(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class bd{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Xt(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Xt(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wm(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new fht;switch(r.type){case"firstParty":return new ght(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Xt(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=vm.get(n);r&&(qt("ComponentProvider","Removing Datastore"),vm.delete(n),r.terminate())}(this),Promise.resolve()}}function kdt(e,t,n,r={}){var i;const o=(e=Sf(e,bd))._getSettings(),l=`${t}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&pc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),r.mockUserToken){let c,f;if(typeof r.mockUserToken=="string")c=r.mockUserToken,f=Ln.MOCK_USER;else{c=Hlt(r.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Xt(dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ln(d)}e._authCredentials=new dht(new my(c,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new wd(this.firestore,t,this._query)}}class wi{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ka(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new wi(this.firestore,t,this._key)}}class ka extends wd{constructor(t,n,r){super(t,n,Uht(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new wi(this.firestore,null,new le(t))}withConverter(t){return new ka(this.firestore,t,this._path)}}function Cdt(e,t,...n){if(e=As(e),arguments.length===1&&(t=yy.V()),Adt("doc","path",t),e instanceof bd){const r=on.fromString(t,...n);return bm(r),new wi(e,null,new le(r))}{if(!(e instanceof wi||e instanceof ka))throw new Xt(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(on.fromString(t,...n));return bm(r),new wi(e.firestore,e instanceof ka?e.converter:null,new le(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tdt{constructor(){this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new jy(this,"async_queue_retry"),this.ou=()=>{const n=jh();n&&qt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Ho.$o()};const t=jh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ou)}get isShuttingDown(){return this.eu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this._u(),this.au(t)}enterRestrictedMode(t){if(!this.eu){this.eu=!0,this.iu=t||!1;const n=jh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ou)}}enqueue(t){if(this._u(),this.eu)return new Promise(()=>{});const n=new bs;return this.au(()=>this.eu&&this.iu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xa.push(t),this.uu()))}async uu(){if(this.Xa.length!==0){try{await this.Xa[0](),this.Xa.shift(),this.Ho.reset()}catch(t){if(!eu(t))throw t;qt("AsyncQueue","Operation failed with retryable error: "+t)}this.Xa.length>0&&this.Ho.Qo(()=>this.uu())}}au(t){const n=this.Za.then(()=>(this.ru=!0,t().catch(r=>{this.nu=r,this.ru=!1;const i=function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),c}(r);throw Cs("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.ru=!1,r))));return this.Za=n,n}enqueueAfterDelay(t,n,r){this._u(),this.su.indexOf(t)>-1&&(n=0);const i=yd.createAndSchedule(this,t,n,r,o=>this.cu(o));return this.tu.push(i),i}_u(){this.nu&&fe()}verifyOperationInProgress(){}async lu(){let t;do t=this.Za,await t;while(t!==this.Za)}hu(t){for(const n of this.tu)if(n.timerId===t)return!0;return!1}Pu(t){return this.lu().then(()=>{this.tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lu()})}Iu(t){this.su.push(t)}cu(t){const n=this.tu.indexOf(t);this.tu.splice(n,1)}}class nv extends bd{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new Tdt}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||rv(this),this._firestoreClient.terminate()}}function Idt(e,t){const n=typeof e=="object"?e:Kct(),r=typeof e=="string"?e:t||"(default)",i=Hct(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=Ult("firestore");o&&kdt(i,...o)}return i}function Rdt(e){return e._firestoreClient||rv(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function rv(e){var t,n,r;const i=e._freezeSettings(),o=function(c,f,d,g){return new Iht(c,f,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,ev(g.experimentalLongPollingOptions),g.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new vdt(e._authCredentials,e._appCheckCredentials,e._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ca(Ei.fromBase64String(t))}catch(n){throw new Xt(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ca(Ei.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Xt(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Xt(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Xt(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Me(this._lat,t._lat)||Me(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ddt=/^__.*__$/;class sv{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Rs(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function ov(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class hu{constructor(t,n,r,i,o,l){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.du(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Tu(){return this.settings.Tu}Eu(t){return new hu(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Au(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Eu({path:r,Ru:!1});return i.Vu(t),i}mu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Eu({path:r,Ru:!1});return i.du(),i}fu(t){return this.Eu({path:void 0,Ru:!0})}gu(t){return xc(t,this.settings.methodName,this.settings.pu||!1,this.path,this.settings.yu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}du(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vu(this.path.get(t))}Vu(t){if(t.length===0)throw this.gu("Document fields must not be empty");if(ov(this.Tu)&&Ddt.test(t))throw this.gu('Document fields cannot begin and end with "__"')}}class Odt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||ou(t)}wu(t,n,r,i=!1){return new hu({Tu:t,methodName:n,yu:r,path:Nn.emptyPath(),Ru:!1,pu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pdt(e){const t=e._freezeSettings(),n=ou(e._databaseId);return new Odt(e._databaseId,!!t.ignoreUndefinedProperties,n)}class fu extends uu{_toFieldTransform(t){if(t.Tu!==2)throw t.Tu===1?t.gu(`${this._methodName}() can only appear at the top level of your update data`):t.gu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof fu}}function Mdt(e,t,n){return new hu({Tu:3,yu:t.settings.yu,methodName:e._methodName,Ru:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Ldt extends uu{constructor(t,n){super(t),this.Su=n}_toFieldTransform(t){const n=Mdt(this,t,!0),r=this.Su.map(o=>Ha(o,n)),i=new vo(r);return new rft(t.path,i)}isEqual(t){return this===t}}function $dt(e,t,n,r){const i=e.wu(1,t,n);lv("Data must be an object, but it was:",i,r);const o=[],l=Tr.empty();Io(r,(f,d)=>{const g=cv(t,f,n);d=As(d);const v=i.mu(g);if(d instanceof fu)o.push(g);else{const S=Ha(d,v);S!=null&&(o.push(g),l.set(g,S))}});const c=new Ur(o);return new sv(l,c,i.fieldTransforms)}function Ndt(e,t,n,r,i,o){const l=e.wu(1,t,n),c=[xm(t,r,n)],f=[i];if(o.length%2!=0)throw new Xt(dt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<o.length;S+=2)c.push(xm(t,o[S])),f.push(o[S+1]);const d=[],g=Tr.empty();for(let S=c.length-1;S>=0;--S)if(!qdt(d,c[S])){const E=c[S];let q=f[S];q=As(q);const Q=l.mu(E);if(q instanceof fu)d.push(E);else{const tt=Ha(q,Q);tt!=null&&(d.push(E),g.set(E,tt))}}const v=new Ur(d);return new sv(g,v,l.fieldTransforms)}function Ha(e,t){if(av(e=As(e)))return lv("Unsupported field value:",t,e),Fdt(e,t);if(e instanceof uu)return function(r,i){if(!ov(i.Tu))throw i.gu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Ru&&t.Tu!==4)throw t.gu("Nested arrays are not supported");return function(r,i){const o=[];let l=0;for(const c of r){let f=Ha(c,i.fu(l));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),l++}return{arrayValue:{values:o}}}(e,t)}return function(r,i){if((r=As(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tft(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=wn.fromDate(r);return{timestampValue:Ef(i.serializer,o)}}if(r instanceof wn){const o=new wn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ef(i.serializer,o)}}if(r instanceof iv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ca)return{bytesValue:pft(i.serializer,r._byteString)};if(r instanceof wi){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.gu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Hy(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.gu(`Unsupported field value: ${vd(r)}`)}(e,t)}function Fdt(e,t){const n={};return wy(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Io(e,(r,i)=>{const o=Ha(i,t.Au(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function av(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof wn||e instanceof iv||e instanceof Ca||e instanceof wi||e instanceof uu)}function lv(e,t,n){if(!av(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=vd(n);throw r==="an object"?t.gu(e+" a custom object"):t.gu(e+" "+r)}}function xm(e,t,n){if((t=As(t))instanceof xd)return t._internalPath;if(typeof t=="string")return cv(e,t);throw xc("Field path arguments must be of type string or ",e,!1,void 0,n)}const Vdt=new RegExp("[~\\*/\\[\\]]");function cv(e,t,n){if(t.search(Vdt)>=0)throw xc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new xd(...t.split("."))._internalPath}catch{throw xc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function xc(e,t,n,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let c=`Function ${t}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${r}`),l&&(f+=` in document ${i}`),f+=")"),new Xt(dt.INVALID_ARGUMENT,c+e+f)}function qdt(e,t){return e.some(n=>n.isEqual(t))}function Bdt(e,t,n,...r){e=Sf(e,wi);const i=Sf(e.firestore,nv),o=Pdt(i);let l;return l=typeof(t=As(t))=="string"||t instanceof xd?Ndt(o,"updateDoc",e._key,t,n,r):$dt(o,"updateDoc",e._key,t),Udt(i,[l.toMutation(e._key,bi.exists(!0))])}function Udt(e,t){return function(r,i){const o=new bs;return r.asyncQueue.enqueueAndForget(async()=>ddt(await Edt(r),i,o)),o.promise}(Rdt(e),t)}function zdt(...e){return new Ldt("arrayUnion",e)}(function(t,n=!0){(function(i){To=i})(jct),oc(new fa("firestore",(r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new nv(new pht(r.getProvider("auth-internal")),new yht(r.getProvider("app-check-internal")),function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Xt(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mc(d.options.projectId,g)}(l,i),l);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),co(tm,"4.1.3",t),co(tm,"4.1.3","esm2017")})();const Hdt={id:"hit"},Gdt={key:0,class:"cf mt1 hit-header"},Wdt={class:"tc f3 mt1 hit-selector"},jdt={class:"hit-instructions"},Kdt={class:"f4"},Ydt={class:"mr3 hit-browser"},Qdt={class:"hit-browser-inner"},Zdt=["id","onClick"],Xdt={class:"tooltiptext"},Jdt={class:"fr hit-file-buttons"},tpt={class:"mt1 mr1 fr"},ept=H("i",{class:"fa fa-arrow-down"},null,-1),npt=[ept],rpt={class:"mt1 mr2 ml2 fr"},ipt=H("i",{class:"fa fa-arrow-up"},null,-1),spt=[ipt],opt={class:"ba b--black-80 br2 pa2 mb4"},apt={class:"fr"},lpt={key:0},cpt=H("i",{class:"fa-solid fa-arrow-up-short-wide fa-1-5x icon-default pointer mr2"},null,-1),upt={class:"f5"},hpt={key:1},fpt=H("i",{class:"fa-solid fa-arrow-down-short-wide fa-1-5x icon-default pointer mr2"},null,-1),dpt={class:"f5"},ppt={key:0},_pt=H("i",{class:"fa-solid fa-eye-slash fa-1-5x icon-default pointer mr2"},null,-1),gpt={class:"f5"},mpt={key:1},ypt=H("i",{class:"fa-solid fa-eye fa-1-5x icon-default pointer mr2"},null,-1),vpt={class:"f5"},bpt={class:"context-container"},wpt={key:0,class:"mb2"},xpt={key:0,class:"cf"},Ept={class:"fl f3 mt1 mb1"},Apt={class:"f5"},Spt={key:2,class:"cf"},kpt={class:"grid-child"},Cpt={key:0,class:"cf"},Tpt={class:"fl f3 mt0 mb1 orig-sentence-header"},Ipt={class:"f5"},Rpt={class:"grid-child"},Dpt={key:0},Opt={class:"f5"},Ppt={class:"f5"},Mpt={components:{VueMarkdown:fo,ChecklistDefinition:r0},props:["hits_data","current_hit","total_hits","edits_dict","set_hit","selected_state","selected_edits_html","selected_edits","set_selected_edits","set_span_text","set_span_indices","set_edit_html","set_span_category","refresh_interface_edit","set_hits_data","lines","set_lines","config","hit_box_config","toggle_instructions","boundary_editing_mode","boundary_editing_edit","hideHeader"],data(){return{showContext:!1,showReference:!0}},watch:{current_hit(){this.setup_hit_box()},hits_data(){this.setup_hit_box()},showContext(){}},methods:{setup_hit_box(){$("#comment_area").val(""),"comment"in this.hits_data[this.current_hit-1]&&$("#comment_area").val(this.hits_data[this.current_hit-1].comment),this.showConfigToggle()?($(".context-container").hide(0),this.showContext=!1):$(".context-container").show(0),this.reference_exists()&&(this.showReference=!0)},get_circle_class(e){let t="circle-"+e;return e==this.current_hit&&(t+=" circle-active"),this.hits_data&&"bookmark"in this.hits_data[e-1]&&this.hits_data[e-1].bookmark&&(t+=" circle-bookmark"),t},get_bookmark_class(){return this.hits_data&&"bookmark"in this.hits_data[this.current_hit-1]&&this.hits_data[this.current_hit-1].bookmark?"bookmark-active":""},go_to_hit(e){e>this.total_hits?this.set_hit(this.total_hits):e<1?this.set_hit(1):this.set_hit(e),this.setup_hit_box()},go_to_hit_circle(e){e>this.total_hits?this.set_hit(this.total_hits):e<1?this.set_hit(1):this.set_hit(e),this.setup_hit_box()},bookmark_hit(){let e=ze.cloneDeep(this.hits_data);"bookmark"in this.hits_data[this.current_hit-1]?(e[this.current_hit-1].bookmark=!this.hits_data[this.current_hit-1].bookmark,this.set_hits_data(e)):(e[this.current_hit-1].bookmark=!0,this.set_hits_data(e))},toggle_context(){this.showContext=!this.showContext,this.showContext?($(".context-container").hide(0),$(".context-container").show(300)):($(".context-container").show(0),$(".context-container").hide(300))},toggle_reference(){this.showReference=!this.showReference},restart_hit(){let e=ze.cloneDeep(this.hits_data);e[this.current_hit-1].edits=[],this.set_hits_data(e),this.refresh_interface_edit(),this.setup_hit_box()},remove_selected(e,t,n){let r=!1,i=!1;if(this.selected_state.source_idx&&Array.isArray(this.selected_state.source_idx)&&(r=this.selected_state.source_idx.some(o=>o[0]===t&&o[1]===n)),this.selected_state.target_idx&&Array.isArray(this.selected_state.target_idx)&&(i=this.selected_state.target_idx.some(o=>o[0]===t&&o[1]===n)),r){let o=this.hits_data[this.current_hit-1].source,l=this.selected_state.source_idx;for(let f in l){let d=l[f];if(d[0]==t&&d[1]==n){l.splice(f,1);break}}this.set_span_indices(l,"source");let c="";for(let f=0;f<l.length;f++){let[d,g]=l[f];c+=`<span class="bg-${e}-light"> `,c+=`<span onclick="removeSelected('${e}',${d},${g})" class="hover-white black br-pill mr1 pointer">✘</span>`,c+=o.substring(d,g)+" ",c+="</span>",c+="&nbsp&nbsp"}this.set_span_text(c,"source"),this.set_span_category(e,"source")}else if(i){let o=this.hits_data[this.current_hit-1].target,l=this.selected_state.target_idx;for(let f in l){let d=l[f];if(d[0]==t&&d[1]==n){l.splice(f,1);break}}this.set_span_indices(l,"target");let c="";for(let f=0;f<l.length;f++){let[d,g]=l[f];c.substring(d,g),c+=`<span class="bg-${e}-light"> `,c+=`<span onclick="removeSelected('${e}',${d},${g})" class="hover-white black br-pill mr1 pointer">✘</span>`,c+=o.substring(d,g)+" ",c+="</span>",c+="&nbsp&nbsp"}this.set_span_text(c,"target"),this.$nextTick(()=>{this.set_span_indices(l,"target")})}},target_exists(){return this.hits_data&&this.hits_data[this.current_hit-1]&&this.hits_data[this.current_hit-1].target},source_exists(){return this.hits_data&&this.hits_data[this.current_hit-1]&&this.hits_data[this.current_hit-1].source},reference_exists(){return this.hits_data&&this.hits_data[this.current_hit-1]&&this.hits_data[this.current_hit-1].reference},context_exists(){return this.hits_data&&this.hits_data[this.current_hit-1]&&this.hits_data[this.current_hit-1].context},showAdjacent(){return this.config.hasOwnProperty("display")&&Object.values(this.config.display).includes("text-side-by-side")&&this.source_exists()&&this.target_exists()},showConfigToggle(){return this.config.hasOwnProperty("display")&&Object.values(this.config.display).includes("hide-context")&&this.context_exists()},file_download(){MS(this.hits_data)},async file_upload(e){let t=await LS(e);this.set_hits_data(t),this.set_hit(1),this.setup_hit_box()},async submit_crowsource(){if(this.config.database&&this.config.database.type&&this.config.database.type=="firebase"){const t=f0({databaseURL:this.config.database.url,projectId:this.config.database.project_id}),n=this.config.database.collection||"thresh",r=this.config.database.document||"annotations",i=this.config.database.field;var e=null;if(this.config.crowdsource=="prolific"){const c=new URLSearchParams(window.location.search);var e={completion_code:this.config.prolific_completion_code||null,prolific_pid:c.get("PROLIFIC_PID")||null,study_id:c.get("STUDY_ID")||null,session_id:c.get("SESSION_ID")||null}}const o=Idt(t),l=Cdt(o,n,r);await Bdt(l,{[i]:zdt({annotations:JSON.stringify(this.hits_data,null,2),time_submitted:new Date().toLocaleString(),prolific_metadata:JSON.stringify(e,null,2)})})}if(this.config.crowdsource&&this.config.crowdsource=="prolific"){let t=this.config.prolific_completion_code;window.location.href=`https://app.prolific.co/submissions/complete?cc=${t}`}else alert("You have successfully submitted your annotations.")}}},Em=Object.assign(Mpt,{__name:"HitBox",setup(e){return(t,n)=>(yt(),xt("section",Hdt,[e.hideHeader?ne("",!0):(yt(),xt("div",Gdt,[H("div",Wdt,[H("button",{onClick:n[0]||(n[0]=r=>t.go_to_hit(e.current_hit-1)),class:"mid-gray br-100 pa1 bw0 bg-near-white pointer prev-next-btns"}," < "),ke(" "+Tt(e.config.interface_text.hit_box.hit_label)+" ",1),H("span",null,Tt(e.current_hit),1),ke(" / "),H("span",null,Tt(e.total_hits)+" ",1),e.config.crowdsource&&e.current_hit==e.total_hits?(yt(),xt("button",{key:1,onClick:n[2]||(n[2]=r=>t.submit_crowsource()),class:"ml2 pa1 ph3 br-pill-ns ba bw1 grow pointer crowdsource-submit"},"Submit")):(yt(),xt("button",{key:0,onClick:n[1]||(n[1]=r=>t.go_to_hit(e.current_hit+1)),class:"mid-gray br-100 pa1 bw0 bg-near-white pointer prev-next-btns"}," > "))]),H("div",jdt,[e.config.instructions&&!e.config.prepend_instructions?(yt(),xt("button",{key:0,onClick:n[3]||(n[3]=r=>e.toggle_instructions()),class:"pa2 ph3 br-pill-ns ba bw1 grow pointer hit-instructions-btn"},[H("span",Kdt,Tt(e.config.interface_text.buttons.instructions_label),1)])):ne("",!0)]),H("div",Ydt,[H("div",Qdt,[(yt(!0),xt(qr,null,yi(e.total_hits,r=>(yt(),xt("span",{key:"circle-"+r,id:"circle-"+r,class:pe([t.get_circle_class(r),"circle pointer"]),onClick:i=>t.go_to_hit_circle(r,t.$e)},[H("span",Xdt,Tt(r),1)],10,Zdt))),128))])]),H("div",Jdt,[H("div",tpt,[H("input",{type:"button",id:"download-btn",onClick:n[4]||(n[4]=(...r)=>t.file_download&&t.file_download(...r))}),H("label",{class:pe(["file-upload file-download br-100 w2-5 h2-5 pointer",{disabled:e.config.disable&&Object.values(e.config.disable).includes("download")}]),for:"download-btn"},npt,2)]),H("div",rpt,[H("input",{type:"file",id:"upload-btn",onChange:n[5]||(n[5]=(...r)=>t.file_upload&&t.file_upload(...r))},null,32),H("label",{class:pe(["file-upload br-100 w2-5 h2-5 pointer",{disabled:e.config.disable&&Object.values(e.config.disable).includes("upload")}]),for:"upload-btn"},spt,2)])])])),e.hideHeader?ne("",!0):(yt(),Tc(r0,{key:1,hits_data:e.hits_data,current_hit:e.current_hit,config:e.config},null,8,["hits_data","current_hit","config"])),H("div",null,[H("div",opt,[H("div",apt,[H("i",{onClick:n[6]||(n[6]=(...r)=>t.restart_hit&&t.restart_hit(...r)),class:"fa-solid fa-arrows-rotate fa-lg pointer mr2"}),H("i",{onClick:n[7]||(n[7]=(...r)=>t.bookmark_hit&&t.bookmark_hit(...r)),class:pe(["bookmark fa-regular fa-bookmark fa-lg pointer ml1",t.get_bookmark_class()])},null,2)]),t.showConfigToggle()?(yt(),xt("p",{key:0,onClick:n[8]||(n[8]=(...r)=>t.toggle_context&&t.toggle_context(...r)),class:pe(["context_button pa2 br-pill-ns ba bw1 grow",{disabled:e.config.disable&&Object.values(e.config.disable).includes("selection")}])},[t.showContext?(yt(),xt("div",lpt,[cpt,H("span",upt,Tt(e.config.interface_text.buttons.hide_context_label),1)])):(yt(),xt("div",hpt,[fpt,H("span",dpt,Tt(e.config.interface_text.buttons.show_context_label),1)]))],2)):ne("",!0),t.reference_exists()?(yt(),xt("p",{key:1,onClick:n[9]||(n[9]=(...r)=>t.toggle_reference&&t.toggle_reference(...r)),class:pe(["context_button pa2 br-pill-ns ba bw1 grow",{disabled:e.config.disable&&Object.values(e.config.disable).includes("selection")}])},[t.showReference?(yt(),xt("div",ppt,[_pt,H("span",gpt,Tt(e.config.interface_text.buttons.hide_reference_label||"Hide Reference"),1)])):(yt(),xt("div",mpt,[ypt,H("span",vpt,Tt(e.config.interface_text.buttons.show_reference_label||"Show Reference"),1)]))],2)):ne("",!0),H("div",bpt,[e.hits_data&&e.hits_data[e.current_hit-1]&&e.hits_data[e.current_hit-1].context?(yt(),xt("div",wpt,[e.config.interface_text.typology.context_label!=""?(yt(),xt("div",xpt,[H("p",Ept,[H("span",Apt,Tt(e.config.interface_text.typology.context_label)+":",1)])])):ne("",!0),sn(Jl(fo),{source:e.hits_data[e.current_hit-1].context,class:"mt0 mb0"},null,8,["source"])])):ne("",!0)]),t.showAdjacent()&&t.source_exists()?(yt(),xt("div",Spt)):ne("",!0),H("div",{class:pe({adjacent:t.showAdjacent()})},[H("div",kpt,[t.source_exists()?(yt(),xt("div",Cpt,[H("p",Tpt,[H("span",Ipt,Tt(e.config.interface_text.typology.source_label)+":",1)])])):ne("",!0),sn(Dg,dr({sent_type:"source"},t.$props,{remove_selected:t.remove_selected}),null,16,["remove_selected"])]),H("div",Rpt,[t.showReference&&t.reference_exists()?(yt(),xt("div",Dpt,[H("p",{class:pe(["f3 mb1",{mt0:!t.source_exists()||t.showAdjacent()}])},[H("span",Opt,Tt(e.config.interface_text.typology.reference_label||"Reference")+":",1)],2),sn(Jl(fo),{source:e.hits_data[e.current_hit-1].reference,class:"f4 lh-paras mt0 mb0"},null,8,["source"])])):ne("",!0),t.target_exists()?(yt(),xt("p",{key:1,class:pe(["f3 mb1",{mt0:!t.source_exists()||t.showAdjacent()||t.showReference&&t.reference_exists()}])},[H("span",Ppt,Tt(e.config.interface_text.typology.target_label)+":",1)],2)):ne("",!0),sn(Dg,dr({sent_type:"target"},t.$props,{remove_selected:t.remove_selected}),null,16,["remove_selected"])])],2)])])]))}});const Lpt=H("div",{class:"custom_style",id:"custom_style"},"Custom style has not loaded!",-1),$pt={key:0,class:"tc f3 b mb3 mt3 adjudication-highlight"},Npt={key:1,class:"side-by-side-layout"},Fpt={class:"top-section-fixed"},Vpt={class:"cf mt1 hit-header"},qpt={class:"tc f3 mt1 hit-selector"},Bpt=["disabled"],Upt=["disabled"],zpt={class:"hit-instructions"},Hpt={class:"f4"},Gpt={class:"mr3 hit-browser"},Wpt={class:"hit-browser-inner"},jpt=["id","onClick"],Kpt={class:"tooltiptext"},Ypt={class:"fr hit-file-buttons"},Qpt={class:"mt1 mr1 fr"},Zpt=H("i",{class:"fa fa-arrow-down"},null,-1),Xpt=[Zpt],Jpt={class:"mt1 mr2 ml2 fr"},t_t=H("i",{class:"fa fa-arrow-up"},null,-1),e_t=[t_t],n_t={key:0,class:"checklist-definition ba b--black-20 br2 pa3 bg-light-gray"},r_t={class:"f4 b mb2"},i_t=H("i",{class:"fa fa-clipboard-check mr2","aria-hidden":"true"},null,-1),s_t={class:"dark-blue"},o_t={class:"f5 lh-copy"},a_t=H("strong",null,"Definition:",-1),l_t={class:"content-columns"},c_t={class:"left-column"},u_t={class:"right-column"},h_t={key:2,class:"adjacent"},f_t={class:"selection-adjacent"},d_t={class:"annotation-adjacent"},p_t={data(){return{total_hits:0,current_hit:1,hits_data:null,config:null,edits_dict:{},lines:{},selected_edits:{},editor_open:!1,selected_edits_html:"",annotating_edit_span_category_id:null,hit_box_config:void 0,selected_state:void 0,annotating_edit_span:void 0,set_hit:this.set_hit,set_hits_data:this.set_hits_data,set_edits_dict:this.set_edits_dict,set_lines:this.set_lines,set_span_text:this.set_span_text,set_span_indices:this.set_span_indices,set_span_category:this.set_span_category,set_edit_html:this.set_edit_html,set_selected_edits:this.set_selected_edits,set_hit_box_config:this.set_hit_box_config,set_editor_state:this.set_editor_state,set_annotating_edit_span_category_id:this.set_annotating_edit_span_category_id,set_annotating_edit_span:this.set_annotating_edit_span,refresh_interface_edit:this.refresh_interface_edit,instructions_open:!1,toggle_instructions:this.toggle_instructions,boundary_editing_mode:!1,boundary_editing_edit:null,original_boundary:null,set_boundary_editing_mode:this.set_boundary_editing_mode,set_boundary_editing_edit:this.set_boundary_editing_edit,set_original_boundary:this.set_original_boundary}},props:["input_data","consumed_config","highlight"],watch:{input_data(){this.consume_data()},consumed_config(){this.consume_config()}},methods:{consume_data(){let e=ze.cloneDeep(this.input_data.data);this.set_hits_data(e),this.set_hit(1)},consume_config(){let e;this.consumed_config.hasOwnProperty("consumed_config")?e=ze.cloneDeep(this.consumed_config.consumed_config):this.consumed_config.hasOwnProperty("config")?e=ze.cloneDeep(this.consumed_config.config):e=ze.cloneDeep(this.consumed_config),this.config=e,this.config.template_label&&$("title").text(this.config.template_label)},set_hit(e){e!=this.current_hit&&this.config.adjudication&&$(`.circle-${e}`).click(),this.current_hit=e},set_hits_data(e){e.forEach(t=>t.edits=t.edits||[]),e.forEach((t,n)=>{t._thresh_id=n+1}),this.hits_data=e,this.total_hits=e.length},set_edits_dict(e){this.edits_dict=e},set_span_text(e,t){t=="source"?this.selected_state.source_span=e:t=="target"&&(this.selected_state.target_span=e)},set_span_indices(e,t){t=="source"?this.selected_state.source_idx=e:t=="target"&&(this.selected_state.target_idx=e)},set_span_category(e,t){t=="source"?this.selected_state.source_category=e:t=="target"&&(this.selected_state.target_category=e)},set_edit_html(e){this.selected_edits_html=e},set_selected_edits(e){this.selected_edits=e},refresh_interface_edit(){const e={enable_select_source_sentence:!1,enable_select_target_sentence:!1,enable_multi_select_source_sentence:!1,enable_multi_select_target_sentence:!1},t={source_span:"",source_idx:[],source_category:"",target_span:"",target_idx:[],target_category:"",split:"",split_id:null},n={source:"",target:"",composite:""};this.selected_edits=[],this.selected_edits_html="",this.selected_state=t,this.hit_box_config=e,this.annotating_edit_span=n},set_hit_box_config(e){this.hit_box_config=e},set_editor_state(e){this.editor_open=e},set_annotating_edit_span_category_id(e){this.annotating_edit_span_category_id=e},set_annotating_edit_span(e,t=null){t=="source"?this.annotating_edit_span.source=e:t=="target"?this.annotating_edit_span.target=e:t=="composite"?this.annotating_edit_span.composite=e:console.warn(`Invalid sent_type : ${t}`)},set_lines(e){this.lines=e},set_boundary_editing_mode(e){this.boundary_editing_mode=e},set_boundary_editing_edit(e){this.boundary_editing_edit=e},set_original_boundary(e){this.original_boundary=e},toggle_instructions(){this.instructions_open=!this.instructions_open},remove_selected(e,t,n){this.$refs.hitBox&&this.$refs.hitBox.remove_selected?this.$refs.hitBox.remove_selected(e,t,n):console.error("HitBox ref or remove_selected method not found")},compile_style(){if(!this.config.hasOwnProperty("edits"))return;let e="";for(const t of this.config.edits){let n=t.color;Xl.hasOwnProperty(n)&&(n=Xl[n]);let r=$t(n).lighten(25).toHexString();e+=`
              :root { --${t.name}: ${n}; --${t.name}-light: ${r}; }
              .border-${t.name} { border-bottom: 3px solid ${n}; }
              .border-${t.name}-all { border: 2px solid ${n}; }
              .bg-${t.name} { background-color: ${n}; }
              .txt-${t.name} { color: ${n}; }
              .bg-${t.name}-light { background-color: ${r}; }
              .border-${t.name}-light { border-bottom: 3px solid ${r}; }
              .border-${t.name}-light-all { border: 2px solid ${r}; }
              .txt-${t.name}-light { color: ${r}; }
              .checkbox-tools-yes-no:checked + label.question-${t.name},
              .checkbox-tools:checked + label.question-${t.name},
              .checkbox-tools:checked + label.txt-${t.name}{
                border: 2px solid var(--${t.name});
              }
              .select-color-${t.name}::selection { background: ${r} !important; }
            `}return this.config.font_size&&(this.config.font_size.source&&(e+=`#source-sentence { font-size: ${this.config.font_size.source}px; }`),this.config.font_size.target&&(e+=`#target-sentence { font-size: ${this.config.font_size.target}px; }`)),e},isAdjacent(){return this.config.hasOwnProperty("display")&&Object.values(this.config.display).includes("side-by-side")},getCircleClass(e){let t=[`circle-${e}`];return e===this.current_hit&&t.push("circle-active"),t.join(" ")},getChecklistDefinition(e){return{"Filing Date":"The date the case was initially filed with the court","Cause of Action":"e.g., a statute (e.g., 42 USC 1983) or a case (e.g., Ex Parte Young)","Statutory or Constitutional Basis for the Case":"A case can either be based on a statute or a provision of the Constitution. For constitutional cases, refer to the specific clause and amendment (e.g., 'the plaintiffs alleged violations of the Fourteenth Amendment's Equal Protection Clause')","Remedy Sought":"e.g., declaratory judgment, injunctive relief, monetary damages","Type of Counsel":"Private, legal services, ACLU, etc.","First and Last name of Judge":"e.g., Judge John Smith","All Reported Opinions Cited with Shortened Bluebook Citation":"Use shortened Bluebook citation format (e.g., '2020 WL 4218003'). No need to include case name, court, or date unless helpful","Class Action or Individual Plaintiffs":"If there are class action plaintiffs the summary should say it's a class action; if there are individual plaintiffs it can just describe the plaintiffs","Related Cases Listed by Their Case Code Number":"Other cases referenced or connected to this case","How Long Decrees will Last":"Duration or expiration date of court orders","Date of Settlement":"When the settlement agreement was reached","How Long Settlement will Last":"Duration or expiration date of settlement terms","Whether the Settlement is Court-enforced or Not":"If the court retains jurisdiction to enforce the settlement","Name of the Monitor":"Court-appointed monitor or special master overseeing compliance",Appeal:"Whether the case was appealed, to which court, and the result","Who are the Parties":"Use specific terms like 'The city' or 'The parents' rather than general terms like 'The defendant' or 'The plaintiffs'","Consolidated Cases Noted":"Cases that were combined with this case for joint proceedings","Dates of All Decrees":"When court orders or decrees were issued","Factual Basis of Case":"The underlying facts and evidence supporting the legal claims","Note Important Filings":"Note motions for temporary restraining orders or preliminary injunctions, motions to dismiss, motions for summary judgment, etc.","Significant Terms of Decrees":"The substance of what the judge orders the defendants to do","Significant Terms of Settlement":"The substance of what the defendants agree to do","Monitor Reports":"Summary of monitor's findings on compliance with court orders, including which terms are being complied with",Trials:"Note if the case went to trial, including trial dates and outcomes","Court Rulings":"Rulings on motions to dismiss, summary judgment, preliminary injunctions, class certification, and other significant filings","Disputes Over Settlement Enforcement":"Any subsequent disputes about compliance with settlement terms"}[e]||"Definition not available"},downloadFile(){this.$refs.hitBox&&this.$refs.hitBox.file_download&&this.$refs.hitBox.file_download()},uploadFile(e){this.$refs.hitBox&&this.$refs.hitBox.file_upload&&this.$refs.hitBox.file_upload(e)},submit_crowsource(){this.$refs.hitBox&&this.$refs.hitBox.submit_crowsource&&this.$refs.hitBox.submit_crowsource()}},updated(){$("#custom_style").html(`<style>${this.compile_style()}</style>`),$(`#circle-${this.current_hit}`).addClass("circle-active")},mounted(){this.consume_data(),this.consume_config()},created(){this.consume_config(),this.refresh_interface_edit()}},Fmt=Object.assign(p_t,{__name:"Interface",setup(e){return(t,n)=>t.config!=null?(yt(),xt("div",{key:0,class:pe(["container mb0 card-body",{"w-100 w-adjacent":t.isAdjacent(),"w-65":!t.isAdjacent()}])},[Lpt,e.highlight?(yt(),xt("div",$pt,Tt(t.config.interface_text.adjudication.highlight_label),1)):ne("",!0),t.isAdjacent()?(yt(),xt("main",Npt,[H("div",Fpt,[sn(Rg,dr(t.$data,{config:t.config}),null,16,["config"]),H("div",Vpt,[H("div",qpt,[H("button",{onClick:n[0]||(n[0]=r=>t.set_hit(Math.max(1,t.current_hit-1))),disabled:t.current_hit<=1,class:pe(["mid-gray br-100 pa1 bw0 bg-near-white pointer prev-next-btns",{"o-50":t.current_hit<=1}])}," < ",10,Bpt),ke(" "+Tt(t.config.interface_text.hit_box.hit_label)+" ",1),H("span",null,Tt(t.current_hit),1),ke(" / "),H("span",null,Tt(t.total_hits)+" ",1),t.config.crowdsource&&t.current_hit==t.total_hits?(yt(),xt("button",{key:1,onClick:n[2]||(n[2]=r=>t.submit_crowsource()),class:"ml2 pa1 ph3 br-pill-ns ba bw1 grow pointer crowdsource-submit"},"Submit")):(yt(),xt("button",{key:0,onClick:n[1]||(n[1]=r=>t.set_hit(Math.min(t.total_hits,t.current_hit+1))),disabled:t.current_hit>=t.total_hits,class:pe(["mid-gray br-100 pa1 bw0 bg-near-white pointer prev-next-btns",{"o-50":t.current_hit>=t.total_hits}])}," > ",10,Upt))]),H("div",zpt,[t.config.instructions&&!t.config.prepend_instructions?(yt(),xt("button",{key:0,onClick:n[3]||(n[3]=r=>t.toggle_instructions()),class:"pa2 ph3 br-pill-ns ba bw1 grow pointer hit-instructions-btn"},[H("span",Hpt,Tt(t.config.interface_text.buttons.instructions_label),1)])):ne("",!0)]),H("div",Gpt,[H("div",Wpt,[(yt(!0),xt(qr,null,yi(t.total_hits,r=>(yt(),xt("span",{key:"circle-"+r,id:"circle-"+r,class:pe([t.getCircleClass(r),"circle pointer"]),onClick:i=>t.set_hit(r)},[H("span",Kpt,Tt(r),1)],10,jpt))),128))])]),H("div",Ypt,[H("div",Qpt,[H("input",{type:"button",id:"download-btn",onClick:n[4]||(n[4]=(...r)=>t.downloadFile&&t.downloadFile(...r))}),H("label",{class:pe(["file-upload file-download br-100 w2-5 h2-5 pointer",{disabled:t.config.disable&&Object.values(t.config.disable).includes("download")}]),for:"download-btn"},Xpt,2)]),H("div",Jpt,[H("input",{type:"file",id:"upload-btn",onChange:n[5]||(n[5]=(...r)=>t.uploadFile&&t.uploadFile(...r))},null,32),H("label",{class:pe(["file-upload br-100 w2-5 h2-5 pointer",{disabled:t.config.disable&&Object.values(t.config.disable).includes("upload")}]),for:"upload-btn"},e_t,2)])])]),t.hits_data&&t.hits_data[t.current_hit-1]&&t.hits_data[t.current_hit-1].metadata?(yt(),xt("div",n_t,[H("div",r_t,[i_t,ke(" Current Checklist Item: "),H("span",s_t,Tt(t.hits_data[t.current_hit-1].metadata.checklist_item),1)]),H("div",o_t,[a_t,ke(" "+Tt(t.getChecklistDefinition(t.hits_data[t.current_hit-1].metadata.checklist_item)),1)])])):ne("",!0)]),H("div",l_t,[H("div",c_t,[sn(Em,dr({ref:"hitBox"},t.$data,{config:t.config,"hide-header":!0}),null,16,["config"])]),H("div",u_t,[sn(N_,dr(t.$data,{config:t.config,remove_selected:t.remove_selected}),null,16,["config","remove_selected"]),sn(W_,dr(t.$data,{config:t.config}),null,16,["config"])])])])):(yt(),xt("main",h_t,[H("div",f_t,[sn(Rg,dr(t.$data,{config:t.config}),null,16,["config"]),sn(Em,dr({ref:"hitBox"},t.$data,{config:t.config}),null,16,["config"])]),H("div",d_t,[sn(N_,dr(t.$data,{config:t.config,remove_selected:t.remove_selected}),null,16,["config","remove_selected"]),sn(W_,dr(t.$data,{config:t.config}),null,16,["config"])])]))],2)):ne("",!0)}});/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function uv(e){return typeof e>"u"||e===null}function __t(e){return typeof e=="object"&&e!==null}function g_t(e){return Array.isArray(e)?e:uv(e)?[]:[e]}function m_t(e,t){var n,r,i,o;if(t)for(o=Object.keys(t),n=0,r=o.length;n<r;n+=1)i=o[n],e[i]=t[i];return e}function y_t(e,t){var n="",r;for(r=0;r<t;r+=1)n+=e;return n}function v_t(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var b_t=uv,w_t=__t,x_t=g_t,E_t=y_t,A_t=v_t,S_t=m_t,pn={isNothing:b_t,isObject:w_t,toArray:x_t,repeat:E_t,isNegativeZero:A_t,extend:S_t};function hv(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),r+" "+n):r}function Ta(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=hv(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ta.prototype=Object.create(Error.prototype);Ta.prototype.constructor=Ta;Ta.prototype.toString=function(t){return this.name+": "+hv(this,t)};var Yn=Ta;function Yh(e,t,n,r,i){var o="",l="",c=Math.floor(i/2)-1;return r-t>c&&(o=" ... ",t=r-c+o.length),n-r>c&&(l=" ...",n=r+c-l.length),{str:o+e.slice(t,n).replace(/\t/g,"→")+l,pos:r-t+o.length}}function Qh(e,t){return pn.repeat(" ",t-e.length)+e}function k_t(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],o,l=-1;o=n.exec(e.buffer);)i.push(o.index),r.push(o.index+o[0].length),e.position<=o.index&&l<0&&(l=r.length-2);l<0&&(l=r.length-1);var c="",f,d,g=Math.min(e.line+t.linesAfter,i.length).toString().length,v=t.maxLength-(t.indent+g+3);for(f=1;f<=t.linesBefore&&!(l-f<0);f++)d=Yh(e.buffer,r[l-f],i[l-f],e.position-(r[l]-r[l-f]),v),c=pn.repeat(" ",t.indent)+Qh((e.line-f+1).toString(),g)+" | "+d.str+`
`+c;for(d=Yh(e.buffer,r[l],i[l],e.position,v),c+=pn.repeat(" ",t.indent)+Qh((e.line+1).toString(),g)+" | "+d.str+`
`,c+=pn.repeat("-",t.indent+g+3+d.pos)+`^
`,f=1;f<=t.linesAfter&&!(l+f>=i.length);f++)d=Yh(e.buffer,r[l+f],i[l+f],e.position-(r[l]-r[l+f]),v),c+=pn.repeat(" ",t.indent)+Qh((e.line+f+1).toString(),g)+" | "+d.str+`
`;return c.replace(/\n$/,"")}var C_t=k_t,T_t=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],I_t=["scalar","sequence","mapping"];function R_t(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(r){t[String(r)]=n})}),t}function D_t(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(T_t.indexOf(n)===-1)throw new Yn('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=R_t(t.styleAliases||null),I_t.indexOf(this.kind)===-1)throw new Yn('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Rn=D_t;function Am(e,t){var n=[];return e[t].forEach(function(r){var i=n.length;n.forEach(function(o,l){o.tag===r.tag&&o.kind===r.kind&&o.multi===r.multi&&(i=l)}),n[i]=r}),n}function O_t(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function r(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(r);return e}function kf(e){return this.extend(e)}kf.prototype.extend=function(t){var n=[],r=[];if(t instanceof Rn)r.push(t);else if(Array.isArray(t))r=r.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(r=r.concat(t.explicit));else throw new Yn("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(o){if(!(o instanceof Rn))throw new Yn("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Yn("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Yn("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(o){if(!(o instanceof Rn))throw new Yn("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(kf.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=Am(i,"implicit"),i.compiledExplicit=Am(i,"explicit"),i.compiledTypeMap=O_t(i.compiledImplicit,i.compiledExplicit),i};var fv=kf,dv=new Rn("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),pv=new Rn("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),_v=new Rn("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),gv=new fv({explicit:[dv,pv,_v]});function P_t(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function M_t(){return null}function L_t(e){return e===null}var mv=new Rn("tag:yaml.org,2002:null",{kind:"scalar",resolve:P_t,construct:M_t,predicate:L_t,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function $_t(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function N_t(e){return e==="true"||e==="True"||e==="TRUE"}function F_t(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var yv=new Rn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:$_t,construct:N_t,predicate:F_t,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function V_t(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function q_t(e){return 48<=e&&e<=55}function B_t(e){return 48<=e&&e<=57}function U_t(e){if(e===null)return!1;var t=e.length,n=0,r=!1,i;if(!t)return!1;if(i=e[n],(i==="-"||i==="+")&&(i=e[++n]),i==="0"){if(n+1===t)return!0;if(i=e[++n],i==="b"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!V_t(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!q_t(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<t;n++)if(i=e[n],i!=="_"){if(!B_t(e.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}function z_t(e){var t=e,n=1,r;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),r=t[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),t=t.slice(1),r=t[0]),t==="0")return 0;if(r==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function H_t(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!pn.isNegativeZero(e)}var vv=new Rn("tag:yaml.org,2002:int",{kind:"scalar",resolve:U_t,construct:z_t,predicate:H_t,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),G_t=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function W_t(e){return!(e===null||!G_t.test(e)||e[e.length-1]==="_")}function j_t(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var K_t=/^[-+]?[0-9]+e/;function Y_t(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(pn.isNegativeZero(e))return"-0.0";return n=e.toString(10),K_t.test(n)?n.replace("e",".e"):n}function Q_t(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||pn.isNegativeZero(e))}var bv=new Rn("tag:yaml.org,2002:float",{kind:"scalar",resolve:W_t,construct:j_t,predicate:Q_t,represent:Y_t,defaultStyle:"lowercase"}),wv=gv.extend({implicit:[mv,yv,vv,bv]}),xv=wv,Ev=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Av=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Z_t(e){return e===null?!1:Ev.exec(e)!==null||Av.exec(e)!==null}function X_t(e){var t,n,r,i,o,l,c,f=0,d=null,g,v,S;if(t=Ev.exec(e),t===null&&(t=Av.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(o=+t[4],l=+t[5],c=+t[6],t[7]){for(f=t[7].slice(0,3);f.length<3;)f+="0";f=+f}return t[9]&&(g=+t[10],v=+(t[11]||0),d=(g*60+v)*6e4,t[9]==="-"&&(d=-d)),S=new Date(Date.UTC(n,r,i,o,l,c,f)),d&&S.setTime(S.getTime()-d),S}function J_t(e){return e.toISOString()}var Sv=new Rn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Z_t,construct:X_t,instanceOf:Date,represent:J_t});function tgt(e){return e==="<<"||e===null}var kv=new Rn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:tgt}),Ed=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function egt(e){if(e===null)return!1;var t,n,r=0,i=e.length,o=Ed;for(n=0;n<i;n++)if(t=o.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;r+=6}return r%8===0}function ngt(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,o=Ed,l=0,c=[];for(t=0;t<i;t++)t%4===0&&t&&(c.push(l>>16&255),c.push(l>>8&255),c.push(l&255)),l=l<<6|o.indexOf(r.charAt(t));return n=i%4*6,n===0?(c.push(l>>16&255),c.push(l>>8&255),c.push(l&255)):n===18?(c.push(l>>10&255),c.push(l>>2&255)):n===12&&c.push(l>>4&255),new Uint8Array(c)}function rgt(e){var t="",n=0,r,i,o=e.length,l=Ed;for(r=0;r<o;r++)r%3===0&&r&&(t+=l[n>>18&63],t+=l[n>>12&63],t+=l[n>>6&63],t+=l[n&63]),n=(n<<8)+e[r];return i=o%3,i===0?(t+=l[n>>18&63],t+=l[n>>12&63],t+=l[n>>6&63],t+=l[n&63]):i===2?(t+=l[n>>10&63],t+=l[n>>4&63],t+=l[n<<2&63],t+=l[64]):i===1&&(t+=l[n>>2&63],t+=l[n<<4&63],t+=l[64],t+=l[64]),t}function igt(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var Cv=new Rn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:egt,construct:ngt,predicate:igt,represent:rgt}),sgt=Object.prototype.hasOwnProperty,ogt=Object.prototype.toString;function agt(e){if(e===null)return!0;var t=[],n,r,i,o,l,c=e;for(n=0,r=c.length;n<r;n+=1){if(i=c[n],l=!1,ogt.call(i)!=="[object Object]")return!1;for(o in i)if(sgt.call(i,o))if(!l)l=!0;else return!1;if(!l)return!1;if(t.indexOf(o)===-1)t.push(o);else return!1}return!0}function lgt(e){return e!==null?e:[]}var Tv=new Rn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:agt,construct:lgt}),cgt=Object.prototype.toString;function ugt(e){if(e===null)return!0;var t,n,r,i,o,l=e;for(o=new Array(l.length),t=0,n=l.length;t<n;t+=1){if(r=l[t],cgt.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;o[t]=[i[0],r[i[0]]]}return!0}function hgt(e){if(e===null)return[];var t,n,r,i,o,l=e;for(o=new Array(l.length),t=0,n=l.length;t<n;t+=1)r=l[t],i=Object.keys(r),o[t]=[i[0],r[i[0]]];return o}var Iv=new Rn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:ugt,construct:hgt}),fgt=Object.prototype.hasOwnProperty;function dgt(e){if(e===null)return!0;var t,n=e;for(t in n)if(fgt.call(n,t)&&n[t]!==null)return!1;return!0}function pgt(e){return e!==null?e:{}}var Rv=new Rn("tag:yaml.org,2002:set",{kind:"mapping",resolve:dgt,construct:pgt}),Ad=xv.extend({implicit:[Sv,kv],explicit:[Cv,Tv,Iv,Rv]}),Yi=Object.prototype.hasOwnProperty,Ec=1,Dv=2,Ov=3,Ac=4,Zh=1,_gt=2,Sm=3,ggt=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,mgt=/[\x85\u2028\u2029]/,ygt=/[,\[\]\{\}]/,Pv=/^(?:!|!!|![a-z\-]+!)$/i,Mv=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function km(e){return Object.prototype.toString.call(e)}function Qr(e){return e===10||e===13}function xs(e){return e===9||e===32}function nr(e){return e===9||e===32||e===10||e===13}function ao(e){return e===44||e===91||e===93||e===123||e===125}function vgt(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function bgt(e){return e===120?2:e===117?4:e===85?8:0}function wgt(e){return 48<=e&&e<=57?e-48:-1}function Cm(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}function xgt(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var Lv=new Array(256),$v=new Array(256);for(var ro=0;ro<256;ro++)Lv[ro]=Cm(ro)?1:0,$v[ro]=Cm(ro);function Egt(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Ad,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Nv(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=C_t(n),new Yn(t,n)}function Ft(e,t){throw Nv(e,t)}function Sc(e,t){e.onWarning&&e.onWarning.call(null,Nv(e,t))}var Tm={YAML:function(t,n,r){var i,o,l;t.version!==null&&Ft(t,"duplication of %YAML directive"),r.length!==1&&Ft(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&Ft(t,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),l=parseInt(i[2],10),o!==1&&Ft(t,"unacceptable YAML version of the document"),t.version=r[0],t.checkLineBreaks=l<2,l!==1&&l!==2&&Sc(t,"unsupported YAML version of the document")},TAG:function(t,n,r){var i,o;r.length!==2&&Ft(t,"TAG directive accepts exactly two arguments"),i=r[0],o=r[1],Pv.test(i)||Ft(t,"ill-formed tag handle (first argument) of the TAG directive"),Yi.call(t.tagMap,i)&&Ft(t,'there is a previously declared suffix for "'+i+'" tag handle'),Mv.test(o)||Ft(t,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{Ft(t,"tag prefix is malformed: "+o)}t.tagMap[i]=o}};function Gi(e,t,n,r){var i,o,l,c;if(t<n){if(c=e.input.slice(t,n),r)for(i=0,o=c.length;i<o;i+=1)l=c.charCodeAt(i),l===9||32<=l&&l<=1114111||Ft(e,"expected valid JSON character");else ggt.test(c)&&Ft(e,"the stream contains non-printable characters");e.result+=c}}function Im(e,t,n,r){var i,o,l,c;for(pn.isObject(n)||Ft(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),l=0,c=i.length;l<c;l+=1)o=i[l],Yi.call(t,o)||(t[o]=n[o],r[o]=!0)}function lo(e,t,n,r,i,o,l,c,f){var d,g;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),d=0,g=i.length;d<g;d+=1)Array.isArray(i[d])&&Ft(e,"nested arrays are not supported inside keys"),typeof i=="object"&&km(i[d])==="[object Object]"&&(i[d]="[object Object]");if(typeof i=="object"&&km(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(d=0,g=o.length;d<g;d+=1)Im(e,t,o[d],n);else Im(e,t,o,n);else!e.json&&!Yi.call(n,i)&&Yi.call(t,i)&&(e.line=l||e.line,e.lineStart=c||e.lineStart,e.position=f||e.position,Ft(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[i]=o,delete n[i];return t}function Sd(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Ft(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function an(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);i!==0;){for(;xs(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(Qr(i))for(Sd(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return n!==-1&&r!==0&&e.lineIndent<n&&Sc(e,"deficient indentation"),r}function du(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||nr(n)))}function kd(e,t){t===1?e.result+=" ":t>1&&(e.result+=pn.repeat(`
`,t-1))}function Agt(e,t,n){var r,i,o,l,c,f,d,g,v=e.kind,S=e.result,E;if(E=e.input.charCodeAt(e.position),nr(E)||ao(E)||E===35||E===38||E===42||E===33||E===124||E===62||E===39||E===34||E===37||E===64||E===96||(E===63||E===45)&&(i=e.input.charCodeAt(e.position+1),nr(i)||n&&ao(i)))return!1;for(e.kind="scalar",e.result="",o=l=e.position,c=!1;E!==0;){if(E===58){if(i=e.input.charCodeAt(e.position+1),nr(i)||n&&ao(i))break}else if(E===35){if(r=e.input.charCodeAt(e.position-1),nr(r))break}else{if(e.position===e.lineStart&&du(e)||n&&ao(E))break;if(Qr(E))if(f=e.line,d=e.lineStart,g=e.lineIndent,an(e,!1,-1),e.lineIndent>=t){c=!0,E=e.input.charCodeAt(e.position);continue}else{e.position=l,e.line=f,e.lineStart=d,e.lineIndent=g;break}}c&&(Gi(e,o,l,!1),kd(e,e.line-f),o=l=e.position,c=!1),xs(E)||(l=e.position+1),E=e.input.charCodeAt(++e.position)}return Gi(e,o,l,!1),e.result?!0:(e.kind=v,e.result=S,!1)}function Sgt(e,t){var n,r,i;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(Gi(e,r,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)r=e.position,e.position++,i=e.position;else return!0;else Qr(n)?(Gi(e,r,i,!0),kd(e,an(e,!1,t)),r=i=e.position):e.position===e.lineStart&&du(e)?Ft(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);Ft(e,"unexpected end of the stream within a single quoted scalar")}function kgt(e,t){var n,r,i,o,l,c;if(c=e.input.charCodeAt(e.position),c!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;(c=e.input.charCodeAt(e.position))!==0;){if(c===34)return Gi(e,n,e.position,!0),e.position++,!0;if(c===92){if(Gi(e,n,e.position,!0),c=e.input.charCodeAt(++e.position),Qr(c))an(e,!1,t);else if(c<256&&Lv[c])e.result+=$v[c],e.position++;else if((l=bgt(c))>0){for(i=l,o=0;i>0;i--)c=e.input.charCodeAt(++e.position),(l=vgt(c))>=0?o=(o<<4)+l:Ft(e,"expected hexadecimal character");e.result+=xgt(o),e.position++}else Ft(e,"unknown escape sequence");n=r=e.position}else Qr(c)?(Gi(e,n,r,!0),kd(e,an(e,!1,t)),n=r=e.position):e.position===e.lineStart&&du(e)?Ft(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}Ft(e,"unexpected end of the stream within a double quoted scalar")}function Cgt(e,t){var n=!0,r,i,o,l=e.tag,c,f=e.anchor,d,g,v,S,E,q=Object.create(null),Q,tt,ut,nt;if(nt=e.input.charCodeAt(e.position),nt===91)g=93,E=!1,c=[];else if(nt===123)g=125,E=!0,c={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=c),nt=e.input.charCodeAt(++e.position);nt!==0;){if(an(e,!0,t),nt=e.input.charCodeAt(e.position),nt===g)return e.position++,e.tag=l,e.anchor=f,e.kind=E?"mapping":"sequence",e.result=c,!0;n?nt===44&&Ft(e,"expected the node content, but found ','"):Ft(e,"missed comma between flow collection entries"),tt=Q=ut=null,v=S=!1,nt===63&&(d=e.input.charCodeAt(e.position+1),nr(d)&&(v=S=!0,e.position++,an(e,!0,t))),r=e.line,i=e.lineStart,o=e.position,wo(e,t,Ec,!1,!0),tt=e.tag,Q=e.result,an(e,!0,t),nt=e.input.charCodeAt(e.position),(S||e.line===r)&&nt===58&&(v=!0,nt=e.input.charCodeAt(++e.position),an(e,!0,t),wo(e,t,Ec,!1,!0),ut=e.result),E?lo(e,c,q,tt,Q,ut,r,i,o):v?c.push(lo(e,null,q,tt,Q,ut,r,i,o)):c.push(Q),an(e,!0,t),nt=e.input.charCodeAt(e.position),nt===44?(n=!0,nt=e.input.charCodeAt(++e.position)):n=!1}Ft(e,"unexpected end of the stream within a flow collection")}function Tgt(e,t){var n,r,i=Zh,o=!1,l=!1,c=t,f=0,d=!1,g,v;if(v=e.input.charCodeAt(e.position),v===124)r=!1;else if(v===62)r=!0;else return!1;for(e.kind="scalar",e.result="";v!==0;)if(v=e.input.charCodeAt(++e.position),v===43||v===45)Zh===i?i=v===43?Sm:_gt:Ft(e,"repeat of a chomping mode identifier");else if((g=wgt(v))>=0)g===0?Ft(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?Ft(e,"repeat of an indentation width identifier"):(c=t+g-1,l=!0);else break;if(xs(v)){do v=e.input.charCodeAt(++e.position);while(xs(v));if(v===35)do v=e.input.charCodeAt(++e.position);while(!Qr(v)&&v!==0)}for(;v!==0;){for(Sd(e),e.lineIndent=0,v=e.input.charCodeAt(e.position);(!l||e.lineIndent<c)&&v===32;)e.lineIndent++,v=e.input.charCodeAt(++e.position);if(!l&&e.lineIndent>c&&(c=e.lineIndent),Qr(v)){f++;continue}if(e.lineIndent<c){i===Sm?e.result+=pn.repeat(`
`,o?1+f:f):i===Zh&&o&&(e.result+=`
`);break}for(r?xs(v)?(d=!0,e.result+=pn.repeat(`
`,o?1+f:f)):d?(d=!1,e.result+=pn.repeat(`
`,f+1)):f===0?o&&(e.result+=" "):e.result+=pn.repeat(`
`,f):e.result+=pn.repeat(`
`,o?1+f:f),o=!0,l=!0,f=0,n=e.position;!Qr(v)&&v!==0;)v=e.input.charCodeAt(++e.position);Gi(e,n,e.position,!1)}return!0}function Rm(e,t){var n,r=e.tag,i=e.anchor,o=[],l,c=!1,f;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),f=e.input.charCodeAt(e.position);f!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Ft(e,"tab characters must not be used in indentation")),!(f!==45||(l=e.input.charCodeAt(e.position+1),!nr(l))));){if(c=!0,e.position++,an(e,!0,-1)&&e.lineIndent<=t){o.push(null),f=e.input.charCodeAt(e.position);continue}if(n=e.line,wo(e,t,Ov,!1,!0),o.push(e.result),an(e,!0,-1),f=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&f!==0)Ft(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return c?(e.tag=r,e.anchor=i,e.kind="sequence",e.result=o,!0):!1}function Igt(e,t,n){var r,i,o,l,c,f,d=e.tag,g=e.anchor,v={},S=Object.create(null),E=null,q=null,Q=null,tt=!1,ut=!1,nt;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=v),nt=e.input.charCodeAt(e.position);nt!==0;){if(!tt&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Ft(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),o=e.line,(nt===63||nt===58)&&nr(r))nt===63?(tt&&(lo(e,v,S,E,q,null,l,c,f),E=q=Q=null),ut=!0,tt=!0,i=!0):tt?(tt=!1,i=!0):Ft(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,nt=r;else{if(l=e.line,c=e.lineStart,f=e.position,!wo(e,n,Dv,!1,!0))break;if(e.line===o){for(nt=e.input.charCodeAt(e.position);xs(nt);)nt=e.input.charCodeAt(++e.position);if(nt===58)nt=e.input.charCodeAt(++e.position),nr(nt)||Ft(e,"a whitespace character is expected after the key-value separator within a block mapping"),tt&&(lo(e,v,S,E,q,null,l,c,f),E=q=Q=null),ut=!0,tt=!1,i=!1,E=e.tag,q=e.result;else if(ut)Ft(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=d,e.anchor=g,!0}else if(ut)Ft(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=d,e.anchor=g,!0}if((e.line===o||e.lineIndent>t)&&(tt&&(l=e.line,c=e.lineStart,f=e.position),wo(e,t,Ac,!0,i)&&(tt?q=e.result:Q=e.result),tt||(lo(e,v,S,E,q,Q,l,c,f),E=q=Q=null),an(e,!0,-1),nt=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&nt!==0)Ft(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return tt&&lo(e,v,S,E,q,null,l,c,f),ut&&(e.tag=d,e.anchor=g,e.kind="mapping",e.result=v),ut}function Rgt(e){var t,n=!1,r=!1,i,o,l;if(l=e.input.charCodeAt(e.position),l!==33)return!1;if(e.tag!==null&&Ft(e,"duplication of a tag property"),l=e.input.charCodeAt(++e.position),l===60?(n=!0,l=e.input.charCodeAt(++e.position)):l===33?(r=!0,i="!!",l=e.input.charCodeAt(++e.position)):i="!",t=e.position,n){do l=e.input.charCodeAt(++e.position);while(l!==0&&l!==62);e.position<e.length?(o=e.input.slice(t,e.position),l=e.input.charCodeAt(++e.position)):Ft(e,"unexpected end of the stream within a verbatim tag")}else{for(;l!==0&&!nr(l);)l===33&&(r?Ft(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),Pv.test(i)||Ft(e,"named tag handle cannot contain such characters"),r=!0,t=e.position+1)),l=e.input.charCodeAt(++e.position);o=e.input.slice(t,e.position),ygt.test(o)&&Ft(e,"tag suffix cannot contain flow indicator characters")}o&&!Mv.test(o)&&Ft(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{Ft(e,"tag name is malformed: "+o)}return n?e.tag=o:Yi.call(e.tagMap,i)?e.tag=e.tagMap[i]+o:i==="!"?e.tag="!"+o:i==="!!"?e.tag="tag:yaml.org,2002:"+o:Ft(e,'undeclared tag handle "'+i+'"'),!0}function Dgt(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&Ft(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!nr(n)&&!ao(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Ft(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Ogt(e){var t,n,r;if(r=e.input.charCodeAt(e.position),r!==42)return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!nr(r)&&!ao(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&Ft(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Yi.call(e.anchorMap,n)||Ft(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],an(e,!0,-1),!0}function wo(e,t,n,r,i){var o,l,c,f=1,d=!1,g=!1,v,S,E,q,Q,tt;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=l=c=Ac===n||Ov===n,r&&an(e,!0,-1)&&(d=!0,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)),f===1)for(;Rgt(e)||Dgt(e);)an(e,!0,-1)?(d=!0,c=o,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)):c=!1;if(c&&(c=d||i),(f===1||Ac===n)&&(Ec===n||Dv===n?Q=t:Q=t+1,tt=e.position-e.lineStart,f===1?c&&(Rm(e,tt)||Igt(e,tt,Q))||Cgt(e,Q)?g=!0:(l&&Tgt(e,Q)||Sgt(e,Q)||kgt(e,Q)?g=!0:Ogt(e)?(g=!0,(e.tag!==null||e.anchor!==null)&&Ft(e,"alias node should not have any properties")):Agt(e,Q,Ec===n)&&(g=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):f===0&&(g=c&&Rm(e,tt))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Ft(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),v=0,S=e.implicitTypes.length;v<S;v+=1)if(q=e.implicitTypes[v],q.resolve(e.result)){e.result=q.construct(e.result),e.tag=q.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Yi.call(e.typeMap[e.kind||"fallback"],e.tag))q=e.typeMap[e.kind||"fallback"][e.tag];else for(q=null,E=e.typeMap.multi[e.kind||"fallback"],v=0,S=E.length;v<S;v+=1)if(e.tag.slice(0,E[v].tag.length)===E[v].tag){q=E[v];break}q||Ft(e,"unknown tag !<"+e.tag+">"),e.result!==null&&q.kind!==e.kind&&Ft(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+q.kind+'", not "'+e.kind+'"'),q.resolve(e.result,e.tag)?(e.result=q.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Ft(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||g}function Pgt(e){var t=e.position,n,r,i,o=!1,l;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(l=e.input.charCodeAt(e.position))!==0&&(an(e,!0,-1),l=e.input.charCodeAt(e.position),!(e.lineIndent>0||l!==37));){for(o=!0,l=e.input.charCodeAt(++e.position),n=e.position;l!==0&&!nr(l);)l=e.input.charCodeAt(++e.position);for(r=e.input.slice(n,e.position),i=[],r.length<1&&Ft(e,"directive name must not be less than one character in length");l!==0;){for(;xs(l);)l=e.input.charCodeAt(++e.position);if(l===35){do l=e.input.charCodeAt(++e.position);while(l!==0&&!Qr(l));break}if(Qr(l))break;for(n=e.position;l!==0&&!nr(l);)l=e.input.charCodeAt(++e.position);i.push(e.input.slice(n,e.position))}l!==0&&Sd(e),Yi.call(Tm,r)?Tm[r](e,r,i):Sc(e,'unknown document directive "'+r+'"')}if(an(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,an(e,!0,-1)):o&&Ft(e,"directives end mark is expected"),wo(e,e.lineIndent-1,Ac,!1,!0),an(e,!0,-1),e.checkLineBreaks&&mgt.test(e.input.slice(t,e.position))&&Sc(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&du(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,an(e,!0,-1));return}if(e.position<e.length-1)Ft(e,"end of the stream or a document separator is expected");else return}function Fv(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new Egt(e,t),r=e.indexOf("\0");for(r!==-1&&(n.position=r,Ft(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)Pgt(n);return n.documents}function Mgt(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var r=Fv(e,n);if(typeof t!="function")return r;for(var i=0,o=r.length;i<o;i+=1)t(r[i])}function Lgt(e,t){var n=Fv(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new Yn("expected a single document in the stream, but found more")}}var $gt=Mgt,Ngt=Lgt,Vv={loadAll:$gt,load:Ngt},qv=Object.prototype.toString,Bv=Object.prototype.hasOwnProperty,Cd=65279,Fgt=9,Ia=10,Vgt=13,qgt=32,Bgt=33,Ugt=34,Cf=35,zgt=37,Hgt=38,Ggt=39,Wgt=42,Uv=44,jgt=45,kc=58,Kgt=61,Ygt=62,Qgt=63,Zgt=64,zv=91,Hv=93,Xgt=96,Gv=123,Jgt=124,Wv=125,qn={};qn[0]="\\0";qn[7]="\\a";qn[8]="\\b";qn[9]="\\t";qn[10]="\\n";qn[11]="\\v";qn[12]="\\f";qn[13]="\\r";qn[27]="\\e";qn[34]='\\"';qn[92]="\\\\";qn[133]="\\N";qn[160]="\\_";qn[8232]="\\L";qn[8233]="\\P";var tmt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],emt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function nmt(e,t){var n,r,i,o,l,c,f;if(t===null)return{};for(n={},r=Object.keys(t),i=0,o=r.length;i<o;i+=1)l=r[i],c=String(t[l]),l.slice(0,2)==="!!"&&(l="tag:yaml.org,2002:"+l.slice(2)),f=e.compiledTypeMap.fallback[l],f&&Bv.call(f.styleAliases,c)&&(c=f.styleAliases[c]),n[l]=c;return n}function rmt(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else if(e<=4294967295)n="U",r=8;else throw new Yn("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+pn.repeat("0",r-t.length)+t}var imt=1,Ra=2;function smt(e){this.schema=e.schema||Ad,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=pn.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=nmt(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Ra:imt,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Dm(e,t){for(var n=pn.repeat(" ",t),r=0,i=-1,o="",l,c=e.length;r<c;)i=e.indexOf(`
`,r),i===-1?(l=e.slice(r),r=c):(l=e.slice(r,i+1),r=i+1),l.length&&l!==`
`&&(o+=n),o+=l;return o}function Tf(e,t){return`
`+pn.repeat(" ",e.indent*t)}function omt(e,t){var n,r,i;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(i=e.implicitTypes[n],i.resolve(t))return!0;return!1}function Cc(e){return e===qgt||e===Fgt}function Da(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Cd||65536<=e&&e<=1114111}function Om(e){return Da(e)&&e!==Cd&&e!==Vgt&&e!==Ia}function Pm(e,t,n){var r=Om(e),i=r&&!Cc(e);return(n?r:r&&e!==Uv&&e!==zv&&e!==Hv&&e!==Gv&&e!==Wv)&&e!==Cf&&!(t===kc&&!i)||Om(t)&&!Cc(t)&&e===Cf||t===kc&&i}function amt(e){return Da(e)&&e!==Cd&&!Cc(e)&&e!==jgt&&e!==Qgt&&e!==kc&&e!==Uv&&e!==zv&&e!==Hv&&e!==Gv&&e!==Wv&&e!==Cf&&e!==Hgt&&e!==Wgt&&e!==Bgt&&e!==Jgt&&e!==Kgt&&e!==Ygt&&e!==Ggt&&e!==Ugt&&e!==zgt&&e!==Zgt&&e!==Xgt}function lmt(e){return!Cc(e)&&e!==kc}function ia(e,t){var n=e.charCodeAt(t),r;return n>=55296&&n<=56319&&t+1<e.length&&(r=e.charCodeAt(t+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function jv(e){var t=/^\n* /;return t.test(e)}var Kv=1,If=2,Yv=3,Qv=4,so=5;function cmt(e,t,n,r,i,o,l,c){var f,d=0,g=null,v=!1,S=!1,E=r!==-1,q=-1,Q=amt(ia(e,0))&&lmt(ia(e,e.length-1));if(t||l)for(f=0;f<e.length;d>=65536?f+=2:f++){if(d=ia(e,f),!Da(d))return so;Q=Q&&Pm(d,g,c),g=d}else{for(f=0;f<e.length;d>=65536?f+=2:f++){if(d=ia(e,f),d===Ia)v=!0,E&&(S=S||f-q-1>r&&e[q+1]!==" ",q=f);else if(!Da(d))return so;Q=Q&&Pm(d,g,c),g=d}S=S||E&&f-q-1>r&&e[q+1]!==" "}return!v&&!S?Q&&!l&&!i(e)?Kv:o===Ra?so:If:n>9&&jv(e)?so:l?o===Ra?so:If:S?Qv:Yv}function umt(e,t,n,r,i){e.dump=function(){if(t.length===0)return e.quotingType===Ra?'""':"''";if(!e.noCompatMode&&(tmt.indexOf(t)!==-1||emt.test(t)))return e.quotingType===Ra?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,n),l=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),c=r||e.flowLevel>-1&&n>=e.flowLevel;function f(d){return omt(e,d)}switch(cmt(t,c,e.indent,l,f,e.quotingType,e.forceQuotes&&!r,i)){case Kv:return t;case If:return"'"+t.replace(/'/g,"''")+"'";case Yv:return"|"+Mm(t,e.indent)+Lm(Dm(t,o));case Qv:return">"+Mm(t,e.indent)+Lm(Dm(hmt(t,l),o));case so:return'"'+fmt(t)+'"';default:throw new Yn("impossible error: invalid scalar style")}}()}function Mm(e,t){var n=jv(e)?String(t):"",r=e[e.length-1]===`
`,i=r&&(e[e.length-2]===`
`||e===`
`),o=i?"+":r?"":"-";return n+o+`
`}function Lm(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function hmt(e,t){for(var n=/(\n+)([^\n]*)/g,r=function(){var d=e.indexOf(`
`);return d=d!==-1?d:e.length,n.lastIndex=d,$m(e.slice(0,d),t)}(),i=e[0]===`
`||e[0]===" ",o,l;l=n.exec(e);){var c=l[1],f=l[2];o=f[0]===" ",r+=c+(!i&&!o&&f!==""?`
`:"")+$m(f,t),i=o}return r}function $m(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,r,i=0,o,l=0,c=0,f="";r=n.exec(e);)c=r.index,c-i>t&&(o=l>i?l:c,f+=`
`+e.slice(i,o),i=o+1),l=c;return f+=`
`,e.length-i>t&&l>i?f+=e.slice(i,l)+`
`+e.slice(l+1):f+=e.slice(i),f.slice(1)}function fmt(e){for(var t="",n=0,r,i=0;i<e.length;n>=65536?i+=2:i++)n=ia(e,i),r=qn[n],!r&&Da(n)?(t+=e[i],n>=65536&&(t+=e[i+1])):t+=r||rmt(n);return t}function dmt(e,t,n){var r="",i=e.tag,o,l,c;for(o=0,l=n.length;o<l;o+=1)c=n[o],e.replacer&&(c=e.replacer.call(n,String(o),c)),(Ai(e,t,c,!1,!1)||typeof c>"u"&&Ai(e,t,null,!1,!1))&&(r!==""&&(r+=","+(e.condenseFlow?"":" ")),r+=e.dump);e.tag=i,e.dump="["+r+"]"}function Nm(e,t,n,r){var i="",o=e.tag,l,c,f;for(l=0,c=n.length;l<c;l+=1)f=n[l],e.replacer&&(f=e.replacer.call(n,String(l),f)),(Ai(e,t+1,f,!0,!0,!1,!0)||typeof f>"u"&&Ai(e,t+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=Tf(e,t)),e.dump&&Ia===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=o,e.dump=i||"[]"}function pmt(e,t,n){var r="",i=e.tag,o=Object.keys(n),l,c,f,d,g;for(l=0,c=o.length;l<c;l+=1)g="",r!==""&&(g+=", "),e.condenseFlow&&(g+='"'),f=o[l],d=n[f],e.replacer&&(d=e.replacer.call(n,f,d)),Ai(e,t,f,!1,!1)&&(e.dump.length>1024&&(g+="? "),g+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Ai(e,t,d,!1,!1)&&(g+=e.dump,r+=g));e.tag=i,e.dump="{"+r+"}"}function _mt(e,t,n,r){var i="",o=e.tag,l=Object.keys(n),c,f,d,g,v,S;if(e.sortKeys===!0)l.sort();else if(typeof e.sortKeys=="function")l.sort(e.sortKeys);else if(e.sortKeys)throw new Yn("sortKeys must be a boolean or a function");for(c=0,f=l.length;c<f;c+=1)S="",(!r||i!=="")&&(S+=Tf(e,t)),d=l[c],g=n[d],e.replacer&&(g=e.replacer.call(n,d,g)),Ai(e,t+1,d,!0,!0,!0)&&(v=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,v&&(e.dump&&Ia===e.dump.charCodeAt(0)?S+="?":S+="? "),S+=e.dump,v&&(S+=Tf(e,t)),Ai(e,t+1,g,!0,v)&&(e.dump&&Ia===e.dump.charCodeAt(0)?S+=":":S+=": ",S+=e.dump,i+=S));e.tag=o,e.dump=i||"{}"}function Fm(e,t,n){var r,i,o,l,c,f;for(i=n?e.explicitTypes:e.implicitTypes,o=0,l=i.length;o<l;o+=1)if(c=i[o],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof t=="object"&&t instanceof c.instanceOf)&&(!c.predicate||c.predicate(t))){if(n?c.multi&&c.representName?e.tag=c.representName(t):e.tag=c.tag:e.tag="?",c.represent){if(f=e.styleMap[c.tag]||c.defaultStyle,qv.call(c.represent)==="[object Function]")r=c.represent(t,f);else if(Bv.call(c.represent,f))r=c.represent[f](t,f);else throw new Yn("!<"+c.tag+'> tag resolver accepts not "'+f+'" style');e.dump=r}return!0}return!1}function Ai(e,t,n,r,i,o,l){e.tag=null,e.dump=n,Fm(e,n,!1)||Fm(e,n,!0);var c=qv.call(e.dump),f=r,d;r&&(r=e.flowLevel<0||e.flowLevel>t);var g=c==="[object Object]"||c==="[object Array]",v,S;if(g&&(v=e.duplicates.indexOf(n),S=v!==-1),(e.tag!==null&&e.tag!=="?"||S||e.indent!==2&&t>0)&&(i=!1),S&&e.usedDuplicates[v])e.dump="*ref_"+v;else{if(g&&S&&!e.usedDuplicates[v]&&(e.usedDuplicates[v]=!0),c==="[object Object]")r&&Object.keys(e.dump).length!==0?(_mt(e,t,e.dump,i),S&&(e.dump="&ref_"+v+e.dump)):(pmt(e,t,e.dump),S&&(e.dump="&ref_"+v+" "+e.dump));else if(c==="[object Array]")r&&e.dump.length!==0?(e.noArrayIndent&&!l&&t>0?Nm(e,t-1,e.dump,i):Nm(e,t,e.dump,i),S&&(e.dump="&ref_"+v+e.dump)):(dmt(e,t,e.dump),S&&(e.dump="&ref_"+v+" "+e.dump));else if(c==="[object String]")e.tag!=="?"&&umt(e,e.dump,t,o,f);else{if(c==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Yn("unacceptable kind of an object to dump "+c)}e.tag!==null&&e.tag!=="?"&&(d=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?d="!"+d:d.slice(0,18)==="tag:yaml.org,2002:"?d="!!"+d.slice(18):d="!<"+d+">",e.dump=d+" "+e.dump)}return!0}function gmt(e,t){var n=[],r=[],i,o;for(Rf(e,n,r),i=0,o=r.length;i<o;i+=1)t.duplicates.push(n[r[i]]);t.usedDuplicates=new Array(o)}function Rf(e,t,n){var r,i,o;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)Rf(e[i],t,n);else for(r=Object.keys(e),i=0,o=r.length;i<o;i+=1)Rf(e[r[i]],t,n)}function mmt(e,t){t=t||{};var n=new smt(t);n.noRefs||gmt(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),Ai(n,0,r,!0,!0)?n.dump+`
`:""}var ymt=mmt,vmt={dump:ymt};function Td(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var bmt=Rn,wmt=fv,xmt=gv,Emt=wv,Amt=xv,Smt=Ad,kmt=Vv.load,Cmt=Vv.loadAll,Tmt=vmt.dump,Imt=Yn,Rmt={binary:Cv,float:bv,map:_v,null:mv,pairs:Iv,set:Rv,timestamp:Sv,bool:yv,int:vv,merge:kv,omap:Tv,seq:pv,str:dv},Dmt=Td("safeLoad","load"),Omt=Td("safeLoadAll","loadAll"),Pmt=Td("safeDump","dump"),Vmt={Type:bmt,Schema:wmt,FAILSAFE_SCHEMA:xmt,JSON_SCHEMA:Emt,CORE_SCHEMA:Amt,DEFAULT_SCHEMA:Smt,load:kmt,loadAll:Cmt,dump:Tmt,YAMLException:Imt,types:Rmt,safeLoad:Dmt,safeLoadAll:Omt,safeDump:Pmt};export{ze as _,Fmt as a,Vmt as j};
